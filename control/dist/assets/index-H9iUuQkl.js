var RC=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Eq=RC((Rq,EC)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function Vh(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const qt={},Oi=[],oa=()=>{},by=()=>!1,Cc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),zh=e=>e.startsWith("onUpdate:"),Tn=Object.assign,$h=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},AC=Object.prototype.hasOwnProperty,Dt=(e,t)=>AC.call(e,t),rt=Array.isArray,Bi=e=>xu(e)==="[object Map]",xy=e=>xu(e)==="[object Set]",IC=e=>xu(e)==="[object RegExp]",dt=e=>typeof e=="function",en=e=>typeof e=="string",yo=e=>typeof e=="symbol",$t=e=>e!==null&&typeof e=="object",wy=e=>($t(e)||dt(e))&&dt(e.then)&&dt(e.catch),_y=Object.prototype.toString,xu=e=>_y.call(e),MC=e=>xu(e).slice(8,-1),Cy=e=>xu(e)==="[object Object]",Hh=e=>en(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ls=Vh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sc=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},DC=/-\w/g,Rr=Sc(e=>e.replace(DC,t=>t.slice(1).toUpperCase())),PC=/\B([A-Z])/g,oi=Sc(e=>e.replace(PC,"-$1").toLowerCase()),kc=Sc(e=>e.charAt(0).toUpperCase()+e.slice(1)),pd=Sc(e=>e?`on${kc(e)}`:""),uo=(e,t)=>!Object.is(e,t),qi=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Sy=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Wh=e=>{const t=parseFloat(e);return isNaN(t)?e:t},FC=e=>{const t=en(e)?Number(e):NaN;return isNaN(t)?e:t};let Gp;const Ec=()=>Gp||(Gp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Uh(e){if(rt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],a=en(r)?qC(r):Uh(r);if(a)for(const o in a)t[o]=a[o]}return t}else if(en(e)||$t(e))return e}const NC=/;(?![^(]*\))/g,OC=/:([^]+)/,BC=/\/\*[^]*?\*\//g;function qC(e){const t={};return e.replace(BC,"").split(NC).forEach(n=>{if(n){const r=n.split(OC);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function jh(e){let t="";if(en(e))t=e;else if(rt(e))for(let n=0;n<e.length;n++){const r=jh(e[n]);r&&(t+=r+" ")}else if($t(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const LC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",VC=Vh(LC);function ky(e){return!!e||e===""}const Ey=e=>!!(e&&e.__v_isRef===!0),Uo=e=>en(e)?e:e==null?"":rt(e)||$t(e)&&(e.toString===_y||!dt(e.toString))?Ey(e)?Uo(e.value):JSON.stringify(e,Ty,2):String(e),Ty=(e,t)=>Ey(t)?Ty(e,t.value):Bi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,a],o)=>(n[md(r,o)+" =>"]=a,n),{})}:xy(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>md(n))}:yo(t)?md(t):$t(t)&&!rt(t)&&!Cy(t)?String(t):t,md=(e,t="")=>{var n;return yo(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let er;class zC{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=er,!t&&er&&(this.index=(er.scopes||(er.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=er;try{return er=this,t()}finally{er=n}}}on(){++this._on===1&&(this.prevScope=er,er=this)}off(){this._on>0&&--this._on===0&&(er=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function $C(){return er}let zt;const gd=new WeakSet;class Ry{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,er&&er.active&&er.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,gd.has(this)&&(gd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Iy(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Kp(this),My(this);const t=zt,n=Lr;zt=this,Lr=!0;try{return this.fn()}finally{Dy(this),zt=t,Lr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Xh(t);this.deps=this.depsTail=void 0,Kp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?gd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ff(this)&&this.run()}get dirty(){return Ff(this)}}let Ay=0,Vs,zs;function Iy(e,t=!1){if(e.flags|=8,t){e.next=zs,zs=e;return}e.next=Vs,Vs=e}function Gh(){Ay++}function Kh(){if(--Ay>0)return;if(zs){let t=zs;for(zs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Vs;){let t=Vs;for(Vs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function My(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Dy(e){let t,n=e.depsTail,r=n;for(;r;){const a=r.prevDep;r.version===-1?(r===n&&(n=a),Xh(r),HC(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=a}e.deps=t,e.depsTail=n}function Ff(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Py(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Py(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===eu)||(e.globalVersion=eu,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ff(e))))return;e.flags|=2;const t=e.dep,n=zt,r=Lr;zt=e,Lr=!0;try{My(e);const a=e.fn(e._value);(t.version===0||uo(a,e._value))&&(e.flags|=128,e._value=a,t.version++)}catch(a){throw t.version++,a}finally{zt=n,Lr=r,Dy(e),e.flags&=-3}}function Xh(e,t=!1){const{dep:n,prevSub:r,nextSub:a}=e;if(r&&(r.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)Xh(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function HC(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Lr=!0;const Fy=[];function Da(){Fy.push(Lr),Lr=!1}function Pa(){const e=Fy.pop();Lr=e===void 0?!0:e}function Kp(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=zt;zt=void 0;try{t()}finally{zt=n}}}let eu=0;class WC{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Qh{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!zt||!Lr||zt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==zt)n=this.activeLink=new WC(zt,this),zt.deps?(n.prevDep=zt.depsTail,zt.depsTail.nextDep=n,zt.depsTail=n):zt.deps=zt.depsTail=n,Ny(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=zt.depsTail,n.nextDep=void 0,zt.depsTail.nextDep=n,zt.depsTail=n,zt.deps===n&&(zt.deps=r)}return n}trigger(t){this.version++,eu++,this.notify(t)}notify(t){Gh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Kh()}}}function Ny(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Ny(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Nf=new WeakMap,jo=Symbol(""),Of=Symbol(""),tu=Symbol("");function Ln(e,t,n){if(Lr&&zt){let r=Nf.get(e);r||Nf.set(e,r=new Map);let a=r.get(n);a||(r.set(n,a=new Qh),a.map=r,a.key=n),a.track()}}function Ra(e,t,n,r,a,o){const i=Nf.get(e);if(!i){eu++;return}const s=u=>{u&&u.trigger()};if(Gh(),t==="clear")i.forEach(s);else{const u=rt(e),l=u&&Hh(n);if(u&&n==="length"){const c=Number(r);i.forEach((d,f)=>{(f==="length"||f===tu||!yo(f)&&f>=c)&&s(d)})}else switch((n!==void 0||i.has(void 0))&&s(i.get(n)),l&&s(i.get(tu)),t){case"add":u?l&&s(i.get("length")):(s(i.get(jo)),Bi(e)&&s(i.get(Of)));break;case"delete":u||(s(i.get(jo)),Bi(e)&&s(i.get(Of)));break;case"set":Bi(e)&&s(i.get(jo));break}}Kh()}function vi(e){const t=pt(e);return t===e?t:(Ln(t,"iterate",tu),kr(e)?t:t.map($r))}function Tc(e){return Ln(e=pt(e),"iterate",tu),e}function eo(e,t){return Fa(e)?Go(e)?ns($r(t)):ns(t):$r(t)}const UC={__proto__:null,[Symbol.iterator](){return yd(this,Symbol.iterator,e=>eo(this,e))},concat(...e){return vi(this).concat(...e.map(t=>rt(t)?vi(t):t))},entries(){return yd(this,"entries",e=>(e[1]=eo(this,e[1]),e))},every(e,t){return ga(this,"every",e,t,void 0,arguments)},filter(e,t){return ga(this,"filter",e,t,n=>n.map(r=>eo(this,r)),arguments)},find(e,t){return ga(this,"find",e,t,n=>eo(this,n),arguments)},findIndex(e,t){return ga(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ga(this,"findLast",e,t,n=>eo(this,n),arguments)},findLastIndex(e,t){return ga(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ga(this,"forEach",e,t,void 0,arguments)},includes(...e){return bd(this,"includes",e)},indexOf(...e){return bd(this,"indexOf",e)},join(e){return vi(this).join(e)},lastIndexOf(...e){return bd(this,"lastIndexOf",e)},map(e,t){return ga(this,"map",e,t,void 0,arguments)},pop(){return xs(this,"pop")},push(...e){return xs(this,"push",e)},reduce(e,...t){return Xp(this,"reduce",e,t)},reduceRight(e,...t){return Xp(this,"reduceRight",e,t)},shift(){return xs(this,"shift")},some(e,t){return ga(this,"some",e,t,void 0,arguments)},splice(...e){return xs(this,"splice",e)},toReversed(){return vi(this).toReversed()},toSorted(e){return vi(this).toSorted(e)},toSpliced(...e){return vi(this).toSpliced(...e)},unshift(...e){return xs(this,"unshift",e)},values(){return yd(this,"values",e=>eo(this,e))}};function yd(e,t,n){const r=Tc(e),a=r[t]();return r!==e&&!kr(e)&&(a._next=a.next,a.next=()=>{const o=a._next();return o.done||(o.value=n(o.value)),o}),a}const jC=Array.prototype;function ga(e,t,n,r,a,o){const i=Tc(e),s=i!==e&&!kr(e),u=i[t];if(u!==jC[t]){const d=u.apply(e,o);return s?$r(d):d}let l=n;i!==e&&(s?l=function(d,f){return n.call(this,eo(e,d),f,e)}:n.length>2&&(l=function(d,f){return n.call(this,d,f,e)}));const c=u.call(i,l,r);return s&&a?a(c):c}function Xp(e,t,n,r){const a=Tc(e);let o=n;return a!==e&&(kr(e)?n.length>3&&(o=function(i,s,u){return n.call(this,i,s,u,e)}):o=function(i,s,u){return n.call(this,i,eo(e,s),u,e)}),a[t](o,...r)}function bd(e,t,n){const r=pt(e);Ln(r,"iterate",tu);const a=r[t](...n);return(a===-1||a===!1)&&ev(n[0])?(n[0]=pt(n[0]),r[t](...n)):a}function xs(e,t,n=[]){Da(),Gh();const r=pt(e)[t].apply(e,n);return Kh(),Pa(),r}const GC=Vh("__proto__,__v_isRef,__isVue"),Oy=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(yo));function KC(e){yo(e)||(e=String(e));const t=pt(this);return Ln(t,"has",e),t.hasOwnProperty(e)}class By{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const a=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(a?o?a2:zy:o?Vy:Ly).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const i=rt(t);if(!a){let u;if(i&&(u=UC[n]))return u;if(n==="hasOwnProperty")return KC}const s=Reflect.get(t,n,Fn(t)?t:r);if((yo(n)?Oy.has(n):GC(n))||(a||Ln(t,"get",n),o))return s;if(Fn(s)){const u=i&&Hh(n)?s:s.value;return a&&$t(u)?qf(u):u}return $t(s)?a?qf(s):ra(s):s}}class qy extends By{constructor(t=!1){super(!1,t)}set(t,n,r,a){let o=t[n];const i=rt(t)&&Hh(n);if(!this._isShallow){const l=Fa(o);if(!kr(r)&&!Fa(r)&&(o=pt(o),r=pt(r)),!i&&Fn(o)&&!Fn(r))return l||(o.value=r),!0}const s=i?Number(n)<t.length:Dt(t,n),u=Reflect.set(t,n,r,Fn(t)?t:a);return t===pt(a)&&(s?uo(r,o)&&Ra(t,"set",n,r):Ra(t,"add",n,r)),u}deleteProperty(t,n){const r=Dt(t,n);t[n];const a=Reflect.deleteProperty(t,n);return a&&r&&Ra(t,"delete",n,void 0),a}has(t,n){const r=Reflect.has(t,n);return(!yo(n)||!Oy.has(n))&&Ln(t,"has",n),r}ownKeys(t){return Ln(t,"iterate",rt(t)?"length":jo),Reflect.ownKeys(t)}}class XC extends By{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const QC=new qy,YC=new XC,JC=new qy(!0),Bf=e=>e,Bu=e=>Reflect.getPrototypeOf(e);function ZC(e,t,n){return function(...r){const a=this.__v_raw,o=pt(a),i=Bi(o),s=e==="entries"||e===Symbol.iterator&&i,u=e==="keys"&&i,l=a[e](...r),c=n?Bf:t?ns:$r;return!t&&Ln(o,"iterate",u?Of:jo),{next(){const{value:d,done:f}=l.next();return f?{value:d,done:f}:{value:s?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function qu(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function e2(e,t){const n={get(a){const o=this.__v_raw,i=pt(o),s=pt(a);e||(uo(a,s)&&Ln(i,"get",a),Ln(i,"get",s));const{has:u}=Bu(i),l=t?Bf:e?ns:$r;if(u.call(i,a))return l(o.get(a));if(u.call(i,s))return l(o.get(s));o!==i&&o.get(a)},get size(){const a=this.__v_raw;return!e&&Ln(pt(a),"iterate",jo),a.size},has(a){const o=this.__v_raw,i=pt(o),s=pt(a);return e||(uo(a,s)&&Ln(i,"has",a),Ln(i,"has",s)),a===s?o.has(a):o.has(a)||o.has(s)},forEach(a,o){const i=this,s=i.__v_raw,u=pt(s),l=t?Bf:e?ns:$r;return!e&&Ln(u,"iterate",jo),s.forEach((c,d)=>a.call(o,l(c),l(d),i))}};return Tn(n,e?{add:qu("add"),set:qu("set"),delete:qu("delete"),clear:qu("clear")}:{add(a){!t&&!kr(a)&&!Fa(a)&&(a=pt(a));const o=pt(this);return Bu(o).has.call(o,a)||(o.add(a),Ra(o,"add",a,a)),this},set(a,o){!t&&!kr(o)&&!Fa(o)&&(o=pt(o));const i=pt(this),{has:s,get:u}=Bu(i);let l=s.call(i,a);l||(a=pt(a),l=s.call(i,a));const c=u.call(i,a);return i.set(a,o),l?uo(o,c)&&Ra(i,"set",a,o):Ra(i,"add",a,o),this},delete(a){const o=pt(this),{has:i,get:s}=Bu(o);let u=i.call(o,a);u||(a=pt(a),u=i.call(o,a)),s&&s.call(o,a);const l=o.delete(a);return u&&Ra(o,"delete",a,void 0),l},clear(){const a=pt(this),o=a.size!==0,i=a.clear();return o&&Ra(a,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=ZC(a,e,t)}),n}function Yh(e,t){const n=e2(e,t);return(r,a,o)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?r:Reflect.get(Dt(n,a)&&a in r?n:r,a,o)}const t2={get:Yh(!1,!1)},n2={get:Yh(!1,!0)},r2={get:Yh(!0,!1)},Ly=new WeakMap,Vy=new WeakMap,zy=new WeakMap,a2=new WeakMap;function o2(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function i2(e){return e.__v_skip||!Object.isExtensible(e)?0:o2(MC(e))}function ra(e){return Fa(e)?e:Zh(e,!1,QC,t2,Ly)}function Jh(e){return Zh(e,!1,JC,n2,Vy)}function qf(e){return Zh(e,!0,YC,r2,zy)}function Zh(e,t,n,r,a){if(!$t(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i2(e);if(o===0)return e;const i=a.get(e);if(i)return i;const s=new Proxy(e,o===2?r:n);return a.set(e,s),s}function Go(e){return Fa(e)?Go(e.__v_raw):!!(e&&e.__v_isReactive)}function Fa(e){return!!(e&&e.__v_isReadonly)}function kr(e){return!!(e&&e.__v_isShallow)}function ev(e){return e?!!e.__v_raw:!1}function pt(e){const t=e&&e.__v_raw;return t?pt(t):e}function tv(e){return!Dt(e,"__v_skip")&&Object.isExtensible(e)&&Sy(e,"__v_skip",!0),e}const $r=e=>$t(e)?ra(e):e,ns=e=>$t(e)?qf(e):e;function Fn(e){return e?e.__v_isRef===!0:!1}function Z(e){return $y(e,!1)}function s2(e){return $y(e,!0)}function $y(e,t){return Fn(e)?e:new u2(e,t)}class u2{constructor(t,n){this.dep=new Qh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:pt(t),this._value=n?t:$r(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||kr(t)||Fa(t);t=r?t:pt(t),uo(t,n)&&(this._rawValue=t,this._value=r?t:$r(t),this.dep.trigger())}}function Ko(e){return Fn(e)?e.value:e}const l2={get:(e,t,n)=>t==="__v_raw"?e:Ko(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const a=e[t];return Fn(a)&&!Fn(n)?(a.value=n,!0):Reflect.set(e,t,n,r)}};function Hy(e){return Go(e)?e:new Proxy(e,l2)}class c2{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Qh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=eu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&zt!==this)return Iy(this,!0),!0}get value(){const t=this.dep.track();return Py(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function d2(e,t,n=!1){let r,a;return dt(e)?r=e:(r=e.get,a=e.set),new c2(r,a,n)}const Lu={},Tl=new WeakMap;let Fo;function f2(e,t=!1,n=Fo){if(n){let r=Tl.get(n);r||Tl.set(n,r=[]),r.push(e)}}function h2(e,t,n=qt){const{immediate:r,deep:a,once:o,scheduler:i,augmentJob:s,call:u}=n,l=g=>a?g:kr(g)||a===!1||a===0?Aa(g,1):Aa(g);let c,d,f,h,v=!1,m=!1;if(Fn(e)?(d=()=>e.value,v=kr(e)):Go(e)?(d=()=>l(e),v=!0):rt(e)?(m=!0,v=e.some(g=>Go(g)||kr(g)),d=()=>e.map(g=>{if(Fn(g))return g.value;if(Go(g))return l(g);if(dt(g))return u?u(g,2):g()})):dt(e)?t?d=u?()=>u(e,2):e:d=()=>{if(f){Da();try{f()}finally{Pa()}}const g=Fo;Fo=c;try{return u?u(e,3,[h]):e(h)}finally{Fo=g}}:d=oa,t&&a){const g=d,w=a===!0?1/0:a;d=()=>Aa(g(),w)}const p=$C(),y=()=>{c.stop(),p&&p.active&&$h(p.effects,c)};if(o&&t){const g=t;t=(...w)=>{g(...w),y()}}let x=m?new Array(e.length).fill(Lu):Lu;const b=g=>{if(!(!(c.flags&1)||!c.dirty&&!g))if(t){const w=c.run();if(a||v||(m?w.some((S,E)=>uo(S,x[E])):uo(w,x))){f&&f();const S=Fo;Fo=c;try{const E=[w,x===Lu?void 0:m&&x[0]===Lu?[]:x,h];x=w,u?u(t,3,E):t(...E)}finally{Fo=S}}}else c.run()};return s&&s(b),c=new Ry(d),c.scheduler=i?()=>i(b,!1):b,h=g=>f2(g,!1,c),f=c.onStop=()=>{const g=Tl.get(c);if(g){if(u)u(g,4);else for(const w of g)w();Tl.delete(c)}},t?r?b(!0):x=c.run():i?i(b.bind(null,!0),!0):c.run(),y.pause=c.pause.bind(c),y.resume=c.resume.bind(c),y.stop=y,y}function Aa(e,t=1/0,n){if(t<=0||!$t(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Fn(e))Aa(e.value,t,n);else if(rt(e))for(let r=0;r<e.length;r++)Aa(e[r],t,n);else if(xy(e)||Bi(e))e.forEach(r=>{Aa(r,t,n)});else if(Cy(e)){for(const r in e)Aa(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Aa(e[r],t,n)}return e}function wu(e,t,n,r){try{return r?e(...r):e()}catch(a){Rc(a,t,n)}}function Hr(e,t,n,r){if(dt(e)){const a=wu(e,t,n,r);return a&&wy(a)&&a.catch(o=>{Rc(o,t,n)}),a}if(rt(e)){const a=[];for(let o=0;o<e.length;o++)a.push(Hr(e[o],t,n,r));return a}}function Rc(e,t,n,r=!0){const a=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||qt;if(t){let s=t.parent;const u=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,u,l)===!1)return}s=s.parent}if(o){Da(),wu(o,null,10,[e,u,l]),Pa();return}}v2(e,n,a,r,i)}function v2(e,t,n,r=!0,a=!1){if(a)throw e;console.error(e)}const Jn=[];let Yr=-1;const Li=[];let to=null,Ri=0;const Wy=Promise.resolve();let Rl=null;function mt(e){const t=Rl||Wy;return e?t.then(this?e.bind(this):e):t}function p2(e){let t=Yr+1,n=Jn.length;for(;t<n;){const r=t+n>>>1,a=Jn[r],o=nu(a);o<e||o===e&&a.flags&2?t=r+1:n=r}return t}function nv(e){if(!(e.flags&1)){const t=nu(e),n=Jn[Jn.length-1];!n||!(e.flags&2)&&t>=nu(n)?Jn.push(e):Jn.splice(p2(t),0,e),e.flags|=1,Uy()}}function Uy(){Rl||(Rl=Wy.then(Gy))}function m2(e){rt(e)?Li.push(...e):to&&e.id===-1?to.splice(Ri+1,0,e):e.flags&1||(Li.push(e),e.flags|=1),Uy()}function Qp(e,t,n=Yr+1){for(;n<Jn.length;n++){const r=Jn[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Jn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function jy(e){if(Li.length){const t=[...new Set(Li)].sort((n,r)=>nu(n)-nu(r));if(Li.length=0,to){to.push(...t);return}for(to=t,Ri=0;Ri<to.length;Ri++){const n=to[Ri];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}to=null,Ri=0}}const nu=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Gy(e){try{for(Yr=0;Yr<Jn.length;Yr++){const t=Jn[Yr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),wu(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Yr<Jn.length;Yr++){const t=Jn[Yr];t&&(t.flags&=-2)}Yr=-1,Jn.length=0,jy(),Rl=null,(Jn.length||Li.length)&&Gy()}}let dr=null,Ky=null;function Al(e){const t=dr;return dr=e,Ky=e&&e.type.__scopeId||null,t}function gl(e,t=dr,n){if(!t||e._n)return e;const r=(...a)=>{r._d&&Fl(-1);const o=Al(t);let i;try{i=e(...a)}finally{Al(o),r._d&&Fl(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function gr(e,t){if(dr===null)return e;const n=Nc(dr),r=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[o,i,s,u=qt]=t[a];o&&(dt(o)&&(o={mounted:o,updated:o}),o.deep&&Aa(i),r.push({dir:o,instance:n,value:i,oldValue:void 0,arg:s,modifiers:u}))}return e}function ko(e,t,n,r){const a=e.dirs,o=t&&t.dirs;for(let i=0;i<a.length;i++){const s=a[i];o&&(s.oldValue=o[i].value);let u=s.dir[r];u&&(Da(),Hr(u,n,8,[e.el,s,e,t]),Pa())}}const Xy=Symbol("_vte"),Qy=e=>e.__isTeleport,$s=e=>e&&(e.disabled||e.disabled===""),Yp=e=>e&&(e.defer||e.defer===""),Jp=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Zp=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Lf=(e,t)=>{const n=e&&e.to;return en(n)?t?t(n):null:n},Yy={name:"Teleport",__isTeleport:!0,process(e,t,n,r,a,o,i,s,u,l){const{mc:c,pc:d,pbc:f,o:{insert:h,querySelector:v,createText:m,createComment:p}}=l,y=$s(t.props);let{shapeFlag:x,children:b,dynamicChildren:g}=t;if(e==null){const w=t.el=m(""),S=t.anchor=m("");h(w,n,r),h(S,n,r);const E=(A,k)=>{x&16&&c(b,A,k,a,o,i,s,u)},R=()=>{const A=t.target=Lf(t.props,v),k=Jy(A,t,m,h);A&&(i!=="svg"&&Jp(A)?i="svg":i!=="mathml"&&Zp(A)&&(i="mathml"),a&&a.isCE&&(a.ce._teleportTargets||(a.ce._teleportTargets=new Set)).add(A),y||(E(A,k),yl(t,!1)))};y&&(E(n,S),yl(t,!0)),Yp(t.props)?(t.el.__isMounted=!1,vn(()=>{R(),delete t.el.__isMounted},o)):R()}else{if(Yp(t.props)&&e.el.__isMounted===!1){vn(()=>{Yy.process(e,t,n,r,a,o,i,s,u,l)},o);return}t.el=e.el,t.targetStart=e.targetStart;const w=t.anchor=e.anchor,S=t.target=e.target,E=t.targetAnchor=e.targetAnchor,R=$s(e.props),A=R?n:S,k=R?w:E;if(i==="svg"||Jp(S)?i="svg":(i==="mathml"||Zp(S))&&(i="mathml"),g?(f(e.dynamicChildren,g,A,a,o,i,s),sv(e,t,!0)):u||d(e,t,A,k,a,o,i,s,!1),y)R?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Vu(t,n,w,l,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const M=t.target=Lf(t.props,v);M&&Vu(t,M,null,l,0)}else R&&Vu(t,S,E,l,1);yl(t,y)}},remove(e,t,n,{um:r,o:{remove:a}},o){const{shapeFlag:i,children:s,anchor:u,targetStart:l,targetAnchor:c,target:d,props:f}=e;if(d&&(a(l),a(c)),o&&a(u),i&16){const h=o||!$s(f);for(let v=0;v<s.length;v++){const m=s[v];r(m,t,n,h,!!m.dynamicChildren)}}},move:Vu,hydrate:g2};function Vu(e,t,n,{o:{insert:r},m:a},o=2){o===0&&r(e.targetAnchor,t,n);const{el:i,anchor:s,shapeFlag:u,children:l,props:c}=e,d=o===2;if(d&&r(i,t,n),(!d||$s(c))&&u&16)for(let f=0;f<l.length;f++)a(l[f],t,n,2);d&&r(s,t,n)}function g2(e,t,n,r,a,o,{o:{nextSibling:i,parentNode:s,querySelector:u,insert:l,createText:c}},d){function f(m,p,y,x){p.anchor=d(i(m),p,s(m),n,r,a,o),p.targetStart=y,p.targetAnchor=x}const h=t.target=Lf(t.props,u),v=$s(t.props);if(h){const m=h._lpa||h.firstChild;if(t.shapeFlag&16)if(v)f(e,t,m,m&&i(m));else{t.anchor=i(e);let p=m;for(;p;){if(p&&p.nodeType===8){if(p.data==="teleport start anchor")t.targetStart=p;else if(p.data==="teleport anchor"){t.targetAnchor=p,h._lpa=t.targetAnchor&&i(t.targetAnchor);break}}p=i(p)}t.targetAnchor||Jy(h,t,c,l),d(m&&i(m),t,h,n,r,a,o)}yl(t,v)}else v&&t.shapeFlag&16&&f(e,t,e,i(e));return t.anchor&&i(t.anchor)}const y2=Yy;function yl(e,t){const n=e.ctx;if(n&&n.ut){let r,a;for(t?(r=e.el,a=e.anchor):(r=e.targetStart,a=e.targetAnchor);r&&r!==a;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Jy(e,t,n,r){const a=t.targetStart=n(""),o=t.targetAnchor=n("");return a[Xy]=o,e&&(r(a,e),r(o,e)),o}const Ta=Symbol("_leaveCb"),zu=Symbol("_enterCb");function b2(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Nt(()=>{e.isMounted=!0}),ft(()=>{e.isUnmounting=!0}),e}const br=[Function,Array],Zy={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:br,onEnter:br,onAfterEnter:br,onEnterCancelled:br,onBeforeLeave:br,onLeave:br,onAfterLeave:br,onLeaveCancelled:br,onBeforeAppear:br,onAppear:br,onAfterAppear:br,onAppearCancelled:br},eb=e=>{const t=e.subTree;return t.component?eb(t.component):t},x2={name:"BaseTransition",props:Zy,setup(e,{slots:t}){const n=Ie(),r=b2();return()=>{const a=t.default&&rb(t.default(),!0);if(!a||!a.length)return;const o=tb(a),i=pt(e),{mode:s}=i;if(r.isLeaving)return xd(o);const u=em(o);if(!u)return xd(o);let l=Vf(u,i,r,n,d=>l=d);u.type!==zn&&rs(u,l);let c=n.subTree&&em(n.subTree);if(c&&c.type!==zn&&!ao(c,u)&&eb(n).type!==zn){let d=Vf(c,i,r,n);if(rs(c,d),s==="out-in"&&u.type!==zn)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,c=void 0},xd(o);s==="in-out"&&u.type!==zn?d.delayLeave=(f,h,v)=>{const m=nb(r,c);m[String(c.key)]=c,f[Ta]=()=>{h(),f[Ta]=void 0,delete l.delayedLeave,c=void 0},l.delayedLeave=()=>{v(),delete l.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return o}}};function tb(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==zn){t=n;break}}return t}const w2=x2;function nb(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Vf(e,t,n,r,a){const{appear:o,mode:i,persisted:s=!1,onBeforeEnter:u,onEnter:l,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:v,onLeaveCancelled:m,onBeforeAppear:p,onAppear:y,onAfterAppear:x,onAppearCancelled:b}=t,g=String(e.key),w=nb(n,e),S=(A,k)=>{A&&Hr(A,r,9,k)},E=(A,k)=>{const M=k[1];S(A,k),rt(A)?A.every(T=>T.length<=1)&&M():A.length<=1&&M()},R={mode:i,persisted:s,beforeEnter(A){let k=u;if(!n.isMounted)if(o)k=p||u;else return;A[Ta]&&A[Ta](!0);const M=w[g];M&&ao(e,M)&&M.el[Ta]&&M.el[Ta](),S(k,[A])},enter(A){let k=l,M=c,T=d;if(!n.isMounted)if(o)k=y||l,M=x||c,T=b||d;else return;let D=!1;const I=A[zu]=F=>{D||(D=!0,F?S(T,[A]):S(M,[A]),R.delayedLeave&&R.delayedLeave(),A[zu]=void 0)};k?E(k,[A,I]):I()},leave(A,k){const M=String(e.key);if(A[zu]&&A[zu](!0),n.isUnmounting)return k();S(f,[A]);let T=!1;const D=A[Ta]=I=>{T||(T=!0,k(),I?S(m,[A]):S(v,[A]),A[Ta]=void 0,w[M]===e&&delete w[M])};w[M]=e,h?E(h,[A,D]):D()},clone(A){const k=Vf(A,t,n,r,a);return a&&a(k),k}};return R}function xd(e){if(Ac(e))return e=Na(e),e.children=null,e}function em(e){if(!Ac(e))return Qy(e.type)&&e.children?tb(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&dt(n.default))return n.default()}}function rs(e,t){e.shapeFlag&6&&e.component?(e.transition=t,rs(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function rb(e,t=!1,n){let r=[],a=0;for(let o=0;o<e.length;o++){let i=e[o];const s=n==null?i.key:String(n)+String(i.key!=null?i.key:o);i.type===Pr?(i.patchFlag&128&&a++,r=r.concat(rb(i.children,t,s))):(t||i.type!==zn)&&r.push(s!=null?Na(i,{key:s}):i)}if(a>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function rv(e,t){return dt(e)?Tn({name:e.name},t,{setup:e}):e}function ab(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Il=new WeakMap;function Hs(e,t,n,r,a=!1){if(rt(e)){e.forEach((v,m)=>Hs(v,t&&(rt(t)?t[m]:t),n,r,a));return}if(Vi(r)&&!a){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Hs(e,t,n,r.component.subTree);return}const o=r.shapeFlag&4?Nc(r.component):r.el,i=a?null:o,{i:s,r:u}=e,l=t&&t.r,c=s.refs===qt?s.refs={}:s.refs,d=s.setupState,f=pt(d),h=d===qt?by:v=>Dt(f,v);if(l!=null&&l!==u){if(tm(t),en(l))c[l]=null,h(l)&&(d[l]=null);else if(Fn(l)){l.value=null;const v=t;v.k&&(c[v.k]=null)}}if(dt(u))wu(u,s,12,[i,c]);else{const v=en(u),m=Fn(u);if(v||m){const p=()=>{if(e.f){const y=v?h(u)?d[u]:c[u]:u.value;if(a)rt(y)&&$h(y,o);else if(rt(y))y.includes(o)||y.push(o);else if(v)c[u]=[o],h(u)&&(d[u]=c[u]);else{const x=[o];u.value=x,e.k&&(c[e.k]=x)}}else v?(c[u]=i,h(u)&&(d[u]=i)):m&&(u.value=i,e.k&&(c[e.k]=i))};if(i){const y=()=>{p(),Il.delete(e)};y.id=-1,Il.set(e,y),vn(y,n)}else tm(e),p()}}}function tm(e){const t=Il.get(e);t&&(t.flags|=8,Il.delete(e))}Ec().requestIdleCallback;Ec().cancelIdleCallback;const Vi=e=>!!e.type.__asyncLoader,Ac=e=>e.type.__isKeepAlive,_2={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Ie(),r=n.ctx;if(!r.renderer)return()=>{const x=t.default&&t.default();return x&&x.length===1?x[0]:x};const a=new Map,o=new Set;let i=null;const s=n.suspense,{renderer:{p:u,m:l,um:c,o:{createElement:d}}}=r,f=d("div");r.activate=(x,b,g,w,S)=>{const E=x.component;l(x,b,g,0,s),u(E.vnode,x,b,g,E,s,w,x.slotScopeIds,S),vn(()=>{E.isDeactivated=!1,E.a&&qi(E.a);const R=x.props&&x.props.onVnodeMounted;R&&wr(R,E.parent,x)},s)},r.deactivate=x=>{const b=x.component;Dl(b.m),Dl(b.a),l(x,f,null,1,s),vn(()=>{b.da&&qi(b.da);const g=x.props&&x.props.onVnodeUnmounted;g&&wr(g,b.parent,x),b.isDeactivated=!0},s)};function h(x){wd(x),c(x,n,s,!0)}function v(x){a.forEach((b,g)=>{const w=jf(b.type);w&&!x(w)&&m(g)})}function m(x){const b=a.get(x);b&&(!i||!ao(b,i))?h(b):i&&wd(i),a.delete(x),o.delete(x)}ke(()=>[e.include,e.exclude],([x,b])=>{x&&v(g=>Fs(x,g)),b&&v(g=>!Fs(b,g))},{flush:"post",deep:!0});let p=null;const y=()=>{p!=null&&(Pl(n.subTree.type)?vn(()=>{a.set(p,$u(n.subTree))},n.subTree.suspense):a.set(p,$u(n.subTree)))};return Nt(y),av(y),ft(()=>{a.forEach(x=>{const{subTree:b,suspense:g}=n,w=$u(b);if(x.type===w.type&&x.key===w.key){wd(w);const S=w.component.da;S&&vn(S,g);return}h(x)})}),()=>{if(p=null,!t.default)return i=null;const x=t.default(),b=x[0];if(x.length>1)return i=null,x;if(!au(b)||!(b.shapeFlag&4)&&!(b.shapeFlag&128))return i=null,b;let g=$u(b);if(g.type===zn)return i=null,g;const w=g.type,S=jf(Vi(g)?g.type.__asyncResolved||{}:w),{include:E,exclude:R,max:A}=e;if(E&&(!S||!Fs(E,S))||R&&S&&Fs(R,S))return g.shapeFlag&=-257,i=g,b;const k=g.key==null?w:g.key,M=a.get(k);return g.el&&(g=Na(g),b.shapeFlag&128&&(b.ssContent=g)),p=k,M?(g.el=M.el,g.component=M.component,g.transition&&rs(g,g.transition),g.shapeFlag|=512,o.delete(k),o.add(k)):(o.add(k),A&&o.size>parseInt(A,10)&&m(o.values().next().value)),g.shapeFlag|=256,i=g,Pl(b.type)?b:g}}},ob=_2;function Fs(e,t){return rt(e)?e.some(n=>Fs(n,t)):en(e)?e.split(",").includes(t):IC(e)?(e.lastIndex=0,e.test(t)):!1}function bo(e,t){ib(e,"a",t)}function ca(e,t){ib(e,"da",t)}function ib(e,t,n=$n){const r=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(Ic(t,r,n),n){let a=n.parent;for(;a&&a.parent;)Ac(a.parent.vnode)&&C2(r,t,n,a),a=a.parent}}function C2(e,t,n,r){const a=Ic(t,e,r,!0);Dc(()=>{$h(r[t],a)},n)}function wd(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function $u(e){return e.shapeFlag&128?e.ssContent:e}function Ic(e,t,n=$n,r=!1){if(n){const a=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...i)=>{Da();const s=_u(n),u=Hr(t,n,e,i);return s(),Pa(),u});return r?a.unshift(o):a.push(o),o}}const Ba=e=>(t,n=$n)=>{(!ou||e==="sp")&&Ic(e,(...r)=>t(...r),n)},Mc=Ba("bm"),Nt=Ba("m"),fs=Ba("bu"),av=Ba("u"),ft=Ba("bum"),Dc=Ba("um"),S2=Ba("sp"),k2=Ba("rtg"),E2=Ba("rtc");function T2(e,t=$n){Ic("ec",e,t)}const R2="components";function sb(e,t){return I2(R2,e,!0,t)||e}const A2=Symbol.for("v-ndc");function I2(e,t,n=!0,r=!1){const a=dr||$n;if(a){const o=a.type;{const s=jf(o,!1);if(s&&(s===t||s===Rr(t)||s===kc(Rr(t))))return o}const i=nm(a[e]||o[e],t)||nm(a.appContext[e],t);return!i&&r?o:i}}function nm(e,t){return e&&(e[t]||e[Rr(t)]||e[kc(Rr(t))])}function M2(e,t,n,r){let a;const o=n,i=rt(e);if(i||en(e)){const s=i&&Go(e);let u=!1,l=!1;s&&(u=!kr(e),l=Fa(e),e=Tc(e)),a=new Array(e.length);for(let c=0,d=e.length;c<d;c++)a[c]=t(u?l?ns($r(e[c])):$r(e[c]):e[c],c,void 0,o)}else if(typeof e=="number"){a=new Array(e);for(let s=0;s<e;s++)a[s]=t(s+1,s,void 0,o)}else if($t(e))if(e[Symbol.iterator])a=Array.from(e,(s,u)=>t(s,u,void 0,o));else{const s=Object.keys(e);a=new Array(s.length);for(let u=0,l=s.length;u<l;u++){const c=s[u];a[u]=t(e[c],c,u,o)}}else a=[];return a}const zf=e=>e?Eb(e)?Nc(e):zf(e.parent):null,Ws=Tn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>zf(e.parent),$root:e=>zf(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>lb(e),$forceUpdate:e=>e.f||(e.f=()=>{nv(e.update)}),$nextTick:e=>e.n||(e.n=mt.bind(e.proxy)),$watch:e=>$2.bind(e)}),_d=(e,t)=>e!==qt&&!e.__isScriptSetup&&Dt(e,t),D2={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:a,props:o,accessCache:i,type:s,appContext:u}=e;if(t[0]!=="$"){const f=i[t];if(f!==void 0)switch(f){case 1:return r[t];case 2:return a[t];case 4:return n[t];case 3:return o[t]}else{if(_d(r,t))return i[t]=1,r[t];if(a!==qt&&Dt(a,t))return i[t]=2,a[t];if(Dt(o,t))return i[t]=3,o[t];if(n!==qt&&Dt(n,t))return i[t]=4,n[t];$f&&(i[t]=0)}}const l=Ws[t];let c,d;if(l)return t==="$attrs"&&Ln(e.attrs,"get",""),l(e);if((c=s.__cssModules)&&(c=c[t]))return c;if(n!==qt&&Dt(n,t))return i[t]=4,n[t];if(d=u.config.globalProperties,Dt(d,t))return d[t]},set({_:e},t,n){const{data:r,setupState:a,ctx:o}=e;return _d(a,t)?(a[t]=n,!0):r!==qt&&Dt(r,t)?(r[t]=n,!0):Dt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:a,props:o,type:i}},s){let u;return!!(n[s]||e!==qt&&s[0]!=="$"&&Dt(e,s)||_d(t,s)||Dt(o,s)||Dt(r,s)||Dt(Ws,s)||Dt(a.config.globalProperties,s)||(u=i.__cssModules)&&u[s])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Dt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function rm(e){return rt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let $f=!0;function P2(e){const t=lb(e),n=e.proxy,r=e.ctx;$f=!1,t.beforeCreate&&am(t.beforeCreate,e,"bc");const{data:a,computed:o,methods:i,watch:s,provide:u,inject:l,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:v,activated:m,deactivated:p,beforeDestroy:y,beforeUnmount:x,destroyed:b,unmounted:g,render:w,renderTracked:S,renderTriggered:E,errorCaptured:R,serverPrefetch:A,expose:k,inheritAttrs:M,components:T,directives:D,filters:I}=t;if(l&&F2(l,r,null),i)for(const L in i){const q=i[L];dt(q)&&(r[L]=q.bind(n))}if(a){const L=a.call(n,n);$t(L)&&(e.data=ra(L))}if($f=!0,o)for(const L in o){const q=o[L],K=dt(q)?q.bind(n,n):dt(q.get)?q.get.bind(n,n):oa,oe=!dt(q)&&dt(q.set)?q.set.bind(n):oa,W=C({get:K,set:oe});Object.defineProperty(r,L,{enumerable:!0,configurable:!0,get:()=>W.value,set:N=>W.value=N})}if(s)for(const L in s)ub(s[L],r,n,L);if(u){const L=dt(u)?u.call(n):u;Reflect.ownKeys(L).forEach(q=>{Er(q,L[q])})}c&&am(c,e,"c");function V(L,q){rt(q)?q.forEach(K=>L(K.bind(n))):q&&L(q.bind(n))}if(V(Mc,d),V(Nt,f),V(fs,h),V(av,v),V(bo,m),V(ca,p),V(T2,R),V(E2,S),V(k2,E),V(ft,x),V(Dc,g),V(S2,A),rt(k))if(k.length){const L=e.exposed||(e.exposed={});k.forEach(q=>{Object.defineProperty(L,q,{get:()=>n[q],set:K=>n[q]=K,enumerable:!0})})}else e.exposed||(e.exposed={});w&&e.render===oa&&(e.render=w),M!=null&&(e.inheritAttrs=M),T&&(e.components=T),D&&(e.directives=D),A&&ab(e)}function F2(e,t,n=oa){rt(e)&&(e=Hf(e));for(const r in e){const a=e[r];let o;$t(a)?"default"in a?o=sn(a.from||r,a.default,!0):o=sn(a.from||r):o=sn(a),Fn(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):t[r]=o}}function am(e,t,n){Hr(rt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function ub(e,t,n,r){let a=r.includes(".")?fb(n,r):()=>n[r];if(en(e)){const o=t[e];dt(o)&&ke(a,o)}else if(dt(e))ke(a,e.bind(n));else if($t(e))if(rt(e))e.forEach(o=>ub(o,t,n,r));else{const o=dt(e.handler)?e.handler.bind(n):t[e.handler];dt(o)&&ke(a,o,e)}}function lb(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:a,optionsCache:o,config:{optionMergeStrategies:i}}=e.appContext,s=o.get(t);let u;return s?u=s:!a.length&&!n&&!r?u=t:(u={},a.length&&a.forEach(l=>Ml(u,l,i,!0)),Ml(u,t,i)),$t(t)&&o.set(t,u),u}function Ml(e,t,n,r=!1){const{mixins:a,extends:o}=t;o&&Ml(e,o,n,!0),a&&a.forEach(i=>Ml(e,i,n,!0));for(const i in t)if(!(r&&i==="expose")){const s=N2[i]||n&&n[i];e[i]=s?s(e[i],t[i]):t[i]}return e}const N2={data:om,props:im,emits:im,methods:Ns,computed:Ns,beforeCreate:Qn,created:Qn,beforeMount:Qn,mounted:Qn,beforeUpdate:Qn,updated:Qn,beforeDestroy:Qn,beforeUnmount:Qn,destroyed:Qn,unmounted:Qn,activated:Qn,deactivated:Qn,errorCaptured:Qn,serverPrefetch:Qn,components:Ns,directives:Ns,watch:B2,provide:om,inject:O2};function om(e,t){return t?e?function(){return Tn(dt(e)?e.call(this,this):e,dt(t)?t.call(this,this):t)}:t:e}function O2(e,t){return Ns(Hf(e),Hf(t))}function Hf(e){if(rt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Qn(e,t){return e?[...new Set([].concat(e,t))]:t}function Ns(e,t){return e?Tn(Object.create(null),e,t):t}function im(e,t){return e?rt(e)&&rt(t)?[...new Set([...e,...t])]:Tn(Object.create(null),rm(e),rm(t??{})):t}function B2(e,t){if(!e)return t;if(!t)return e;const n=Tn(Object.create(null),e);for(const r in t)n[r]=Qn(e[r],t[r]);return n}function cb(){return{app:null,config:{isNativeTag:by,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let q2=0;function L2(e,t){return function(r,a=null){dt(r)||(r=Tn({},r)),a!=null&&!$t(a)&&(a=null);const o=cb(),i=new WeakSet,s=[];let u=!1;const l=o.app={_uid:q2++,_component:r,_props:a,_container:null,_context:o,_instance:null,version:xS,get config(){return o.config},set config(c){},use(c,...d){return i.has(c)||(c&&dt(c.install)?(i.add(c),c.install(l,...d)):dt(c)&&(i.add(c),c(l,...d))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,d){return d?(o.components[c]=d,l):o.components[c]},directive(c,d){return d?(o.directives[c]=d,l):o.directives[c]},mount(c,d,f){if(!u){const h=l._ceVNode||Un(r,a);return h.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),e(h,c,f),u=!0,l._container=c,c.__vue_app__=l,Nc(h.component)}},onUnmount(c){s.push(c)},unmount(){u&&(Hr(s,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(c,d){return o.provides[c]=d,l},runWithContext(c){const d=zi;zi=l;try{return c()}finally{zi=d}}};return l}}let zi=null;function Er(e,t){if($n){let n=$n.provides;const r=$n.parent&&$n.parent.provides;r===n&&(n=$n.provides=Object.create(r)),n[e]=t}}function sn(e,t,n=!1){const r=Ie();if(r||zi){let a=zi?zi._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return n&&dt(t)?t.call(r&&r.proxy):t}}const V2=Symbol.for("v-scx"),z2=()=>sn(V2);function ke(e,t,n){return db(e,t,n)}function db(e,t,n=qt){const{immediate:r,deep:a,flush:o,once:i}=n,s=Tn({},n),u=t&&r||!t&&o!=="post";let l;if(ou){if(o==="sync"){const h=z2();l=h.__watcherHandles||(h.__watcherHandles=[])}else if(!u){const h=()=>{};return h.stop=oa,h.resume=oa,h.pause=oa,h}}const c=$n;s.call=(h,v,m)=>Hr(h,c,v,m);let d=!1;o==="post"?s.scheduler=h=>{vn(h,c&&c.suspense)}:o!=="sync"&&(d=!0,s.scheduler=(h,v)=>{v?h():nv(h)}),s.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const f=h2(e,t,s);return ou&&(l?l.push(f):u&&f()),f}function $2(e,t,n){const r=this.proxy,a=en(e)?e.includes(".")?fb(r,e):()=>r[e]:e.bind(r,r);let o;dt(t)?o=t:(o=t.handler,n=t);const i=_u(this),s=db(a,o.bind(r),n);return i(),s}function fb(e,t){const n=t.split(".");return()=>{let r=e;for(let a=0;a<n.length&&r;a++)r=r[n[a]];return r}}const H2=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Rr(t)}Modifiers`]||e[`${oi(t)}Modifiers`];function W2(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||qt;let a=n;const o=t.startsWith("update:"),i=o&&H2(r,t.slice(7));i&&(i.trim&&(a=n.map(c=>en(c)?c.trim():c)),i.number&&(a=n.map(Wh)));let s,u=r[s=pd(t)]||r[s=pd(Rr(t))];!u&&o&&(u=r[s=pd(oi(t))]),u&&Hr(u,e,6,a);const l=r[s+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Hr(l,e,6,a)}}const U2=new WeakMap;function hb(e,t,n=!1){const r=n?U2:t.emitsCache,a=r.get(e);if(a!==void 0)return a;const o=e.emits;let i={},s=!1;if(!dt(e)){const u=l=>{const c=hb(l,t,!0);c&&(s=!0,Tn(i,c))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!o&&!s?($t(e)&&r.set(e,null),null):(rt(o)?o.forEach(u=>i[u]=null):Tn(i,o),$t(e)&&r.set(e,i),i)}function Pc(e,t){return!e||!Cc(t)?!1:(t=t.slice(2).replace(/Once$/,""),Dt(e,t[0].toLowerCase()+t.slice(1))||Dt(e,oi(t))||Dt(e,t))}function sm(e){const{type:t,vnode:n,proxy:r,withProxy:a,propsOptions:[o],slots:i,attrs:s,emit:u,render:l,renderCache:c,props:d,data:f,setupState:h,ctx:v,inheritAttrs:m}=e,p=Al(e);let y,x;try{if(n.shapeFlag&4){const g=a||r,w=g;y=Zr(l.call(w,g,c,d,h,f,v)),x=s}else{const g=t;y=Zr(g.length>1?g(d,{attrs:s,slots:i,emit:u}):g(d,null)),x=t.props?s:j2(s)}}catch(g){Us.length=0,Rc(g,e,1),y=Un(zn)}let b=y;if(x&&m!==!1){const g=Object.keys(x),{shapeFlag:w}=b;g.length&&w&7&&(o&&g.some(zh)&&(x=G2(x,o)),b=Na(b,x,!1,!0))}return n.dirs&&(b=Na(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&rs(b,n.transition),y=b,Al(p),y}const j2=e=>{let t;for(const n in e)(n==="class"||n==="style"||Cc(n))&&((t||(t={}))[n]=e[n]);return t},G2=(e,t)=>{const n={};for(const r in e)(!zh(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function K2(e,t,n){const{props:r,children:a,component:o}=e,{props:i,children:s,patchFlag:u}=t,l=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?um(r,i,l):!!i;if(u&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(i[f]!==r[f]&&!Pc(l,f))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:r===i?!1:r?i?um(r,i,l):!0:!!i;return!1}function um(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let a=0;a<r.length;a++){const o=r[a];if(t[o]!==e[o]&&!Pc(n,o))return!0}return!1}function X2({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const vb={},pb=()=>Object.create(vb),mb=e=>Object.getPrototypeOf(e)===vb;function Q2(e,t,n,r=!1){const a={},o=pb();e.propsDefaults=Object.create(null),gb(e,t,a,o);for(const i in e.propsOptions[0])i in a||(a[i]=void 0);n?e.props=r?a:Jh(a):e.type.props?e.props=a:e.props=o,e.attrs=o}function Y2(e,t,n,r){const{props:a,attrs:o,vnode:{patchFlag:i}}=e,s=pt(a),[u]=e.propsOptions;let l=!1;if((r||i>0)&&!(i&16)){if(i&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(Pc(e.emitsOptions,f))continue;const h=t[f];if(u)if(Dt(o,f))h!==o[f]&&(o[f]=h,l=!0);else{const v=Rr(f);a[v]=Wf(u,s,v,h,e,!1)}else h!==o[f]&&(o[f]=h,l=!0)}}}else{gb(e,t,a,o)&&(l=!0);let c;for(const d in s)(!t||!Dt(t,d)&&((c=oi(d))===d||!Dt(t,c)))&&(u?n&&(n[d]!==void 0||n[c]!==void 0)&&(a[d]=Wf(u,s,d,void 0,e,!0)):delete a[d]);if(o!==s)for(const d in o)(!t||!Dt(t,d))&&(delete o[d],l=!0)}l&&Ra(e.attrs,"set","")}function gb(e,t,n,r){const[a,o]=e.propsOptions;let i=!1,s;if(t)for(let u in t){if(Ls(u))continue;const l=t[u];let c;a&&Dt(a,c=Rr(u))?!o||!o.includes(c)?n[c]=l:(s||(s={}))[c]=l:Pc(e.emitsOptions,u)||(!(u in r)||l!==r[u])&&(r[u]=l,i=!0)}if(o){const u=pt(n),l=s||qt;for(let c=0;c<o.length;c++){const d=o[c];n[d]=Wf(a,u,d,l[d],e,!Dt(l,d))}}return i}function Wf(e,t,n,r,a,o){const i=e[n];if(i!=null){const s=Dt(i,"default");if(s&&r===void 0){const u=i.default;if(i.type!==Function&&!i.skipFactory&&dt(u)){const{propsDefaults:l}=a;if(n in l)r=l[n];else{const c=_u(a);r=l[n]=u.call(null,t),c()}}else r=u;a.ce&&a.ce._setProp(n,r)}i[0]&&(o&&!s?r=!1:i[1]&&(r===""||r===oi(n))&&(r=!0))}return r}const J2=new WeakMap;function yb(e,t,n=!1){const r=n?J2:t.propsCache,a=r.get(e);if(a)return a;const o=e.props,i={},s=[];let u=!1;if(!dt(e)){const c=d=>{u=!0;const[f,h]=yb(d,t,!0);Tn(i,f),h&&s.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!u)return $t(e)&&r.set(e,Oi),Oi;if(rt(o))for(let c=0;c<o.length;c++){const d=Rr(o[c]);lm(d)&&(i[d]=qt)}else if(o)for(const c in o){const d=Rr(c);if(lm(d)){const f=o[c],h=i[d]=rt(f)||dt(f)?{type:f}:Tn({},f),v=h.type;let m=!1,p=!0;if(rt(v))for(let y=0;y<v.length;++y){const x=v[y],b=dt(x)&&x.name;if(b==="Boolean"){m=!0;break}else b==="String"&&(p=!1)}else m=dt(v)&&v.name==="Boolean";h[0]=m,h[1]=p,(m||Dt(h,"default"))&&s.push(d)}}const l=[i,s];return $t(e)&&r.set(e,l),l}function lm(e){return e[0]!=="$"&&!Ls(e)}const ov=e=>e==="_"||e==="_ctx"||e==="$stable",iv=e=>rt(e)?e.map(Zr):[Zr(e)],Z2=(e,t,n)=>{if(t._n)return t;const r=gl((...a)=>iv(t(...a)),n);return r._c=!1,r},bb=(e,t,n)=>{const r=e._ctx;for(const a in e){if(ov(a))continue;const o=e[a];if(dt(o))t[a]=Z2(a,o,r);else if(o!=null){const i=iv(o);t[a]=()=>i}}},xb=(e,t)=>{const n=iv(t);e.slots.default=()=>n},wb=(e,t,n)=>{for(const r in t)(n||!ov(r))&&(e[r]=t[r])},eS=(e,t,n)=>{const r=e.slots=pb();if(e.vnode.shapeFlag&32){const a=t._;a?(wb(r,t,n),n&&Sy(r,"_",a,!0)):bb(t,r)}else t&&xb(e,t)},tS=(e,t,n)=>{const{vnode:r,slots:a}=e;let o=!0,i=qt;if(r.shapeFlag&32){const s=t._;s?n&&s===1?o=!1:wb(a,t,n):(o=!t.$stable,bb(t,a)),i=t}else t&&(xb(e,t),i={default:1});if(o)for(const s in a)!ov(s)&&i[s]==null&&delete a[s]},vn=iS;function nS(e){return rS(e)}function rS(e,t){const n=Ec();n.__VUE__=!0;const{insert:r,remove:a,patchProp:o,createElement:i,createText:s,createComment:u,setText:l,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=oa,insertStaticContent:v}=e,m=(P,B,j,ne=null,se=null,J=null,me=void 0,ge=null,xe=!!B.dynamicChildren)=>{if(P===B)return;P&&!ao(P,B)&&(ne=O(P),N(P,se,J,!0),P=null),B.patchFlag===-2&&(xe=!1,B.dynamicChildren=null);const{type:pe,ref:le,shapeFlag:X}=B;switch(pe){case Fc:p(P,B,j,ne);break;case zn:y(P,B,j,ne);break;case Sd:P==null&&x(B,j,ne,me);break;case Pr:T(P,B,j,ne,se,J,me,ge,xe);break;default:X&1?w(P,B,j,ne,se,J,me,ge,xe):X&6?D(P,B,j,ne,se,J,me,ge,xe):(X&64||X&128)&&pe.process(P,B,j,ne,se,J,me,ge,xe,ue)}le!=null&&se?Hs(le,P&&P.ref,J,B||P,!B):le==null&&P&&P.ref!=null&&Hs(P.ref,null,J,P,!0)},p=(P,B,j,ne)=>{if(P==null)r(B.el=s(B.children),j,ne);else{const se=B.el=P.el;B.children!==P.children&&l(se,B.children)}},y=(P,B,j,ne)=>{P==null?r(B.el=u(B.children||""),j,ne):B.el=P.el},x=(P,B,j,ne)=>{[P.el,P.anchor]=v(P.children,B,j,ne,P.el,P.anchor)},b=({el:P,anchor:B},j,ne)=>{let se;for(;P&&P!==B;)se=f(P),r(P,j,ne),P=se;r(B,j,ne)},g=({el:P,anchor:B})=>{let j;for(;P&&P!==B;)j=f(P),a(P),P=j;a(B)},w=(P,B,j,ne,se,J,me,ge,xe)=>{if(B.type==="svg"?me="svg":B.type==="math"&&(me="mathml"),P==null)S(B,j,ne,se,J,me,ge,xe);else{const pe=P.el&&P.el._isVueCE?P.el:null;try{pe&&pe._beginPatch(),A(P,B,se,J,me,ge,xe)}finally{pe&&pe._endPatch()}}},S=(P,B,j,ne,se,J,me,ge)=>{let xe,pe;const{props:le,shapeFlag:X,transition:de,dirs:Re}=P;if(xe=P.el=i(P.type,J,le&&le.is,le),X&8?c(xe,P.children):X&16&&R(P.children,xe,null,ne,se,Cd(P,J),me,ge),Re&&ko(P,null,ne,"created"),E(xe,P,P.scopeId,me,ne),le){for(const Me in le)Me!=="value"&&!Ls(Me)&&o(xe,Me,null,le[Me],J,ne);"value"in le&&o(xe,"value",null,le.value,J),(pe=le.onVnodeBeforeMount)&&wr(pe,ne,P)}Re&&ko(P,null,ne,"beforeMount");const Fe=aS(se,de);Fe&&de.beforeEnter(xe),r(xe,B,j),((pe=le&&le.onVnodeMounted)||Fe||Re)&&vn(()=>{pe&&wr(pe,ne,P),Fe&&de.enter(xe),Re&&ko(P,null,ne,"mounted")},se)},E=(P,B,j,ne,se)=>{if(j&&h(P,j),ne)for(let J=0;J<ne.length;J++)h(P,ne[J]);if(se){let J=se.subTree;if(B===J||Pl(J.type)&&(J.ssContent===B||J.ssFallback===B)){const me=se.vnode;E(P,me,me.scopeId,me.slotScopeIds,se.parent)}}},R=(P,B,j,ne,se,J,me,ge,xe=0)=>{for(let pe=xe;pe<P.length;pe++){const le=P[pe]=ge?no(P[pe]):Zr(P[pe]);m(null,le,B,j,ne,se,J,me,ge)}},A=(P,B,j,ne,se,J,me)=>{const ge=B.el=P.el;let{patchFlag:xe,dynamicChildren:pe,dirs:le}=B;xe|=P.patchFlag&16;const X=P.props||qt,de=B.props||qt;let Re;if(j&&Eo(j,!1),(Re=de.onVnodeBeforeUpdate)&&wr(Re,j,B,P),le&&ko(B,P,j,"beforeUpdate"),j&&Eo(j,!0),(X.innerHTML&&de.innerHTML==null||X.textContent&&de.textContent==null)&&c(ge,""),pe?k(P.dynamicChildren,pe,ge,j,ne,Cd(B,se),J):me||q(P,B,ge,null,j,ne,Cd(B,se),J,!1),xe>0){if(xe&16)M(ge,X,de,j,se);else if(xe&2&&X.class!==de.class&&o(ge,"class",null,de.class,se),xe&4&&o(ge,"style",X.style,de.style,se),xe&8){const Fe=B.dynamicProps;for(let Me=0;Me<Fe.length;Me++){const De=Fe[Me],et=X[De],tt=de[De];(tt!==et||De==="value")&&o(ge,De,et,tt,se,j)}}xe&1&&P.children!==B.children&&c(ge,B.children)}else!me&&pe==null&&M(ge,X,de,j,se);((Re=de.onVnodeUpdated)||le)&&vn(()=>{Re&&wr(Re,j,B,P),le&&ko(B,P,j,"updated")},ne)},k=(P,B,j,ne,se,J,me)=>{for(let ge=0;ge<B.length;ge++){const xe=P[ge],pe=B[ge],le=xe.el&&(xe.type===Pr||!ao(xe,pe)||xe.shapeFlag&198)?d(xe.el):j;m(xe,pe,le,null,ne,se,J,me,!0)}},M=(P,B,j,ne,se)=>{if(B!==j){if(B!==qt)for(const J in B)!Ls(J)&&!(J in j)&&o(P,J,B[J],null,se,ne);for(const J in j){if(Ls(J))continue;const me=j[J],ge=B[J];me!==ge&&J!=="value"&&o(P,J,ge,me,se,ne)}"value"in j&&o(P,"value",B.value,j.value,se)}},T=(P,B,j,ne,se,J,me,ge,xe)=>{const pe=B.el=P?P.el:s(""),le=B.anchor=P?P.anchor:s("");let{patchFlag:X,dynamicChildren:de,slotScopeIds:Re}=B;Re&&(ge=ge?ge.concat(Re):Re),P==null?(r(pe,j,ne),r(le,j,ne),R(B.children||[],j,le,se,J,me,ge,xe)):X>0&&X&64&&de&&P.dynamicChildren?(k(P.dynamicChildren,de,j,se,J,me,ge),(B.key!=null||se&&B===se.subTree)&&sv(P,B,!0)):q(P,B,j,le,se,J,me,ge,xe)},D=(P,B,j,ne,se,J,me,ge,xe)=>{B.slotScopeIds=ge,P==null?B.shapeFlag&512?se.ctx.activate(B,j,ne,me,xe):I(B,j,ne,se,J,me,xe):F(P,B,xe)},I=(P,B,j,ne,se,J,me)=>{const ge=P.component=vS(P,ne,se);if(Ac(P)&&(ge.ctx.renderer=ue),pS(ge,!1,me),ge.asyncDep){if(se&&se.registerDep(ge,V,me),!P.el){const xe=ge.subTree=Un(zn);y(null,xe,B,j),P.placeholder=xe.el}}else V(ge,P,B,j,se,J,me)},F=(P,B,j)=>{const ne=B.component=P.component;if(K2(P,B,j))if(ne.asyncDep&&!ne.asyncResolved){L(ne,B,j);return}else ne.next=B,ne.update();else B.el=P.el,ne.vnode=B},V=(P,B,j,ne,se,J,me)=>{const ge=()=>{if(P.isMounted){let{next:X,bu:de,u:Re,parent:Fe,vnode:Me}=P;{const Ee=_b(P);if(Ee){X&&(X.el=Me.el,L(P,X,me)),Ee.asyncDep.then(()=>{P.isUnmounted||ge()});return}}let De=X,et;Eo(P,!1),X?(X.el=Me.el,L(P,X,me)):X=Me,de&&qi(de),(et=X.props&&X.props.onVnodeBeforeUpdate)&&wr(et,Fe,X,Me),Eo(P,!0);const tt=sm(P),he=P.subTree;P.subTree=tt,m(he,tt,d(he.el),O(he),P,se,J),X.el=tt.el,De===null&&X2(P,tt.el),Re&&vn(Re,se),(et=X.props&&X.props.onVnodeUpdated)&&vn(()=>wr(et,Fe,X,Me),se)}else{let X;const{el:de,props:Re}=B,{bm:Fe,m:Me,parent:De,root:et,type:tt}=P,he=Vi(B);Eo(P,!1),Fe&&qi(Fe),!he&&(X=Re&&Re.onVnodeBeforeMount)&&wr(X,De,B),Eo(P,!0);{et.ce&&et.ce._def.shadowRoot!==!1&&et.ce._injectChildStyle(tt);const Ee=P.subTree=sm(P);m(null,Ee,j,ne,P,se,J),B.el=Ee.el}if(Me&&vn(Me,se),!he&&(X=Re&&Re.onVnodeMounted)){const Ee=B;vn(()=>wr(X,De,Ee),se)}(B.shapeFlag&256||De&&Vi(De.vnode)&&De.vnode.shapeFlag&256)&&P.a&&vn(P.a,se),P.isMounted=!0,B=j=ne=null}};P.scope.on();const xe=P.effect=new Ry(ge);P.scope.off();const pe=P.update=xe.run.bind(xe),le=P.job=xe.runIfDirty.bind(xe);le.i=P,le.id=P.uid,xe.scheduler=()=>nv(le),Eo(P,!0),pe()},L=(P,B,j)=>{B.component=P;const ne=P.vnode.props;P.vnode=B,P.next=null,Y2(P,B.props,ne,j),tS(P,B.children,j),Da(),Qp(P),Pa()},q=(P,B,j,ne,se,J,me,ge,xe=!1)=>{const pe=P&&P.children,le=P?P.shapeFlag:0,X=B.children,{patchFlag:de,shapeFlag:Re}=B;if(de>0){if(de&128){oe(pe,X,j,ne,se,J,me,ge,xe);return}else if(de&256){K(pe,X,j,ne,se,J,me,ge,xe);return}}Re&8?(le&16&&$(pe,se,J),X!==pe&&c(j,X)):le&16?Re&16?oe(pe,X,j,ne,se,J,me,ge,xe):$(pe,se,J,!0):(le&8&&c(j,""),Re&16&&R(X,j,ne,se,J,me,ge,xe))},K=(P,B,j,ne,se,J,me,ge,xe)=>{P=P||Oi,B=B||Oi;const pe=P.length,le=B.length,X=Math.min(pe,le);let de;for(de=0;de<X;de++){const Re=B[de]=xe?no(B[de]):Zr(B[de]);m(P[de],Re,j,null,se,J,me,ge,xe)}pe>le?$(P,se,J,!0,!1,X):R(B,j,ne,se,J,me,ge,xe,X)},oe=(P,B,j,ne,se,J,me,ge,xe)=>{let pe=0;const le=B.length;let X=P.length-1,de=le-1;for(;pe<=X&&pe<=de;){const Re=P[pe],Fe=B[pe]=xe?no(B[pe]):Zr(B[pe]);if(ao(Re,Fe))m(Re,Fe,j,null,se,J,me,ge,xe);else break;pe++}for(;pe<=X&&pe<=de;){const Re=P[X],Fe=B[de]=xe?no(B[de]):Zr(B[de]);if(ao(Re,Fe))m(Re,Fe,j,null,se,J,me,ge,xe);else break;X--,de--}if(pe>X){if(pe<=de){const Re=de+1,Fe=Re<le?B[Re].el:ne;for(;pe<=de;)m(null,B[pe]=xe?no(B[pe]):Zr(B[pe]),j,Fe,se,J,me,ge,xe),pe++}}else if(pe>de)for(;pe<=X;)N(P[pe],se,J,!0),pe++;else{const Re=pe,Fe=pe,Me=new Map;for(pe=Fe;pe<=de;pe++){const Pe=B[pe]=xe?no(B[pe]):Zr(B[pe]);Pe.key!=null&&Me.set(Pe.key,pe)}let De,et=0;const tt=de-Fe+1;let he=!1,Ee=0;const ce=new Array(tt);for(pe=0;pe<tt;pe++)ce[pe]=0;for(pe=Re;pe<=X;pe++){const Pe=P[pe];if(et>=tt){N(Pe,se,J,!0);continue}let Ze;if(Pe.key!=null)Ze=Me.get(Pe.key);else for(De=Fe;De<=de;De++)if(ce[De-Fe]===0&&ao(Pe,B[De])){Ze=De;break}Ze===void 0?N(Pe,se,J,!0):(ce[Ze-Fe]=pe+1,Ze>=Ee?Ee=Ze:he=!0,m(Pe,B[Ze],j,null,se,J,me,ge,xe),et++)}const Te=he?oS(ce):Oi;for(De=Te.length-1,pe=tt-1;pe>=0;pe--){const Pe=Fe+pe,Ze=B[Pe],Ve=B[Pe+1],ut=Pe+1<le?Ve.el||Ve.placeholder:ne;ce[pe]===0?m(null,Ze,j,ut,se,J,me,ge,xe):he&&(De<0||pe!==Te[De]?W(Ze,j,ut,2):De--)}}},W=(P,B,j,ne,se=null)=>{const{el:J,type:me,transition:ge,children:xe,shapeFlag:pe}=P;if(pe&6){W(P.component.subTree,B,j,ne);return}if(pe&128){P.suspense.move(B,j,ne);return}if(pe&64){me.move(P,B,j,ue);return}if(me===Pr){r(J,B,j);for(let X=0;X<xe.length;X++)W(xe[X],B,j,ne);r(P.anchor,B,j);return}if(me===Sd){b(P,B,j);return}if(ne!==2&&pe&1&&ge)if(ne===0)ge.beforeEnter(J),r(J,B,j),vn(()=>ge.enter(J),se);else{const{leave:X,delayLeave:de,afterLeave:Re}=ge,Fe=()=>{P.ctx.isUnmounted?a(J):r(J,B,j)},Me=()=>{J._isLeaving&&J[Ta](!0),X(J,()=>{Fe(),Re&&Re()})};de?de(J,Fe,Me):Me()}else r(J,B,j)},N=(P,B,j,ne=!1,se=!1)=>{const{type:J,props:me,ref:ge,children:xe,dynamicChildren:pe,shapeFlag:le,patchFlag:X,dirs:de,cacheIndex:Re}=P;if(X===-2&&(se=!1),ge!=null&&(Da(),Hs(ge,null,j,P,!0),Pa()),Re!=null&&(B.renderCache[Re]=void 0),le&256){B.ctx.deactivate(P);return}const Fe=le&1&&de,Me=!Vi(P);let De;if(Me&&(De=me&&me.onVnodeBeforeUnmount)&&wr(De,B,P),le&6)fe(P.component,j,ne);else{if(le&128){P.suspense.unmount(j,ne);return}Fe&&ko(P,null,B,"beforeUnmount"),le&64?P.type.remove(P,B,j,ue,ne):pe&&!pe.hasOnce&&(J!==Pr||X>0&&X&64)?$(pe,B,j,!1,!0):(J===Pr&&X&384||!se&&le&16)&&$(xe,B,j),ne&&Q(P)}(Me&&(De=me&&me.onVnodeUnmounted)||Fe)&&vn(()=>{De&&wr(De,B,P),Fe&&ko(P,null,B,"unmounted")},j)},Q=P=>{const{type:B,el:j,anchor:ne,transition:se}=P;if(B===Pr){Y(j,ne);return}if(B===Sd){g(P);return}const J=()=>{a(j),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(P.shapeFlag&1&&se&&!se.persisted){const{leave:me,delayLeave:ge}=se,xe=()=>me(j,J);ge?ge(P.el,J,xe):xe()}else J()},Y=(P,B)=>{let j;for(;P!==B;)j=f(P),a(P),P=j;a(B)},fe=(P,B,j)=>{const{bum:ne,scope:se,job:J,subTree:me,um:ge,m:xe,a:pe}=P;Dl(xe),Dl(pe),ne&&qi(ne),se.stop(),J&&(J.flags|=8,N(me,P,B,j)),ge&&vn(ge,B),vn(()=>{P.isUnmounted=!0},B)},$=(P,B,j,ne=!1,se=!1,J=0)=>{for(let me=J;me<P.length;me++)N(P[me],B,j,ne,se)},O=P=>{if(P.shapeFlag&6)return O(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const B=f(P.anchor||P.el),j=B&&B[Xy];return j?f(j):B};let ee=!1;const H=(P,B,j)=>{P==null?B._vnode&&N(B._vnode,null,null,!0):m(B._vnode||null,P,B,null,null,null,j),B._vnode=P,ee||(ee=!0,Qp(),jy(),ee=!1)},ue={p:m,um:N,m:W,r:Q,mt:I,mc:R,pc:q,pbc:k,n:O,o:e};return{render:H,hydrate:void 0,createApp:L2(H)}}function Cd({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Eo({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function aS(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function sv(e,t,n=!1){const r=e.children,a=t.children;if(rt(r)&&rt(a))for(let o=0;o<r.length;o++){const i=r[o];let s=a[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[o]=no(a[o]),s.el=i.el),!n&&s.patchFlag!==-2&&sv(i,s)),s.type===Fc&&s.patchFlag!==-1&&(s.el=i.el),s.type===zn&&!s.el&&(s.el=i.el)}}function oS(e){const t=e.slice(),n=[0];let r,a,o,i,s;const u=e.length;for(r=0;r<u;r++){const l=e[r];if(l!==0){if(a=n[n.length-1],e[a]<l){t[r]=a,n.push(r);continue}for(o=0,i=n.length-1;o<i;)s=o+i>>1,e[n[s]]<l?o=s+1:i=s;l<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,i=n[o-1];o-- >0;)n[o]=i,i=t[i];return n}function _b(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:_b(t)}function Dl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Pl=e=>e.__isSuspense;function iS(e,t){t&&t.pendingBranch?rt(e)?t.effects.push(...e):t.effects.push(e):m2(e)}const Pr=Symbol.for("v-fgt"),Fc=Symbol.for("v-txt"),zn=Symbol.for("v-cmt"),Sd=Symbol.for("v-stc"),Us=[];let fr=null;function Or(e=!1){Us.push(fr=e?null:[])}function sS(){Us.pop(),fr=Us[Us.length-1]||null}let ru=1;function Fl(e,t=!1){ru+=e,e<0&&fr&&t&&(fr.hasOnce=!0)}function Cb(e){return e.dynamicChildren=ru>0?fr||Oi:null,sS(),ru>0&&fr&&fr.push(e),e}function Ia(e,t,n,r,a,o){return Cb(bt(e,t,n,r,a,o,!0))}function Sb(e,t,n,r,a){return Cb(Un(e,t,n,r,a,!0))}function au(e){return e?e.__v_isVNode===!0:!1}function ao(e,t){return e.type===t.type&&e.key===t.key}const kb=({key:e})=>e??null,bl=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?en(e)||Fn(e)||dt(e)?{i:dr,r:e,k:t,f:!!n}:e:null);function bt(e,t=null,n=null,r=0,a=null,o=e===Pr?0:1,i=!1,s=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&kb(t),ref:t&&bl(t),scopeId:Ky,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:dr};return s?(uv(u,n),o&128&&e.normalize(u)):n&&(u.shapeFlag|=en(n)?8:16),ru>0&&!i&&fr&&(u.patchFlag>0||o&6)&&u.patchFlag!==32&&fr.push(u),u}const Un=uS;function uS(e,t=null,n=null,r=0,a=null,o=!1){if((!e||e===A2)&&(e=zn),au(e)){const s=Na(e,t,!0);return n&&uv(s,n),ru>0&&!o&&fr&&(s.shapeFlag&6?fr[fr.indexOf(e)]=s:fr.push(s)),s.patchFlag=-2,s}if(bS(e)&&(e=e.__vccOpts),t){t=lS(t);let{class:s,style:u}=t;s&&!en(s)&&(t.class=jh(s)),$t(u)&&(ev(u)&&!rt(u)&&(u=Tn({},u)),t.style=Uh(u))}const i=en(e)?1:Pl(e)?128:Qy(e)?64:$t(e)?4:dt(e)?2:0;return bt(e,t,n,r,a,i,o,!0)}function lS(e){return e?ev(e)||mb(e)?Tn({},e):e:null}function Na(e,t,n=!1,r=!1){const{props:a,ref:o,patchFlag:i,children:s,transition:u}=e,l=t?dS(a||{},t):a,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&kb(l),ref:t&&t.ref?n&&o?rt(o)?o.concat(bl(t)):[o,bl(t)]:bl(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Pr?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Na(e.ssContent),ssFallback:e.ssFallback&&Na(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&r&&rs(c,u.clone(c)),c}function xl(e=" ",t=0){return Un(Fc,null,e,t)}function cS(e="",t=!1){return t?(Or(),Sb(zn,null,e)):Un(zn,null,e)}function Zr(e){return e==null||typeof e=="boolean"?Un(zn):rt(e)?Un(Pr,null,e.slice()):au(e)?no(e):Un(Fc,null,String(e))}function no(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Na(e)}function uv(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(rt(t))n=16;else if(typeof t=="object")if(r&65){const a=t.default;a&&(a._c&&(a._d=!1),uv(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!mb(t)?t._ctx=dr:a===3&&dr&&(dr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else dt(t)?(t={default:t,_ctx:dr},n=32):(t=String(t),r&64?(n=16,t=[xl(t)]):n=8);e.children=t,e.shapeFlag|=n}function dS(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const a in r)if(a==="class")t.class!==r.class&&(t.class=jh([t.class,r.class]));else if(a==="style")t.style=Uh([t.style,r.style]);else if(Cc(a)){const o=t[a],i=r[a];i&&o!==i&&!(rt(o)&&o.includes(i))&&(t[a]=o?[].concat(o,i):i)}else a!==""&&(t[a]=r[a])}return t}function wr(e,t,n,r=null){Hr(e,t,7,[n,r])}const fS=cb();let hS=0;function vS(e,t,n){const r=e.type,a=(t?t.appContext:e.appContext)||fS,o={uid:hS++,vnode:e,type:r,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new zC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:yb(r,a),emitsOptions:hb(r,a),emit:null,emitted:null,propsDefaults:qt,inheritAttrs:r.inheritAttrs,ctx:qt,data:qt,props:qt,attrs:qt,slots:qt,refs:qt,setupState:qt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=W2.bind(null,o),e.ce&&e.ce(o),o}let $n=null;const Ie=()=>$n||dr;let Nl,Uf;{const e=Ec(),t=(n,r)=>{let a;return(a=e[n])||(a=e[n]=[]),a.push(r),o=>{a.length>1?a.forEach(i=>i(o)):a[0](o)}};Nl=t("__VUE_INSTANCE_SETTERS__",n=>$n=n),Uf=t("__VUE_SSR_SETTERS__",n=>ou=n)}const _u=e=>{const t=$n;return Nl(e),e.scope.on(),()=>{e.scope.off(),Nl(t)}},cm=()=>{$n&&$n.scope.off(),Nl(null)};function Eb(e){return e.vnode.shapeFlag&4}let ou=!1;function pS(e,t=!1,n=!1){t&&Uf(t);const{props:r,children:a}=e.vnode,o=Eb(e);Q2(e,r,o,t),eS(e,a,n||t);const i=o?mS(e,t):void 0;return t&&Uf(!1),i}function mS(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,D2);const{setup:r}=n;if(r){Da();const a=e.setupContext=r.length>1?yS(e):null,o=_u(e),i=wu(r,e,0,[e.props,a]),s=wy(i);if(Pa(),o(),(s||e.sp)&&!Vi(e)&&ab(e),s){if(i.then(cm,cm),t)return i.then(u=>{dm(e,u)}).catch(u=>{Rc(u,e,0)});e.asyncDep=i}else dm(e,i)}else Tb(e)}function dm(e,t,n){dt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:$t(t)&&(e.setupState=Hy(t)),Tb(e)}function Tb(e,t,n){const r=e.type;e.render||(e.render=r.render||oa);{const a=_u(e);Da();try{P2(e)}finally{Pa(),a()}}}const gS={get(e,t){return Ln(e,"get",""),e[t]}};function yS(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,gS),slots:e.slots,emit:e.emit,expose:t}}function Nc(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Hy(tv(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ws)return Ws[n](e)},has(t,n){return n in t||n in Ws}})):e.proxy}function jf(e,t=!0){return dt(e)?e.displayName||e.name:e.name||t&&e.__name}function bS(e){return dt(e)&&"__vccOpts"in e}const C=(e,t)=>d2(e,t,ou);function _(e,t,n){try{Fl(-1);const r=arguments.length;return r===2?$t(t)&&!rt(t)?au(t)?Un(e,null,[t]):Un(e,t):Un(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&au(n)&&(n=[n]),Un(e,t,n))}finally{Fl(1)}}const xS="3.5.25";let Gf;const fm=typeof window<"u"&&window.trustedTypes;if(fm)try{Gf=fm.createPolicy("vue",{createHTML:e=>e})}catch{}const Rb=Gf?e=>Gf.createHTML(e):e=>e,wS="http://www.w3.org/2000/svg",_S="http://www.w3.org/1998/Math/MathML",Ea=typeof document<"u"?document:null,hm=Ea&&Ea.createElement("template"),CS={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const a=t==="svg"?Ea.createElementNS(wS,e):t==="mathml"?Ea.createElementNS(_S,e):n?Ea.createElement(e,{is:n}):Ea.createElement(e);return e==="select"&&r&&r.multiple!=null&&a.setAttribute("multiple",r.multiple),a},createText:e=>Ea.createTextNode(e),createComment:e=>Ea.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ea.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,a,o){const i=n?n.previousSibling:t.lastChild;if(a&&(a===o||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===o||!(a=a.nextSibling)););else{hm.innerHTML=Rb(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const s=hm.content;if(r==="svg"||r==="mathml"){const u=s.firstChild;for(;u.firstChild;)s.appendChild(u.firstChild);s.removeChild(u)}t.insertBefore(s,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ga="transition",ws="animation",iu=Symbol("_vtc"),Ab={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},SS=Tn({},Zy,Ab),kS=e=>(e.displayName="Transition",e.props=SS,e),pn=kS((e,{slots:t})=>_(w2,ES(e),t)),To=(e,t=[])=>{rt(e)?e.forEach(n=>n(...t)):e&&e(...t)},vm=e=>e?rt(e)?e.some(t=>t.length>1):e.length>1:!1;function ES(e){const t={};for(const T in e)T in Ab||(t[T]=e[T]);if(e.css===!1)return t;const{name:n="v",type:r,duration:a,enterFromClass:o=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:u=o,appearActiveClass:l=i,appearToClass:c=s,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,v=TS(a),m=v&&v[0],p=v&&v[1],{onBeforeEnter:y,onEnter:x,onEnterCancelled:b,onLeave:g,onLeaveCancelled:w,onBeforeAppear:S=y,onAppear:E=x,onAppearCancelled:R=b}=t,A=(T,D,I,F)=>{T._enterCancelled=F,Ro(T,D?c:s),Ro(T,D?l:i),I&&I()},k=(T,D)=>{T._isLeaving=!1,Ro(T,d),Ro(T,h),Ro(T,f),D&&D()},M=T=>(D,I)=>{const F=T?E:x,V=()=>A(D,T,I);To(F,[D,V]),pm(()=>{Ro(D,T?u:o),ya(D,T?c:s),vm(F)||mm(D,r,m,V)})};return Tn(t,{onBeforeEnter(T){To(y,[T]),ya(T,o),ya(T,i)},onBeforeAppear(T){To(S,[T]),ya(T,u),ya(T,l)},onEnter:M(!1),onAppear:M(!0),onLeave(T,D){T._isLeaving=!0;const I=()=>k(T,D);ya(T,d),T._enterCancelled?(ya(T,f),bm(T)):(bm(T),ya(T,f)),pm(()=>{T._isLeaving&&(Ro(T,d),ya(T,h),vm(g)||mm(T,r,p,I))}),To(g,[T,I])},onEnterCancelled(T){A(T,!1,void 0,!0),To(b,[T])},onAppearCancelled(T){A(T,!0,void 0,!0),To(R,[T])},onLeaveCancelled(T){k(T),To(w,[T])}})}function TS(e){if(e==null)return null;if($t(e))return[kd(e.enter),kd(e.leave)];{const t=kd(e);return[t,t]}}function kd(e){return FC(e)}function ya(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[iu]||(e[iu]=new Set)).add(t)}function Ro(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[iu];n&&(n.delete(t),n.size||(e[iu]=void 0))}function pm(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let RS=0;function mm(e,t,n,r){const a=e._endId=++RS,o=()=>{a===e._endId&&r()};if(n!=null)return setTimeout(o,n);const{type:i,timeout:s,propCount:u}=AS(e,t);if(!i)return r();const l=i+"end";let c=0;const d=()=>{e.removeEventListener(l,f),o()},f=h=>{h.target===e&&++c>=u&&d()};setTimeout(()=>{c<u&&d()},s+1),e.addEventListener(l,f)}function AS(e,t){const n=window.getComputedStyle(e),r=v=>(n[v]||"").split(", "),a=r(`${Ga}Delay`),o=r(`${Ga}Duration`),i=gm(a,o),s=r(`${ws}Delay`),u=r(`${ws}Duration`),l=gm(s,u);let c=null,d=0,f=0;t===Ga?i>0&&(c=Ga,d=i,f=o.length):t===ws?l>0&&(c=ws,d=l,f=u.length):(d=Math.max(i,l),c=d>0?i>l?Ga:ws:null,f=c?c===Ga?o.length:u.length:0);const h=c===Ga&&/\b(?:transform|all)(?:,|$)/.test(r(`${Ga}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:h}}function gm(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>ym(n)+ym(e[r])))}function ym(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function bm(e){return(e?e.ownerDocument:document).body.offsetHeight}function IS(e,t,n){const r=e[iu];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Ol=Symbol("_vod"),Ib=Symbol("_vsh"),Mb={name:"show",beforeMount(e,{value:t},{transition:n}){e[Ol]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):_s(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),_s(e,!0),r.enter(e)):r.leave(e,()=>{_s(e,!1)}):_s(e,t))},beforeUnmount(e,{value:t}){_s(e,t)}};function _s(e,t){e.style.display=t?e[Ol]:"none",e[Ib]=!t}const MS=Symbol(""),DS=/(?:^|;)\s*display\s*:/;function PS(e,t,n){const r=e.style,a=en(n);let o=!1;if(n&&!a){if(t)if(en(t))for(const i of t.split(";")){const s=i.slice(0,i.indexOf(":")).trim();n[s]==null&&wl(r,s,"")}else for(const i in t)n[i]==null&&wl(r,i,"");for(const i in n)i==="display"&&(o=!0),wl(r,i,n[i])}else if(a){if(t!==n){const i=r[MS];i&&(n+=";"+i),r.cssText=n,o=DS.test(n)}}else t&&e.removeAttribute("style");Ol in e&&(e[Ol]=o?r.display:"",e[Ib]&&(r.display="none"))}const xm=/\s*!important$/;function wl(e,t,n){if(rt(n))n.forEach(r=>wl(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=FS(e,t);xm.test(n)?e.setProperty(oi(r),n.replace(xm,""),"important"):e[r]=n}}const wm=["Webkit","Moz","ms"],Ed={};function FS(e,t){const n=Ed[t];if(n)return n;let r=Rr(t);if(r!=="filter"&&r in e)return Ed[t]=r;r=kc(r);for(let a=0;a<wm.length;a++){const o=wm[a]+r;if(o in e)return Ed[t]=o}return t}const _m="http://www.w3.org/1999/xlink";function Cm(e,t,n,r,a,o=VC(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(_m,t.slice(6,t.length)):e.setAttributeNS(_m,t,n):n==null||o&&!ky(n)?e.removeAttribute(t):e.setAttribute(t,o?"":yo(n)?String(n):n)}function Sm(e,t,n,r,a){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Rb(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const s=o==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(s!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const s=typeof e[t];s==="boolean"?n=ky(n):n==null&&s==="string"?(n="",i=!0):s==="number"&&(n=0,i=!0)}try{e[t]=n}catch{}i&&e.removeAttribute(a||t)}function Ai(e,t,n,r){e.addEventListener(t,n,r)}function NS(e,t,n,r){e.removeEventListener(t,n,r)}const km=Symbol("_vei");function OS(e,t,n,r,a=null){const o=e[km]||(e[km]={}),i=o[t];if(r&&i)i.value=r;else{const[s,u]=BS(t);if(r){const l=o[t]=VS(r,a);Ai(e,s,l,u)}else i&&(NS(e,s,i,u),o[t]=void 0)}}const Em=/(?:Once|Passive|Capture)$/;function BS(e){let t;if(Em.test(e)){t={};let r;for(;r=e.match(Em);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):oi(e.slice(2)),t]}let Td=0;const qS=Promise.resolve(),LS=()=>Td||(qS.then(()=>Td=0),Td=Date.now());function VS(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Hr(zS(r,n.value),t,5,[r])};return n.value=e,n.attached=LS(),n}function zS(e,t){if(rt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>a=>!a._stopped&&r&&r(a))}else return t}const Tm=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,$S=(e,t,n,r,a,o)=>{const i=a==="svg";t==="class"?IS(e,r,i):t==="style"?PS(e,n,r):Cc(t)?zh(t)||OS(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):HS(e,t,r,i))?(Sm(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Cm(e,t,r,i,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!en(r))?Sm(e,Rr(t),r,o,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Cm(e,t,r,i))};function HS(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Tm(t)&&dt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Tm(t)&&en(n)?!1:t in e}const Rm=e=>{const t=e.props["onUpdate:modelValue"]||!1;return rt(t)?n=>qi(t,n):t};function WS(e){e.target.composing=!0}function Am(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Rd=Symbol("_assign");function Im(e,t,n){return t&&(e=e.trim()),n&&(e=Wh(e)),e}const Mm={created(e,{modifiers:{lazy:t,trim:n,number:r}},a){e[Rd]=Rm(a);const o=r||a.props&&a.props.type==="number";Ai(e,t?"change":"input",i=>{i.target.composing||e[Rd](Im(e.value,n,o))}),(n||o)&&Ai(e,"change",()=>{e.value=Im(e.value,n,o)}),t||(Ai(e,"compositionstart",WS),Ai(e,"compositionend",Am),Ai(e,"change",Am))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:a,number:o}},i){if(e[Rd]=Rm(i),e.composing)return;const s=(o||e.type==="number")&&!/^0\d/.test(e.value)?Wh(e.value):e.value,u=t??"";s!==u&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||a&&e.value.trim()===u)||(e.value=u))}},US=Tn({patchProp:$S},CS);let Dm;function jS(){return Dm||(Dm=nS(US))}const Db=((...e)=>{const t=jS().createApp(...e),{mount:n}=t;return t.mount=r=>{const a=KS(r);if(!a)return;const o=t._component;!dt(o)&&!o.render&&!o.template&&(o.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const i=n(a,!1,GS(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),i},t});function GS(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function KS(e){return en(e)?document.querySelector(e):e}const Pb=(e,t)=>{const n=e.__vccOpts||e;for(const[r,a]of t)n[r]=a;return n},XS={};function QS(e,t){const n=sb("router-view");return Or(),Sb(n)}const YS=Pb(XS,[["render",QS]]);var Ad=null;function lv(){return Ad!==null?Ad:Ad=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}}typeof __QUASAR_SSR__!="boolean"&&(lv().__QUASAR_SSR__=!1);typeof __QUASAR_SSR_CLIENT__!="boolean"&&(lv().__QUASAR_SSR_CLIENT__=!1);typeof __QUASAR_SSR_PWA__!="boolean"&&(lv().__QUASAR_SSR_PWA__=!1);function mn(e,t,n,r){return Object.defineProperty(e,t,{get:n,set:r,enumerable:!0}),e}function Fb(e,t){for(const n in t)mn(e,n,t[n]);return e}var ar=Z(__QUASAR_SSR_CLIENT__&&(__QUASAR_SSR_PWA__?document.body.getAttribute("data-server-rendered")!==null:!0)),Kf;function JS(e,t){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(vivaldi)[\/]([\w.]+)/.exec(e)||/(chrome|crios)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(e)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(e)||/(firefox|fxios)[\/]([\w.]+)/.exec(e)||/(webkit)[\/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(e)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:t[0]||""}}function ZS(e){return/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[]}var Nb="ontouchstart"in window||window.navigator.maxTouchPoints>0;function ek(e){const t=e.toLowerCase(),n=ZS(t),r=JS(t,n),a={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};r.browser&&(a[r.browser]=!0,a.version=r.version,a.versionNumber=parseInt(r.version,10)),r.platform&&(a[r.platform]=!0);const o=a.android||a.ios||a.bb||a.blackberry||a.ipad||a.iphone||a.ipod||a.kindle||a.playbook||a.silk||a["windows phone"];if(o===!0||t.indexOf("mobile")!==-1?a.mobile=!0:a.desktop=!0,a["windows phone"]&&(a.winphone=!0,delete a["windows phone"]),a.edga||a.edgios||a.edg?(a.edge=!0,r.browser="edge"):a.crios?(a.chrome=!0,r.browser="chrome"):a.fxios&&(a.firefox=!0,r.browser="firefox"),(a.ipod||a.ipad||a.iphone)&&(a.ios=!0),a.vivaldi&&(r.browser="vivaldi",a.vivaldi=!0),(a.chrome||a.opr||a.safari||a.vivaldi||a.mobile===!0&&a.ios!==!0&&o!==!0)&&(a.webkit=!0),a.opr&&(r.browser="opera",a.opera=!0),a.safari&&(a.blackberry||a.bb?(r.browser="blackberry",a.blackberry=!0):a.playbook?(r.browser="playbook",a.playbook=!0):a.android?(r.browser="android",a.android=!0):a.kindle?(r.browser="kindle",a.kindle=!0):a.silk&&(r.browser="silk",a.silk=!0)),a.name=r.browser,a.platform=r.platform,t.indexOf("electron")!==-1)a.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)a.bex=!0;else{if(window.Capacitor!==void 0?(a.capacitor=!0,a.nativeMobile=!0,a.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(a.cordova=!0,a.nativeMobile=!0,a.nativeMobileWrapper="cordova"),ar.value===!0&&(Kf={is:{...a}}),Nb===!0&&a.mac===!0&&(a.desktop===!0&&a.safari===!0||a.nativeMobile===!0&&a.android!==!0&&a.ios!==!0&&a.ipad!==!0)){delete a.mac,delete a.desktop;const i=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(a,{mobile:!0,ios:!0,platform:i,[i]:!0})}a.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete a.desktop,a.mobile=!0)}return a}var Pm=navigator.userAgent||navigator.vendor||window.opera,tk={has:{touch:!1,webStorage:!1},within:{iframe:!1}},nt={userAgent:Pm,is:ek(Pm),has:{touch:Nb},within:{iframe:window.self!==window.top}},Xf={install(e){const{$q:t}=e;ar.value===!0?(e.onSSRHydrated.push(()=>{Object.assign(t.platform,nt),ar.value=!1}),t.platform=ra(this)):t.platform=this}};{let e;mn(nt.has,"webStorage",()=>{if(e!==void 0)return e;try{if(window.localStorage)return e=!0,!0}catch{}return e=!1,!1}),Object.assign(Xf,nt),ar.value===!0&&(Object.assign(Xf,Kf,tk),Kf=null)}var Ob=Xf;function Ce(e){return tv(rv(e))}function jr(e){return tv(e)}var xo=(e,t)=>{const n=ra(e);for(const r in e)mn(t,r,()=>n[r],a=>{n[r]=a});return t},Ot={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(Ot,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch{}function Kt(){}function Oc(e){return e.button===0}function Zn(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function nk(e){if(e.path)return e.path;if(e.composedPath)return e.composedPath();const t=[];let n=e.target;for(;n;){if(t.push(n),n.tagName==="HTML")return t.push(document),t.push(window),t;n=n.parentElement}}function Gt(e){e.stopPropagation()}function gn(e){e.cancelable!==!1&&e.preventDefault()}function it(e){e.cancelable!==!1&&e.preventDefault(),e.stopPropagation()}function $i(e,t){if(e===void 0||t===!0&&e.__dragPrevented===!0)return;const n=t===!0?r=>{r.__dragPrevented=!0,r.addEventListener("dragstart",gn,Ot.notPassiveCapture)}:r=>{delete r.__dragPrevented,r.removeEventListener("dragstart",gn,Ot.notPassiveCapture)};e.querySelectorAll("a, img").forEach(n)}function Qt(e,t,n){const r=`__q_${t}_evt`;e[r]=e[r]!==void 0?e[r].concat(n):n,n.forEach(a=>{a[0].addEventListener(a[1],e[a[2]],Ot[a[3]])})}function Kn(e,t){const n=`__q_${t}_evt`;e[n]!==void 0&&(e[n].forEach(r=>{r[0].removeEventListener(r[1],e[r[2]],Ot[r[3]])}),e[n]=void 0)}function hs(e,t=250,n){let r=null;function a(){const o=arguments,i=()=>{r=null,e.apply(this,o)};r!==null&&clearTimeout(r),r=setTimeout(i,t)}return a.cancel=()=>{r!==null&&clearTimeout(r)},a}var Id=["sm","md","lg","xl"],{passive:Fm}=Ot,rk=xo({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:Kt,setDebounce:Kt,install({$q:e,onSSRHydrated:t}){if(e.screen=this,this.__installed===!0){e.config.screen!==void 0&&(e.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,r=n||window,a=document.scrollingElement||document.documentElement,o=n===void 0||nt.is.mobile===!0?()=>[Math.max(window.innerWidth,a.clientWidth),Math.max(window.innerHeight,a.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-a.clientWidth,n.height*n.scale+window.innerHeight-a.clientHeight],i=e.config.screen?.bodyClasses===!0;this.__update=d=>{const[f,h]=o();if(h!==this.height&&(this.height=h),f!==this.width)this.width=f;else if(d!==!0)return;let v=this.sizes;this.gt.xs=f>=v.sm,this.gt.sm=f>=v.md,this.gt.md=f>=v.lg,this.gt.lg=f>=v.xl,this.lt.sm=f<v.sm,this.lt.md=f<v.md,this.lt.lg=f<v.lg,this.lt.xl=f<v.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,v=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",v!==this.name&&(i===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${v}`)),this.name=v)};let s,u={},l=16;this.setSizes=d=>{Id.forEach(f=>{d[f]!==void 0&&(u[f]=d[f])})},this.setDebounce=d=>{l=d};const c=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&Id.forEach(f=>{this.sizes[f]=parseInt(d.getPropertyValue(`--q-size-${f}`),10)}),this.setSizes=f=>{Id.forEach(h=>{f[h]&&(this.sizes[h]=f[h])}),this.__update(!0)},this.setDebounce=f=>{s!==void 0&&r.removeEventListener("resize",s,Fm),s=f>0?hs(this.__update,f):this.__update,r.addEventListener("resize",s,Fm)},this.setDebounce(l),Object.keys(u).length!==0?(this.setSizes(u),u=void 0):this.__update(),i===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};ar.value===!0?t.push(c):c()}}),On=xo({isActive:!1,mode:!1},{__media:void 0,set(e){On.mode=e,e==="auto"?(On.__media===void 0&&(On.__media=window.matchMedia("(prefers-color-scheme: dark)"),On.__updateMedia=()=>{On.set("auto")},On.__media.addListener(On.__updateMedia)),e=On.__media.matches):On.__media!==void 0&&(On.__media.removeListener(On.__updateMedia),On.__media=void 0),On.isActive=e===!0,document.body.classList.remove(`body--${e===!0?"light":"dark"}`),document.body.classList.add(`body--${e===!0?"dark":"light"}`)},toggle(){On.set(On.isActive===!1)},install({$q:e,ssrContext:t}){const n=__QUASAR_SSR_CLIENT__?document.body.classList.contains("body--dark"):e.config.dark;e.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}}),ak=On;function ok(e,t,n=document.body){if(typeof e!="string")throw new TypeError("Expected a string as propName");if(typeof t!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${e}`,t)}var Bb=!1;function ik(e){Bb=e.isComposing===!0}function ii(e){return Bb===!0||e!==Object(e)||e.isComposing===!0||e.qKeyEvent===!0}function Ar(e,t){return ii(e)===!0?!1:[].concat(t).includes(e.keyCode)}function qb(e){if(e.ios===!0)return"ios";if(e.android===!0)return"android"}function sk({is:e,has:t,within:n},r){const a=[e.desktop===!0?"desktop":"mobile",`${t.touch===!1?"no-":""}touch`];if(e.mobile===!0){const o=qb(e);o!==void 0&&a.push("platform-"+o)}if(e.nativeMobile===!0){const o=e.nativeMobileWrapper;a.push(o),a.push("native-mobile"),e.ios===!0&&(r[o]===void 0||r[o].iosStatusBarPadding!==!1)&&a.push("q-ios-padding")}else e.electron===!0?a.push("electron"):e.bex===!0&&a.push("bex");return n.iframe===!0&&a.push("within-iframe"),a}function uk(){const{is:e}=nt,t=document.body.className,n=new Set(t.replace(/ {2}/g," ").split(" "));if(e.nativeMobile!==!0&&e.electron!==!0&&e.bex!==!0){if(e.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(e.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const a=qb(e);a!==void 0&&n.add(`platform-${a}`)}}nt.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),nt.within.iframe===!0&&n.add("within-iframe");const r=Array.from(n).join(" ");t!==r&&(document.body.className=r)}function lk(e){for(const t in e)ok(t,e[t])}var ck={install(e){if(this.__installed!==!0){if(ar.value===!0)uk();else{const{$q:t}=e;t.config.brand!==void 0&&lk(t.config.brand);const n=sk(nt,t.config);document.body.classList.add.apply(document.body.classList,n)}nt.is.ios===!0&&document.body.addEventListener("touchstart",Kt),window.addEventListener("keydown",ik,!0)}}},Lb=()=>!0;function dk(e){return typeof e=="string"&&e!==""&&e!=="/"&&e!=="#/"}function fk(e){return e.startsWith("#")===!0&&(e=e.substring(1)),e.startsWith("/")===!1&&(e="/"+e),e.endsWith("/")===!0&&(e=e.substring(0,e.length-1)),"#"+e}function hk(e){if(e.backButtonExit===!1)return()=>!1;if(e.backButtonExit==="*")return Lb;const t=["#/"];return Array.isArray(e.backButtonExit)===!0&&t.push(...e.backButtonExit.filter(dk).map(fk)),()=>t.includes(window.location.hash)}var su={__history:[],add:Kt,remove:Kt,install({$q:e}){if(this.__installed===!0)return;const{cordova:t,capacitor:n}=nt.is;if(t!==!0&&n!==!0)return;const r=e.config[t===!0?"cordova":"capacitor"];if(r?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=i=>{i.condition===void 0&&(i.condition=Lb),this.__history.push(i)},this.remove=i=>{const s=this.__history.indexOf(i);s>=0&&this.__history.splice(s,1)};const a=hk(Object.assign({backButtonExit:!0},r)),o=()=>{if(this.__history.length){const i=this.__history[this.__history.length-1];i.condition()===!0&&(this.__history.pop(),i.handler())}else a()===!0?navigator.app.exitApp():window.history.back()};t===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",o,!1)}):window.Capacitor.Plugins.App.addListener("backButton",o)}},Qf={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:e=>e?`Expand "${e}"`:"Expand",collapse:e=>e?`Collapse "${e}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:e=>`Previous ${e} years`,nextRangeYears:e=>`Next ${e} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:e=>e===1?"1 record selected.":(e===0?"No":e)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(e,t,n)=>e+"-"+t+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function Nm(){const e=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof e=="string")return e.split(/[-_]/).map((t,n)=>n===0?t.toLowerCase():n>1||t.length<4?t.toUpperCase():t[0].toUpperCase()+t.slice(1).toLowerCase()).join("-")}var No=xo({__qLang:{}},{getLocale:Nm,set(e=Qf,t){const n={...e,rtl:e.rtl===!0,getLocale:Nm};{if(n.set=No.set,No.__langConfig===void 0||No.__langConfig.noHtmlAttrs!==!0){const r=document.documentElement;r.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",n.isoName)}Object.assign(No.__qLang,n)}},install({$q:e,lang:t,ssrContext:n}){e.lang=No.__qLang,No.__langConfig=e.config.lang,this.__installed===!0?t!==void 0&&this.set(t):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(a=>a!=="set"&&a!=="getLocale")}}),this.set(t||Qf))}}),Bc=No,vk={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},Yf=xo({iconMapFn:null,__qIconSet:{}},{set(e,t){const n={...e};n.set=Yf.set,Object.assign(Yf.__qIconSet,n)},install({$q:e,iconSet:t,ssrContext:n}){e.config.iconMapFn!==void 0&&(this.iconMapFn=e.config.iconMapFn),e.iconSet=this.__qIconSet,mn(e,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?t!==void 0&&this.set(t):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(a=>a!=="set")}}),this.set(t||vk))}}),Vb=Yf,pk="_q_",zb="_q_t_",$b="_q_s_",si="_q_l_",Hb="_q_pc_",Wb="_q_f_",Ub="_q_fo_",jb="_q_tabs_",Gb="_q_u_";function Rt(){}var Bl={},Kb=!1;function mk(){Kb=!0}function Br(e,t){if(e===t)return!0;if(e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;let n,r;if(e.constructor===Array){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(Br(e[r],t[r])!==!0)return!1;return!0}if(e.constructor===Map){if(e.size!==t.size)return!1;let o=e.entries();for(r=o.next();r.done!==!0;){if(t.has(r.value[0])!==!0)return!1;r=o.next()}for(o=e.entries(),r=o.next();r.done!==!0;){if(Br(r.value[1],t.get(r.value[0]))!==!0)return!1;r=o.next()}return!0}if(e.constructor===Set){if(e.size!==t.size)return!1;const o=e.entries();for(r=o.next();r.done!==!0;){if(t.has(r.value[0])!==!0)return!1;r=o.next()}return!0}if(e.buffer!=null&&e.buffer.constructor===ArrayBuffer){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const a=Object.keys(e).filter(o=>e[o]!==void 0);if(n=a.length,n!==Object.keys(t).filter(o=>t[o]!==void 0).length)return!1;for(r=n;r--!==0;){const o=a[r];if(Br(e[o],t[o])!==!0)return!1}return!0}return e!==e&&t!==t}function kn(e){return e!==null&&typeof e=="object"&&Array.isArray(e)!==!0}function Jf(e){return Object.prototype.toString.call(e)==="[object Date]"}function gk(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function uu(e){return typeof e=="number"&&isFinite(e)}var Om=[Ob,ck,ak,rk,su,Bc,Vb];function Xb(e,t){const n=Db(e);n.config.globalProperties=t.config.globalProperties;const{reload:r,...a}=t._context;return Object.assign(n._context,a),n}function Bm(e,t){t.forEach(n=>{n.install(e),n.__installed=!0})}function yk(e,t,n){e.config.globalProperties.$q=n.$q,e.provide(pk,n.$q),Bm(n,Om),t.components!==void 0&&Object.values(t.components).forEach(r=>{kn(r)===!0&&r.name!==void 0&&e.component(r.name,r)}),t.directives!==void 0&&Object.values(t.directives).forEach(r=>{kn(r)===!0&&r.name!==void 0&&e.directive(r.name,r)}),t.plugins!==void 0&&Bm(n,Object.values(t.plugins).filter(r=>typeof r.install=="function"&&Om.includes(r)===!1)),ar.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(r=>{r()}),n.$q.onSSRHydrated=()=>{}})}var bk=function(e,t={}){const n={version:"2.18.6"};Kb===!1?(t.config!==void 0&&Object.assign(Bl,t.config),n.config={...Bl},mk()):n.config=t.config||{},yk(e,t,{parentApp:e,$q:n,lang:t.lang,iconSet:t.iconSet,onSSRHydrated:[]})},qm=["B","KB","MB","GB","TB","PB"];function Zf(e,t=1){let n=0;for(;parseInt(e,10)>=1024&&n<qm.length-1;)e/=1024,++n;return`${e.toFixed(t)}${qm[n]}`}function Ft(e,t,n){return n<=t?t:Math.min(n,Math.max(t,e))}function ql(e,t,n){if(n<=t)return t;const r=n-t+1;let a=t+(e-t)%r;return a<t&&(a=r+a),a===0?0:a}function Et(e,t=2,n="0"){if(e==null)return e;const r=""+e;return r.length>=t?r:new Array(t-r.length+1).join(n)+r}var cv=XMLHttpRequest,Qb=cv.prototype.open,xk=["top","right","bottom","left"],Ll=[],js=0;function wk({p:e,pos:t,active:n,horiz:r,reverse:a,dir:o}){let i=1,s=1;return r===!0?(a===!0&&(i=-1),t==="bottom"&&(s=-1),{transform:`translate3d(${i*(e-100)}%,${n?0:s*-200}%,0)`}):(a===!0&&(s=-1),t==="right"&&(i=-1),{transform:`translate3d(${n?0:o*i*-200}%,${s*(e-100)}%,0)`})}function _k(e,t){return typeof t!="number"&&(e<25?t=Math.random()*3+3:e<65?t=Math.random()*3:e<85?t=Math.random()*2:e<99?t=.6:t=0),Ft(e+t,0,100)}function Ck(e){js++,Ll.push(e),!(js>1)&&(cv.prototype.open=function(t,n){const r=[],a=()=>{Ll.forEach(i=>{(i.hijackFilter.value===null||i.hijackFilter.value(n)===!0)&&(i.start(),r.push(i.stop))})},o=()=>{r.forEach(i=>{i()})};this.addEventListener("loadstart",a,{once:!0}),this.addEventListener("loadend",o,{once:!0}),Qb.apply(this,arguments)})}function Sk(e){Ll=Ll.filter(t=>t.start!==e),js=Math.max(0,js-1),js===0&&(cv.prototype.open=Qb)}var kk=Ce({name:"QAjaxBar",props:{position:{type:String,default:"top",validator:e=>xk.includes(e)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,hijackFilter:Function},emits:["start","stop"],setup(e,{emit:t}){const{proxy:n}=Ie(),r=Z(0),a=Z(!1),o=Z(!0);let i=0,s=null,u;const l=C(()=>`q-loading-bar q-loading-bar--${e.position}`+(e.color!==void 0?` bg-${e.color}`:"")+(o.value===!0?"":" no-transition")),c=C(()=>e.position==="top"||e.position==="bottom"),d=C(()=>c.value===!0?"height":"width"),f=C(()=>{const b=a.value,g=wk({p:r.value,pos:e.position,active:b,horiz:c.value,reverse:n.$q.lang.rtl===!0&&["top","bottom"].includes(e.position)?e.reverse===!1:e.reverse,dir:n.$q.lang.rtl===!0?-1:1});return g[d.value]=e.size,g.opacity=b?1:0,g}),h=C(()=>a.value===!0?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r.value}:{"aria-hidden":"true"});function v(b=300){const g=u;return u=Math.max(0,b)||0,i++,i>1?(g===0&&b>0?y():s!==null&&g>0&&b<=0&&(clearTimeout(s),s=null),i):(s!==null&&clearTimeout(s),t("start"),r.value=0,s=setTimeout(()=>{s=null,o.value=!0,b>0&&y()},a._value===!0?500:1),a._value!==!0&&(a.value=!0,o.value=!1),i)}function m(b){return i>0&&(r.value=_k(r.value,b)),i}function p(){if(i=Math.max(0,i-1),i>0)return i;s!==null&&(clearTimeout(s),s=null),t("stop");const b=()=>{o.value=!0,r.value=100,s=setTimeout(()=>{s=null,a.value=!1},1e3)};return r.value===0?s=setTimeout(b,1):b(),i}function y(){r.value<100&&(s=setTimeout(()=>{s=null,m(),y()},u))}let x;return Nt(()=>{e.skipHijack!==!0&&(x=!0,Ck({start:v,stop:p,hijackFilter:C(()=>e.hijackFilter||null)}))}),ft(()=>{s!==null&&clearTimeout(s),x===!0&&Sk(v)}),Object.assign(n,{start:v,stop:p,increment:m}),()=>_("div",{class:l.value,style:f.value,...h.value})}}),eh={xs:18,sm:24,md:32,lg:38,xl:46},qa={size:String};function La(e,t=eh){return C(()=>e.size!==void 0?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null)}function He(e,t){return e!==void 0&&e()||t}function Cu(e,t){if(e!==void 0){const n=e();if(n!=null)return n.slice()}return t}function Jt(e,t){return e!==void 0?t.concat(e()):t}function dv(e,t){return e===void 0?t:t!==void 0?t.concat(e()):e()}function Ir(e,t,n,r,a,o){t.key=r+a;const i=_(e,t,n);return a===!0?gr(i,o()):i}var Lm="0 0 24 24",Md=e=>e,Dd=e=>`ionicons ${e}`,Yb={"mdi-":e=>`mdi ${e}`,"icon-":Md,"bt-":e=>`bt ${e}`,"eva-":e=>`eva ${e}`,"ion-md":Dd,"ion-ios":Dd,"ion-logo":Dd,"iconfont ":Md,"ti-":e=>`themify-icon ${e}`,"bi-":e=>`bootstrap-icons ${e}`,"i-":Md},Jb={o_:"-outlined",r_:"-round",s_:"-sharp"},Zb={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},Ek=new RegExp("^("+Object.keys(Yb).join("|")+")"),Tk=new RegExp("^("+Object.keys(Jb).join("|")+")"),Vm=new RegExp("^("+Object.keys(Zb).join("|")+")"),Rk=/^[Mm]\s?[-+]?\.?\d/,Ak=/^img:/,Ik=/^svguse:/,Mk=/^ion-/,Dk=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,Ct=Ce({name:"QIcon",props:{...qa,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(e,{slots:t}){const{proxy:{$q:n}}=Ie(),r=La(e),a=C(()=>"q-icon"+(e.left===!0?" on-left":"")+(e.right===!0?" on-right":"")+(e.color!==void 0?` text-${e.color}`:"")),o=C(()=>{let i,s=e.name;if(s==="none"||!s)return{none:!0};if(n.iconMapFn!==null){const c=n.iconMapFn(s);if(c!==void 0)if(c.icon!==void 0){if(s=c.icon,s==="none"||!s)return{none:!0}}else return{cls:c.cls,content:c.content!==void 0?c.content:" "}}if(Rk.test(s)===!0){const[c,d=Lm]=s.split("|");return{svg:!0,viewBox:d,nodes:c.split("&&").map(f=>{const[h,v,m]=f.split("@@");return _("path",{style:v,d:h,transform:m})})}}if(Ak.test(s)===!0)return{img:!0,src:s.substring(4)};if(Ik.test(s)===!0){const[c,d=Lm]=s.split("|");return{svguse:!0,src:c.substring(7),viewBox:d}}let u=" ";const l=s.match(Ek);if(l!==null)i=Yb[l[1]](s);else if(Dk.test(s)===!0)i=s;else if(Mk.test(s)===!0)i=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${s.substring(3)}`;else if(Vm.test(s)===!0){i="notranslate material-symbols";const c=s.match(Vm);c!==null&&(s=s.substring(6),i+=Zb[c[1]]),u=s}else{i="notranslate material-icons";const c=s.match(Tk);c!==null&&(s=s.substring(2),i+=Jb[c[1]]),u=s}return{cls:i,content:u}});return()=>{const i={class:a.value,style:r.value,"aria-hidden":"true"};return o.value.none===!0?_(e.tag,i,He(t.default)):o.value.img===!0?_(e.tag,i,Jt(t.default,[_("img",{src:o.value.src})])):o.value.svg===!0?_(e.tag,i,Jt(t.default,[_("svg",{viewBox:o.value.viewBox||"0 0 24 24"},o.value.nodes)])):o.value.svguse===!0?_(e.tag,i,Jt(t.default,[_("svg",{viewBox:o.value.viewBox},[_("use",{"xlink:href":o.value.src})])])):(o.value.cls!==void 0&&(i.class+=" "+o.value.cls),_(e.tag,i,Jt(t.default,[o.value.content])))}}});Ce({name:"QAvatar",props:{...qa,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:t}){const n=La(e),r=C(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),a=C(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const o=e.icon!==void 0?[_(Ct,{name:e.icon})]:void 0;return _("div",{class:r.value,style:n.value},[_("div",{class:"q-avatar__content row flex-center overflow-hidden",style:a.value},dv(t.default,o))])}}});var Pk=["top","middle","bottom"];Ce({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Pk.includes(e)}},setup(e,{slots:t}){const n=C(()=>e.align!==void 0?{verticalAlign:e.align}:null),r=C(()=>{const a=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(a!==void 0?` text-${a}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>_("div",{class:r.value,style:n.value,role:"status","aria-label":e.label},Jt(t.default,e.label!==void 0?[e.label]:[]))}});var wt={dark:{type:Boolean,default:null}};function _t(e,t){return C(()=>e.dark===null?t.dark.isActive:e.dark)}Ce({name:"QBanner",props:{...wt,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:t}){const{proxy:{$q:n}}=Ie(),r=_t(e,n),a=C(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(r.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),o=C(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const i=[_("div",{class:"q-banner__avatar col-auto row items-center self-start"},He(t.avatar)),_("div",{class:"q-banner__content col text-body2"},He(t.default))],s=He(t.action);return s!==void 0&&i.push(_("div",{class:o.value},s)),_("div",{class:a.value+(e.inlineActions===!1&&s!==void 0?" q-banner--top-padding":""),role:"alert"},i)}}});Ce({name:"QBar",props:{...wt,dense:Boolean},setup(e,{slots:t}){const{proxy:{$q:n}}=Ie(),r=_t(e,n),a=C(()=>`q-bar row no-wrap items-center q-bar--${e.dense===!0?"dense":"standard"}  q-bar--${r.value===!0?"dark":"light"}`);return()=>_("div",{class:a.value,role:"toolbar"},He(t.default))}});var ex={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},Fk=Object.keys(ex),fv={align:{type:String,validator:e=>Fk.includes(e)}};function hv(e){return C(()=>{const t=e.align===void 0?e.vertical===!0?"stretch":"left":e.align;return`${e.vertical===!0?"items":"justify"}-${ex[t]}`})}function _l(e){if(Object(e.$parent)===e.$parent)return e.$parent;let{parent:t}=e.$;for(;Object(t)===t;){if(Object(t.proxy)===t.proxy)return t.proxy;t=t.parent}}function tx(e,t){typeof t.type=="symbol"?Array.isArray(t.children)===!0&&t.children.forEach(n=>{tx(e,n)}):e.add(t)}function vv(e){const t=new Set;return e.forEach(n=>{tx(t,n)}),Array.from(t)}function pv(e){return e.appContext.config.globalProperties.$router!==void 0}function lo(e){return e.isUnmounted===!0||e.isDeactivated===!0}var Nk=["",!0];Ce({name:"QBreadcrumbs",props:{...fv,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:t}){const n=hv(e),r=C(()=>`flex items-center ${n.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),a=C(()=>e.separatorColor?` text-${e.separatorColor}`:""),o=C(()=>` text-${e.activeColor}`);return()=>{if(t.default===void 0)return;const i=vv(He(t.default));if(i.length===0)return;let s=1;const u=[],l=i.filter(d=>d.type?.name==="QBreadcrumbsEl").length,c=t.separator!==void 0?t.separator:()=>e.separator;return i.forEach(d=>{if(d.type?.name==="QBreadcrumbsEl"){const f=s<l,h=d.props!==null&&Nk.includes(d.props.disable),v=(f===!0?"":" q-breadcrumbs--last")+(h!==!0&&f===!0?o.value:"");s++,u.push(_("div",{class:`flex items-center${v}`},[d])),f===!0&&u.push(_("div",{class:"q-breadcrumbs__separator"+a.value},c()))}else u.push(d)}),_("div",{class:"q-breadcrumbs"},[_("div",{class:r.value},u)])}}});function zm(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}function $m(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ok(e,t){for(const n in t){const r=t[n],a=e[n];if(typeof r=="string"){if(r!==a)return!1}else if(Array.isArray(a)===!1||a.length!==r.length||r.some((o,i)=>o!==a[i]))return!1}return!0}function Hm(e,t){return Array.isArray(t)===!0?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Bk(e,t){return Array.isArray(e)===!0?Hm(e,t):Array.isArray(t)===!0?Hm(t,e):e===t}function qk(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(Bk(e[n],t[n])===!1)return!1;return!0}var nx={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},Su={...nx,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function qc({fallbackTag:e,useDisableForRouterLinkProps:t=!0}={}){const n=Ie(),{props:r,proxy:a,emit:o}=n,i=pv(n),s=C(()=>r.disable!==!0&&r.href!==void 0),u=C(t===!0?()=>i===!0&&r.disable!==!0&&s.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!=="":()=>i===!0&&s.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!==""),l=C(()=>u.value===!0?x(r.to):null),c=C(()=>l.value!==null),d=C(()=>s.value===!0||c.value===!0),f=C(()=>r.type==="a"||d.value===!0?"a":r.tag||e||"div"),h=C(()=>s.value===!0?{href:r.href,target:r.target}:c.value===!0?{href:l.value.href,target:r.target}:{}),v=C(()=>{if(c.value===!1)return-1;const{matched:w}=l.value,{length:S}=w,E=w[S-1];if(E===void 0)return-1;const R=a.$route.matched;if(R.length===0)return-1;const A=R.findIndex($m.bind(null,E));if(A!==-1)return A;const k=zm(w[S-2]);return S>1&&zm(E)===k&&R[R.length-1].path!==k?R.findIndex($m.bind(null,w[S-2])):A}),m=C(()=>c.value===!0&&v.value!==-1&&Ok(a.$route.params,l.value.params)),p=C(()=>m.value===!0&&v.value===a.$route.matched.length-1&&qk(a.$route.params,l.value.params)),y=C(()=>c.value===!0?p.value===!0?` ${r.exactActiveClass} ${r.activeClass}`:r.exact===!0?"":m.value===!0?` ${r.activeClass}`:"":"");function x(w){try{return a.$router.resolve(w)}catch{}return null}function b(w,{returnRouterError:S,to:E=r.to,replace:R=r.replace}={}){if(r.disable===!0)return w.preventDefault(),Promise.resolve(!1);if(w.metaKey||w.altKey||w.ctrlKey||w.shiftKey||w.button!==void 0&&w.button!==0||r.target==="_blank")return Promise.resolve(!1);w.preventDefault();const A=a.$router[R===!0?"replace":"push"](E);return S===!0?A:A.then(()=>{}).catch(()=>{})}function g(w){if(c.value===!0){const S=E=>b(w,E);o("click",w,S),w.defaultPrevented!==!0&&S()}else o("click",w)}return{hasRouterLink:c,hasHrefLink:s,hasLink:d,linkTag:f,resolvedLink:l,linkIsActive:m,linkIsExactActive:p,linkClass:y,linkAttrs:h,getLink:x,navigateToRouterLink:b,navigateOnClick:g}}Ce({name:"QBreadcrumbsEl",props:{...Su,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:t}){const{linkTag:n,linkAttrs:r,linkClass:a,navigateOnClick:o}=qc(),i=C(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+a.value:"q-breadcrumbs__el--disable"),...r.value,onClick:o})),s=C(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const u=[];return e.icon!==void 0&&u.push(_(Ct,{class:s.value,name:e.icon})),e.label!==void 0&&u.push(e.label),_(n.value,{...i.value},Jt(t.default,u))}}});var nn={size:{type:[String,Number],default:"1em"},color:String};function rn(e){return{cSize:C(()=>e.size in eh?`${eh[e.size]}px`:e.size),classes:C(()=>"q-spinner"+(e.color?` text-${e.color}`:""))}}var Wr=Ce({name:"QSpinner",props:{...nn,thickness:{type:Number,default:5}},setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value+" q-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[_("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});function Vl(e){if(e===window)return{top:0,left:0};const{top:t,left:n}=e.getBoundingClientRect();return{top:t,left:n}}function as(e){return e===window?window.innerHeight:e.getBoundingClientRect().height}function th(e,t){const n=e.style;for(const r in t)n[r]=t[r]}function Lk(e){if(e==null)return;if(typeof e=="string")try{return document.querySelector(e)||void 0}catch{return}const t=Ko(e);if(t)return t.$el||t}function rx(e,t){if(e==null||e.contains(t)===!0)return!0;for(let n=e.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(t))return!0;return!1}function ax(e,t=250){let n=!1,r;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},t),r=e.apply(this,arguments)),r}}function Wm(e,t,n,r){n.modifiers.stop===!0&&Gt(e);const a=n.modifiers.color;let o=n.modifiers.center;o=o===!0||r===!0;const i=document.createElement("span"),s=document.createElement("span"),u=Zn(e),{left:l,top:c,width:d,height:f}=t.getBoundingClientRect(),h=Math.sqrt(d*d+f*f),v=h/2,m=`${(d-h)/2}px`,p=o?m:`${u.left-l-v}px`,y=`${(f-h)/2}px`,x=o?y:`${u.top-c-v}px`;s.className="q-ripple__inner",th(s,{height:`${h}px`,width:`${h}px`,transform:`translate3d(${p},${x},0) scale3d(.2,.2,1)`,opacity:0}),i.className=`q-ripple${a?" text-"+a:""}`,i.setAttribute("dir","ltr"),i.appendChild(s),t.appendChild(i);const b=()=>{i.remove(),clearTimeout(g)};n.abort.push(b);let g=setTimeout(()=>{s.classList.add("q-ripple__inner--enter"),s.style.transform=`translate3d(${m},${y},0) scale3d(1,1,1)`,s.style.opacity=.2,g=setTimeout(()=>{s.classList.remove("q-ripple__inner--enter"),s.classList.add("q-ripple__inner--leave"),s.style.opacity=0,g=setTimeout(()=>{i.remove(),n.abort.splice(n.abort.indexOf(b),1)},275)},250)},50)}function Um(e,{modifiers:t,value:n,arg:r}){const a=Object.assign({},e.cfg.ripple,t,n);e.modifiers={early:a.early===!0,stop:a.stop===!0,center:a.center===!0,color:a.color||r,keyCodes:[].concat(a.keyCodes||13)}}var Lc=jr({name:"ripple",beforeMount(e,t){const n=t.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const r={cfg:n,enabled:t.value!==!1,modifiers:{},abort:[],start(a){r.enabled===!0&&a.qSkipRipple!==!0&&a.type===(r.modifiers.early===!0?"pointerdown":"click")&&Wm(a,e,r,a.qKeyEvent===!0)},keystart:ax(a=>{r.enabled===!0&&a.qSkipRipple!==!0&&Ar(a,r.modifiers.keyCodes)===!0&&a.type===`key${r.modifiers.early===!0?"down":"up"}`&&Wm(a,e,r,!0)},300)};Um(r,t),e.__qripple=r,Qt(r,"main",[[e,"pointerdown","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const n=e.__qripple;n!==void 0&&(n.enabled=t.value!==!1,n.enabled===!0&&Object(t.value)===t.value&&Um(n,t))}},beforeUnmount(e){const t=e.__qripple;t!==void 0&&(t.abort.forEach(n=>{n()}),Kn(t,"main"),delete e._qripple)}}),zl={none:0,xs:4,sm:8,md:16,lg:24,xl:32},Vk={xs:8,sm:10,md:14,lg:20,xl:24},zk=["button","submit","reset"],$k=/[^\s]\/[^\s]/,ox=["flat","outline","push","unelevated"];function mv(e,t){return e.flat===!0?"flat":e.outline===!0?"outline":e.push===!0?"push":e.unelevated===!0?"unelevated":t}function ix(e){const t=mv(e);return t!==void 0?{[t]:!0}:{}}var gv={...qa,...nx,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...ox.reduce((e,t)=>(e[t]=Boolean)&&e,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...fv.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},Hk={...gv,round:Boolean};function Wk(e){const t=La(e,Vk),n=hv(e),{hasRouterLink:r,hasLink:a,linkTag:o,linkAttrs:i,navigateOnClick:s}=qc({fallbackTag:"button"}),u=C(()=>{const p=e.fab===!1&&e.fabMini===!1?t.value:{};return e.padding!==void 0?Object.assign({},p,{padding:e.padding.split(/\s+/).map(y=>y in zl?zl[y]+"px":y).join(" "),minWidth:"0",minHeight:"0"}):p}),l=C(()=>e.rounded===!0||e.fab===!0||e.fabMini===!0),c=C(()=>e.disable!==!0&&e.loading!==!0),d=C(()=>c.value===!0?e.tabindex||0:-1),f=C(()=>mv(e,"standard")),h=C(()=>{const p={tabindex:d.value};return a.value===!0?Object.assign(p,i.value):zk.includes(e.type)===!0&&(p.type=e.type),o.value==="a"?(e.disable===!0?p["aria-disabled"]="true":p.href===void 0&&(p.role="button"),r.value!==!0&&$k.test(e.type)===!0&&(p.type=e.type)):e.disable===!0&&(p.disabled="",p["aria-disabled"]="true"),e.loading===!0&&e.percentage!==void 0&&Object.assign(p,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),p}),v=C(()=>{let p;e.color!==void 0?e.flat===!0||e.outline===!0?p=`text-${e.textColor||e.color}`:p=`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(p=`text-${e.textColor}`);const y=e.round===!0?"round":`rectangle${l.value===!0?" q-btn--rounded":e.square===!0?" q-btn--square":""}`;return`q-btn--${f.value} q-btn--${y}`+(p!==void 0?" "+p:"")+(c.value===!0?" q-btn--actionable q-focusable q-hoverable":e.disable===!0?" disabled":"")+(e.fab===!0?" q-btn--fab":e.fabMini===!0?" q-btn--fab-mini":"")+(e.noCaps===!0?" q-btn--no-uppercase":"")+(e.dense===!0?" q-btn--dense":"")+(e.stretch===!0?" no-border-radius self-stretch":"")+(e.glossy===!0?" glossy":"")+(e.square?" q-btn--square":"")}),m=C(()=>n.value+(e.stack===!0?" column":" row")+(e.noWrap===!0?" no-wrap text-no-wrap":"")+(e.loading===!0?" q-btn__content--hidden":""));return{classes:v,style:u,innerClasses:m,attributes:h,hasLink:a,linkTag:o,navigateOnClick:s,isActionable:c}}var{passiveCapture:xr}=Ot,pi=null,mi=null,gi=null,Tt=Ce({name:"QBtn",props:{...Hk,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(e,{slots:t,emit:n}){const{proxy:r}=Ie(),{classes:a,style:o,innerClasses:i,attributes:s,hasLink:u,linkTag:l,navigateOnClick:c,isActionable:d}=Wk(e),f=Z(null),h=Z(null);let v=null,m,p=null;const y=C(()=>e.label!==void 0&&e.label!==null&&e.label!==""),x=C(()=>e.disable===!0||e.ripple===!1?!1:{keyCodes:u.value===!0?[13,32]:[13],...e.ripple===!0?{}:e.ripple}),b=C(()=>({center:e.round})),g=C(()=>{const I=Math.max(0,Math.min(100,e.percentage));return I>0?{transition:"transform 0.6s",transform:`translateX(${I-100}%)`}:{}}),w=C(()=>{if(e.loading===!0)return{onMousedown:D,onTouchstart:D,onClick:D,onKeydown:D,onKeyup:D};if(d.value===!0){const I={onClick:E,onKeydown:R,onMousedown:k};if(r.$q.platform.has.touch===!0){const F=e.onTouchstart!==void 0?"":"Passive";I[`onTouchstart${F}`]=A}return I}return{onClick:it}}),S=C(()=>({ref:f,class:"q-btn q-btn-item non-selectable no-outline "+a.value,style:o.value,...s.value,...w.value}));function E(I){if(f.value!==null){if(I!==void 0){if(I.defaultPrevented===!0)return;const F=document.activeElement;if(e.type==="submit"&&F!==document.body&&f.value.contains(F)===!1&&F.contains(f.value)===!1){I.qAvoidFocus!==!0&&f.value.focus();const V=()=>{document.removeEventListener("keydown",it,!0),document.removeEventListener("keyup",V,xr),f.value?.removeEventListener("blur",V,xr)};document.addEventListener("keydown",it,!0),document.addEventListener("keyup",V,xr),f.value.addEventListener("blur",V,xr)}}c(I)}}function R(I){f.value!==null&&(n("keydown",I),Ar(I,[13,32])===!0&&mi!==f.value&&(mi!==null&&T(),I.defaultPrevented!==!0&&(I.qAvoidFocus!==!0&&f.value.focus(),mi=f.value,f.value.classList.add("q-btn--active"),document.addEventListener("keyup",M,!0),f.value.addEventListener("blur",M,xr)),it(I)))}function A(I){f.value!==null&&(n("touchstart",I),I.defaultPrevented!==!0&&(pi!==f.value&&(pi!==null&&T(),pi=f.value,v=I.target,v.addEventListener("touchcancel",M,xr),v.addEventListener("touchend",M,xr)),m=!0,p!==null&&clearTimeout(p),p=setTimeout(()=>{p=null,m=!1},200)))}function k(I){f.value!==null&&(I.qSkipRipple=m===!0,n("mousedown",I),I.defaultPrevented!==!0&&gi!==f.value&&(gi!==null&&T(),gi=f.value,f.value.classList.add("q-btn--active"),document.addEventListener("mouseup",M,xr)))}function M(I){if(f.value!==null&&!(I?.type==="blur"&&document.activeElement===f.value)){if(I?.type==="keyup"){if(mi===f.value&&Ar(I,[13,32])===!0){const F=new MouseEvent("click",I);F.qKeyEvent=!0,I.defaultPrevented===!0&&gn(F),I.cancelBubble===!0&&Gt(F),f.value.dispatchEvent(F),it(I),I.qKeyEvent=!0}n("keyup",I)}T()}}function T(I){const F=h.value;I!==!0&&(pi===f.value||gi===f.value)&&F!==null&&F!==document.activeElement&&(F.setAttribute("tabindex",-1),F.focus()),pi===f.value&&(v!==null&&(v.removeEventListener("touchcancel",M,xr),v.removeEventListener("touchend",M,xr)),pi=v=null),gi===f.value&&(document.removeEventListener("mouseup",M,xr),gi=null),mi===f.value&&(document.removeEventListener("keyup",M,!0),f.value?.removeEventListener("blur",M,xr),mi=null),f.value?.classList.remove("q-btn--active")}function D(I){it(I),I.qSkipRipple=!0}return ft(()=>{T(!0)}),Object.assign(r,{click:I=>{d.value===!0&&E(I)}}),()=>{let I=[];e.icon!==void 0&&I.push(_(Ct,{name:e.icon,left:e.stack!==!0&&y.value===!0,role:"img"})),y.value===!0&&I.push(_("span",{class:"block"},[e.label])),I=Jt(t.default,I),e.iconRight!==void 0&&e.round===!1&&I.push(_(Ct,{name:e.iconRight,right:e.stack!==!0&&y.value===!0,role:"img"}));const F=[_("span",{class:"q-focus-helper",ref:h})];return e.loading===!0&&e.percentage!==void 0&&F.push(_("span",{class:"q-btn__progress absolute-full overflow-hidden"+(e.darkPercentage===!0?" q-btn__progress--dark":"")},[_("span",{class:"q-btn__progress-indicator fit block",style:g.value})])),F.push(_("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+i.value},I)),e.loading!==null&&F.push(_(pn,{name:"q-transition--fade"},()=>e.loading===!0?[_("span",{key:"loading",class:"absolute-full flex flex-center"},t.loading!==void 0?t.loading():[_(Wr)])]:null)),gr(_(l.value,S.value,F),[[Lc,x.value,void 0,b.value]])}}}),sx=Ce({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const n=C(()=>{const r=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(a=>e[a]===!0).map(a=>`q-btn-group--${a}`).join(" ");return`q-btn-group row no-wrap${r.length!==0?" "+r:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>_("div",{class:n.value},He(t.default))}});function Vr(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Ob.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}var ux={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},lx={...ux,contextMenu:Boolean};function yv({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:r,proxy:a,emit:o}=Ie(),i=Z(null);let s=null;function u(h){return i.value===null?!1:h===void 0||h.touches===void 0||h.touches.length<=1}const l={};n===void 0&&(Object.assign(l,{hide(h){a.hide(h)},toggle(h){a.toggle(h),h.qAnchorHandled=!0},toggleKey(h){Ar(h,13)===!0&&l.toggle(h)},contextClick(h){a.hide(h),gn(h),mt(()=>{a.show(h),h.qAnchorHandled=!0})},prevent:gn,mobileTouch(h){if(l.mobileCleanup(h),u(h)!==!0)return;a.hide(h),i.value.classList.add("non-selectable");const v=h.target;Qt(l,"anchor",[[v,"touchmove","mobileCleanup","passive"],[v,"touchend","mobileCleanup","passive"],[v,"touchcancel","mobileCleanup","passive"],[i.value,"contextmenu","prevent","notPassive"]]),s=setTimeout(()=>{s=null,a.show(h),h.qAnchorHandled=!0},300)},mobileCleanup(h){i.value.classList.remove("non-selectable"),s!==null&&(clearTimeout(s),s=null),e.value===!0&&h!==void 0&&Vr()}}),n=function(h=r.contextMenu){if(r.noParentEvent===!0||i.value===null)return;let v;h===!0?a.$q.platform.is.mobile===!0?v=[[i.value,"touchstart","mobileTouch","passive"]]:v=[[i.value,"mousedown","hide","passive"],[i.value,"contextmenu","contextClick","notPassive"]]:v=[[i.value,"click","toggle","passive"],[i.value,"keyup","toggleKey","passive"]],Qt(l,"anchor",v)});function c(){Kn(l,"anchor")}function d(h){for(i.value=h;i.value.classList.contains("q-anchor--skip");)i.value=i.value.parentNode;n()}function f(){if(r.target===!1||r.target===""||a.$el.parentNode===null)i.value=null;else if(r.target===!0)d(a.$el.parentNode);else{let h=r.target;if(typeof r.target=="string")try{h=document.querySelector(r.target)}catch{h=void 0}h!=null?(i.value=h.$el||h,n()):(i.value=null,console.error(`Anchor: target "${r.target}" not found`))}}return ke(()=>r.contextMenu,h=>{i.value!==null&&(c(),n(h))}),ke(()=>r.target,()=>{i.value!==null&&c(),f()}),ke(()=>r.noParentEvent,h=>{i.value!==null&&(h===!0?c():n())}),Nt(()=>{f(),t!==!0&&r.modelValue===!0&&i.value===null&&o("update:modelValue",!1)}),ft(()=>{s!==null&&clearTimeout(s),c()}),{anchorEl:i,canShow:u,anchorEvents:l}}function cx(e,t){const n=Z(null);let r;function a(s,u){const l=`${u!==void 0?"add":"remove"}EventListener`,c=u!==void 0?u:r;s!==window&&s[l]("scroll",c,Ot.passive),window[l]("scroll",c,Ot.passive),r=u}function o(){n.value!==null&&(a(n.value),n.value=null)}const i=ke(()=>e.noParentEvent,()=>{n.value!==null&&(o(),t())});return ft(i),{localScrollTarget:n,unconfigureScrollTarget:o,changeScrollEvent:a}}var vs={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},ps=["beforeShow","show","beforeHide","hide"];function ms({showing:e,canShow:t,hideOnRouteChange:n,handleShow:r,handleHide:a,processOnMount:o}){const i=Ie(),{props:s,emit:u,proxy:l}=i;let c;function d(x){e.value===!0?v(x):f(x)}function f(x){if(s.disable===!0||x?.qAnchorHandled===!0||t!==void 0&&t(x)!==!0)return;const b=s["onUpdate:modelValue"]!==void 0;b===!0&&(u("update:modelValue",!0),c=x,mt(()=>{c===x&&(c=void 0)})),(s.modelValue===null||b===!1)&&h(x)}function h(x){e.value!==!0&&(e.value=!0,u("beforeShow",x),r!==void 0?r(x):u("show",x))}function v(x){if(s.disable===!0)return;const b=s["onUpdate:modelValue"]!==void 0;b===!0&&(u("update:modelValue",!1),c=x,mt(()=>{c===x&&(c=void 0)})),(s.modelValue===null||b===!1)&&m(x)}function m(x){e.value!==!1&&(e.value=!1,u("beforeHide",x),a!==void 0?a(x):u("hide",x))}function p(x){s.disable===!0&&x===!0?s["onUpdate:modelValue"]!==void 0&&u("update:modelValue",!1):x===!0!==e.value&&(x===!0?h:m)(c)}ke(()=>s.modelValue,p),n!==void 0&&pv(i)===!0&&ke(()=>l.$route.fullPath,()=>{n.value===!0&&e.value===!0&&v()}),o===!0&&Nt(()=>{p(s.modelValue)});const y={show:f,hide:v,toggle:d};return Object.assign(l,y),y}var Vo=[],lu=[];function dx(e){lu=lu.filter(t=>t!==e)}function Uk(e){dx(e),lu.push(e)}function jm(e){dx(e),lu.length===0&&Vo.length!==0&&(Vo[Vo.length-1](),Vo=[])}function gs(e){lu.length===0?e():Vo.push(e)}function jk(e){Vo=Vo.filter(t=>t!==e)}var Hi=[],Gs=[],Gk=1,Za=document.body;function bv(e,t){const n=document.createElement("div");if(n.id=t!==void 0?`q-portal--${t}--${Gk++}`:e,Bl.globalNodes!==void 0){const r=Bl.globalNodes.class;r!==void 0&&(n.className=r)}return Za.appendChild(n),Hi.push(n),Gs.push(t),n}function fx(e){const t=Hi.indexOf(e);Hi.splice(t,1),Gs.splice(t,1),e.remove()}function Kk(e){if(e===Za)return;if(Za=e,Za===document.body||Gs.reduce((n,r)=>r==="dialog"?n+1:n,0)<2){Hi.forEach(n=>{n.contains(Za)===!1&&Za.appendChild(n)});return}const t=Gs.lastIndexOf("dialog");for(let n=0;n<Hi.length;n++){const r=Hi[n];(n===t||Gs[n]!=="dialog")&&r.contains(Za)===!1&&Za.appendChild(r)}}var Wi=[];function Xk(e){return Wi.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function hx(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return _l(e)}else if(e.__qPortal===!0){const n=_l(e);return n?.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=_l(e)}while(e!=null)}function Qk(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=hx(e,t);continue}e.hide(t)}e=_l(e)}}var Yk=Ce({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function Jk(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function xv(e,t,n,r){const a=Z(!1),o=Z(!1);let i=null;const s={},u=r==="dialog"&&Jk(e);function l(d){if(d===!0){jm(s),o.value=!0;return}o.value=!1,a.value===!1&&(u===!1&&i===null&&(i=bv(!1,r)),a.value=!0,Wi.push(e.proxy),Uk(s))}function c(d){if(o.value=!1,d!==!0)return;jm(s),a.value=!1;const f=Wi.indexOf(e.proxy);f!==-1&&Wi.splice(f,1),i!==null&&(fx(i),i=null)}return Dc(()=>{c(!0)}),e.proxy.__qPortal=!0,mn(e.proxy,"contentEl",()=>t.value),{showPortal:l,hidePortal:c,portalIsActive:a,portalIsAccessible:o,renderPortal:()=>u===!0?n():a.value===!0?[_(y2,{to:i},_(Yk,n))]:void 0}}var Xo={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Vc(e,t=()=>{},n=()=>{}){return{transitionProps:C(()=>{const r=`q-transition--${e.transitionShow||t()}`,a=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${r}-enter-from`,enterActiveClass:`${r}-enter-active`,enterToClass:`${r}-enter-to`,leaveFromClass:`${a}-leave-from`,leaveActiveClass:`${a}-leave-active`,leaveToClass:`${a}-leave-to`}}),transitionStyle:C(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function Ui(){let e;const t=Ie();function n(){e=void 0}return ca(n),ft(n),{removeTick:n,registerTick(r){e=r,mt(()=>{e===r&&(lo(t)===!1&&e(),e=void 0)})}}}function Oa(){let e=null;const t=Ie();function n(){e!==null&&(clearTimeout(e),e=null)}return ca(n),ft(n),{removeTimeout:n,registerTimeout(r,a){n(),lo(t)===!1&&(e=setTimeout(()=>{e=null,r()},a))}}}var ui=[Element,String],Zk=[null,document,document.body,document.scrollingElement,document.documentElement];function da(e,t){let n=Lk(t);if(n===void 0){if(e==null)return window;n=e.closest(".scroll,.scroll-y,.overflow-auto")}return Zk.includes(n)?window:n}function Hu(e){return(e===window?document.body:e).scrollHeight}function co(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function zc(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function vx(e,t,n=0){const r=arguments[3]===void 0?performance.now():arguments[3],a=co(e);if(n<=0){a!==t&&nh(e,t);return}requestAnimationFrame(o=>{const i=o-r,s=a+(t-a)/Math.max(i,n)*i;nh(e,s),s!==t&&vx(e,t,n-i,o)})}function px(e,t,n=0){const r=arguments[3]===void 0?performance.now():arguments[3],a=zc(e);if(n<=0){a!==t&&rh(e,t);return}requestAnimationFrame(o=>{const i=o-r,s=a+(t-a)/Math.max(i,n)*i;rh(e,s),s!==t&&px(e,t,n-i,o)})}function nh(e,t){if(e===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}e.scrollTop=t}function rh(e,t){if(e===window){window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}e.scrollLeft=t}function ji(e,t,n){if(n){vx(e,t,n);return}nh(e,t)}function Pd(e,t,n){if(n){px(e,t,n);return}rh(e,t)}var Wu;function Cl(){if(Wu!==void 0)return Wu;const e=document.createElement("p"),t=document.createElement("div");th(e,{width:"100%",height:"200px"}),th(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const n=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=t.clientWidth),t.remove(),Wu=n-r,Wu}function eE(e,t=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:t?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}var Qo=[],os;function tE(e){os=e.keyCode===27}function nE(){os===!0&&(os=!1)}function rE(e){os===!0&&(os=!1,Ar(e,27)===!0&&Qo[Qo.length-1](e))}function mx(e){window[e]("keydown",tE),window[e]("blur",nE),window[e]("keyup",rE),os=!1}function gx(e){nt.is.desktop===!0&&(Qo.push(e),Qo.length===1&&mx("addEventListener"))}function $l(e){const t=Qo.indexOf(e);t!==-1&&(Qo.splice(t,1),Qo.length===0&&mx("removeEventListener"))}var Yo=[];function yx(e){Yo[Yo.length-1](e)}function bx(e){nt.is.desktop===!0&&(Yo.push(e),Yo.length===1&&document.body.addEventListener("focusin",yx))}function ah(e){const t=Yo.indexOf(e);t!==-1&&(Yo.splice(t,1),Yo.length===0&&document.body.removeEventListener("focusin",yx))}var{notPassiveCapture:Hl}=Ot,Jo=[];function Wl(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=Wi.length-1;for(;n>=0;){const r=Wi[n].$;if(r.type.name==="QTooltip"){n--;continue}if(r.type.name!=="QDialog")break;if(r.props.seamless!==!0)return;n--}for(let r=Jo.length-1;r>=0;r--){const a=Jo[r];if((a.anchorEl.value===null||a.anchorEl.value.contains(t)===!1)&&(t===document.body||a.innerRef.value!==null&&a.innerRef.value.contains(t)===!1))e.qClickOutside=!0,a.onClickOutside(e);else return}}function xx(e){Jo.push(e),Jo.length===1&&(document.addEventListener("mousedown",Wl,Hl),document.addEventListener("touchstart",Wl,Hl))}function Ul(e){const t=Jo.findIndex(n=>n===e);t!==-1&&(Jo.splice(t,1),Jo.length===0&&(document.removeEventListener("mousedown",Wl,Hl),document.removeEventListener("touchstart",Wl,Hl)))}var Gm,Km;function jl(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function wx(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}var oh={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{oh[`${e}#ltr`]=e,oh[`${e}#rtl`]=e});function Gl(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:oh[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function aE(e,t){let{top:n,left:r,right:a,bottom:o,width:i,height:s}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],r-=t[0],o+=t[1],a+=t[0],i+=t[0],s+=t[1]),{top:n,bottom:o,height:s,left:r,right:a,width:i,middle:r+(a-r)/2,center:n+(o-n)/2}}function oE(e,t,n){let{top:r,left:a}=e.getBoundingClientRect();return r+=t.top,a+=t.left,n!==void 0&&(r+=n[1],a+=n[0]),{top:r,bottom:r+1,height:1,left:a,right:a+1,width:1,middle:a,center:r}}function iE(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function Xm(e,t,n,r){return{top:e[n.vertical]-t[r.vertical],left:e[n.horizontal]-t[r.horizontal]}}function wv(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{wv(e,t+1)},10);return}const{targetEl:n,offset:r,anchorEl:a,anchorOrigin:o,selfOrigin:i,absoluteOffset:s,fit:u,cover:l,maxHeight:c,maxWidth:d}=e;if(nt.is.ios===!0&&window.visualViewport!==void 0){const S=document.body.style,{offsetLeft:E,offsetTop:R}=window.visualViewport;E!==Gm&&(S.setProperty("--q-pe-left",E+"px"),Gm=E),R!==Km&&(S.setProperty("--q-pe-top",R+"px"),Km=R)}const{scrollLeft:f,scrollTop:h}=n,v=s===void 0?aE(a,l===!0?[0,0]:r):oE(a,s,r);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:d,maxHeight:c,visibility:"visible"});const{offsetWidth:m,offsetHeight:p}=n,{elWidth:y,elHeight:x}=u===!0||l===!0?{elWidth:Math.max(v.width,m),elHeight:l===!0?Math.max(v.height,p):p}:{elWidth:m,elHeight:p};let b={maxWidth:d,maxHeight:c};(u===!0||l===!0)&&(b.minWidth=v.width+"px",l===!0&&(b.minHeight=v.height+"px")),Object.assign(n.style,b);const g=iE(y,x);let w=Xm(v,g,o,i);if(s===void 0||r===void 0)Fd(w,v,g,o,i);else{const{top:S,left:E}=w;Fd(w,v,g,o,i);let R=!1;if(w.top!==S){R=!0;const A=2*r[1];v.center=v.top-=A,v.bottom-=A+2}if(w.left!==E){R=!0;const A=2*r[0];v.middle=v.left-=A,v.right-=A+2}R===!0&&(w=Xm(v,g,o,i),Fd(w,v,g,o,i))}b={top:w.top+"px",left:w.left+"px"},w.maxHeight!==void 0&&(b.maxHeight=w.maxHeight+"px",v.height>w.maxHeight&&(b.minHeight=b.maxHeight)),w.maxWidth!==void 0&&(b.maxWidth=w.maxWidth+"px",v.width>w.maxWidth&&(b.minWidth=b.maxWidth)),Object.assign(n.style,b),n.scrollTop!==h&&(n.scrollTop=h),n.scrollLeft!==f&&(n.scrollLeft=f)}function Fd(e,t,n,r,a){const o=n.bottom,i=n.right,s=Cl(),u=window.innerHeight-s,l=document.body.clientWidth;if(e.top<0||e.top+o>u)if(a.vertical==="center")e.top=t[r.vertical]>u/2?Math.max(0,u-o):0,e.maxHeight=Math.min(o,u);else if(t[r.vertical]>u/2){const c=Math.min(u,r.vertical==="center"?t.center:r.vertical===a.vertical?t.bottom:t.top);e.maxHeight=Math.min(o,c),e.top=Math.max(0,c-o)}else e.top=Math.max(0,r.vertical==="center"?t.center:r.vertical===a.vertical?t.top:t.bottom),e.maxHeight=Math.min(o,u-e.top);if(e.left<0||e.left+i>l)if(e.maxWidth=Math.min(i,l),a.horizontal==="middle")e.left=t[r.horizontal]>l/2?Math.max(0,l-i):0;else if(t[r.horizontal]>l/2){const c=Math.min(l,r.horizontal==="middle"?t.middle:r.horizontal===a.horizontal?t.right:t.left);e.maxWidth=Math.min(i,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,r.horizontal==="middle"?t.middle:r.horizontal===a.horizontal?t.left:t.right),e.maxWidth=Math.min(i,l-e.left)}var $c=Ce({name:"QMenu",inheritAttrs:!1,props:{...lx,...vs,...wt,...Xo,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:jl},self:{type:String,validator:jl},offset:{type:Array,validator:wx},scrollTarget:ui,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...ps,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:r}){let a=null,o,i,s;const u=Ie(),{proxy:l}=u,{$q:c}=l,d=Z(null),f=Z(!1),h=C(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),v=_t(e,c),{registerTick:m,removeTick:p}=Ui(),{registerTimeout:y}=Oa(),{transitionProps:x,transitionStyle:b}=Vc(e),{localScrollTarget:g,changeScrollEvent:w,unconfigureScrollTarget:S}=cx(e,Q),{anchorEl:E,canShow:R}=yv({showing:f}),{hide:A}=ms({showing:f,canShow:R,handleShow:oe,handleHide:W,hideOnRouteChange:h,processOnMount:!0}),{showPortal:k,hidePortal:M,renderPortal:T}=xv(u,d,ee,"menu"),D={anchorEl:E,innerRef:d,onClickOutside(H){if(e.persistent!==!0&&f.value===!0)return A(H),(H.type==="touchstart"||H.target.classList.contains("q-dialog__backdrop"))&&it(H),!0}},I=C(()=>Gl(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),F=C(()=>e.cover===!0?I.value:Gl(e.self||"top start",c.lang.rtl)),V=C(()=>(e.square===!0?" q-menu--square":"")+(v.value===!0?" q-menu--dark q-dark":"")),L=C(()=>e.autoClose===!0?{onClick:Y}:{}),q=C(()=>f.value===!0&&e.persistent!==!0);ke(q,H=>{H===!0?(gx($),xx(D)):($l($),Ul(D))});function K(){gs(()=>{let H=d.value;H&&H.contains(document.activeElement)!==!0&&(H=H.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||H.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||H.querySelector("[autofocus], [data-autofocus]")||H,H.focus({preventScroll:!0}))})}function oe(H){if(a=e.noRefocus===!1?document.activeElement:null,bx(fe),k(),Q(),o=void 0,H!==void 0&&(e.touchPosition||e.contextMenu)){const ue=Zn(H);if(ue.left!==void 0){const{top:ye,left:P}=E.value.getBoundingClientRect();o={left:ue.left-P,top:ue.top-ye}}}i===void 0&&(i=ke(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,O)),e.noFocus!==!0&&document.activeElement.blur(),m(()=>{O(),e.noFocus!==!0&&K()}),y(()=>{c.platform.is.ios===!0&&(s=e.autoClose,d.value.click()),O(),k(!0),n("show",H)},e.transitionDuration)}function W(H){p(),M(),N(!0),a!==null&&(H===void 0||H.qClickOutside!==!0)&&(((H?.type.indexOf("key")===0?a.closest('[tabindex]:not([tabindex^="-"])'):void 0)||a).focus(),a=null),y(()=>{M(!0),n("hide",H)},e.transitionDuration)}function N(H){o=void 0,i!==void 0&&(i(),i=void 0),(H===!0||f.value===!0)&&(ah(fe),S(),Ul(D),$l($)),H!==!0&&(a=null)}function Q(){(E.value!==null||e.scrollTarget!==void 0)&&(g.value=da(E.value,e.scrollTarget),w(g.value,O))}function Y(H){s!==!0?(hx(l,H),n("click",H)):s=!1}function fe(H){q.value===!0&&e.noFocus!==!0&&rx(d.value,H.target)!==!0&&K()}function $(H){e.noEscDismiss!==!0&&(n("escapeKey"),A(H))}function O(){wv({targetEl:d.value,offset:e.offset,anchorEl:E.value,anchorOrigin:I.value,selfOrigin:F.value,absoluteOffset:o,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ee(){return _(pn,x.value,()=>f.value===!0?_("div",{role:"menu",...r,ref:d,tabindex:-1,class:["q-menu q-position-engine scroll"+V.value,r.class],style:[r.style,b.value],...L.value},He(t.default)):null)}return ft(N),Object.assign(l,{focus:K,updatePosition:O}),T}}),Nd,Uu=0,In=new Array(256);for(let e=0;e<256;e++)In[e]=(e+256).toString(16).substring(1);var sE=(()=>{const e=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const n=new Uint8Array(t);return e.getRandomValues(n),n}}return t=>{const n=[];for(let r=t;r>0;r--)n.push(Math.floor(Math.random()*256));return n}})(),Qm=4096;function cu(){(Nd===void 0||Uu+16>Qm)&&(Uu=0,Nd=sE(Qm));const e=Array.prototype.slice.call(Nd,Uu,Uu+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,In[e[0]]+In[e[1]]+In[e[2]]+In[e[3]]+"-"+In[e[4]]+In[e[5]]+"-"+In[e[6]]+In[e[7]]+"-"+In[e[8]]+In[e[9]]+"-"+In[e[10]]+In[e[11]]+In[e[12]]+In[e[13]]+In[e[14]]+In[e[15]]}function uE(e){return e??null}function Ym(e,t){return e??(t===!0?`f_${cu()}`:null)}function Hc({getValue:e,required:t=!0}={}){if(ar.value===!0){const n=Z(e!==void 0?uE(e()):null);return t===!0&&n.value===null&&Nt(()=>{n.value=`f_${cu()}`}),e!==void 0&&ke(e,r=>{n.value=Ym(r,t)}),n}return e!==void 0?C(()=>Ym(e(),t)):Z(`f_${cu()}`)}var lE=Object.keys(gv);function cE(e){return lE.reduce((t,n)=>{const r=e[n];return r!==void 0&&(t[n]=r),t},{})}var dE=Ce({name:"QBtnDropdown",props:{...gv,...Xo,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:n}){const{proxy:r}=Ie(),a=Z(e.modelValue),o=Z(null),i=Hc(),s=C(()=>{const g={"aria-expanded":a.value===!0?"true":"false","aria-haspopup":"true","aria-controls":i.value,"aria-label":e.toggleAriaLabel||r.$q.lang.label[a.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(g["aria-disabled"]="true"),g}),u=C(()=>"q-btn-dropdown__arrow"+(a.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),l=C(()=>ix(e)),c=C(()=>cE(e));ke(()=>e.modelValue,g=>{o.value?.[g?"show":"hide"]()}),ke(()=>e.split,b);function d(g){a.value=!0,n("beforeShow",g)}function f(g){n("show",g),n("update:modelValue",!0)}function h(g){a.value=!1,n("beforeHide",g)}function v(g){n("hide",g),n("update:modelValue",!1)}function m(g){n("click",g)}function p(g){Gt(g),b(),n("click",g)}function y(g){o.value?.toggle(g)}function x(g){o.value?.show(g)}function b(g){o.value?.hide(g)}return Object.assign(r,{show:x,hide:b,toggle:y}),Nt(()=>{e.modelValue===!0&&x()}),()=>{const g=[_(Ct,{class:u.value,name:e.dropdownIcon||r.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&g.push(_($c,{ref:o,id:i.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:d,onShow:f,onBeforeHide:h,onHide:v},t.default)),e.split===!1?_(Tt,{class:"q-btn-dropdown q-btn-dropdown--simple",...c.value,...s.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:m},{default:()=>He(t.label,[]).concat(g),loading:t.loading}):_(sx,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...l.value,glossy:e.glossy,stretch:e.stretch},()=>[_(Tt,{class:"q-btn-dropdown--current",...c.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:p},{default:t.label,loading:t.loading}),_(Tt,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...s.value,...l.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>g)])}}}),Mr={name:String};function ku(e){return C(()=>({type:"hidden",name:e.name,value:e.modelValue}))}function wo(e={}){return(t,n,r)=>{t[n](_("input",{class:"hidden"+(r||""),...e.value}))}}function _v(e){return C(()=>e.name||e.for)}Ce({name:"QBtnToggle",props:{...Mr,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(t=>("label"in t||"icon"in t||"slot"in t)&&"value"in t)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:t,emit:n}){const r=C(()=>e.options.find(f=>f.value===e.modelValue)!==void 0),a=C(()=>({type:"hidden",name:e.name,value:e.modelValue})),o=wo(a),i=C(()=>ix(e)),s=C(()=>({rounded:e.rounded,dense:e.dense,...i.value})),u=C(()=>e.options.map((f,h)=>{const{attrs:v,value:m,slot:p,...y}=f;return{slot:p,props:{key:h,"aria-pressed":m===e.modelValue?"true":"false",...v,...y,...s.value,disable:e.disable===!0||y.disable===!0,color:m===e.modelValue?c(y,"toggleColor"):c(y,"color"),textColor:m===e.modelValue?c(y,"toggleTextColor"):c(y,"textColor"),noCaps:c(y,"noCaps")===!0,noWrap:c(y,"noWrap")===!0,size:c(y,"size"),padding:c(y,"padding"),ripple:c(y,"ripple"),stack:c(y,"stack")===!0,stretch:c(y,"stretch")===!0,onClick(x){l(m,f,x)}}}}));function l(f,h,v){e.readonly!==!0&&(e.modelValue===f?e.clearable===!0&&(n("update:modelValue",null,null),n("clear")):n("update:modelValue",f,h),n("click",v))}function c(f,h){return f[h]===void 0?e[h]:f[h]}function d(){const f=u.value.map(h=>_(Tt,h.props,h.slot!==void 0?t[h.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&r.value===!0&&o(f,"push"),Jt(t.default,f)}return()=>_(sx,{class:"q-btn-toggle",...i.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},d)}});var _x=Ce({name:"QCard",props:{...wt,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:n}}=Ie(),r=_t(e,n),a=C(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>_(e.tag,{class:a.value},He(t.default))}}),qo=Ce({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const n=C(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>_(e.tag,{class:n.value},He(t.default))}}),fE=Ce({name:"QCardActions",props:{...fv,vertical:Boolean},setup(e,{slots:t}){const n=hv(e),r=C(()=>`q-card__actions ${n.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>_("div",{class:r.value},He(t.default))}}),Cv={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},hE=Object.keys(Cv);Cv.all=!0;function Kl(e){const t={};for(const n of hE)e[n]===!0&&(t[n]=!0);return Object.keys(t).length===0?Cv:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}var vE=["INPUT","TEXTAREA"];function Xl(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&vE.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function pE(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((n,r)=>{const a=parseFloat(n);a&&(t[r]=a)}),t}var mE=jr({name:"touch-swipe",beforeMount(e,{value:t,arg:n,modifiers:r}){if(r.mouse!==!0&&nt.has.touch!==!0)return;const a=r.mouseCapture===!0?"Capture":"",o={handler:t,sensitivity:pE(n),direction:Kl(r),noop:Kt,mouseStart(i){Xl(i,o)&&Oc(i)&&(Qt(o,"temp",[[document,"mousemove","move",`notPassive${a}`],[document,"mouseup","end","notPassiveCapture"]]),o.start(i,!0))},touchStart(i){if(Xl(i,o)){const s=i.target;Qt(o,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),o.start(i)}},start(i,s){nt.is.firefox===!0&&$i(e,!0);const u=Zn(i);o.event={x:u.left,y:u.top,time:Date.now(),mouse:s===!0,dir:!1}},move(i){if(o.event===void 0)return;if(o.event.dir!==!1){it(i);return}const s=Date.now()-o.event.time;if(s===0)return;const u=Zn(i),l=u.left-o.event.x,c=Math.abs(l),d=u.top-o.event.y,f=Math.abs(d);if(o.event.mouse!==!0){if(c<o.sensitivity[1]&&f<o.sensitivity[1]){o.end(i);return}}else if(window.getSelection().toString()!==""){o.end(i);return}else if(c<o.sensitivity[2]&&f<o.sensitivity[2])return;const h=c/s,v=f/s;o.direction.vertical===!0&&c<f&&c<100&&v>o.sensitivity[0]&&(o.event.dir=d<0?"up":"down"),o.direction.horizontal===!0&&c>f&&f<100&&h>o.sensitivity[0]&&(o.event.dir=l<0?"left":"right"),o.direction.up===!0&&c<f&&d<0&&c<100&&v>o.sensitivity[0]&&(o.event.dir="up"),o.direction.down===!0&&c<f&&d>0&&c<100&&v>o.sensitivity[0]&&(o.event.dir="down"),o.direction.left===!0&&c>f&&l<0&&f<100&&h>o.sensitivity[0]&&(o.event.dir="left"),o.direction.right===!0&&c>f&&l>0&&f<100&&h>o.sensitivity[0]&&(o.event.dir="right"),o.event.dir!==!1?(it(i),o.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Vr(),o.styleCleanup=m=>{o.styleCleanup=void 0,document.body.classList.remove("non-selectable");const p=()=>{document.body.classList.remove("no-pointer-events--children")};m===!0?setTimeout(p,50):p()}),o.handler({evt:i,touch:o.event.mouse!==!0,mouse:o.event.mouse,direction:o.event.dir,duration:s,distance:{x:c,y:f}})):o.end(i)},end(i){o.event!==void 0&&(Kn(o,"temp"),nt.is.firefox===!0&&$i(e,!1),o.styleCleanup?.(!0),i!==void 0&&o.event.dir!==!1&&it(i),o.event=void 0)}};if(e.__qtouchswipe=o,r.mouse===!0){const i=r.mouseCapture===!0||r.mousecapture===!0?"Capture":"";Qt(o,"main",[[e,"mousedown","mouseStart",`passive${i}`]])}nt.has.touch===!0&&Qt(o,"main",[[e,"touchstart","touchStart",`passive${r.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchswipe;n!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&n.end(),n.handler=t.value),n.direction=Kl(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(Kn(t,"main"),Kn(t,"temp"),nt.is.firefox===!0&&$i(e,!1),t.styleCleanup?.(),delete e.__qtouchswipe)}});function Eu(){let e=Object.create(null);return{getCache:(t,n)=>e[t]===void 0?e[t]=typeof n=="function"?n():n:e[t],setCache(t,n){e[t]=n},hasCache(t){return Object.hasOwnProperty.call(e,t)},clearCache(t){t!==void 0?delete e[t]:e=Object.create(null)}}}var Sv={name:{required:!0},disable:Boolean},Jm={setup(e,{slots:t}){return()=>_("div",{class:"q-panel scroll",role:"tabpanel"},He(t.default))}},kv={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Ev=["update:modelValue","beforeTransition","transition"];function Tv(){const{props:e,emit:t,proxy:n}=Ie(),{getCache:r}=Eu(),{registerTimeout:a}=Oa();let o,i;const s=Z(null),u={value:null};function l(I){const F=e.vertical===!0?"up":"left";R((n.$q.lang.rtl===!0?-1:1)*(I.direction===F?1:-1))}const c=C(()=>[[mE,l,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),d=C(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),f=C(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),h=C(()=>`--q-transition-duration: ${e.transitionDuration}ms`),v=C(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),m=C(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),p=C(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ke(()=>e.modelValue,(I,F)=>{const V=g(I)===!0?w(I):-1;i!==!0&&E(V===-1?0:V<w(F)?-1:1),u.value!==V&&(u.value=V,t("beforeTransition",I,F),a(()=>{t("transition",I,F)},e.transitionDuration))});function y(){R(1)}function x(){R(-1)}function b(I){t("update:modelValue",I)}function g(I){return I!=null&&I!==""}function w(I){return o.findIndex(F=>F.props.name===I&&F.props.disable!==""&&F.props.disable!==!0)}function S(){return o.filter(I=>I.props.disable!==""&&I.props.disable!==!0)}function E(I){const F=I!==0&&e.animated===!0&&u.value!==-1?"q-transition--"+(I===-1?d.value:f.value):null;s.value!==F&&(s.value=F)}function R(I,F=u.value){let V=F+I;for(;V!==-1&&V<o.length;){const L=o[V];if(L!==void 0&&L.props.disable!==""&&L.props.disable!==!0){E(I),i=!0,t("update:modelValue",L.props.name),setTimeout(()=>{i=!1});return}V+=I}e.infinite===!0&&o.length!==0&&F!==-1&&F!==o.length&&R(I,I===-1?o.length:-1)}function A(){const I=w(e.modelValue);return u.value!==I&&(u.value=I),!0}function k(){const I=g(e.modelValue)===!0&&A()&&o[u.value];return e.keepAlive===!0?[_(ob,m.value,[_(p.value===!0?r(v.value,()=>({...Jm,name:v.value})):Jm,{key:v.value,style:h.value},()=>I)])]:[_("div",{class:"q-panel scroll",style:h.value,key:v.value,role:"tabpanel"},[I])]}function M(){if(o.length!==0)return e.animated===!0?[_(pn,{name:s.value},k)]:k()}function T(I){return o=vv(He(I.default,[])).filter(F=>F.props!==null&&F.props.slot===void 0&&g(F.props.name)===!0),o.length}function D(){return o}return Object.assign(n,{next:y,previous:x,goTo:b}),{panelIndex:u,panelDirectives:c,updatePanelsList:T,updatePanelIndex:A,getPanelContent:M,getEnabledPanels:S,getPanels:D,isValidPanelName:g,keepAliveProps:m,needsUniqueKeepAliveWrapper:p,goToPanelByOffset:R,goToPanel:b,nextPanel:y,previousPanel:x}}var Cs=0,Rv={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Av=["update:fullscreen","fullscreen"];function Iv(){const e=Ie(),{props:t,emit:n,proxy:r}=e;let a,o,i;const s=Z(!1);pv(e)===!0&&ke(()=>r.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&c()}),ke(()=>t.fullscreen,d=>{s.value!==d&&u()}),ke(s,d=>{n("update:fullscreen",d),n("fullscreen",d)});function u(){s.value===!0?c():l()}function l(){s.value!==!0&&(s.value=!0,i=r.$el.parentNode,i.replaceChild(o,r.$el),document.body.appendChild(r.$el),Cs++,Cs===1&&document.body.classList.add("q-body--fullscreen-mixin"),a={handler:c},su.add(a))}function c(){s.value===!0&&(a!==void 0&&(su.remove(a),a=void 0),i.replaceChild(r.$el,o),s.value=!1,Cs=Math.max(0,Cs-1),Cs===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return Mc(()=>{o=document.createElement("span")}),Nt(()=>{t.fullscreen===!0&&l()}),ft(c),Object.assign(r,{toggleFullscreen:u,setFullscreen:l,exitFullscreen:c}),{inFullscreen:s,toggleFullscreen:u}}var gE=["top","right","bottom","left"],yE=["regular","flat","outline","push","unelevated"];Ce({name:"QCarousel",props:{...wt,...kv,...Rv,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>yE.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>gE.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...Av,...Ev],setup(e,{slots:t}){const{proxy:{$q:n}}=Ie(),r=_t(e,n);let a=null,o;const{updatePanelsList:i,getPanelContent:s,panelDirectives:u,goToPanel:l,previousPanel:c,nextPanel:d,getEnabledPanels:f,panelIndex:h}=Tv(),{inFullscreen:v}=Iv(),m=C(()=>v.value!==!0&&e.height!==void 0?{height:e.height}:{}),p=C(()=>e.vertical===!0?"vertical":"horizontal"),y=C(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),x=C(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(v.value===!0?" fullscreen":"")+(r.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${p.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${y.value}`:"")),b=C(()=>{const k=[e.prevIcon||n.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||n.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&n.lang.rtl===!0?k.reverse():k}),g=C(()=>e.navigationIcon||n.iconSet.carousel.navigationIcon),w=C(()=>e.navigationActiveIcon||g.value),S=C(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));ke(()=>e.modelValue,()=>{e.autoplay&&E()}),ke(()=>e.autoplay,k=>{k?E():a!==null&&(clearTimeout(a),a=null)});function E(){const k=uu(e.autoplay)===!0?Math.abs(e.autoplay):5e3;a!==null&&clearTimeout(a),a=setTimeout(()=>{a=null,k>=0?d():c()},k)}Nt(()=>{e.autoplay&&E()}),ft(()=>{a!==null&&clearTimeout(a)});function R(k,M){return _("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${k} q-carousel__navigation--${y.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[_("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},f().map(M))])}function A(){const k=[];if(e.navigation===!0){const M=t["navigation-icon"]!==void 0?t["navigation-icon"]:D=>_(Tt,{key:"nav"+D.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${D.active===!0?"":"in"}active`,...D.btnProps,onClick:D.onClick}),T=o-1;k.push(R("buttons",(D,I)=>{const F=D.props.name,V=h.value===I;return M({index:I,maxIndex:T,name:F,active:V,btnProps:{icon:V===!0?w.value:g.value,size:"sm",...S.value},onClick:()=>{l(F)}})}))}else if(e.thumbnails===!0){const M=e.controlColor!==void 0?` text-${e.controlColor}`:"";k.push(R("thumbnails",T=>{const D=T.props;return _("img",{key:"tmb#"+D.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${D.name===e.modelValue?"":"in"}active`+M,src:D.imgSrc||D["img-src"],onClick:()=>{l(D.name)}})}))}return e.arrows===!0&&h.value>=0&&((e.infinite===!0||h.value>0)&&k.push(_("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${p.value} absolute flex flex-center`},[_(Tt,{icon:b.value[0],...S.value,onClick:c})])),(e.infinite===!0||h.value<o-1)&&k.push(_("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${p.value} absolute flex flex-center`},[_(Tt,{icon:b.value[1],...S.value,onClick:d})]))),Jt(t.control,k)}return()=>(o=i(t),_("div",{class:x.value,style:m.value},[Ir("div",{class:"q-carousel__slides-container"},s(),"sl-cont",e.swipeable,()=>u.value)].concat(A())))}});Ce({name:"QCarouselSlide",props:{...Sv,imgSrc:String},setup(e,{slots:t}){const n=C(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>_("div",{class:"q-carousel__slide",style:n.value},He(t.default))}});Ce({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:t}){const n=C(()=>`q-carousel__control absolute absolute-${e.position}`),r=C(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>_("div",{class:n.value,style:r.value},He(t.default))}});Ce({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const n=C(()=>e.sent===!0?"sent":"received"),r=C(()=>`q-message-text-content q-message-text-content--${n.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),a=C(()=>`q-message-text q-message-text--${n.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),o=C(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),i=C(()=>e.size!==void 0?`col-${e.size}`:""),s=C(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function u(c){return t.stamp!==void 0?[c,_("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[c,_("div",{class:"q-message-stamp",[s.value.stamp]:e.stamp})]:[c]}function l(c,d){const f=d===!0?c.length>1?h=>h:h=>_("div",[h]):h=>_("div",{[s.value.msg]:h});return c.map((h,v)=>_("div",{key:v,class:a.value},[_("div",{class:r.value},u(f(h)))]))}return()=>{const c=[];t.avatar!==void 0?c.push(t.avatar()):e.avatar!==void 0&&c.push(_("img",{class:`q-message-avatar q-message-avatar--${n.value}`,src:e.avatar,"aria-hidden":"true"}));const d=[];t.name!==void 0?d.push(_("div",{class:`q-message-name q-message-name--${n.value}`},t.name())):e.name!==void 0&&d.push(_("div",{class:`q-message-name q-message-name--${n.value}`,[s.value.name]:e.name})),t.default!==void 0?d.push(l(vv(t.default()),!0)):e.text!==void 0&&d.push(l(e.text)),c.push(_("div",{class:i.value},d));const f=[];return t.label!==void 0?f.push(_("div",{class:"q-message-label"},t.label())):e.label!==void 0&&f.push(_("div",{class:"q-message-label",[s.value.label]:e.label})),f.push(_("div",{class:o.value},c)),_("div",{class:`q-message q-message-${n.value}`},f)}}});function Cx(e,t){const n=Z(null),r=C(()=>e.disable===!0?null:_("span",{ref:n,class:"no-outline",tabindex:-1}));function a(o){const i=t.value;o?.qAvoidFocus!==!0&&(o?.type.indexOf("key")===0?document.activeElement!==i&&i?.contains(document.activeElement)===!0&&i.focus():n.value!==null&&(o===void 0||i?.contains(o.target)===!0)&&n.value.focus())}return{refocusTargetEl:r,refocusTarget:a}}var Sx={xs:30,sm:35,md:40,lg:50,xl:60},kx={...wt,...qa,...Mr,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},Ex=["update:modelValue"];function Tx(e,t){const{props:n,slots:r,emit:a,proxy:o}=Ie(),{$q:i}=o,s=_t(n,i),u=Z(null),{refocusTargetEl:l,refocusTarget:c}=Cx(n,u),d=La(n,Sx),f=C(()=>n.val!==void 0&&Array.isArray(n.modelValue)),h=C(()=>{const T=pt(n.val);return f.value===!0?n.modelValue.findIndex(D=>pt(D)===T):-1}),v=C(()=>f.value===!0?h.value!==-1:pt(n.modelValue)===pt(n.trueValue)),m=C(()=>f.value===!0?h.value===-1:pt(n.modelValue)===pt(n.falseValue)),p=C(()=>v.value===!1&&m.value===!1),y=C(()=>n.disable===!0?-1:n.tabindex||0),x=C(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(n.disable===!0?" disabled":"")+(s.value===!0?` q-${e}--dark`:"")+(n.dense===!0?` q-${e}--dense`:"")+(n.leftLabel===!0?" reverse":"")),b=C(()=>{const T=v.value===!0?"truthy":m.value===!0?"falsy":"indet",D=n.color!==void 0&&(n.keepColor===!0||(e==="toggle"?v.value===!0:m.value!==!0))?` text-${n.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${T}${D}`}),g=C(()=>{const T={type:"checkbox"};return n.name!==void 0&&Object.assign(T,{".checked":v.value,"^checked":v.value===!0?"checked":void 0,name:n.name,value:f.value===!0?n.val:n.trueValue}),T}),w=wo(g),S=C(()=>{const T={tabindex:y.value,role:e==="toggle"?"switch":"checkbox","aria-label":n.label,"aria-checked":p.value===!0?"mixed":v.value===!0?"true":"false"};return n.disable===!0&&(T["aria-disabled"]="true"),T});function E(T){T!==void 0&&(it(T),c(T)),n.disable!==!0&&a("update:modelValue",R(),T)}function R(){if(f.value===!0){if(v.value===!0){const T=n.modelValue.slice();return T.splice(h.value,1),T}return n.modelValue.concat([n.val])}if(v.value===!0){if(n.toggleOrder!=="ft"||n.toggleIndeterminate===!1)return n.falseValue}else if(m.value===!0){if(n.toggleOrder==="ft"||n.toggleIndeterminate===!1)return n.trueValue}else return n.toggleOrder!=="ft"?n.trueValue:n.falseValue;return n.indeterminateValue}function A(T){(T.keyCode===13||T.keyCode===32)&&it(T)}function k(T){(T.keyCode===13||T.keyCode===32)&&E(T)}const M=t(v,p);return Object.assign(o,{toggle:E}),()=>{const T=M();n.disable!==!0&&w(T,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const D=[_("div",{class:b.value,style:d.value,"aria-hidden":"true"},T)];l.value!==null&&D.push(l.value);const I=n.label!==void 0?Jt(r.default,[n.label]):He(r.default);return I!==void 0&&D.push(_("div",{class:`q-${e}__label q-anchor--skip`},I)),_("div",{ref:u,class:x.value,...S.value,onClick:E,onKeydown:A,onKeyup:k},D)}}var bE=()=>_("div",{key:"svg",class:"q-checkbox__bg absolute"},[_("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[_("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),_("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Ks=Ce({name:"QCheckbox",props:kx,emits:Ex,setup(e){const t=bE();function n(r,a){const o=C(()=>(r.value===!0?e.checkedIcon:a.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>o.value!==null?[_("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[_(Ct,{class:"q-checkbox__icon",name:o.value})])]:[t]}return Tx("checkbox",n)}}),xE={xs:8,sm:10,md:14,lg:20,xl:24},Rx=Ce({name:"QChip",props:{...wt,...qa,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=Ie(),a=_t(e,r),o=La(e,xE),i=C(()=>e.selected===!0||e.icon!==void 0),s=C(()=>e.selected===!0?e.iconSelected||r.iconSet.chip.selected:e.icon),u=C(()=>e.iconRemove||r.iconSet.chip.remove),l=C(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),c=C(()=>{const p=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(p?` text-${p} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(l.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(a.value===!0?" q-chip--dark q-dark":"")}),d=C(()=>{const p=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},y={...p,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||r.lang.label.remove};return{chip:p,remove:y}});function f(p){p.keyCode===13&&h(p)}function h(p){e.disable||(n("update:selected",!e.selected),n("click",p))}function v(p){(p.keyCode===void 0||p.keyCode===13)&&(it(p),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function m(){const p=[];l.value===!0&&p.push(_("div",{class:"q-focus-helper"})),i.value===!0&&p.push(_(Ct,{class:"q-chip__icon q-chip__icon--left",name:s.value}));const y=e.label!==void 0?[_("div",{class:"ellipsis"},[e.label])]:void 0;return p.push(_("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},dv(t.default,y))),e.iconRight&&p.push(_(Ct,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&p.push(_(Ct,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:u.value,...d.value.remove,onClick:v,onKeyup:v})),p}return()=>{if(e.modelValue===!1)return;const p={class:c.value,style:o.value};return l.value===!0&&Object.assign(p,d.value.chip,{onClick:h,onKeyup:f}),Ir("div",p,m(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Lc,e.ripple]])}}}),Mv={...qa,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},ih=50,Ax=2*ih,Ix=Ax*Math.PI,wE=Math.round(Ix*1e3)/1e3,Mx=Ce({name:"QCircularProgress",props:{...Mv,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:t}){const{proxy:{$q:n}}=Ie(),r=La(e),a=C(()=>{const h=(n.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(n.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-h}deg)`:`rotate3d(0, 0, 1, ${h-90}deg)`}}),o=C(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),i=C(()=>Ax/(1-e.thickness/2)),s=C(()=>`${i.value/2} ${i.value/2} ${i.value} ${i.value}`),u=C(()=>Ft(e.value,e.min,e.max)),l=C(()=>e.max-e.min),c=C(()=>e.thickness/2*i.value),d=C(()=>{const h=(e.max-u.value)/l.value,v=e.rounded===!0&&u.value<e.max&&h<.25?c.value/2*(1-h/.25):0;return Ix*h+v});function f({thickness:h,offset:v,color:m,cls:p,rounded:y}){return _("circle",{class:"q-circular-progress__"+p+(m!==void 0?` text-${m}`:""),style:o.value,fill:"transparent",stroke:"currentColor","stroke-width":h,"stroke-dasharray":wE,"stroke-dashoffset":v,"stroke-linecap":y,cx:i.value,cy:i.value,r:ih})}return()=>{const h=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&h.push(_("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:ih-c.value/2,cx:i.value,cy:i.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&h.push(f({cls:"track",thickness:c.value,offset:0,color:e.trackColor})),h.push(f({cls:"circle",thickness:c.value,offset:d.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const v=[_("svg",{class:"q-circular-progress__svg",style:a.value,viewBox:s.value,"aria-hidden":"true"},h)];return e.showValue===!0&&v.push(_("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},t.default!==void 0?t.default():[_("div",u.value)])),_("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:r.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:u.value},dv(t.internal,v))}}});function Od(e,t,n){const r=Zn(e);let a,o=r.left-t.event.x,i=r.top-t.event.y,s=Math.abs(o),u=Math.abs(i);const l=t.direction;l.horizontal===!0&&l.vertical!==!0?a=o<0?"left":"right":l.horizontal!==!0&&l.vertical===!0?a=i<0?"up":"down":l.up===!0&&i<0?(a="up",s>u&&(l.left===!0&&o<0?a="left":l.right===!0&&o>0&&(a="right"))):l.down===!0&&i>0?(a="down",s>u&&(l.left===!0&&o<0?a="left":l.right===!0&&o>0&&(a="right"))):l.left===!0&&o<0?(a="left",s<u&&(l.up===!0&&i<0?a="up":l.down===!0&&i>0&&(a="down"))):l.right===!0&&o>0&&(a="right",s<u&&(l.up===!0&&i<0?a="up":l.down===!0&&i>0&&(a="down")));let c=!1;if(a===void 0&&n===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};a=t.event.lastDir,c=!0,a==="left"||a==="right"?(r.left-=o,s=0,o=0):(r.top-=i,u=0,i=0)}return{synthetic:c,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:r,direction:a,isFirst:t.event.isFirst,isFinal:n===!0,duration:Date.now()-t.event.time,distance:{x:s,y:u},offset:{x:o,y:i},delta:{x:r.left-t.event.lastX,y:r.top-t.event.lastY}}}}var _E=0,Tr=jr({name:"touch-pan",beforeMount(e,{value:t,modifiers:n}){if(n.mouse!==!0&&nt.has.touch!==!0)return;function r(o,i){n.mouse===!0&&i===!0?it(o):(n.stop===!0&&Gt(o),n.prevent===!0&&gn(o))}const a={uid:"qvtp_"+_E++,handler:t,modifiers:n,direction:Kl(n),noop:Kt,mouseStart(o){Xl(o,a)&&Oc(o)&&(Qt(a,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),a.start(o,!0))},touchStart(o){if(Xl(o,a)){const i=o.target;Qt(a,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),a.start(o)}},start(o,i){if(nt.is.firefox===!0&&$i(e,!0),a.lastEvt=o,i===!0||n.stop===!0){if(a.direction.all!==!0&&(i!==!0||a.modifiers.mouseAllDir!==!0&&a.modifiers.mousealldir!==!0)){const l=o.type.indexOf("mouse")!==-1?new MouseEvent(o.type,o):new TouchEvent(o.type,o);o.defaultPrevented===!0&&gn(l),o.cancelBubble===!0&&Gt(l),Object.assign(l,{qKeyEvent:o.qKeyEvent,qClickOutside:o.qClickOutside,qAnchorHandled:o.qAnchorHandled,qClonedBy:o.qClonedBy===void 0?[a.uid]:o.qClonedBy.concat(a.uid)}),a.initialEvent={target:o.target,event:l}}Gt(o)}const{left:s,top:u}=Zn(o);a.event={x:s,y:u,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:s,lastY:u}},move(o){if(a.event===void 0)return;const i=Zn(o),s=i.left-a.event.x,u=i.top-a.event.y;if(s===0&&u===0)return;a.lastEvt=o;const l=a.event.mouse===!0,c=()=>{r(o,l);let h;n.preserveCursor!==!0&&n.preservecursor!==!0&&(h=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),l===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Vr(),a.styleCleanup=v=>{if(a.styleCleanup=void 0,h!==void 0&&(document.documentElement.style.cursor=h),document.body.classList.remove("non-selectable"),l===!0){const m=()=>{document.body.classList.remove("no-pointer-events--children")};v!==void 0?setTimeout(()=>{m(),v()},50):m()}else v!==void 0&&v()}};if(a.event.detected===!0){a.event.isFirst!==!0&&r(o,a.event.mouse);const{payload:h,synthetic:v}=Od(o,a,!1);h!==void 0&&(a.handler(h)===!1?a.end(o):(a.styleCleanup===void 0&&a.event.isFirst===!0&&c(),a.event.lastX=h.position.left,a.event.lastY=h.position.top,a.event.lastDir=v===!0?void 0:h.direction,a.event.isFirst=!1));return}if(a.direction.all===!0||l===!0&&(a.modifiers.mouseAllDir===!0||a.modifiers.mousealldir===!0)){c(),a.event.detected=!0,a.move(o);return}const d=Math.abs(s),f=Math.abs(u);d!==f&&(a.direction.horizontal===!0&&d>f||a.direction.vertical===!0&&d<f||a.direction.up===!0&&d<f&&u<0||a.direction.down===!0&&d<f&&u>0||a.direction.left===!0&&d>f&&s<0||a.direction.right===!0&&d>f&&s>0?(a.event.detected=!0,a.move(o)):a.end(o,!0))},end(o,i){if(a.event!==void 0){if(Kn(a,"temp"),nt.is.firefox===!0&&$i(e,!1),i===!0)a.styleCleanup?.(),a.event.detected!==!0&&a.initialEvent!==void 0&&a.initialEvent.target.dispatchEvent(a.initialEvent.event);else if(a.event.detected===!0){a.event.isFirst===!0&&a.handler(Od(o===void 0?a.lastEvt:o,a).payload);const{payload:s}=Od(o===void 0?a.lastEvt:o,a,!0),u=()=>{a.handler(s)};a.styleCleanup!==void 0?a.styleCleanup(u):u()}a.event=void 0,a.initialEvent=void 0,a.lastEvt=void 0}}};if(e.__qtouchpan=a,n.mouse===!0){const o=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";Qt(a,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}nt.has.touch===!0&&Qt(a,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchpan;n!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&n.end(),n.handler=t.value),n.direction=Kl(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),Kn(t,"main"),Kn(t,"temp"),nt.is.firefox===!0&&$i(e,!1),t.styleCleanup?.(),delete e.__qtouchpan)}}),Zm="q-slider__marker-labels",CE=e=>({value:e}),SE=({marker:e})=>_("div",{key:e.value,style:e.style,class:e.classes},e.label),Dv=[34,37,40,33,39,38],Dx={...wt,...Mr,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Px=["pan","update:modelValue","change"];function Fx({updateValue:e,updatePosition:t,getDragging:n,formAttrs:r}){const{props:a,emit:o,slots:i,proxy:{$q:s}}=Ie(),u=_t(a,s),l=wo(r),c=Z(!1),d=Z(!1),f=Z(!1),h=Z(!1),v=C(()=>a.vertical===!0?"--v":"--h"),m=C(()=>"-"+(a.switchLabelSide===!0?"switched":"standard")),p=C(()=>a.vertical===!0?a.reverse===!0:a.reverse!==(s.lang.rtl===!0)),y=C(()=>isNaN(a.innerMin)===!0||a.innerMin<a.min?a.min:a.innerMin),x=C(()=>isNaN(a.innerMax)===!0||a.innerMax>a.max?a.max:a.innerMax),b=C(()=>a.disable!==!0&&a.readonly!==!0&&y.value<x.value),g=C(()=>{if(a.step===0)return Te=>Te;const ce=(String(a.step).trim().split(".")[1]||"").length;return Te=>parseFloat(Te.toFixed(ce))}),w=C(()=>a.step===0?1:a.step),S=C(()=>b.value===!0?a.tabindex||0:-1),E=C(()=>a.max-a.min),R=C(()=>x.value-y.value),A=C(()=>ye(y.value)),k=C(()=>ye(x.value)),M=C(()=>a.vertical===!0?p.value===!0?"bottom":"top":p.value===!0?"right":"left"),T=C(()=>a.vertical===!0?"height":"width"),D=C(()=>a.vertical===!0?"width":"height"),I=C(()=>a.vertical===!0?"vertical":"horizontal"),F=C(()=>{const ce={role:"slider","aria-valuemin":y.value,"aria-valuemax":x.value,"aria-orientation":I.value,"data-step":a.step};return a.disable===!0?ce["aria-disabled"]="true":a.readonly===!0&&(ce["aria-readonly"]="true"),ce}),V=C(()=>`q-slider q-slider${v.value} q-slider--${c.value===!0?"":"in"}active inline no-wrap `+(a.vertical===!0?"row":"column")+(a.disable===!0?" disabled":" q-slider--enabled"+(b.value===!0?" q-slider--editable":""))+(f.value==="both"?" q-slider--focus":"")+(a.label||a.labelAlways===!0?" q-slider--label":"")+(a.labelAlways===!0?" q-slider--label-always":"")+(u.value===!0?" q-slider--dark":"")+(a.dense===!0?" q-slider--dense q-slider--dense"+v.value:""));function L(ce){const Te="q-slider__"+ce;return`${Te} ${Te}${v.value} ${Te}${v.value}${m.value}`}function q(ce){const Te="q-slider__"+ce;return`${Te} ${Te}${v.value}`}const K=C(()=>{const ce=a.selectionColor||a.color;return"q-slider__selection absolute"+(ce!==void 0?` text-${ce}`:"")}),oe=C(()=>q("markers")+" absolute overflow-hidden"),W=C(()=>q("track-container")),N=C(()=>L("pin")),Q=C(()=>L("label")),Y=C(()=>L("text-container")),fe=C(()=>L("marker-labels-container")+(a.markerLabelsClass!==void 0?` ${a.markerLabelsClass}`:"")),$=C(()=>"q-slider__track relative-position no-outline"+(a.trackColor!==void 0?` bg-${a.trackColor}`:"")),O=C(()=>{const ce={[D.value]:a.trackSize};return a.trackImg!==void 0&&(ce.backgroundImage=`url(${a.trackImg}) !important`),ce}),ee=C(()=>"q-slider__inner absolute"+(a.innerTrackColor!==void 0?` bg-${a.innerTrackColor}`:"")),H=C(()=>{const ce=k.value-A.value,Te={[M.value]:`${100*A.value}%`,[T.value]:ce===0?"2px":`${100*ce}%`};return a.innerTrackImg!==void 0&&(Te.backgroundImage=`url(${a.innerTrackImg}) !important`),Te});function ue(ce){const{min:Te,max:Pe,step:Ze}=a;let Ve=Te+ce*(Pe-Te);if(Ze>0){const ut=(Ve-y.value)%Ze;Ve+=(Math.abs(ut)>=Ze/2?(ut<0?-1:1)*Ze:0)-ut}return Ve=g.value(Ve),Ft(Ve,y.value,x.value)}function ye(ce){return E.value===0?0:(ce-a.min)/E.value}function P(ce,Te){const Pe=Zn(ce),Ze=a.vertical===!0?Ft((Pe.top-Te.top)/Te.height,0,1):Ft((Pe.left-Te.left)/Te.width,0,1);return Ft(p.value===!0?1-Ze:Ze,A.value,k.value)}const B=C(()=>uu(a.markers)===!0?a.markers:w.value),j=C(()=>{const ce=[],Te=B.value,Pe=a.max;let Ze=a.min;do ce.push(Ze),Ze+=Te;while(Ze<Pe);return ce.push(Pe),ce}),ne=C(()=>{const ce=` ${Zm}${v.value}-`;return Zm+`${ce}${a.switchMarkerLabelsSide===!0?"switched":"standard"}${ce}${p.value===!0?"rtl":"ltr"}`}),se=C(()=>a.markerLabels===!1?null:ge(a.markerLabels).map((ce,Te)=>({index:Te,value:ce.value,label:ce.label||ce.value,classes:ne.value+(ce.classes!==void 0?" "+ce.classes:""),style:{...xe(ce.value),...ce.style||{}}}))),J=C(()=>({markerList:se.value,markerMap:pe.value,classes:ne.value,getStyle:xe})),me=C(()=>{const ce=R.value===0?"2px":100*B.value/R.value;return{...H.value,backgroundSize:a.vertical===!0?`2px ${ce}%`:`${ce}% 2px`}});function ge(ce){if(ce===!1)return null;if(ce===!0)return j.value.map(CE);if(typeof ce=="function")return j.value.map(Pe=>{const Ze=ce(Pe);return kn(Ze)===!0?{...Ze,value:Pe}:{value:Pe,label:Ze}});const Te=({value:Pe})=>Pe>=a.min&&Pe<=a.max;return Array.isArray(ce)===!0?ce.map(Pe=>kn(Pe)===!0?Pe:{value:Pe}).filter(Te):Object.keys(ce).map(Pe=>{const Ze=ce[Pe],Ve=Number(Pe);return kn(Ze)===!0?{...Ze,value:Ve}:{value:Ve,label:Ze}}).filter(Te)}function xe(ce){return{[M.value]:`${100*(ce-a.min)/E.value}%`}}const pe=C(()=>{if(a.markerLabels===!1)return null;const ce={};return se.value.forEach(Te=>{ce[Te.value]=Te}),ce});function le(){if(i["marker-label-group"]!==void 0)return i["marker-label-group"](J.value);const ce=i["marker-label"]||SE;return se.value.map(Te=>ce({marker:Te,...J.value}))}const X=C(()=>[[Tr,de,void 0,{[I.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function de(ce){ce.isFinal===!0?(h.value!==void 0&&(t(ce.evt),ce.touch===!0&&e(!0),h.value=void 0,o("pan","end")),c.value=!1,f.value=!1):ce.isFirst===!0?(h.value=n(ce.evt),t(ce.evt),e(),c.value=!0,o("pan","start")):(t(ce.evt),e())}function Re(){f.value=!1}function Fe(ce){t(ce,n(ce)),e(),d.value=!0,c.value=!0,document.addEventListener("mouseup",Me,!0)}function Me(){d.value=!1,c.value=!1,e(!0),Re(),document.removeEventListener("mouseup",Me,!0)}function De(ce){t(ce,n(ce)),e(!0)}function et(ce){Dv.includes(ce.keyCode)&&e(!0)}function tt(ce){if(a.vertical===!0)return null;const Te=s.lang.rtl!==a.reverse?1-ce:ce;return{transform:`translateX(calc(${2*Te-1} * ${a.thumbSize} / 2 + ${50-100*Te}%))`}}function he(ce){const Te=C(()=>d.value===!1&&(f.value===ce.focusValue||f.value==="both")?" q-slider--focus":""),Pe=C(()=>`q-slider__thumb q-slider__thumb${v.value} q-slider__thumb${v.value}-${p.value===!0?"rtl":"ltr"} absolute non-selectable`+Te.value+(ce.thumbColor.value!==void 0?` text-${ce.thumbColor.value}`:"")),Ze=C(()=>({width:a.thumbSize,height:a.thumbSize,[M.value]:`${100*ce.ratio.value}%`,zIndex:f.value===ce.focusValue?2:void 0})),Ve=C(()=>ce.labelColor.value!==void 0?` text-${ce.labelColor.value}`:""),ut=C(()=>tt(ce.ratio.value)),It=C(()=>"q-slider__text"+(ce.labelTextColor.value!==void 0?` text-${ce.labelTextColor.value}`:""));return()=>{const Xt=[_("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[_("path",{d:a.thumbPath})]),_("div",{class:"q-slider__focus-ring fit"})];return(a.label===!0||a.labelAlways===!0)&&(Xt.push(_("div",{class:N.value+" absolute fit no-pointer-events"+Ve.value},[_("div",{class:Q.value,style:{minWidth:a.thumbSize}},[_("div",{class:Y.value,style:ut.value},[_("span",{class:It.value},ce.label.value)])])])),a.name!==void 0&&a.disable!==!0&&l(Xt,"push")),_("div",{class:Pe.value,style:Ze.value,...ce.getNodeData()},Xt)}}function Ee(ce,Te,Pe,Ze){const Ve=[];a.innerTrackColor!=="transparent"&&Ve.push(_("div",{key:"inner",class:ee.value,style:H.value})),a.selectionColor!=="transparent"&&Ve.push(_("div",{key:"selection",class:K.value,style:ce.value})),a.markers!==!1&&Ve.push(_("div",{key:"marker",class:oe.value,style:me.value})),Ze(Ve);const ut=[Ir("div",{key:"trackC",class:W.value,tabindex:Te.value,...Pe.value},[_("div",{class:$.value,style:O.value},Ve)],"slide",b.value,()=>X.value)];if(a.markerLabels!==!1){const It=a.switchMarkerLabelsSide===!0?"unshift":"push";ut[It](_("div",{key:"markerL",class:fe.value},le()))}return ut}return ft(()=>{document.removeEventListener("mouseup",Me,!0)}),{state:{active:c,focus:f,preventFocus:d,dragging:h,editable:b,classes:V,tabindex:S,attributes:F,roundValueFn:g,keyStep:w,trackLen:E,innerMin:y,innerMinRatio:A,innerMax:x,innerMaxRatio:k,positionProp:M,sizeProp:T,isReversed:p},methods:{onActivate:Fe,onMobileClick:De,onBlur:Re,onKeyup:et,getContent:Ee,getThumbRenderFn:he,convertRatioToModel:ue,convertModelToRatio:ye,getDraggingRatio:P}}}var kE=()=>({}),yi=Ce({name:"QSlider",props:{...Dx,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:Px,setup(e,{emit:t}){const{proxy:{$q:n}}=Ie(),{state:r,methods:a}=Fx({updateValue:v,updatePosition:p,getDragging:m,formAttrs:ku(e)}),o=Z(null),i=Z(0),s=Z(0);function u(){s.value=e.modelValue===null?r.innerMin.value:Ft(e.modelValue,r.innerMin.value,r.innerMax.value)}ke(()=>`${e.modelValue}|${r.innerMin.value}|${r.innerMax.value}`,u),u();const l=C(()=>a.convertModelToRatio(s.value)),c=C(()=>r.active.value===!0?i.value:l.value),d=C(()=>{const b={[r.positionProp.value]:`${100*r.innerMinRatio.value}%`,[r.sizeProp.value]:`${100*(c.value-r.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(b.backgroundImage=`url(${e.selectionImg}) !important`),b}),f=a.getThumbRenderFn({focusValue:!0,getNodeData:kE,ratio:c,label:C(()=>e.labelValue!==void 0?e.labelValue:s.value),thumbColor:C(()=>e.thumbColor||e.color),labelColor:C(()=>e.labelColor),labelTextColor:C(()=>e.labelTextColor)}),h=C(()=>r.editable.value!==!0?{}:n.platform.is.mobile===!0?{onClick:a.onMobileClick}:{onMousedown:a.onActivate,onFocus:y,onBlur:a.onBlur,onKeydown:x,onKeyup:a.onKeyup});function v(b){s.value!==e.modelValue&&t("update:modelValue",s.value),b===!0&&t("change",s.value)}function m(){return o.value.getBoundingClientRect()}function p(b,g=r.dragging.value){const w=a.getDraggingRatio(b,g);s.value=a.convertRatioToModel(w),i.value=e.snap!==!0||e.step===0?w:a.convertModelToRatio(s.value)}function y(){r.focus.value=!0}function x(b){if(Dv.includes(b.keyCode)===!1)return;it(b);const g=([34,33].includes(b.keyCode)?10:1)*r.keyStep.value,w=([34,37,40].includes(b.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*g;s.value=Ft(r.roundValueFn.value(s.value+w),r.innerMin.value,r.innerMax.value),v()}return()=>{const b=a.getContent(d,r.tabindex,h,g=>{g.push(f())});return _("div",{ref:o,class:r.classes.value+(e.modelValue===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":e.modelValue},b)}}});function Nx(){const e=Z(!ar.value);return e.value===!1&&Nt(()=>{e.value=!0}),{isHydrated:e}}var Ox=typeof ResizeObserver<"u",eg=Ox===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},ei=Ce({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:t}){let n=null,r,a={width:-1,height:-1};function o(u){u===!0||e.debounce===0||e.debounce==="0"?i():n===null&&(n=setTimeout(i,e.debounce))}function i(){if(n!==null&&(clearTimeout(n),n=null),r){const{offsetWidth:u,offsetHeight:l}=r;(u!==a.width||l!==a.height)&&(a={width:u,height:l},t("resize",a))}}const{proxy:s}=Ie();if(s.trigger=o,Ox===!0){let u;const l=c=>{r=s.$el.parentNode,r?(u=new ResizeObserver(o),u.observe(r),i()):c!==!0&&mt(()=>{l(!0)})};return Nt(()=>{l()}),ft(()=>{n!==null&&clearTimeout(n),u!==void 0&&(u.disconnect!==void 0?u.disconnect():r&&u.unobserve(r))}),Kt}else{let u=function(){n!==null&&(clearTimeout(n),n=null),d!==void 0&&(d.removeEventListener!==void 0&&d.removeEventListener("resize",o,Ot.passive),d=void 0)},l=function(){u(),r?.contentDocument&&(d=r.contentDocument.defaultView,d.addEventListener("resize",o,Ot.passive),i())};const{isHydrated:c}=Nx();let d;return Nt(()=>{mt(()=>{r=s.$el,r&&l()})}),ft(u),()=>{if(c.value===!0)return _("object",{class:"q--avoid-card-border",style:eg.style,tabindex:-1,type:"text/html",data:eg.url,"aria-hidden":"true",onLoad:l})}}}}),du=!1;if(!__QUASAR_SSR__){const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,du=e.scrollLeft>=0,e.remove()}function EE(e,t,n){const r=n===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?r[0]:r[1]}${e?` text-${e}`:""}`}var TE=["left","center","right","justify"],tg=Ce({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>TE.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:n}){const{proxy:r}=Ie(),{$q:a}=r,{registerTick:o}=Ui(),{registerTick:i}=Ui(),{registerTick:s}=Ui(),{registerTimeout:u,removeTimeout:l}=Oa(),{registerTimeout:c,removeTimeout:d}=Oa(),f=Z(null),h=Z(null),v=Z(e.modelValue),m=Z(!1),p=Z(!0),y=Z(!1),x=Z(!1),b=[],g=Z(0),w=Z(!1);let S=null,E=null,R;const A=C(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:EE(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),k=C(()=>{const le=g.value,X=v.value;for(let de=0;de<le;de++)if(b[de].name.value===X)return!0;return!1}),M=C(()=>`q-tabs__content--align-${m.value===!0?"left":x.value===!0?"justify":e.align}`),T=C(()=>`q-tabs row no-wrap items-center q-tabs--${m.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),D=C(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+M.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),I=C(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),F=C(()=>e.vertical!==!0&&a.lang.rtl===!0),V=C(()=>du===!1&&F.value===!0);ke(F,N),ke(()=>e.modelValue,le=>{L({name:le,setCurrent:!0,skipEmit:!0})}),ke(()=>e.outsideArrows,q);function L({name:le,setCurrent:X,skipEmit:de}){v.value!==le&&(de!==!0&&e["onUpdate:modelValue"]!==void 0&&n("update:modelValue",le),(X===!0||e["onUpdate:modelValue"]===void 0)&&(oe(v.value,le),v.value=le))}function q(){o(()=>{f.value&&K({width:f.value.offsetWidth,height:f.value.offsetHeight})})}function K(le){if(I.value===void 0||h.value===null)return;const X=le[I.value.container],de=Math.min(h.value[I.value.scroll],Array.prototype.reduce.call(h.value.children,(Fe,Me)=>Fe+(Me[I.value.content]||0),0)),Re=X>0&&de>X;m.value=Re,Re===!0&&i(N),x.value=X<parseInt(e.breakpoint,10)}function oe(le,X){const de=le!=null&&le!==""?b.find(Fe=>Fe.name.value===le):null,Re=X!=null&&X!==""?b.find(Fe=>Fe.name.value===X):null;if(pe===!0)pe=!1;else if(de&&Re){const Fe=de.tabIndicatorRef.value,Me=Re.tabIndicatorRef.value;S!==null&&(clearTimeout(S),S=null),Fe.style.transition="none",Fe.style.transform="none",Me.style.transition="none",Me.style.transform="none";const De=Fe.getBoundingClientRect(),et=Me.getBoundingClientRect();Me.style.transform=e.vertical===!0?`translate3d(0,${De.top-et.top}px,0) scale3d(1,${et.height?De.height/et.height:1},1)`:`translate3d(${De.left-et.left}px,0,0) scale3d(${et.width?De.width/et.width:1},1,1)`,s(()=>{S=setTimeout(()=>{S=null,Me.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Me.style.transform="none"},70)})}Re&&m.value===!0&&W(Re.rootRef.value)}function W(le){const{left:X,width:de,top:Re,height:Fe}=h.value.getBoundingClientRect(),Me=le.getBoundingClientRect();let De=e.vertical===!0?Me.top-Re:Me.left-X;if(De<0){h.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(De),N();return}De+=e.vertical===!0?Me.height-Fe:Me.width-de,De>0&&(h.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(De),N())}function N(){const le=h.value;if(le===null)return;const X=le.getBoundingClientRect(),de=e.vertical===!0?le.scrollTop:Math.abs(le.scrollLeft);F.value===!0?(p.value=Math.ceil(de+X.width)<le.scrollWidth-1,y.value=de>0):(p.value=de>0,y.value=e.vertical===!0?Math.ceil(de+X.height)<le.scrollHeight:Math.ceil(de+X.width)<le.scrollWidth)}function Q(le){E!==null&&clearInterval(E),E=setInterval(()=>{H(le)===!0&&$()},5)}function Y(){Q(V.value===!0?Number.MAX_SAFE_INTEGER:0)}function fe(){Q(V.value===!0?0:Number.MAX_SAFE_INTEGER)}function $(){E!==null&&(clearInterval(E),E=null)}function O(le,X){const de=Array.prototype.filter.call(h.value.children,et=>et===X||et.matches&&et.matches(".q-tab.q-focusable")===!0),Re=de.length;if(Re===0)return;if(le===36)return W(de[0]),de[0].focus(),!0;if(le===35)return W(de[Re-1]),de[Re-1].focus(),!0;const Fe=le===(e.vertical===!0?38:37),Me=le===(e.vertical===!0?40:39),De=Fe===!0?-1:Me===!0?1:void 0;if(De!==void 0){const et=F.value===!0?-1:1,tt=de.indexOf(X)+De*et;return tt>=0&&tt<Re&&(W(de[tt]),de[tt].focus({preventScroll:!0})),!0}}const ee=C(()=>V.value===!0?{get:le=>Math.abs(le.scrollLeft),set:(le,X)=>{le.scrollLeft=-X}}:e.vertical===!0?{get:le=>le.scrollTop,set:(le,X)=>{le.scrollTop=X}}:{get:le=>le.scrollLeft,set:(le,X)=>{le.scrollLeft=X}});function H(le){const X=h.value,{get:de,set:Re}=ee.value;let Fe=!1,Me=de(X);const De=le<Me?-1:1;return Me+=De*5,Me<0?(Fe=!0,Me=0):(De===-1&&Me<=le||De===1&&Me>=le)&&(Fe=!0,Me=le),Re(X,Me),N(),Fe}function ue(le,X){for(const de in le)if(le[de]!==X[de])return!1;return!0}function ye(){let le=null,X={matchedLen:0,queryDiff:9999,hrefLen:0};const de=b.filter(De=>De.routeData?.hasRouterLink.value===!0),{hash:Re,query:Fe}=r.$route,Me=Object.keys(Fe).length;for(const De of de){const et=De.routeData.exact.value===!0;if(De.routeData[et===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:tt,query:he,matched:Ee,href:ce}=De.routeData.resolvedLink.value,Te=Object.keys(he).length;if(et===!0){if(tt!==Re||Te!==Me||ue(Fe,he)===!1)continue;le=De.name.value;break}if(tt!==""&&tt!==Re||Te!==0&&ue(he,Fe)===!1)continue;const Pe={matchedLen:Ee.length,queryDiff:Me-Te,hrefLen:ce.length-tt.length};if(Pe.matchedLen>X.matchedLen){le=De.name.value,X=Pe;continue}else if(Pe.matchedLen!==X.matchedLen)continue;if(Pe.queryDiff<X.queryDiff)le=De.name.value,X=Pe;else if(Pe.queryDiff!==X.queryDiff)continue;Pe.hrefLen>X.hrefLen&&(le=De.name.value,X=Pe)}if(le===null&&b.some(De=>De.routeData===void 0&&De.name.value===v.value)===!0){pe=!1;return}L({name:le,setCurrent:!0})}function P(le){if(l(),w.value!==!0&&f.value!==null&&le.target&&typeof le.target.closest=="function"){const X=le.target.closest(".q-tab");X&&f.value.contains(X)===!0&&(w.value=!0,m.value===!0&&W(X))}}function B(){u(()=>{w.value=!1},30)}function j(){me.avoidRouteWatcher===!1?c(ye):d()}function ne(){if(R===void 0){const le=ke(()=>r.$route.fullPath,j);R=()=>{le(),R=void 0}}}function se(le){b.push(le),g.value++,q(),le.routeData===void 0||r.$route===void 0?c(()=>{if(m.value===!0){const X=v.value,de=X!=null&&X!==""?b.find(Re=>Re.name.value===X):null;de&&W(de.rootRef.value)}}):(ne(),le.routeData.hasRouterLink.value===!0&&j())}function J(le){b.splice(b.indexOf(le),1),g.value--,q(),R!==void 0&&le.routeData!==void 0&&(b.every(X=>X.routeData===void 0)===!0&&R(),j())}const me={currentModel:v,tabProps:A,hasFocus:w,hasActiveTab:k,registerTab:se,unregisterTab:J,verifyRouteModel:j,updateModel:L,onKbdNavigate:O,avoidRouteWatcher:!1};Er(jb,me);function ge(){S!==null&&clearTimeout(S),$(),R?.()}let xe,pe;return ft(ge),ca(()=>{xe=R!==void 0,ge()}),bo(()=>{xe===!0&&(ne(),pe=!0,j()),q()}),()=>_("div",{ref:f,class:T.value,role:"tablist",onFocusin:P,onFocusout:B},[_(ei,{onResize:K}),_("div",{ref:h,class:D.value,onScroll:N},He(t.default)),_(Ct,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(p.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||a.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:Y,onTouchstartPassive:Y,onMouseupPassive:$,onMouseleavePassive:$,onTouchendPassive:$}),_(Ct,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(y.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||a.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:fe,onTouchstartPassive:fe,onMouseupPassive:$,onMouseleavePassive:$,onTouchendPassive:$})])}}),RE=0,Bx=["click","keydown"],qx={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${RE++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Lx(e,t,n,r){const a=sn(jb,Rt);if(a===Rt)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Rt;const{proxy:o}=Ie(),i=Z(null),s=Z(null),u=Z(null),l=C(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),c=C(()=>a.currentModel.value===e.name),d=C(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(c.value===!0?" q-tab--active"+(a.tabProps.value.activeClass?" "+a.tabProps.value.activeClass:"")+(a.tabProps.value.activeColor?` text-${a.tabProps.value.activeColor}`:"")+(a.tabProps.value.activeBgColor?` bg-${a.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&a.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||a.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(r!==void 0?r.linkClass.value:"")),f=C(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(a.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),h=C(()=>e.disable===!0||a.hasFocus.value===!0||c.value===!1&&a.hasActiveTab.value===!0?-1:e.tabindex||0);function v(b,g){if(g!==!0&&b?.qAvoidFocus!==!0&&i.value?.focus(),e.disable===!0){r?.hasRouterLink.value===!0&&it(b);return}if(r===void 0){a.updateModel({name:e.name}),n("click",b);return}if(r.hasRouterLink.value===!0){const w=(S={})=>{let E;const R=S.to===void 0||Br(S.to,e.to)===!0?a.avoidRouteWatcher=cu():null;return r.navigateToRouterLink(b,{...S,returnRouterError:!0}).catch(A=>{E=A}).then(A=>{if(R===a.avoidRouteWatcher&&(a.avoidRouteWatcher=!1,E===void 0&&(A===void 0||A.message?.startsWith("Avoided redundant navigation")===!0)&&a.updateModel({name:e.name})),S.returnRouterError===!0)return E!==void 0?Promise.reject(E):A})};n("click",b,w),b.defaultPrevented!==!0&&w();return}n("click",b)}function m(b){Ar(b,[13,32])?v(b,!0):ii(b)!==!0&&b.keyCode>=35&&b.keyCode<=40&&b.altKey!==!0&&b.metaKey!==!0&&a.onKbdNavigate(b.keyCode,o.$el)===!0&&it(b),n("keydown",b)}function p(){const b=a.tabProps.value.narrowIndicator,g=[],w=_("div",{ref:u,class:["q-tab__indicator",a.tabProps.value.indicatorClass]});e.icon!==void 0&&g.push(_(Ct,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&g.push(_("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&g.push(e.alertIcon!==void 0?_(Ct,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):_("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),b===!0&&g.push(w);const S=[_("div",{class:"q-focus-helper",tabindex:-1,ref:i}),_("div",{class:f.value},Jt(t.default,g))];return b===!1&&S.push(w),S}const y={name:C(()=>e.name),rootRef:s,tabIndicatorRef:u,routeData:r};ft(()=>{a.unregisterTab(y)}),Nt(()=>{a.registerTab(y)});function x(b,g){const w={ref:s,class:d.value,tabindex:h.value,role:"tab","aria-selected":c.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:v,onKeydown:m,...g};return gr(_(b,w,p()),[[Lc,l.value]])}return{renderTab:x,$tabs:a}}var Ss=Ce({name:"QTab",props:qx,emits:Bx,setup(e,{slots:t,emit:n}){const{renderTab:r}=Lx(e,t,n);return()=>r("div")}}),AE=Ce({name:"QTabPanels",props:{...kv,...wt},emits:Ev,setup(e,{slots:t}){const n=Ie(),r=_t(e,n.proxy.$q),{updatePanelsList:a,getPanelContent:o,panelDirectives:i}=Tv(),s=C(()=>"q-tab-panels q-panel-parent"+(r.value===!0?" q-tab-panels--dark q-dark":""));return()=>(a(t),Ir("div",{class:s.value},o(),"pan",e.swipeable,()=>i.value))}}),Bd=Ce({name:"QTabPanel",props:Sv,setup(e,{slots:t}){return()=>_("div",{class:"q-tab-panel",role:"tabpanel"},He(t.default))}}),ng=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,rg=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,ag=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,ju=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,Gu=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,Sl={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>ng.test(e),hexaColor:e=>rg.test(e),hexOrHexaColor:e=>ag.test(e),rgbColor:e=>ju.test(e),rgbaColor:e=>Gu.test(e),rgbOrRgbaColor:e=>ju.test(e)||Gu.test(e),hexOrRgbColor:e=>ng.test(e)||ju.test(e),hexaOrRgbaColor:e=>rg.test(e)||Gu.test(e),anyColor:e=>ag.test(e)||ju.test(e)||Gu.test(e)},IE=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function og({r:e,g:t,b:n,a:r}){const a=r!==void 0;if(e=Math.round(e),t=Math.round(t),n=Math.round(n),e>255||t>255||n>255||a&&r>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return r=a?(Math.round(255*r/100)|256).toString(16).slice(1):"","#"+(n|t<<8|e<<16|1<<24).toString(16).slice(1)+r}function ig({r:e,g:t,b:n,a:r}){return`rgb${r!==void 0?"a":""}(${e},${t},${n}${r!==void 0?","+r/100:""})`}function Vx(e){if(typeof e!="string")throw new TypeError("Expected a string");e=e.replace(/^#/,""),e.length===3?e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:e.length===4&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16);return e.length>6?{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:Math.round((t&255)/2.55)}:{r:t>>16,g:t>>8&255,b:t&255}}function sg({h:e,s:t,v:n,a:r}){let a,o,i;t=t/100,n=n/100,e=e/360;const s=Math.floor(e*6),u=e*6-s,l=n*(1-t),c=n*(1-u*t),d=n*(1-(1-u)*t);switch(s%6){case 0:a=n,o=d,i=l;break;case 1:a=c,o=n,i=l;break;case 2:a=l,o=n,i=d;break;case 3:a=l,o=c,i=n;break;case 4:a=d,o=l,i=n;break;case 5:a=n,o=l,i=c;break}return{r:Math.round(a*255),g:Math.round(o*255),b:Math.round(i*255),a:r}}function qd({r:e,g:t,b:n,a:r}){const a=Math.max(e,t,n),o=Math.min(e,t,n),i=a-o,s=a===0?0:i/a,u=a/255;let l;switch(a){case o:l=0;break;case e:l=t-n+i*(t<n?6:0),l/=6*i;break;case t:l=n-e+i*2,l/=6*i;break;case n:l=e-t+i*4,l/=6*i;break}return{h:Math.round(l*360),s:Math.round(s*100),v:Math.round(u*100),a:r}}function zx(e){if(typeof e!="string")throw new TypeError("Expected a string");const t=e.replace(/ /g,""),n=IE.exec(t);if(n===null)return Vx(t);const r={r:Math.min(255,parseInt(n[2],10)),g:Math.min(255,parseInt(n[3],10)),b:Math.min(255,parseInt(n[4],10))};if(n[1]){const a=parseFloat(n[5]);r.a=Math.min(1,isNaN(a)===!0?1:a)*100}return r}function ME(e){if(typeof e!="string"&&(!e||e.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const t=typeof e=="string"?zx(e):e,n=t.r/255,r=t.g/255,a=t.b/255,o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),i=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),s=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4);return .2126*o+.7152*i+.0722*s}var DE=["rgb(255,204,204)","rgb(255,230,204)","rgb(255,255,204)","rgb(204,255,204)","rgb(204,255,230)","rgb(204,255,255)","rgb(204,230,255)","rgb(204,204,255)","rgb(230,204,255)","rgb(255,204,255)","rgb(255,153,153)","rgb(255,204,153)","rgb(255,255,153)","rgb(153,255,153)","rgb(153,255,204)","rgb(153,255,255)","rgb(153,204,255)","rgb(153,153,255)","rgb(204,153,255)","rgb(255,153,255)","rgb(255,102,102)","rgb(255,179,102)","rgb(255,255,102)","rgb(102,255,102)","rgb(102,255,179)","rgb(102,255,255)","rgb(102,179,255)","rgb(102,102,255)","rgb(179,102,255)","rgb(255,102,255)","rgb(255,51,51)","rgb(255,153,51)","rgb(255,255,51)","rgb(51,255,51)","rgb(51,255,153)","rgb(51,255,255)","rgb(51,153,255)","rgb(51,51,255)","rgb(153,51,255)","rgb(255,51,255)","rgb(255,0,0)","rgb(255,128,0)","rgb(255,255,0)","rgb(0,255,0)","rgb(0,255,128)","rgb(0,255,255)","rgb(0,128,255)","rgb(0,0,255)","rgb(128,0,255)","rgb(255,0,255)","rgb(245,0,0)","rgb(245,123,0)","rgb(245,245,0)","rgb(0,245,0)","rgb(0,245,123)","rgb(0,245,245)","rgb(0,123,245)","rgb(0,0,245)","rgb(123,0,245)","rgb(245,0,245)","rgb(214,0,0)","rgb(214,108,0)","rgb(214,214,0)","rgb(0,214,0)","rgb(0,214,108)","rgb(0,214,214)","rgb(0,108,214)","rgb(0,0,214)","rgb(108,0,214)","rgb(214,0,214)","rgb(163,0,0)","rgb(163,82,0)","rgb(163,163,0)","rgb(0,163,0)","rgb(0,163,82)","rgb(0,163,163)","rgb(0,82,163)","rgb(0,0,163)","rgb(82,0,163)","rgb(163,0,163)","rgb(92,0,0)","rgb(92,46,0)","rgb(92,92,0)","rgb(0,92,0)","rgb(0,92,46)","rgb(0,92,92)","rgb(0,46,92)","rgb(0,0,92)","rgb(46,0,92)","rgb(92,0,92)","rgb(255,255,255)","rgb(205,205,205)","rgb(178,178,178)","rgb(153,153,153)","rgb(127,127,127)","rgb(102,102,102)","rgb(76,76,76)","rgb(51,51,51)","rgb(25,25,25)","rgb(0,0,0)"],ug="M5 5 h10 v10 h-10 v-10 z",PE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAH0lEQVQoU2NkYGAwZkAFZ5G5jPRRgOYEVDeB3EBjBQBOZwTVugIGyAAAAABJRU5ErkJggg==";Ce({name:"QColor",props:{...wt,...Mr,modelValue:String,defaultValue:String,defaultView:{type:String,default:"spectrum",validator:e=>["spectrum","tune","palette"].includes(e)},formatModel:{type:String,default:"auto",validator:e=>["auto","hex","rgb","hexa","rgba"].includes(e)},palette:Array,noHeader:Boolean,noHeaderTabs:Boolean,noFooter:Boolean,square:Boolean,flat:Boolean,bordered:Boolean,disable:Boolean,readonly:Boolean},emits:["update:modelValue","change"],setup(e,{emit:t}){const{proxy:n}=Ie(),{$q:r}=n,a=_t(e,r),{getCache:o}=Eu(),i=Z(null),s=Z(null),u=C(()=>e.formatModel==="auto"?null:e.formatModel.indexOf("hex")!==-1),l=C(()=>e.formatModel==="auto"?null:e.formatModel.indexOf("a")!==-1),c=Z(e.formatModel==="auto"?e.modelValue===void 0||e.modelValue===null||e.modelValue===""||e.modelValue.startsWith("#")?"hex":"rgb":e.formatModel.startsWith("hex")?"hex":"rgb"),d=Z(e.defaultView),f=Z(T(e.modelValue||e.defaultValue)),h=C(()=>e.disable!==!0&&e.readonly!==!0),v=C(()=>e.modelValue===void 0||e.modelValue===null||e.modelValue===""||e.modelValue.startsWith("#")),m=C(()=>u.value!==null?u.value:v.value),p=C(()=>({type:"hidden",name:e.name,value:f.value[m.value===!0?"hex":"rgb"]})),y=wo(p),x=C(()=>l.value!==null?l.value:f.value.a!==void 0),b=C(()=>({backgroundColor:f.value.rgb||"#000"})),g=C(()=>`q-color-picker__header-content q-color-picker__header-content--${(f.value.a!==void 0&&f.value.a<65?!0:ME(f.value)>.4)?"light":"dark"}`),w=C(()=>({background:`hsl(${f.value.h},100%,50%)`})),S=C(()=>({top:`${100-f.value.v}%`,[r.lang.rtl===!0?"right":"left"]:`${f.value.s}%`})),E=C(()=>e.palette!==void 0&&e.palette.length!==0?e.palette:DE),R=C(()=>"q-color-picker"+(e.bordered===!0?" q-color-picker--bordered":"")+(e.square===!0?" q-color-picker--square no-border-radius":"")+(e.flat===!0?" q-color-picker--flat no-shadow":"")+(e.disable===!0?" disabled":"")+(a.value===!0?" q-color-picker--dark q-dark":"")),A=C(()=>e.disable===!0?{"aria-disabled":"true"}:{}),k=C(()=>[[Tr,K,void 0,{prevent:!0,stop:!0,mouse:!0}]]);ke(()=>e.modelValue,P=>{const B=T(P||e.defaultValue);B.hex!==f.value.hex&&(f.value=B)}),ke(()=>e.defaultValue,P=>{if(!e.modelValue&&P){const B=T(P);B.hex!==f.value.hex&&(f.value=B)}});function M(P,B){f.value.hex=og(P),f.value.rgb=ig(P),f.value.r=P.r,f.value.g=P.g,f.value.b=P.b,f.value.a=P.a;const j=f.value[m.value===!0?"hex":"rgb"];t("update:modelValue",j),B===!0&&t("change",j)}function T(P){const B=l.value!==void 0?l.value:e.formatModel==="auto"?null:e.formatModel.indexOf("a")!==-1;if(typeof P!="string"||P.length===0||Sl.anyColor(P.replace(/ /g,""))!==!0)return{h:0,s:0,v:0,r:0,g:0,b:0,a:B===!0?100:void 0,hex:void 0,rgb:void 0};const j=zx(P);return B===!0&&j.a===void 0&&(j.a=100),j.hex=og(j),j.rgb=ig(j),Object.assign(j,qd(j))}function D(P,B,j){const ne=i.value;if(ne===null)return;const se=ne.clientWidth,J=ne.clientHeight,me=ne.getBoundingClientRect();let ge=Math.min(se,Math.max(0,P-me.left));r.lang.rtl===!0&&(ge=se-ge);const xe=Math.min(J,Math.max(0,B-me.top)),pe=Math.round(100*ge/se),le=Math.round(100*Math.max(0,Math.min(1,-(xe/J)+1))),X=sg({h:f.value.h,s:pe,v:le,a:x.value===!0?f.value.a:void 0});f.value.s=pe,f.value.v=le,M(X,j)}function I(P,B){const j=Math.round(P),ne=sg({h:j,s:f.value.s,v:f.value.v,a:x.value===!0?f.value.a:void 0});f.value.h=j,M(ne,B)}function F(P){I(P,!0)}function V(P,B,j,ne,se){if(ne!==void 0&&Gt(ne),!/^[0-9]+$/.test(P)){se===!0&&n.$forceUpdate();return}const J=Math.floor(Number(P));if(J<0||J>j){se===!0&&n.$forceUpdate();return}const me={r:B==="r"?J:f.value.r,g:B==="g"?J:f.value.g,b:B==="b"?J:f.value.b,a:x.value===!0?B==="a"?J:f.value.a:void 0};if(B!=="a"){const ge=qd(me);f.value.h=ge.h,f.value.s=ge.s,f.value.v=ge.v}if(M(me,se),se!==!0&&ne?.target.selectionEnd!==void 0){const ge=ne.target.selectionEnd;mt(()=>{ne.target.setSelectionRange(ge,ge)})}}function L(P,B){let j;const ne=P.target.value;if(Gt(P),c.value==="hex"){if(ne.length!==(x.value===!0?9:7)||!/^#[0-9A-Fa-f]+$/.test(ne))return!0;j=Vx(ne)}else{let J;if(ne.endsWith(")"))if(x.value!==!0&&ne.startsWith("rgb(")){if(J=ne.substring(4,ne.length-1).split(",").map(me=>parseInt(me,10)),J.length!==3||!/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.test(ne))return!0}else if(x.value===!0&&ne.startsWith("rgba(")){if(J=ne.substring(5,ne.length-1).split(","),J.length!==4||!/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/.test(ne))return!0;for(let ge=0;ge<3;ge++){const xe=parseInt(J[ge],10);if(xe<0||xe>255)return!0;J[ge]=xe}const me=parseFloat(J[3]);if(me<0||me>1)return!0;J[3]=me}else return!0;else return!0;if(J[0]<0||J[0]>255||J[1]<0||J[1]>255||J[2]<0||J[2]>255||x.value===!0&&(J[3]<0||J[3]>1))return!0;j={r:J[0],g:J[1],b:J[2],a:x.value===!0?J[3]*100:void 0}}const se=qd(j);if(f.value.h=se.h,f.value.s=se.s,f.value.v=se.v,M(j,B),B!==!0){const J=P.target.selectionEnd;mt(()=>{P.target.setSelectionRange(J,J)})}}function q(P){const B=T(P),j={r:B.r,g:B.g,b:B.b,a:B.a};j.a===void 0&&(j.a=f.value.a),f.value.h=B.h,f.value.s=B.s,f.value.v=B.v,M(j,!0)}function K(P){P.isFinal?D(P.position.left,P.position.top,!0):oe(P)}const oe=ax(P=>{D(P.position.left,P.position.top)},20);function W(P){D(P.pageX-window.pageXOffset,P.pageY-window.pageYOffset,!0)}function N(P){D(P.pageX-window.pageXOffset,P.pageY-window.pageYOffset)}function Q(P){s.value!==null&&(s.value.$el.style.opacity=P?1:0)}function Y(P){c.value=P}function fe(){const P=[];return e.noHeaderTabs!==!0&&P.push(_(tg,{class:"q-color-picker__header-tabs",modelValue:c.value,dense:!0,align:"justify","onUpdate:modelValue":Y},()=>[_(Ss,{label:"HEX"+(x.value===!0?"A":""),name:"hex",ripple:!1}),_(Ss,{label:"RGB"+(x.value===!0?"A":""),name:"rgb",ripple:!1})])),P.push(_("div",{class:"q-color-picker__header-banner row flex-center no-wrap"},[_("input",{class:"fit",value:f.value[c.value],...h.value!==!0?{readonly:!0}:{},...o("topIn",{onInput:B=>{Q(L(B)===!0)},onChange:Gt,onBlur:B=>{L(B,!0)===!0&&n.$forceUpdate(),Q(!1)}})}),_(Ct,{ref:s,class:"q-color-picker__error-icon absolute no-pointer-events",name:r.iconSet.type.negative})])),_("div",{class:"q-color-picker__header relative-position overflow-hidden"},[_("div",{class:"q-color-picker__header-bg absolute-full"}),_("div",{class:g.value,style:b.value},P)])}function $(){return _(AE,{modelValue:d.value,animated:!0},()=>[_(Bd,{class:"q-color-picker__spectrum-tab overflow-hidden",name:"spectrum"},H),_(Bd,{class:"q-pa-md q-color-picker__tune-tab",name:"tune"},ue),_(Bd,{class:"q-color-picker__palette-tab",name:"palette"},ye)])}function O(P){d.value=P}function ee(){return _("div",{class:"q-color-picker__footer relative-position overflow-hidden"},[_(tg,{class:"absolute-full",modelValue:d.value,dense:!0,align:"justify","onUpdate:modelValue":O},()=>[_(Ss,{icon:r.iconSet.colorPicker.spectrum,name:"spectrum",ripple:!1}),_(Ss,{icon:r.iconSet.colorPicker.tune,name:"tune",ripple:!1}),_(Ss,{icon:r.iconSet.colorPicker.palette,name:"palette",ripple:!1})])])}function H(){const P={ref:i,class:"q-color-picker__spectrum non-selectable relative-position cursor-pointer"+(h.value!==!0?" readonly":""),style:w.value,...h.value===!0?{onClick:W,onMousedown:N}:{}},B=[_("div",{style:{paddingBottom:"100%"}}),_("div",{class:"q-color-picker__spectrum-white absolute-full"}),_("div",{class:"q-color-picker__spectrum-black absolute-full"}),_("div",{class:"absolute",style:S.value},[f.value.hex!==void 0?_("div",{class:"q-color-picker__spectrum-circle"}):null])],j=[_(yi,{class:"q-color-picker__hue non-selectable",modelValue:f.value.h,min:0,max:360,trackSize:"8px",innerTrackColor:"transparent",selectionColor:"transparent",readonly:h.value!==!0,thumbPath:ug,"onUpdate:modelValue":I,onChange:F})];return x.value===!0&&j.push(_(yi,{class:"q-color-picker__alpha non-selectable",modelValue:f.value.a,min:0,max:100,trackSize:"8px",trackColor:"white",innerTrackColor:"transparent",selectionColor:"transparent",trackImg:PE,readonly:h.value!==!0,hideSelection:!0,thumbPath:ug,...o("alphaSlide",{"onUpdate:modelValue":ne=>V(ne,"a",100),onChange:ne=>V(ne,"a",100,void 0,!0)})})),[Ir("div",P,B,"spec",h.value,()=>k.value),_("div",{class:"q-color-picker__sliders"},j)]}function ue(){return[_("div",{class:"row items-center no-wrap"},[_("div","R"),_(yi,{modelValue:f.value.r,min:0,max:255,color:"red",dark:a.value,readonly:h.value!==!0,...o("rSlide",{"onUpdate:modelValue":P=>V(P,"r",255),onChange:P=>V(P,"r",255,void 0,!0)})}),_("input",{value:f.value.r,maxlength:3,readonly:h.value!==!0,onChange:Gt,...o("rIn",{onInput:P=>V(P.target.value,"r",255,P),onBlur:P=>V(P.target.value,"r",255,P,!0)})})]),_("div",{class:"row items-center no-wrap"},[_("div","G"),_(yi,{modelValue:f.value.g,min:0,max:255,color:"green",dark:a.value,readonly:h.value!==!0,...o("gSlide",{"onUpdate:modelValue":P=>V(P,"g",255),onChange:P=>V(P,"g",255,void 0,!0)})}),_("input",{value:f.value.g,maxlength:3,readonly:h.value!==!0,onChange:Gt,...o("gIn",{onInput:P=>V(P.target.value,"g",255,P),onBlur:P=>V(P.target.value,"g",255,P,!0)})})]),_("div",{class:"row items-center no-wrap"},[_("div","B"),_(yi,{modelValue:f.value.b,min:0,max:255,color:"blue",readonly:h.value!==!0,dark:a.value,...o("bSlide",{"onUpdate:modelValue":P=>V(P,"b",255),onChange:P=>V(P,"b",255,void 0,!0)})}),_("input",{value:f.value.b,maxlength:3,readonly:h.value!==!0,onChange:Gt,...o("bIn",{onInput:P=>V(P.target.value,"b",255,P),onBlur:P=>V(P.target.value,"b",255,P,!0)})})]),x.value===!0?_("div",{class:"row items-center no-wrap"},[_("div","A"),_(yi,{modelValue:f.value.a,color:"grey",readonly:h.value!==!0,dark:a.value,...o("aSlide",{"onUpdate:modelValue":P=>V(P,"a",100),onChange:P=>V(P,"a",100,void 0,!0)})}),_("input",{value:f.value.a,maxlength:3,readonly:h.value!==!0,onChange:Gt,...o("aIn",{onInput:P=>V(P.target.value,"a",100,P),onBlur:P=>V(P.target.value,"a",100,P,!0)})})]):null]}function ye(){const P=B=>_("div",{class:"q-color-picker__cube col-auto",style:{backgroundColor:B},...h.value===!0?o("palette#"+B,{onClick:()=>{q(B)}}):{}});return[_("div",{class:"row items-center q-color-picker__palette-rows"+(h.value===!0?" q-color-picker__palette-rows--editable":"")},E.value.map(P))]}return()=>{const P=[$()];return e.name!==void 0&&e.disable!==!0&&y(P,"push"),e.noHeader!==!0&&P.unshift(fe()),e.noFooter!==!0&&P.push(ee()),_("div",{class:R.value,...A.value},P)}}});var oo=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function FE(e,t,n){return Object.prototype.toString.call(e)==="[object Date]"&&(n=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),qE(Pv(e,t,n))}function lg(e,t,n){return Hx(BE(e,t,n))}function NE(e){return OE(e)===0}function kl(e,t){return t<=6?31:t<=11||NE(e)?30:29}function OE(e){const t=oo.length;let n=oo[0],r,a,o,i,s;if(e<n||e>=oo[t-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<t&&(r=oo[s],a=r-n,!(e<r));s+=1)n=r;return i=e-n,a-i<6&&(i=i-a+jt(a+4,33)*33),o=cr(cr(i+1,33)-1,4),o===-1&&(o=4),o}function $x(e,t){const n=oo.length,r=e+621;let a=-14,o=oo[0],i,s,u,l,c;if(e<o||e>=oo[n-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<n&&(i=oo[c],s=i-o,!(e<i));c+=1)a=a+jt(s,33)*8+jt(cr(s,33),4),o=i;l=e-o,a=a+jt(l,33)*8+jt(cr(l,33)+3,4),cr(s,33)===4&&s-l===4&&(a+=1);const d=jt(r,4)-jt((jt(r,100)+1)*3,4)-150,f=20+a-d;return t||(s-l<6&&(l=l-s+jt(s+4,33)*33),u=cr(cr(l+1,33)-1,4),u===-1&&(u=4)),{leap:u,gy:r,march:f}}function BE(e,t,n){const r=$x(e,!0);return Pv(r.gy,3,r.march)+(t-1)*31-jt(t,7)*(t-7)+n-1}function qE(e){const t=Hx(e).gy;let n=t-621,r,a,o;const i=$x(n,!1),s=Pv(t,3,i.march);if(o=e-s,o>=0){if(o<=185)return a=1+jt(o,31),r=cr(o,31)+1,{jy:n,jm:a,jd:r};o-=186}else n-=1,o+=179,i.leap===1&&(o+=1);return a=7+jt(o,30),r=cr(o,30)+1,{jy:n,jm:a,jd:r}}function Pv(e,t,n){let r=jt((e+jt(t-8,6)+100100)*1461,4)+jt(153*cr(t+9,12)+2,5)+n-34840408;return r=r-jt(jt(e+100100+jt(t-8,6),100)*3,4)+752,r}function Hx(e){let t=4*e+139361631;t=t+jt(jt(4*e+183187720,146097)*3,4)*4-3908;const n=jt(cr(t,1461),4)*5+308,r=jt(cr(n,153),5)+1,a=cr(jt(n,153),12)+1;return{gy:jt(t,1461)-100100+jt(8-a,6),gm:a,gd:r}}function jt(e,t){return~~(e/t)}function cr(e,t){return e-~~(e/t)*t}var LE=["gregorian","persian"],Ql={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>LE.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Wx=["update:modelValue"];function Ca(e){return e.year+"/"+Et(e.month)+"/"+Et(e.day)}function Ux(e,t){const n=C(()=>e.disable!==!0&&e.readonly!==!0),r=C(()=>n.value===!0?0:-1),a=C(()=>{const s=[];return e.color!==void 0&&s.push(`bg-${e.color}`),e.textColor!==void 0&&s.push(`text-${e.textColor}`),s.join(" ")});function o(){return e.locale!==void 0?{...t.lang.date,...e.locale}:t.lang.date}function i(s){const u=new Date,l=s===!0?null:0;if(e.calendar==="persian"){const c=FE(u);return{year:c.jy,month:c.jm,day:c.jd}}return{year:u.getFullYear(),month:u.getMonth()+1,day:u.getDate(),hour:l,minute:l,second:l,millisecond:l}}return{editable:n,tabindex:r,headerClass:a,getLocale:o,getCurrentDate:i}}var jx=864e5,VE=36e5,sh=6e4,Gx="YYYY-MM-DDTHH:mm:ss.SSSZ",zE=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,$E=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Ld={};function HE(e,t){const n="("+t.days.join("|")+")",r=e+n;if(Ld[r]!==void 0)return Ld[r];const a="("+t.daysShort.join("|")+")",o="("+t.months.join("|")+")",i="("+t.monthsShort.join("|")+")",s={};let u=0;const l=e.replace($E,d=>{switch(u++,d){case"YY":return s.YY=u,"(-?\\d{1,2})";case"YYYY":return s.YYYY=u,"(-?\\d{1,4})";case"M":return s.M=u,"(\\d{1,2})";case"Mo":return s.M=u++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return s.M=u,"(\\d{2})";case"MMM":return s.MMM=u,i;case"MMMM":return s.MMMM=u,o;case"D":return s.D=u,"(\\d{1,2})";case"Do":return s.D=u++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return s.D=u,"(\\d{2})";case"H":return s.H=u,"(\\d{1,2})";case"HH":return s.H=u,"(\\d{2})";case"h":return s.h=u,"(\\d{1,2})";case"hh":return s.h=u,"(\\d{2})";case"m":return s.m=u,"(\\d{1,2})";case"mm":return s.m=u,"(\\d{2})";case"s":return s.s=u,"(\\d{1,2})";case"ss":return s.s=u,"(\\d{2})";case"S":return s.S=u,"(\\d{1})";case"SS":return s.S=u,"(\\d{2})";case"SSS":return s.S=u,"(\\d{3})";case"A":return s.A=u,"(AM|PM)";case"a":return s.a=u,"(am|pm)";case"aa":return s.aa=u,"(a\\.m\\.|p\\.m\\.)";case"ddd":return a;case"dddd":return n;case"Q":case"d":case"E":return"(\\d{1})";case"do":return u++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return u++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return u++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return s.Z=u,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return s.ZZ=u,"(Z|[+-]\\d{2}\\d{2})";case"X":return s.X=u,"(-?\\d+)";case"x":return s.x=u,"(-?\\d{4,})";default:return u--,d[0]==="["&&(d=d.substring(1,d.length-1)),d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:s,regex:new RegExp("^"+l)};return Ld[r]=c,c}function Kx(e,t){return e!==void 0?e:t!==void 0?t.date:Qf.date}function cg(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),o=r%60;return n+Et(a)+t+Et(o)}function Os(e,t,n,r,a){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(a!==void 0&&Object.assign(o,a),e==null||e===""||typeof e!="string")return o;t===void 0&&(t=Gx);const i=Kx(n,Bc.props),s=i.months,u=i.monthsShort,{regex:l,map:c}=HE(t,i),d=e.match(l);if(d===null)return o;let f="";if(c.X!==void 0||c.x!==void 0){const h=parseInt(d[c.X!==void 0?c.X:c.x],10);if(isNaN(h)===!0||h<0)return o;const v=new Date(h*(c.X!==void 0?1e3:1));o.year=v.getFullYear(),o.month=v.getMonth()+1,o.day=v.getDate(),o.hour=v.getHours(),o.minute=v.getMinutes(),o.second=v.getSeconds(),o.millisecond=v.getMilliseconds()}else{if(c.YYYY!==void 0)o.year=parseInt(d[c.YYYY],10);else if(c.YY!==void 0){const h=parseInt(d[c.YY],10);o.year=h<0?h:2e3+h}if(c.M!==void 0){if(o.month=parseInt(d[c.M],10),o.month<1||o.month>12)return o}else c.MMM!==void 0?o.month=u.indexOf(d[c.MMM])+1:c.MMMM!==void 0&&(o.month=s.indexOf(d[c.MMMM])+1);if(c.D!==void 0){if(o.day=parseInt(d[c.D],10),o.year===null||o.month===null||o.day<1)return o;const h=r!=="persian"?new Date(o.year,o.month,0).getDate():kl(o.year,o.month);if(o.day>h)return o}c.H!==void 0?o.hour=parseInt(d[c.H],10)%24:c.h!==void 0&&(o.hour=parseInt(d[c.h],10)%12,(c.A&&d[c.A]==="PM"||c.a&&d[c.a]==="pm"||c.aa&&d[c.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),c.m!==void 0&&(o.minute=parseInt(d[c.m],10)%60),c.s!==void 0&&(o.second=parseInt(d[c.s],10)%60),c.S!==void 0&&(o.millisecond=parseInt(d[c.S],10)*10**(3-d[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(f=c.Z!==void 0?d[c.Z].replace(":",""):d[c.ZZ],o.timezoneOffset=(f[0]==="+"?-1:1)*(60*f.slice(1,3)+1*f.slice(3,5)))}return o.dateHash=Et(o.year,4)+"/"+Et(o.month)+"/"+Et(o.day),o.timeHash=Et(o.hour)+":"+Et(o.minute)+":"+Et(o.second)+f,o}function Vd(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);const r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);const a=(t-n)/(jx*7);return 1+Math.floor(a)}function Sa(e,t,n){const r=new Date(e),a=`set${n===!0?"UTC":""}`;switch(t){case"year":case"years":r[`${a}Month`](0);case"month":case"months":r[`${a}Date`](1);case"day":case"days":case"date":r[`${a}Hours`](0);case"hour":case"hours":r[`${a}Minutes`](0);case"minute":case"minutes":r[`${a}Seconds`](0);case"second":case"seconds":r[`${a}Milliseconds`](0)}return r}function Ku(e,t,n){return(e.getTime()-e.getTimezoneOffset()*sh-(t.getTime()-t.getTimezoneOffset()*sh))/n}function Xx(e,t,n="days"){const r=new Date(e),a=new Date(t);switch(n){case"years":case"year":return r.getFullYear()-a.getFullYear();case"months":case"month":return(r.getFullYear()-a.getFullYear())*12+r.getMonth()-a.getMonth();case"days":case"day":case"date":return Ku(Sa(r,"day"),Sa(a,"day"),jx);case"hours":case"hour":return Ku(Sa(r,"hour"),Sa(a,"hour"),VE);case"minutes":case"minute":return Ku(Sa(r,"minute"),Sa(a,"minute"),sh);case"seconds":case"second":return Ku(Sa(r,"second"),Sa(a,"second"),1e3)}}function zd(e){return Xx(e,Sa(e,"year"),"days")+1}function bi(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}var dg={YY(e,t,n){const r=this.YYYY(e,t,n)%100;return r>=0?Et(r):"-"+Et(Math.abs(r))},YYYY(e,t,n){return n??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return bi(e.getMonth()+1)},MM(e){return Et(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return bi(this.Q(e))},D(e){return e.getDate()},Do(e){return bi(e.getDate())},DD(e){return Et(e.getDate())},DDD(e){return zd(e)},DDDo(e){return bi(zd(e))},DDDD(e){return Et(zd(e),3)},d(e){return e.getDay()},do(e){return bi(e.getDay())},dd(e,t){return t.days[e.getDay()].slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Vd(e)},wo(e){return bi(Vd(e))},ww(e){return Et(Vd(e))},H(e){return e.getHours()},HH(e){return Et(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return Et(this.h(e))},m(e){return e.getMinutes()},mm(e){return Et(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return Et(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return Et(Math.floor(e.getMilliseconds()/10))},SSS(e){return Et(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,t,n,r){const a=r??e.getTimezoneOffset();return cg(a,":")},ZZ(e,t,n,r){const a=r??e.getTimezoneOffset();return cg(a)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Qx(e,t,n,r,a){if(e!==0&&!e||e===1/0||e===-1/0)return;const o=new Date(e);if(isNaN(o))return;t===void 0&&(t=Gx);const i=Kx(n,Bc.props);return t.replace(zE,(s,u)=>s in dg?dg[s](o,i,r,a):u===void 0?s:u.split("\\]").join("]"))}var ba=20,WE=["Calendar","Years","Months"],fg=e=>WE.includes(e),$d=e=>/^-?[\d]+\/[0-1]\d$/.test(e),xi="  ";function Ka(e){return e.year+"/"+Et(e.month)}Ce({name:"QDate",props:{...Ql,...Mr,...wt,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...Ql.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:$d},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:$d},navigationMaxYearMonth:{type:String,validator:$d},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:fg}},emits:[...Wx,"rangeStart","rangeEnd","navigation"],setup(e,{slots:t,emit:n}){const{proxy:r}=Ie(),{$q:a}=r,o=_t(e,a),{getCache:i}=Eu(),{tabindex:s,headerClass:u,getLocale:l,getCurrentDate:c}=Ux(e,a);let d;const f=ku(e),h=wo(f),v=Z(null),m=Z(et()),p=Z(l()),y=C(()=>et()),x=C(()=>l()),b=C(()=>c()),g=Z(he(m.value,p.value)),w=Z(e.defaultView),S=C(()=>a.lang.rtl===!0?"right":"left"),E=Z(S.value),R=Z(S.value),A=g.value.year,k=Z(A-A%ba-(A<0?ba:0)),M=Z(null),T=C(()=>{const G=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${G} q-date--${G}-${e.minimal===!0?"minimal":"standard"}`+(o.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),D=C(()=>e.color||"primary"),I=C(()=>e.textColor||"white"),F=C(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),V=C(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),L=C(()=>V.value.filter(G=>typeof G=="string").map(G=>tt(G,m.value,p.value)).filter(G=>G.dateHash!==null&&G.day!==null&&G.month!==null&&G.year!==null)),q=C(()=>{const G=re=>tt(re,m.value,p.value);return V.value.filter(re=>kn(re)===!0&&re.from!==void 0&&re.to!==void 0).map(re=>({from:G(re.from),to:G(re.to)})).filter(re=>re.from.dateHash!==null&&re.to.dateHash!==null&&re.from.dateHash<re.to.dateHash)}),K=C(()=>e.calendar!=="persian"?G=>new Date(G.year,G.month-1,G.day):G=>{const re=lg(G.year,G.month,G.day);return new Date(re.gy,re.gm-1,re.gd)}),oe=C(()=>e.calendar==="persian"?Ca:(G,re,_e)=>Qx(new Date(G.year,G.month-1,G.day,G.hour,G.minute,G.second,G.millisecond),re===void 0?m.value:re,_e===void 0?p.value:_e,G.year,G.timezoneOffset)),W=C(()=>L.value.length+q.value.reduce((G,re)=>G+1+Xx(K.value(re.to),K.value(re.from)),0)),N=C(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(M.value!==null){const _e=M.value.init,Oe=K.value(_e);return p.value.daysShort[Oe.getDay()]+", "+p.value.monthsShort[_e.month-1]+" "+_e.day+xi+"?"}if(W.value===0)return xi;if(W.value>1)return`${W.value} ${p.value.pluralDay}`;const G=L.value[0],re=K.value(G);return isNaN(re.valueOf())===!0?xi:p.value.headerTitle!==void 0?p.value.headerTitle(re,G):p.value.daysShort[re.getDay()]+", "+p.value.monthsShort[G.month-1]+" "+G.day}),Q=C(()=>L.value.concat(q.value.map(re=>re.from)).sort((re,_e)=>re.year-_e.year||re.month-_e.month)[0]),Y=C(()=>L.value.concat(q.value.map(re=>re.to)).sort((re,_e)=>_e.year-re.year||_e.month-re.month)[0]),fe=C(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(W.value===0)return xi;if(W.value>1){const G=Q.value,re=Y.value,_e=p.value.monthsShort;return _e[G.month-1]+(G.year!==re.year?" "+G.year+xi+_e[re.month-1]+" ":G.month!==re.month?xi+_e[re.month-1]:"")+" "+re.year}return L.value[0].year}),$=C(()=>{const G=[a.iconSet.datetime.arrowLeft,a.iconSet.datetime.arrowRight];return a.lang.rtl===!0?G.reverse():G}),O=C(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):p.value.firstDayOfWeek),ee=C(()=>{const G=p.value.daysShort,re=O.value;return re>0?G.slice(re,7).concat(G.slice(0,re)):G}),H=C(()=>{const G=g.value;return e.calendar!=="persian"?new Date(G.year,G.month,0).getDate():kl(G.year,G.month)}),ue=C(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),ye=C(()=>{if(e.navigationMinYearMonth===void 0)return null;const G=e.navigationMinYearMonth.split("/");return{year:parseInt(G[0],10),month:parseInt(G[1],10)}}),P=C(()=>{if(e.navigationMaxYearMonth===void 0)return null;const G=e.navigationMaxYearMonth.split("/");return{year:parseInt(G[0],10),month:parseInt(G[1],10)}}),B=C(()=>{const G={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return ye.value!==null&&ye.value.year>=g.value.year&&(G.year.prev=!1,ye.value.year===g.value.year&&ye.value.month>=g.value.month&&(G.month.prev=!1)),P.value!==null&&P.value.year<=g.value.year&&(G.year.next=!1,P.value.year===g.value.year&&P.value.month<=g.value.month&&(G.month.next=!1)),G}),j=C(()=>{const G={};return L.value.forEach(re=>{const _e=Ka(re);G[_e]===void 0&&(G[_e]=[]),G[_e].push(re.day)}),G}),ne=C(()=>{const G={};return q.value.forEach(re=>{const _e=Ka(re.from),Oe=Ka(re.to);if(G[_e]===void 0&&(G[_e]=[]),G[_e].push({from:re.from.day,to:_e===Oe?re.to.day:void 0,range:re}),_e<Oe){let qe;const{year:vt,month:We}=re.from,at=We<12?{year:vt,month:We+1}:{year:vt+1,month:1};for(;(qe=Ka(at))<=Oe;)G[qe]===void 0&&(G[qe]=[]),G[qe].push({from:void 0,to:qe===Oe?re.to.day:void 0,range:re}),at.month++,at.month>12&&(at.year++,at.month=1)}}),G}),se=C(()=>{if(M.value===null)return;const{init:G,initHash:re,final:_e,finalHash:Oe}=M.value,[qe,vt]=re<=Oe?[G,_e]:[_e,G],We=Ka(qe),at=Ka(vt);if(We!==J.value&&at!==J.value)return;const kt={};return We===J.value?(kt.from=qe.day,kt.includeFrom=!0):kt.from=1,at===J.value?(kt.to=vt.day,kt.includeTo=!0):kt.to=H.value,kt}),J=C(()=>Ka(g.value)),me=C(()=>{const G={};if(e.options===void 0){for(let _e=1;_e<=H.value;_e++)G[_e]=!0;return G}const re=typeof e.options=="function"?e.options:_e=>e.options.includes(_e);for(let _e=1;_e<=H.value;_e++){const Oe=J.value+"/"+Et(_e);G[_e]=re(Oe)}return G}),ge=C(()=>{const G={};if(e.events===void 0)for(let re=1;re<=H.value;re++)G[re]=!1;else{const re=typeof e.events=="function"?e.events:_e=>e.events.includes(_e);for(let _e=1;_e<=H.value;_e++){const Oe=J.value+"/"+Et(_e);G[_e]=re(Oe)===!0&&ue.value(Oe)}}return G}),xe=C(()=>{let G,re;const{year:_e,month:Oe}=g.value;if(e.calendar!=="persian")G=new Date(_e,Oe-1,1),re=new Date(_e,Oe-1,0).getDate();else{const qe=lg(_e,Oe,1);G=new Date(qe.gy,qe.gm-1,qe.gd);let vt=Oe-1,We=_e;vt===0&&(vt=12,We--),re=kl(We,vt)}return{days:G.getDay()-O.value-1,endDay:re}}),pe=C(()=>{const G=[],{days:re,endDay:_e}=xe.value,Oe=re<0?re+7:re;if(Oe<6)for(let We=_e-Oe;We<=_e;We++)G.push({i:We,fill:!0});const qe=G.length;for(let We=1;We<=H.value;We++){const at={i:We,event:ge.value[We],classes:[]};me.value[We]===!0&&(at.in=!0,at.flat=!0),G.push(at)}if(j.value[J.value]!==void 0&&j.value[J.value].forEach(We=>{const at=qe+We-1;Object.assign(G[at],{selected:!0,unelevated:!0,flat:!1,color:D.value,textColor:I.value})}),ne.value[J.value]!==void 0&&ne.value[J.value].forEach(We=>{if(We.from!==void 0){const at=qe+We.from-1,kt=qe+(We.to||H.value)-1;for(let yr=at;yr<=kt;yr++)Object.assign(G[yr],{range:We.range,unelevated:!0,color:D.value,textColor:I.value});Object.assign(G[at],{rangeFrom:!0,flat:!1}),We.to!==void 0&&Object.assign(G[kt],{rangeTo:!0,flat:!1})}else if(We.to!==void 0){const at=qe+We.to-1;for(let kt=qe;kt<=at;kt++)Object.assign(G[kt],{range:We.range,unelevated:!0,color:D.value,textColor:I.value});Object.assign(G[at],{flat:!1,rangeTo:!0})}else{const at=qe+H.value-1;for(let kt=qe;kt<=at;kt++)Object.assign(G[kt],{range:We.range,unelevated:!0,color:D.value,textColor:I.value})}}),se.value!==void 0){const We=qe+se.value.from-1,at=qe+se.value.to-1;for(let kt=We;kt<=at;kt++)G[kt].color=D.value,G[kt].editRange=!0;se.value.includeFrom===!0&&(G[We].editRangeFrom=!0),se.value.includeTo===!0&&(G[at].editRangeTo=!0)}g.value.year===b.value.year&&g.value.month===b.value.month&&(G[qe+b.value.day-1].today=!0);const vt=G.length%7;if(vt>0){const We=7-vt;for(let at=1;at<=We;at++)G.push({i:at,fill:!0})}return G.forEach(We=>{let at="q-date__calendar-item ";We.fill===!0?at+="q-date__calendar-item--fill":(at+=`q-date__calendar-item--${We.in===!0?"in":"out"}`,We.range!==void 0&&(at+=` q-date__range${We.rangeTo===!0?"-to":We.rangeFrom===!0?"-from":""}`),We.editRange===!0&&(at+=` q-date__edit-range${We.editRangeFrom===!0?"-from":""}${We.editRangeTo===!0?"-to":""}`),(We.range!==void 0||We.editRange===!0)&&(at+=` text-${We.color}`)),We.classes=at}),G}),le=C(()=>e.disable===!0?{"aria-disabled":"true"}:{});ke(()=>e.modelValue,G=>{if(d===JSON.stringify(G))d=0;else{const re=he(m.value,p.value);It(re.year,re.month,re)}}),ke(w,()=>{v.value!==null&&r.$el.contains(document.activeElement)===!0&&v.value.focus()}),ke(()=>g.value.year+"|"+g.value.month,()=>{n("navigation",{year:g.value.year,month:g.value.month})}),ke(y,G=>{Ne(G,p.value,"mask"),m.value=G}),ke(x,G=>{Ne(m.value,G,"locale"),p.value=G});function X(G){d=JSON.stringify(G)}function de(){const{year:G,month:re,day:_e}=b.value,Oe={...g.value,year:G,month:re,day:_e},qe=j.value[Ka(Oe)];(qe===void 0||qe.includes(Oe.day)===!1)&&ma(Oe),Me(Oe.year,Oe.month)}function Re(G){fg(G)===!0&&(w.value=G)}function Fe(G,re){["month","year"].includes(G)&&(G==="month"?ce:Te)(re===!0?-1:1)}function Me(G,re){w.value="Calendar",It(G,re)}function De(G,re){if(e.range===!1||!G){M.value=null;return}const _e=Object.assign({...g.value},G),Oe=re!==void 0?Object.assign({...g.value},re):_e;M.value={init:_e,initHash:Ca(_e),final:Oe,finalHash:Ca(Oe)},Me(_e.year,_e.month)}function et(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function tt(G,re,_e){return Os(G,re,_e,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function he(G,re){const _e=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(_e.length===0)return Ee();const Oe=_e[_e.length-1],qe=tt(Oe.from!==void 0?Oe.from:Oe,G,re);return qe.dateHash===null?Ee():qe}function Ee(){let G,re;if(e.defaultYearMonth!==void 0){const _e=e.defaultYearMonth.split("/");G=parseInt(_e[0],10),re=parseInt(_e[1],10)}else{const _e=b.value!==void 0?b.value:c();G=_e.year,re=_e.month}return{year:G,month:re,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:G+"/"+Et(re)+"/01"}}function ce(G){let re=g.value.year,_e=Number(g.value.month)+G;_e===13?(_e=1,re++):_e===0&&(_e=12,re--),It(re,_e),F.value===!0&&Nn("month")}function Te(G){const re=Number(g.value.year)+G;It(re,g.value.month),F.value===!0&&Nn("year")}function Pe(G){It(G,g.value.month),w.value=e.defaultView==="Years"?"Months":"Calendar",F.value===!0&&Nn("year")}function Ze(G){It(g.value.year,G),w.value="Calendar",F.value===!0&&Nn("month")}function Ve(G,re){(j.value[re]?.includes(G.day)===!0?we:ma)(G)}function ut(G){return{year:G.year,month:G.month,day:G.day}}function It(G,re,_e){if(ye.value!==null&&G<=ye.value.year&&((re<ye.value.month||G<ye.value.year)&&(re=ye.value.month),G=ye.value.year),P.value!==null&&G>=P.value.year&&((re>P.value.month||G>P.value.year)&&(re=P.value.month),G=P.value.year),_e!==void 0){const{hour:qe,minute:vt,second:We,millisecond:at,timezoneOffset:kt,timeHash:yr}=_e;Object.assign(g.value,{hour:qe,minute:vt,second:We,millisecond:at,timezoneOffset:kt,timeHash:yr})}const Oe=G+"/"+Et(re)+"/01";Oe!==g.value.dateHash&&(E.value=g.value.dateHash<Oe==(a.lang.rtl!==!0)?"left":"right",G!==g.value.year&&(R.value=E.value),mt(()=>{k.value=G-G%ba-(G<0?ba:0),Object.assign(g.value,{year:G,month:re,day:1,dateHash:Oe})}))}function Xt(G,re,_e){const Oe=G!==null&&G.length===1&&e.multiple===!1?G[0]:G,{reason:qe,details:vt}=ja(re,_e);X(Oe),n("update:modelValue",Oe,qe,vt)}function Nn(G){const re=L.value[0]!==void 0&&L.value[0].dateHash!==null?{...L.value[0]}:{...g.value};mt(()=>{re.year=g.value.year,re.month=g.value.month;const _e=e.calendar!=="persian"?new Date(re.year,re.month,0).getDate():kl(re.year,re.month);re.day=Math.min(Math.max(1,re.day),_e);const Oe=sr(re),{details:qe}=ja("",re);X(Oe),n("update:modelValue",Oe,G,qe)})}function ja(G,re){return re.from!==void 0?{reason:`${G}-range`,details:{...ut(re.target),from:ut(re.from),to:ut(re.to)}}:{reason:`${G}-day`,details:ut(re)}}function sr(G,re,_e){return G.from!==void 0?{from:oe.value(G.from,re,_e),to:oe.value(G.to,re,_e)}:oe.value(G,re,_e)}function ma(G){let re;if(e.multiple===!0)if(G.from!==void 0){const _e=Ca(G.from),Oe=Ca(G.to),qe=L.value.filter(We=>We.dateHash<_e||We.dateHash>Oe),vt=q.value.filter(({from:We,to:at})=>at.dateHash<_e||We.dateHash>Oe);re=qe.concat(vt).concat(G).map(We=>sr(We))}else{const _e=V.value.slice();_e.push(sr(G)),re=_e}else re=sr(G);Xt(re,"add",G)}function we(G){if(e.noUnset===!0)return;let re=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const _e=sr(G);G.from!==void 0?re=e.modelValue.filter(Oe=>Oe.from!==void 0?Oe.from!==_e.from&&Oe.to!==_e.to:!0):re=e.modelValue.filter(Oe=>Oe!==_e),re.length===0&&(re=null)}Xt(re,"remove",G)}function Ne(G,re,_e){const Oe=L.value.concat(q.value).map(vt=>sr(vt,G,re)).filter(vt=>vt.from!==void 0?vt.from.dateHash!==null&&vt.to.dateHash!==null:vt.dateHash!==null),qe=(e.multiple===!0?Oe:Oe[0])||null;X(qe),n("update:modelValue",qe,_e)}function Xe(){if(e.minimal!==!0)return _("div",{class:"q-date__header "+u.value},[_("div",{class:"relative-position"},[_(pn,{name:"q-transition--fade"},()=>_("div",{key:"h-yr-"+fe.value,class:"q-date__header-subtitle q-date__header-link "+(w.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...i("vY",{onClick(){w.value="Years"},onKeyup(G){G.keyCode===13&&(w.value="Years")}})},[fe.value]))]),_("div",{class:"q-date__header-title relative-position flex no-wrap"},[_("div",{class:"relative-position col"},[_(pn,{name:"q-transition--fade"},()=>_("div",{key:"h-sub"+N.value,class:"q-date__header-title-label q-date__header-link "+(w.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...i("vC",{onClick(){w.value="Calendar"},onKeyup(G){G.keyCode===13&&(w.value="Calendar")}})},[N.value]))]),e.todayBtn===!0?_(Tt,{class:"q-date__header-today self-start",icon:a.iconSet.datetime.today,"aria-label":a.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:s.value,onClick:de}):null])])}function Ge({label:G,type:re,key:_e,dir:Oe,goTo:qe,boundaries:vt,cls:We}){return[_("div",{class:"row items-center q-date__arrow"},[_(Tt,{round:!0,dense:!0,size:"sm",flat:!0,icon:$.value[0],"aria-label":re==="Years"?a.lang.date.prevYear:a.lang.date.prevMonth,tabindex:s.value,disable:vt.prev===!1,...i("go-#"+re,{onClick(){qe(-1)}})})]),_("div",{class:"relative-position overflow-hidden flex flex-center"+We},[_(pn,{name:"q-transition--jump-"+Oe},()=>_("div",{key:_e},[_(Tt,{flat:!0,dense:!0,noCaps:!0,label:G,tabindex:s.value,...i("view#"+re,{onClick:()=>{w.value=re}})})]))]),_("div",{class:"row items-center q-date__arrow"},[_(Tt,{round:!0,dense:!0,size:"sm",flat:!0,icon:$.value[1],"aria-label":re==="Years"?a.lang.date.nextYear:a.lang.date.nextMonth,tabindex:s.value,disable:vt.next===!1,...i("go+#"+re,{onClick(){qe(1)}})})])]}const lt={Calendar:()=>[_("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[_("div",{class:"q-date__navigation row items-center no-wrap"},Ge({label:p.value.months[g.value.month-1],type:"Months",key:g.value.month,dir:E.value,goTo:ce,boundaries:B.value.month,cls:" col"}).concat(Ge({label:g.value.year,type:"Years",key:g.value.year,dir:R.value,goTo:Te,boundaries:B.value.year,cls:""}))),_("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},ee.value.map(G=>_("div",{class:"q-date__calendar-item"},[_("div",G)]))),_("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[_(pn,{name:"q-transition--slide-"+E.value},()=>_("div",{key:J.value,class:"q-date__calendar-days fit"},pe.value.map(G=>_("div",{class:G.classes},[G.in===!0?_(Tt,{class:G.today===!0?"q-date__today":"",dense:!0,flat:G.flat,unelevated:G.unelevated,color:G.color,textColor:G.textColor,label:G.i,tabindex:s.value,...i("day#"+G.i,{onClick:()=>{Wt(G.i)},onMouseover:()=>{Lt(G.i)}})},G.event!==!1?()=>_("div",{class:"q-date__event bg-"+G.event}):null):_("div",""+G.i)]))))])])],Months(){const G=g.value.year===b.value.year,re=Oe=>ye.value!==null&&g.value.year===ye.value.year&&ye.value.month>Oe||P.value!==null&&g.value.year===P.value.year&&P.value.month<Oe,_e=p.value.monthsShort.map((Oe,qe)=>{const vt=g.value.month===qe+1;return _("div",{class:"q-date__months-item flex flex-center"},[_(Tt,{class:G===!0&&b.value.month===qe+1?"q-date__today":null,flat:vt!==!0,label:Oe,unelevated:vt,color:vt===!0?D.value:null,textColor:vt===!0?I.value:null,tabindex:s.value,disable:re(qe+1),...i("month#"+qe,{onClick:()=>{Ze(qe+1)}})})])});return e.yearsInMonthView===!0&&_e.unshift(_("div",{class:"row no-wrap full-width"},[Ge({label:g.value.year,type:"Years",key:g.value.year,dir:R.value,goTo:Te,boundaries:B.value.year,cls:" col"})])),_("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},_e)},Years(){const G=k.value,re=G+ba,_e=[],Oe=qe=>ye.value!==null&&ye.value.year>qe||P.value!==null&&P.value.year<qe;for(let qe=G;qe<=re;qe++){const vt=g.value.year===qe;_e.push(_("div",{class:"q-date__years-item flex flex-center"},[_(Tt,{key:"yr"+qe,class:b.value.year===qe?"q-date__today":null,flat:!vt,label:qe,dense:!0,unelevated:vt,color:vt===!0?D.value:null,textColor:vt===!0?I.value:null,tabindex:s.value,disable:Oe(qe),...i("yr#"+qe,{onClick:()=>{Pe(qe)}})})]))}return _("div",{class:"q-date__view q-date__years flex flex-center"},[_("div",{class:"col-auto"},[_(Tt,{round:!0,dense:!0,flat:!0,icon:$.value[0],"aria-label":a.lang.date.prevRangeYears(ba),tabindex:s.value,disable:Oe(G),...i("y-",{onClick:()=>{k.value-=ba}})})]),_("div",{class:"q-date__years-content col self-stretch row items-center"},_e),_("div",{class:"col-auto"},[_(Tt,{round:!0,dense:!0,flat:!0,icon:$.value[1],"aria-label":a.lang.date.nextRangeYears(ba),tabindex:s.value,disable:Oe(re),...i("y+",{onClick:()=>{k.value+=ba}})})])])}};function Wt(G){const re={...g.value,day:G};if(e.range===!1){Ve(re,J.value);return}if(M.value===null){const _e=pe.value.find(qe=>qe.fill!==!0&&qe.i===G);if(e.noUnset!==!0&&_e.range!==void 0){we({target:re,from:_e.range.from,to:_e.range.to});return}if(_e.selected===!0){we(re);return}const Oe=Ca(re);M.value={init:re,initHash:Oe,final:re,finalHash:Oe},n("rangeStart",ut(re))}else{const _e=M.value.initHash,Oe=Ca(re),qe=_e<=Oe?{from:M.value.init,to:re}:{from:re,to:M.value.init};M.value=null,ma(_e===Oe?re:{target:re,...qe}),n("rangeEnd",{from:ut(qe.from),to:ut(qe.to)})}}function Lt(G){if(M.value!==null){const re={...g.value,day:G};Object.assign(M.value,{final:re,finalHash:Ca(re)})}}return Object.assign(r,{setToday:de,setView:Re,offsetCalendar:Fe,setCalendarTo:Me,setEditingRange:De}),()=>{const G=[_("div",{class:"q-date__content col relative-position"},[_(pn,{name:"q-transition--fade"},lt[w.value])])],re=He(t.default);return re!==void 0&&G.push(_("div",{class:"q-date__actions"},re)),e.name!==void 0&&e.disable!==!0&&h(G,"push"),_("div",{class:T.value,...le.value},[Xe(),_("div",{ref:v,class:"q-date__main col column",tabindex:-1},G)])}}});function Yx(e,t,n){let r;function a(){r!==void 0&&(su.remove(r),r=void 0)}return ft(()=>{e.value===!0&&a()}),{removeFromHistory:a,addToHistory(){r={condition:()=>n.value===!0,handler:t},su.add(r)}}}var ks=0,Hd,Wd,Bs,Ud=!1,hg,vg,pg,Ao=null;function UE(e){jE(e)&&it(e)}function jE(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=nk(e),n=e.shiftKey&&!e.deltaX,r=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),a=n||r?e.deltaY:e.deltaX;for(let o=0;o<t.length;o++){const i=t[o];if(eE(i,r))return r?a<0&&i.scrollTop===0?!0:a>0&&i.scrollTop+i.clientHeight===i.scrollHeight:a<0&&i.scrollLeft===0?!0:a>0&&i.scrollLeft+i.clientWidth===i.scrollWidth}return!0}function mg(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Xu(e){Ud!==!0&&(Ud=!0,requestAnimationFrame(()=>{Ud=!1;const{height:t}=e.target,{clientHeight:n,scrollTop:r}=document.scrollingElement;(Bs===void 0||t!==window.innerHeight)&&(Bs=n-t,document.scrollingElement.scrollTop=r),r>Bs&&(document.scrollingElement.scrollTop-=Math.ceil((r-Bs)/8))}))}function gg(e){const t=document.body,n=window.visualViewport!==void 0;if(e==="add"){const{overflowY:r,overflowX:a}=window.getComputedStyle(t);Hd=zc(window),Wd=co(window),hg=t.style.left,vg=t.style.top,pg=window.location.href,t.style.left=`-${Hd}px`,t.style.top=`-${Wd}px`,a!=="hidden"&&(a==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),r!=="hidden"&&(r==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,nt.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Xu,Ot.passiveCapture),window.visualViewport.addEventListener("scroll",Xu,Ot.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",mg,Ot.passiveCapture))}nt.is.desktop===!0&&nt.is.mac===!0&&window[`${e}EventListener`]("wheel",UE,Ot.notPassive),e==="remove"&&(nt.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",Xu,Ot.passiveCapture),window.visualViewport.removeEventListener("scroll",Xu,Ot.passiveCapture)):window.removeEventListener("scroll",mg,Ot.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=hg,t.style.top=vg,window.location.href===pg&&window.scrollTo(Hd,Wd),Bs=void 0)}function uh(e){let t="add";if(e===!0){if(ks++,Ao!==null){clearTimeout(Ao),Ao=null;return}if(ks>1)return}else{if(ks===0||(ks--,ks>0))return;if(t="remove",nt.is.ios===!0&&nt.is.nativeMobile===!0){Ao!==null&&clearTimeout(Ao),Ao=setTimeout(()=>{gg(t),Ao=null},100);return}}gg(t)}function Jx(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,uh(t))}}}var Qu=0,GE={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},yg={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},Wc=Ce({name:"QDialog",inheritAttrs:!1,props:{...vs,...Xo,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...ps,"shake","click","escapeKey"],setup(e,{slots:t,emit:n,attrs:r}){const a=Ie(),o=Z(null),i=Z(!1),s=Z(!1);let u=null,l=null,c,d;const f=C(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:h}=Jx(),{registerTimeout:v}=Oa(),{registerTick:m,removeTick:p}=Ui(),{transitionProps:y,transitionStyle:x}=Vc(e,()=>yg[e.position][0],()=>yg[e.position][1]),b=C(()=>x.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:g,hidePortal:w,portalIsAccessible:S,renderPortal:E}=xv(a,o,fe,"dialog"),{hide:R}=ms({showing:i,hideOnRouteChange:f,handleShow:F,handleHide:V,processOnMount:!0}),{addToHistory:A,removeFromHistory:k}=Yx(i,R,f),M=C(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${GE[e.position]}`+(s.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),T=C(()=>i.value===!0&&e.seamless!==!0),D=C(()=>e.autoClose===!0?{onClick:N}:{}),I=C(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${T.value===!0?"modal":"seamless"}`,r.class]);ke(()=>e.maximized,$=>{i.value===!0&&W($)}),ke(T,$=>{h($),$===!0?(bx(Y),gx(K)):(ah(Y),$l(K))});function F($){A(),l=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,W(e.maximized),g(),s.value=!0,e.noFocus!==!0?(document.activeElement?.blur(),m(L)):p(),v(()=>{if(a.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:O,bottom:ee}=document.activeElement.getBoundingClientRect(),{innerHeight:H}=window,ue=window.visualViewport!==void 0?window.visualViewport.height:H;O>0&&ee>ue/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-ue,ee>=H?1/0:Math.ceil(document.scrollingElement.scrollTop+ee-ue/2))),document.activeElement.scrollIntoView()}d=!0,o.value.click(),d=!1}g(!0),s.value=!1,n("show",$)},e.transitionDuration)}function V($){p(),k(),oe(!0),s.value=!0,w(),l!==null&&((($?.type.indexOf("key")===0?l.closest('[tabindex]:not([tabindex^="-"])'):void 0)||l).focus(),l=null),v(()=>{w(!0),s.value=!1,n("hide",$)},e.transitionDuration)}function L($){gs(()=>{let O=o.value;if(O!==null){if($!==void 0){const ee=O.querySelector($);if(ee!==null){ee.focus({preventScroll:!0});return}}O.contains(document.activeElement)!==!0&&(O=O.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||O.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||O.querySelector("[autofocus], [data-autofocus]")||O,O.focus({preventScroll:!0}))}})}function q($){$&&typeof $.focus=="function"?$.focus({preventScroll:!0}):L(),n("shake");const O=o.value;O!==null&&(O.classList.remove("q-animate--scale"),O.classList.add("q-animate--scale"),u!==null&&clearTimeout(u),u=setTimeout(()=>{u=null,o.value!==null&&(O.classList.remove("q-animate--scale"),L())},170))}function K(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&q():(n("escapeKey"),R()))}function oe($){u!==null&&(clearTimeout(u),u=null),($===!0||i.value===!0)&&(W(!1),e.seamless!==!0&&(h(!1),ah(Y),$l(K))),$!==!0&&(l=null)}function W($){$===!0?c!==!0&&(Qu<1&&document.body.classList.add("q-body--dialog"),Qu++,c=!0):c===!0&&(Qu<2&&document.body.classList.remove("q-body--dialog"),Qu--,c=!1)}function N($){d!==!0&&(R($),n("click",$))}function Q($){e.persistent!==!0&&e.noBackdropDismiss!==!0?R($):e.noShake!==!0&&q()}function Y($){e.allowFocusOutside!==!0&&S.value===!0&&rx(o.value,$.target)!==!0&&L('[tabindex]:not([tabindex="-1"])')}Object.assign(a.proxy,{focus:L,shake:q,__updateRefocusTarget($){l=$||null}}),ft(oe);function fe(){return _("div",{role:"dialog","aria-modal":T.value===!0?"true":"false",...r,class:I.value},[_(pn,{name:"q-transition--fade",appear:!0},()=>T.value===!0?_("div",{class:"q-dialog__backdrop fixed-full",style:b.value,"aria-hidden":"true",tabindex:-1,onClick:Q}):null),_(pn,y.value,()=>i.value===!0?_("div",{ref:o,class:M.value,style:x.value,tabindex:-1,...D.value},He(t.default)):null)])}return E}}),bg=150;Ce({name:"QDrawer",inheritAttrs:!1,props:{...vs,...wt,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...ps,"onLayout","miniState"],setup(e,{slots:t,emit:n,attrs:r}){const a=Ie(),{proxy:{$q:o}}=a,i=_t(e,o),{preventBodyScroll:s}=Jx(),{registerTimeout:u,removeTimeout:l}=Oa(),c=sn(si,Rt);if(c===Rt)return console.error("QDrawer needs to be child of QLayout"),Rt;let d,f=null,h;const v=Z(e.behavior==="mobile"||e.behavior!=="desktop"&&c.totalWidth.value<=e.breakpoint),m=C(()=>e.mini===!0&&v.value!==!0),p=C(()=>m.value===!0?e.miniWidth:e.width),y=Z(e.showIfAbove===!0&&v.value===!1?!0:e.modelValue===!0),x=C(()=>e.persistent!==!0&&(v.value===!0||oe.value===!0));function b(X,de){if(E(),X!==!1&&c.animate(),B(0),v.value===!0){const Re=c.instances[V.value];Re?.belowBreakpoint===!0&&Re.hide(!1),j(1),c.isContainer.value!==!0&&s(!0)}else j(0),X!==!1&&ne(!1);u(()=>{X!==!1&&ne(!0),de!==!0&&n("show",X)},bg)}function g(X,de){R(),X!==!1&&c.animate(),j(0),B(M.value*p.value),ge(),de!==!0?u(()=>{n("hide",X)},bg):l()}const{show:w,hide:S}=ms({showing:y,hideOnRouteChange:x,handleShow:b,handleHide:g}),{addToHistory:E,removeFromHistory:R}=Yx(y,S,x),A={belowBreakpoint:v,hide:S},k=C(()=>e.side==="right"),M=C(()=>(o.lang.rtl===!0?-1:1)*(k.value===!0?1:-1)),T=Z(0),D=Z(!1),I=Z(!1),F=Z(p.value*M.value),V=C(()=>k.value===!0?"left":"right"),L=C(()=>y.value===!0&&v.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:p.value:0),q=C(()=>e.overlay===!0||e.miniToOverlay===!0||c.view.value.indexOf(k.value?"R":"L")!==-1||o.platform.is.ios===!0&&c.isContainer.value===!0),K=C(()=>e.overlay===!1&&y.value===!0&&v.value===!1),oe=C(()=>e.overlay===!0&&y.value===!0&&v.value===!1),W=C(()=>"fullscreen q-drawer__backdrop"+(y.value===!1&&D.value===!1?" hidden":"")),N=C(()=>({backgroundColor:`rgba(0,0,0,${T.value*.4})`})),Q=C(()=>k.value===!0?c.rows.value.top[2]==="r":c.rows.value.top[0]==="l"),Y=C(()=>k.value===!0?c.rows.value.bottom[2]==="r":c.rows.value.bottom[0]==="l"),fe=C(()=>{const X={};return c.header.space===!0&&Q.value===!1&&(q.value===!0?X.top=`${c.header.offset}px`:c.header.space===!0&&(X.top=`${c.header.size}px`)),c.footer.space===!0&&Y.value===!1&&(q.value===!0?X.bottom=`${c.footer.offset}px`:c.footer.space===!0&&(X.bottom=`${c.footer.size}px`)),X}),$=C(()=>{const X={width:`${p.value}px`,transform:`translateX(${F.value}px)`};return v.value===!0?X:Object.assign(X,fe.value)}),O=C(()=>"q-drawer__content fit "+(c.isContainer.value!==!0?"scroll":"overflow-auto")),ee=C(()=>`q-drawer q-drawer--${e.side}`+(I.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(i.value===!0?" q-drawer--dark q-dark":"")+(D.value===!0?" no-transition":y.value===!0?"":" q-layout--prevent-focus")+(v.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${m.value===!0?"mini":"standard"}`+(q.value===!0||K.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(Q.value===!0?" q-drawer--top-padding":""))),H=C(()=>{const X=o.lang.rtl===!0?e.side:V.value;return[[Tr,J,void 0,{[X]:!0,mouse:!0}]]}),ue=C(()=>{const X=o.lang.rtl===!0?V.value:e.side;return[[Tr,me,void 0,{[X]:!0,mouse:!0}]]}),ye=C(()=>{const X=o.lang.rtl===!0?V.value:e.side;return[[Tr,me,void 0,{[X]:!0,mouse:!0,mouseAllDir:!0}]]});function P(){pe(v,e.behavior==="mobile"||e.behavior!=="desktop"&&c.totalWidth.value<=e.breakpoint)}ke(v,X=>{X===!0?(d=y.value,y.value===!0&&S(!1)):e.overlay===!1&&e.behavior!=="mobile"&&d!==!1&&(y.value===!0?(B(0),j(0),ge()):w(!1))}),ke(()=>e.side,(X,de)=>{c.instances[de]===A&&(c.instances[de]=void 0,c[de].space=!1,c[de].offset=0),c.instances[X]=A,c[X].size=p.value,c[X].space=K.value,c[X].offset=L.value}),ke(c.totalWidth,()=>{(c.isContainer.value===!0||document.qScrollPrevented!==!0)&&P()}),ke(()=>e.behavior+e.breakpoint,P),ke(c.isContainer,X=>{y.value===!0&&s(X!==!0),X===!0&&P()}),ke(c.scrollbarWidth,()=>{B(y.value===!0?0:void 0)}),ke(L,X=>{xe("offset",X)}),ke(K,X=>{n("onLayout",X),xe("space",X)}),ke(k,()=>{B()}),ke(p,X=>{B(),le(e.miniToOverlay,X)}),ke(()=>e.miniToOverlay,X=>{le(X,p.value)}),ke(()=>o.lang.rtl,()=>{B()}),ke(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(se(),c.animate())}),ke(m,X=>{n("miniState",X)});function B(X){X===void 0?mt(()=>{X=y.value===!0?0:p.value,B(M.value*X)}):(c.isContainer.value===!0&&k.value===!0&&(v.value===!0||Math.abs(X)===p.value)&&(X+=M.value*c.scrollbarWidth.value),F.value=X)}function j(X){T.value=X}function ne(X){const de=X===!0?"remove":c.isContainer.value!==!0?"add":"";de!==""&&document.body.classList[de]("q-body--drawer-toggle")}function se(){f!==null&&clearTimeout(f),a.proxy&&a.proxy.$el&&a.proxy.$el.classList.add("q-drawer--mini-animate"),I.value=!0,f=setTimeout(()=>{f=null,I.value=!1,a?.proxy?.$el?.classList.remove("q-drawer--mini-animate")},150)}function J(X){if(y.value!==!1)return;const de=p.value,Re=Ft(X.distance.x,0,de);if(X.isFinal===!0){Re>=Math.min(75,de)===!0?w():(c.animate(),j(0),B(M.value*de)),D.value=!1;return}B((o.lang.rtl===!0?k.value!==!0:k.value)?Math.max(de-Re,0):Math.min(0,Re-de)),j(Ft(Re/de,0,1)),X.isFirst===!0&&(D.value=!0)}function me(X){if(y.value!==!0)return;const de=p.value,Re=X.direction===e.side,Fe=(o.lang.rtl===!0?Re!==!0:Re)?Ft(X.distance.x,0,de):0;if(X.isFinal===!0){Math.abs(Fe)<Math.min(75,de)===!0?(c.animate(),j(1),B(0)):S(),D.value=!1;return}B(M.value*Fe),j(Ft(1-Fe/de,0,1)),X.isFirst===!0&&(D.value=!0)}function ge(){s(!1),ne(!0)}function xe(X,de){c.update(e.side,X,de)}function pe(X,de){X.value!==de&&(X.value=de)}function le(X,de){xe("size",X===!0?e.miniWidth:de)}return c.instances[e.side]=A,le(e.miniToOverlay,p.value),xe("space",K.value),xe("offset",L.value),e.showIfAbove===!0&&e.modelValue!==!0&&y.value===!0&&e["onUpdate:modelValue"]!==void 0&&n("update:modelValue",!0),Nt(()=>{n("onLayout",K.value),n("miniState",m.value),d=e.showIfAbove===!0;const X=()=>{(y.value===!0?b:g)(!1,!0)};if(c.totalWidth.value!==0){mt(X);return}h=ke(c.totalWidth,()=>{h(),h=void 0,y.value===!1&&e.showIfAbove===!0&&v.value===!1?w(!1):X()})}),ft(()=>{h?.(),f!==null&&(clearTimeout(f),f=null),y.value===!0&&ge(),c.instances[e.side]===A&&(c.instances[e.side]=void 0,xe("size",0),xe("offset",0),xe("space",!1))}),()=>{const X=[];v.value===!0&&(e.noSwipeOpen===!1&&X.push(gr(_("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),H.value)),X.push(Ir("div",{ref:"backdrop",class:W.value,style:N.value,"aria-hidden":"true",onClick:S},void 0,"backdrop",e.noSwipeBackdrop!==!0&&y.value===!0,()=>ye.value)));const de=m.value===!0&&t.mini!==void 0,Re=[_("div",{...r,key:""+de,class:[O.value,r.class]},de===!0?t.mini():He(t.default))];return e.elevated===!0&&y.value===!0&&Re.push(_("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),X.push(Ir("aside",{ref:"content",class:ee.value,style:$.value},Re,"contentclose",e.noSwipeClose!==!0&&v.value===!0,()=>ue.value)),_("div",{class:"q-drawer-container"},X)}}});function Zx(e,t){if(t&&e===t)return null;const n=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(n)===!0)return e;const r=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,a=r.display;return a==="block"||a==="table"?e:Zx(e.parentNode)}function jd(e,t,n){return!e||e===document.body?!1:n===!0&&e===t||(t===document?document.body:t).contains(e.parentNode)}function e1(e,t,n){if(n||(n=document.createRange(),n.selectNode(e),n.setStart(e,0)),t.count===0)n.setEnd(e,t.count);else if(t.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<t.count?t.count-=e.textContent.length:(n.setEnd(e,t.count),t.count=0);else for(let r=0;t.count!==0&&r<e.childNodes.length;r++)n=e1(e.childNodes[r],t,n);return n}var KE=/^https?:\/\//,XE=class{constructor(e,t){this.el=e,this.eVm=t,this._range=null}get selection(){if(this.el){const e=document.getSelection();if(jd(e.anchorNode,this.el,!0)&&jd(e.focusNode,this.el,!0))return e}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const e=this.selection;return e?.rangeCount?e.getRangeAt(0):this._range}get parent(){const e=this.range;if(e!==null){const t=e.startContainer;return t.nodeType===document.ELEMENT_NODE?t:t.parentNode}return null}get blockParent(){const e=this.parent;return e!==null?Zx(e,this.el):null}save(e=this.range){e!==null&&(this._range=e)}restore(e=this._range){const t=document.createRange(),n=document.getSelection();e!==null?(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),n.removeAllRanges(),n.addRange(t)):(n.selectAllChildren(this.el),n.collapseToEnd())}savePosition(){let e=-1,t;const n=document.getSelection(),r=this.el.parentNode;if(n.focusNode&&jd(n.focusNode,r))for(t=n.focusNode,e=n.focusOffset;t&&t!==r;)t!==this.el&&t.previousSibling?(t=t.previousSibling,e+=t.textContent.length):t=t.parentNode;this.savedPos=e}restorePosition(e=0){if(this.savedPos>0&&this.savedPos<e){const t=window.getSelection(),n=e1(this.el,{count:this.savedPos});n&&(n.collapse(!1),t.removeAllRanges(),t.addRange(n))}}hasParent(e,t){const n=t?this.parent:this.blockParent;return n!==null?n.nodeName.toLowerCase()===e.toLowerCase():!1}hasParents(e,t,n=this.parent){return n===null?!1:e.includes(n.nodeName.toLowerCase())===!0?!0:t===!0?this.hasParents(e,t,n.parentNode):!1}is(e,t){if(this.selection===null)return!1;switch(e){case"formatBlock":return t==="DIV"&&this.parent===this.el||this.hasParent(t,t==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(e)===t;case"fontName":const n=document.queryCommandValue(e);return n===`"${t}"`||n===t;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const r=document.queryCommandState(e);return t!==void 0?r===t:r}}getParentAttribute(e){return this.parent!==null?this.parent.getAttribute(e):null}can(e){if(e==="outdent")return this.hasParents(["blockquote","li"],!0);if(e==="indent")return this.hasParents(["li"],!0);if(e==="link")return this.selection!==null||this.is("link")}apply(e,t,n=Kt){if(e==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(t)&&this.is(e,t)&&(e="outdent",t=null),t==="PRE"&&this.is(e,"PRE")&&(t="P");else if(e==="print"){n();const r=window.open();r.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),r.print(),r.close();return}else if(e==="link"){const r=this.getParentAttribute("href");if(r===null){const a=this.selectWord(this.selection),o=a?a.toString():"";if(!o.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=KE.test(o)?o:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(a.getRangeAt(0))}else this.eVm.editLinkUrl.value=r,this.range.selectNodeContents(this.parent),this.save();return}else if(e==="fullscreen"){this.eVm.toggleFullscreen(),n();return}else if(e==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),n();return}document.execCommand(e,!1,t),n()}selectWord(e){if(e===null||e.isCollapsed!==!0||e.modify===void 0)return e;const t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);const n=t.collapsed?["backward","forward"]:["forward","backward"];t.detach();const r=e.focusNode,a=e.focusOffset;return e.collapse(e.anchorNode,e.anchorOffset),e.modify("move",n[0],"character"),e.modify("move",n[1],"word"),e.extend(r,a),e.modify("extend",n[1],"character"),e.modify("extend",n[0],"word"),e}},QE=Ce({name:"QTooltip",inheritAttrs:!1,props:{...ux,...vs,...Xo,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Xo.transitionShow,default:"jump-down"},transitionHide:{...Xo.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:jl},self:{type:String,default:"top middle",validator:jl},offset:{type:Array,default:()=>[14,14],validator:wx},scrollTarget:ui,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...ps],setup(e,{slots:t,emit:n,attrs:r}){let a,o;const i=Ie(),{proxy:{$q:s}}=i,u=Z(null),l=Z(!1),c=C(()=>Gl(e.anchor,s.lang.rtl)),d=C(()=>Gl(e.self,s.lang.rtl)),f=C(()=>e.persistent!==!0),{registerTick:h,removeTick:v}=Ui(),{registerTimeout:m}=Oa(),{transitionProps:p,transitionStyle:y}=Vc(e),{localScrollTarget:x,changeScrollEvent:b,unconfigureScrollTarget:g}=cx(e,oe),{anchorEl:w,canShow:S,anchorEvents:E}=yv({showing:l,configureAnchorEl:K}),{show:R,hide:A}=ms({showing:l,canShow:S,handleShow:D,handleHide:I,hideOnRouteChange:f,processOnMount:!0});Object.assign(E,{delayShow:L,delayHide:q});const{showPortal:k,hidePortal:M,renderPortal:T}=xv(i,u,N,"tooltip");if(s.platform.is.mobile===!0){const Q={anchorEl:w,innerRef:u,onClickOutside(fe){return A(fe),fe.target.classList.contains("q-dialog__backdrop")&&it(fe),!0}},Y=C(()=>e.modelValue===null&&e.persistent!==!0&&l.value===!0);ke(Y,fe=>{(fe===!0?xx:Ul)(Q)}),ft(()=>{Ul(Q)})}function D(Q){k(),h(()=>{o=new MutationObserver(()=>V()),o.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),V(),oe()}),a===void 0&&(a=ke(()=>s.screen.width+"|"+s.screen.height+"|"+e.self+"|"+e.anchor+"|"+s.lang.rtl,V)),m(()=>{k(!0),n("show",Q)},e.transitionDuration)}function I(Q){v(),M(),F(),m(()=>{M(!0),n("hide",Q)},e.transitionDuration)}function F(){o!==void 0&&(o.disconnect(),o=void 0),a!==void 0&&(a(),a=void 0),g(),Kn(E,"tooltipTemp")}function V(){wv({targetEl:u.value,offset:e.offset,anchorEl:w.value,anchorOrigin:c.value,selfOrigin:d.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function L(Q){if(s.platform.is.mobile===!0){Vr(),document.body.classList.add("non-selectable");const Y=w.value,fe=["touchmove","touchcancel","touchend","click"].map($=>[Y,$,"delayHide","passiveCapture"]);Qt(E,"tooltipTemp",fe)}m(()=>{R(Q)},e.delay)}function q(Q){s.platform.is.mobile===!0&&(Kn(E,"tooltipTemp"),Vr(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),m(()=>{A(Q)},e.hideDelay)}function K(){if(e.noParentEvent===!0||w.value===null)return;const Q=s.platform.is.mobile===!0?[[w.value,"touchstart","delayShow","passive"]]:[[w.value,"mouseenter","delayShow","passive"],[w.value,"mouseleave","delayHide","passive"]];Qt(E,"anchor",Q)}function oe(){if(w.value!==null||e.scrollTarget!==void 0){x.value=da(w.value,e.scrollTarget);const Q=e.noParentEvent===!0?V:A;b(x.value,Q)}}function W(){return l.value===!0?_("div",{...r,ref:u,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,y.value],role:"tooltip"},He(t.default)):null}function N(){return _(pn,p.value,W)}return ft(F),Object.assign(i.proxy,{updatePosition:V}),T}}),Uc=Ce({name:"QItem",props:{...wt,...Su,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=Ie(),a=_t(e,r),{hasLink:o,linkAttrs:i,linkClass:s,linkTag:u,navigateOnClick:l}=qc(),c=Z(null),d=Z(null),f=C(()=>e.clickable===!0||o.value===!0||e.tag==="label"),h=C(()=>e.disable!==!0&&f.value===!0),v=C(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(a.value===!0?" q-item--dark":"")+(o.value===!0&&e.active===null?s.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(h.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),m=C(()=>e.insetLevel===void 0?null:{["padding"+(r.lang.rtl===!0?"Right":"Left")]:16+e.insetLevel*56+"px"});function p(b){h.value===!0&&(d.value!==null&&b.qAvoidFocus!==!0&&(b.qKeyEvent!==!0&&document.activeElement===c.value?d.value.focus():document.activeElement===d.value&&c.value.focus()),l(b))}function y(b){if(h.value===!0&&Ar(b,[13,32])===!0){it(b),b.qKeyEvent=!0;const g=new MouseEvent("click",b);g.qKeyEvent=!0,c.value.dispatchEvent(g)}n("keyup",b)}function x(){const b=Cu(t.default,[]);return h.value===!0&&b.unshift(_("div",{class:"q-focus-helper",tabindex:-1,ref:d})),b}return()=>{const b={ref:c,class:v.value,style:m.value,role:"listitem",onClick:p,onKeyup:y};return h.value===!0?(b.tabindex=e.tabindex||"0",Object.assign(b,i.value)):f.value===!0&&(b["aria-disabled"]="true"),_(u.value,b,x())}}}),fo=Ce({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=C(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>_("div",{class:n.value},He(t.default))}});function t1(e,t,n){t.handler?t.handler(e,n,n.caret):n.runCmd(t.cmd,t.param)}function Fv(e){return _("div",{class:"q-editor__toolbar-group"},e)}function n1(e,t,n,r=!1){const a=r||(t.type==="toggle"?t.toggled?t.toggled(e):t.cmd&&e.caret.is(t.cmd,t.param):!1),o=[];if(e.$q.platform.is.desktop&&(t.tip||t.htmlTip)){const i=t.key?_("div",[_("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;o.push(_(QE,{delay:1e3},()=>[_("div",t.htmlTip?{innerHTML:t.htmlTip}:t.tip),i]))}return _(Tt,{...e.buttonProps.value,icon:t.icon!==null?t.icon:void 0,color:a?t.toggleColor||e.props.toolbarToggleColor:t.color||e.props.toolbarColor,textColor:a&&!e.props.toolbarPush?null:t.textColor||e.props.toolbarTextColor,label:t.label,"aria-label":t.label==null?t.tip:void 0,disable:t.disable?typeof t.disable=="function"?t.disable(e):!0:!1,size:"sm",onClick(i){n?.(),t1(i,t,e)}},()=>o)}function YE(e,t){const n=t.list==="only-icons";let r=t.label,a=t.icon!==null?t.icon:void 0,o,i;function s(){l.component.proxy.hide()}if(n)i=t.options.map(c=>{const d=c.type===void 0?e.caret.is(c.cmd,c.param):!1;return d&&(r=c.tip,a=c.icon!==null?c.icon:void 0),n1(e,c,s,d)}),o=e.toolbarBackgroundClass.value,i=[Fv(i)];else{const c=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,d=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,f=t.list==="no-icons";i=t.options.map(h=>{const v=h.disable?h.disable(e):!1,m=h.type===void 0?e.caret.is(h.cmd,h.param):!1;m&&(r=h.tip,a=h.icon!==null?h.icon:void 0);const p=h.htmlTip;return _(Uc,{active:m,activeClass:c,clickable:!0,disable:v,dense:!0,onClick(y){s(),y?.qAvoidFocus!==!0&&e.contentRef.value?.focus(),e.caret.restore(),t1(y,h,e)}},()=>[f===!0?null:_(fo,{class:m?c:d,side:!0},()=>_(Ct,{name:h.icon!==null?h.icon:void 0})),_(fo,p?()=>_("div",{class:"text-no-wrap",innerHTML:h.htmlTip}):h.tip?()=>_("div",{class:"text-no-wrap"},h.tip):void 0)])}),o=[e.toolbarBackgroundClass.value,d]}const u=t.highlight&&r!==t.label,l=_(dE,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:u?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:u&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:t.fixedLabel?t.label:r,icon:t.fixedIcon?t.icon!==null?t.icon:void 0:a,contentClass:o,onShow:c=>e.emit("dropdownShow",c),onHide:c=>e.emit("dropdownHide",c),onBeforeShow:c=>e.emit("dropdownBeforeShow",c),onBeforeHide:c=>e.emit("dropdownBeforeHide",c)},()=>i);return l}function JE(e){if(e.caret)return e.buttons.value.filter(t=>!e.isViewingSource.value||t.find(n=>n.cmd==="viewsource")).map(t=>Fv(t.map(n=>e.isViewingSource.value&&n.cmd!=="viewsource"?!1:n.type==="slot"?He(e.slots[n.slot]):n.type==="dropdown"?YE(e,n):n1(e,n))))}function ZE(e,t,n,r={}){const a=Object.keys(r);if(a.length===0)return{};const o={default_font:{cmd:"fontName",param:e,icon:n,tip:t}};return a.forEach(i=>{const s=r[i];o[i]={cmd:"fontName",param:s,icon:n,tip:s,htmlTip:`<font face="${s}">${s}</font>`}}),o}function eT(e){if(e.caret){const t=e.props.toolbarColor||e.props.toolbarTextColor;let n=e.editLinkUrl.value;const r=()=>{e.caret.restore(),n!==e.editLinkUrl.value&&document.execCommand("createLink",!1,n===""?" ":n),e.editLinkUrl.value=null};return[_("div",{class:`q-mx-xs text-${t}`},`${e.$q.lang.editor.url}: `),_("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:n,onInput:a=>{Gt(a),n=a.target.value},onKeydown:a=>{if(ii(a)!==!0)switch(a.keyCode){case 13:return gn(a),r();case 27:gn(a),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),Fv([_(Tt,{key:"qedt_btm_rem",...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),_(Tt,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:r})])]}}var xg=/^on[A-Z]/;function r1(){const{attrs:e,vnode:t}=Ie(),n={listeners:Z({}),attributes:Z({})};function r(){const a={},o={};for(const i in e)i!=="class"&&i!=="style"&&xg.test(i)===!1&&(a[i]=e[i]);for(const i in t.props)xg.test(i)===!0&&(o[i]=t.props[i]);n.attributes.value=a,n.listeners.value=o}return fs(r),r(),n}var tT=Object.prototype.toString,Gd=Object.prototype.hasOwnProperty,nT=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function wg(e){if(e!==Object(e)||nT.has(tT.call(e))===!0||e.constructor&&Gd.call(e,"constructor")===!1&&Gd.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let t;for(t in e);return t===void 0||Gd.call(e,t)}function a1(){let e,t,n,r,a,o,i=arguments[0]||{},s=1,u=!1;const l=arguments.length;for(typeof i=="boolean"&&(u=i,i=arguments[1]||{},s=2),Object(i)!==i&&typeof i!="function"&&(i={}),l===s&&(i=this,s--);s<l;s++)if((e=arguments[s])!==null)for(t in e)n=i[t],r=e[t],i!==r&&(u===!0&&r&&((a=Array.isArray(r))||wg(r)===!0)?(a===!0?o=Array.isArray(n)===!0?n:[]:o=wg(n)===!0?n:{},i[t]=a1(u,o,r)):r!==void 0&&(i[t]=r));return i}Ce({name:"QEditor",props:{...wt,...Rv,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(t=>t.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...Av,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:t,emit:n}){const{proxy:r}=Ie(),{$q:a}=r,o=_t(e,a),{inFullscreen:i,toggleFullscreen:s}=Iv(),u=r1(),l=Z(null),c=Z(null),d=Z(null),f=Z(!1),h=C(()=>!e.readonly&&!e.disable);let v,m,p=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),v=window.getComputedStyle(document.body).fontFamily;const y=C(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),x=C(()=>({type:"a",flat:e.toolbarOutline!==!0&&e.toolbarPush!==!0,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!h.value,size:"sm"})),b=C(()=>{const $=a.lang.editor,O=a.iconSet.editor;return{bold:{cmd:"bold",icon:O.bold,tip:$.bold,key:66},italic:{cmd:"italic",icon:O.italic,tip:$.italic,key:73},strike:{cmd:"strikeThrough",icon:O.strikethrough,tip:$.strikethrough,key:83},underline:{cmd:"underline",icon:O.underline,tip:$.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:O.unorderedList,tip:$.unorderedList},ordered:{cmd:"insertOrderedList",icon:O.orderedList,tip:$.orderedList},subscript:{cmd:"subscript",icon:O.subscript,tip:$.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:O.superscript,tip:$.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:ee=>ee.caret&&!ee.caret.can("link"),icon:O.hyperlink,tip:$.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:O.toggleFullscreen,tip:$.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:O.viewSource,tip:$.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:O.quote,tip:$.quote,key:81},left:{cmd:"justifyLeft",icon:O.left,tip:$.left},center:{cmd:"justifyCenter",icon:O.center,tip:$.center},right:{cmd:"justifyRight",icon:O.right,tip:$.right},justify:{cmd:"justifyFull",icon:O.justify,tip:$.justify},print:{type:"no-state",cmd:"print",icon:O.print,tip:$.print,key:80},outdent:{type:"no-state",disable:ee=>ee.caret&&!ee.caret.can("outdent"),cmd:"outdent",icon:O.outdent,tip:$.outdent},indent:{type:"no-state",disable:ee=>ee.caret&&!ee.caret.can("indent"),cmd:"indent",icon:O.indent,tip:$.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:O.removeFormat,tip:$.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:O.hr,tip:$.hr},undo:{type:"no-state",cmd:"undo",icon:O.undo,tip:$.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:O.redo,tip:$.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:O.heading1||O.heading,tip:$.heading1,htmlTip:`<h1 class="q-ma-none">${$.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:O.heading2||O.heading,tip:$.heading2,htmlTip:`<h2 class="q-ma-none">${$.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:O.heading3||O.heading,tip:$.heading3,htmlTip:`<h3 class="q-ma-none">${$.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:O.heading4||O.heading,tip:$.heading4,htmlTip:`<h4 class="q-ma-none">${$.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:O.heading5||O.heading,tip:$.heading5,htmlTip:`<h5 class="q-ma-none">${$.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:O.heading6||O.heading,tip:$.heading6,htmlTip:`<h6 class="q-ma-none">${$.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:O.heading,tip:$.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:O.code,htmlTip:`<code>${$.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:O.size1||O.size,tip:$.size1,htmlTip:`<font size="1">${$.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:O.size2||O.size,tip:$.size2,htmlTip:`<font size="2">${$.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:O.size3||O.size,tip:$.size3,htmlTip:`<font size="3">${$.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:O.size4||O.size,tip:$.size4,htmlTip:`<font size="4">${$.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:O.size5||O.size,tip:$.size5,htmlTip:`<font size="5">${$.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:O.size6||O.size,tip:$.size6,htmlTip:`<font size="6">${$.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:O.size7||O.size,tip:$.size7,htmlTip:`<font size="7">${$.size7}</font>`}}}),g=C(()=>{const $=e.definitions||{},O=e.definitions||e.fonts?a1(!0,{},b.value,$,ZE(v,a.lang.editor.defaultFont,a.iconSet.editor.font,e.fonts)):b.value;return e.toolbar.map(ee=>ee.map(H=>{if(H.options)return{type:"dropdown",icon:H.icon,label:H.label,size:"sm",dense:!0,fixedLabel:H.fixedLabel,fixedIcon:H.fixedIcon,highlight:H.highlight,list:H.list,options:H.options.map(ye=>O[ye])};const ue=O[H];return ue?ue.type==="no-state"||$[H]&&(ue.cmd===void 0||b.value[ue.cmd]&&b.value[ue.cmd].type==="no-state")?ue:Object.assign({type:"toggle"},ue):{type:"slot",slot:H}}))}),w={$q:a,props:e,slots:t,emit:n,inFullscreen:i,toggleFullscreen:s,runCmd:N,isViewingSource:f,editLinkUrl:d,toolbarBackgroundClass:y,buttonProps:x,contentRef:c,buttons:g,setContent:W};ke(()=>e.modelValue,$=>{p!==$&&(p=$,W($,!0))}),ke(d,$=>{n(`link${$?"Show":"Hide"}`)});const S=C(()=>e.toolbar&&e.toolbar.length!==0),E=C(()=>{const $={},O=ee=>{ee.key&&($[ee.key]={cmd:ee.cmd,param:ee.param})};return g.value.forEach(ee=>{ee.forEach(H=>{H.options?H.options.forEach(O):O(H)})}),$}),R=C(()=>i.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),A=C(()=>`q-editor q-editor--${f.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(i.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(o.value===!0?" q-editor--dark q-dark":"")),k=C(()=>[e.contentClass,"q-editor__content",{col:i.value,"overflow-auto":i.value||e.maxHeight}]),M=C(()=>e.disable===!0?{"aria-disabled":"true"}:{});function T(){if(c.value!==null){const $=`inner${f.value===!0?"Text":"HTML"}`,O=c.value[$];O!==e.modelValue&&(p=O,n("update:modelValue",O))}}function D($){if(n("keydown",$),$.ctrlKey!==!0||ii($)===!0){Q();return}const O=$.keyCode,ee=E.value[O];if(ee!==void 0){const{cmd:H,param:ue}=ee;it($),N(H,ue,!1)}}function I($){Q(),n("click",$)}function F($){if(c.value!==null){const{scrollTop:O,scrollHeight:ee}=c.value;m=ee-O}w.caret.save(),n("blur",$)}function V($){mt(()=>{c.value!==null&&m!==void 0&&(c.value.scrollTop=c.value.scrollHeight-m)}),n("focus",$)}function L($){const O=l.value;if(O!==null&&O.contains($.target)===!0&&($.relatedTarget===null||O.contains($.relatedTarget)!==!0)){const ee=`inner${f.value===!0?"Text":"HTML"}`;w.caret.restorePosition(c.value[ee].length),Q()}}function q($){const O=l.value;O!==null&&O.contains($.target)===!0&&($.relatedTarget===null||O.contains($.relatedTarget)!==!0)&&(w.caret.savePosition(),Q())}function K(){m=void 0}function oe($){w.caret.save()}function W($,O){if(c.value!==null){O===!0&&w.caret.savePosition();const ee=`inner${f.value===!0?"Text":"HTML"}`;c.value[ee]=$,O===!0&&(w.caret.restorePosition(c.value[ee].length),Q())}}function N($,O,ee=!0){Y(),w.caret.restore(),w.caret.apply($,O,()=>{Y(),w.caret.save(),ee&&Q()})}function Q(){setTimeout(()=>{d.value=null,r.$forceUpdate()},1)}function Y(){gs(()=>{c.value?.focus({preventScroll:!0})})}function fe(){return c.value}return Nt(()=>{w.caret=r.caret=new XE(c.value,w),W(e.modelValue),Q(),document.addEventListener("selectionchange",oe)}),ft(()=>{document.removeEventListener("selectionchange",oe)}),Object.assign(r,{runCmd:N,refreshToolbar:Q,focus:Y,getContentEl:fe}),()=>{let $;if(S.value){const O=[_("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+y.value},JE(w))];d.value!==null&&O.push(_("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+y.value},eT(w))),$=_("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},O)}return _("div",{ref:l,class:A.value,style:{height:i.value===!0?"100%":null},...M.value,onFocusin:L,onFocusout:q},[$,_("div",{ref:c,style:R.value,class:k.value,contenteditable:h.value,placeholder:e.placeholder,...u.listeners.value,onInput:T,onKeydown:D,onClick:I,onBlur:F,onFocus:V,onMousedown:K,onTouchstartPassive:K})])}}});var lh=Ce({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const n=C(()=>parseInt(e.lines,10)),r=C(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),a=C(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>_("div",{style:a.value,class:r.value},He(t.default))}}),Nv=Ce({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:n}){let r=!1,a,o,i=null,s=null,u,l;function c(){a?.(),a=null,r=!1,i!==null&&(clearTimeout(i),i=null),s!==null&&(clearTimeout(s),s=null),o?.removeEventListener("transitionend",u),u=null}function d(m,p,y){p!==void 0&&(m.style.height=`${p}px`),m.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,r=!0,a=y}function f(m,p){m.style.overflowY=null,m.style.height=null,m.style.transition=null,c(),p!==l&&n(p)}function h(m,p){let y=0;o=m,r===!0?(c(),y=m.offsetHeight===m.scrollHeight?0:void 0):(l="hide",m.style.overflowY="hidden"),d(m,y,p),i=setTimeout(()=>{i=null,m.style.height=`${m.scrollHeight}px`,u=x=>{s=null,(Object(x)!==x||x.target===m)&&f(m,"show")},m.addEventListener("transitionend",u),s=setTimeout(u,e.duration*1.1)},100)}function v(m,p){let y;o=m,r===!0?c():(l="show",m.style.overflowY="hidden",y=m.scrollHeight),d(m,y,p),i=setTimeout(()=>{i=null,m.style.height=0,u=x=>{s=null,(Object(x)!==x||x.target===m)&&f(m,"hide")},m.addEventListener("transitionend",u),s=setTimeout(u,e.duration*1.1)},100)}return ft(()=>{r===!0&&c()}),()=>_(pn,{css:!1,appear:e.appear,onEnter:h,onLeave:v},t.default)}}),rT={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},Kd={xs:2,sm:4,md:8,lg:16,xl:24},ti=Ce({name:"QSeparator",props:{...wt,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=Ie(),n=_t(e,t.proxy.$q),r=C(()=>e.vertical===!0?"vertical":"horizontal"),a=C(()=>` q-separator--${r.value}`),o=C(()=>e.inset!==!1?`${a.value}-${rT[e.inset]}`:""),i=C(()=>`q-separator${a.value}${o.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(n.value===!0?" q-separator--dark":"")),s=C(()=>{const u={};if(e.size!==void 0&&(u[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const l=e.spaced===!0?`${Kd.md}px`:e.spaced in Kd?`${Kd[e.spaced]}px`:e.spaced,c=e.vertical===!0?["Left","Right"]:["Top","Bottom"];u[`margin${c[0]}`]=u[`margin${c[1]}`]=l}return u});return()=>_("hr",{class:i.value,style:s.value,"aria-orientation":r.value})}}),Io=Jh({}),aT=Object.keys(Su);Ce({name:"QExpansionItem",props:{...Su,...vs,...wt,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ps,"click","afterShow","afterHide"],setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=Ie(),a=_t(e,r),o=Z(e.modelValue!==null?e.modelValue:e.defaultOpened),i=Z(null),s=Hc(),{show:u,hide:l,toggle:c}=ms({showing:o});let d,f;const h=C(()=>`q-expansion-item q-item-type q-expansion-item--${o.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),v=C(()=>e.contentInsetLevel===void 0?null:{["padding"+(r.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),m=C(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),p=C(()=>{const L={};return aT.forEach(q=>{L[q]=e[q]}),L}),y=C(()=>m.value===!0||e.expandIconToggle!==!0),x=C(()=>e.expandedIcon!==void 0&&o.value===!0?e.expandedIcon:e.expandIcon||r.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),b=C(()=>e.disable!==!0&&(m.value===!0||e.expandIconToggle===!0)),g=C(()=>({expanded:o.value===!0,detailsId:s.value,toggle:c,show:u,hide:l})),w=C(()=>{const L=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:r.lang.label[o.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":o.value===!0?"true":"false","aria-controls":s.value,"aria-label":L}});ke(()=>e.group,L=>{f?.(),L!==void 0&&M()});function S(L){m.value!==!0&&c(L),n("click",L)}function E(L){L.keyCode===13&&R(L,!0)}function R(L,q){q!==!0&&L.qAvoidFocus!==!0&&i.value?.focus(),c(L),it(L)}function A(){n("afterShow")}function k(){n("afterHide")}function M(){d===void 0&&(d=cu()),o.value===!0&&(Io[e.group]=d);const L=ke(o,K=>{K===!0?Io[e.group]=d:Io[e.group]===d&&delete Io[e.group]}),q=ke(()=>Io[e.group],(K,oe)=>{oe===d&&K!==void 0&&K!==d&&l()});f=()=>{L(),q(),Io[e.group]===d&&delete Io[e.group],f=void 0}}function T(){const L={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},q=[_(Ct,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&o.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:x.value})];return b.value===!0&&(Object.assign(L,{tabindex:0,...w.value,onClick:R,onKeyup:E}),q.unshift(_("div",{ref:i,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),_(fo,L,()=>q)}function D(){let L;return t.header!==void 0?L=[].concat(t.header(g.value)):(L=[_(fo,()=>[_(lh,{lines:e.labelLines},()=>e.label||""),e.caption?_(lh,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&L[e.switchToggleSide===!0?"push":"unshift"](_(fo,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>_(Ct,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&L[e.switchToggleSide===!0?"unshift":"push"](T()),L}function I(){const L={ref:"item",style:e.headerStyle,class:e.headerClass,dark:a.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return y.value===!0&&(L.clickable=!0,L.onClick=S,Object.assign(L,m.value===!0?p.value:w.value)),_(Uc,L,D)}function F(){return gr(_("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:v.value,id:s.value},He(t.default)),[[Mb,o.value]])}function V(){const L=[I(),_(Nv,{duration:e.duration,onShow:A,onHide:k},F)];return e.expandSeparator===!0&&L.push(_(ti,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:a.value}),_(ti,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:a.value})),L}return e.group!==void 0&&M(),ft(()=>{f?.()}),()=>_("div",{class:h.value},[_("div",{class:"q-expansion-item__container relative-position"},V())])}});var oT=["top","right","bottom","left"],ch={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>oT.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function o1(e,t){return{formClass:C(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:C(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:C(()=>{if(e.externalLabel===!0){const n=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(n===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}var iT=["up","right","down","left"],sT=["left","center","right"];Ce({name:"QFab",props:{...ch,...vs,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...ch.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>iT.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>sT.includes(e)}},emits:ps,setup(e,{slots:t}){const n=Z(null),r=Z(e.modelValue===!0),a=Hc(),{proxy:{$q:o}}=Ie(),{formClass:i,labelProps:s}=o1(e,r),u=C(()=>e.persistent!==!0),{hide:l,toggle:c}=ms({showing:r,hideOnRouteChange:u}),d=C(()=>({opened:r.value})),f=C(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${i.value}`+(r.value===!0?" q-fab--opened":" q-fab--closed")),h=C(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${r.value===!0?"opened":"closed"}`),v=C(()=>{const x={id:a.value,role:"menu"};return r.value!==!0&&(x["aria-hidden"]="true"),x}),m=C(()=>`q-fab__icon-holder  q-fab__icon-holder--${r.value===!0?"opened":"closed"}`);function p(x,b){const g=t[x],w=`q-fab__${x} absolute-full`;return g===void 0?_(Ct,{class:w,name:e[b]||o.iconSet.fab[b]}):_("div",{class:w},g(d.value))}function y(){const x=[];return e.hideIcon!==!0&&x.push(_("div",{class:m.value},[p("icon","icon"),p("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&x[s.value.action](_("div",s.value.data,t.label!==void 0?t.label(d.value):[e.label])),Jt(t.tooltip,x)}return Er(Wb,{showing:r,onChildClick(x){l(x),x?.qAvoidFocus!==!0&&n.value?.$el.focus()}}),()=>_("div",{class:f.value},[_(Tt,{ref:n,class:i.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":r.value===!0?"true":"false","aria-haspopup":"true","aria-controls":a.value,onClick:c},y),_("div",{class:h.value,...v.value},He(t.default))])}});var i1={start:"self-end",center:"self-center",end:"self-start"},uT=Object.keys(i1);Ce({name:"QFabAction",props:{...ch,icon:{type:String,default:""},anchor:{type:String,validator:e=>uT.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:t,emit:n}){const r=sn(Wb,()=>({showing:{value:!0},onChildClick:Kt})),{formClass:a,labelProps:o}=o1(e,r.showing),i=C(()=>{const d=i1[e.anchor];return a.value+(d!==void 0?` ${d}`:"")}),s=C(()=>e.disable===!0||r.showing.value!==!0);function u(d){r.onChildClick(d),n("click",d)}function l(){const d=[];return t.icon!==void 0?d.push(t.icon()):e.icon!==""&&d.push(_(Ct,{name:e.icon})),(e.label!==""||t.label!==void 0)&&d[o.value.action](_("div",o.value.data,t.label!==void 0?t.label():[e.label])),Jt(t.default,d)}const c=Ie();return Object.assign(c.proxy,{click:u}),()=>_(Tt,{class:i.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:s.value,onClick:u},l)}});function lT({validate:e,resetValidation:t,requiresQForm:n}){const r=sn(Ub,!1);if(r!==!1){const{props:a,proxy:o}=Ie();Object.assign(o,{validate:e,resetValidation:t}),ke(()=>a.disable,i=>{i===!0?(typeof t=="function"&&t(),r.unbindComponent(o)):r.bindComponent(o)}),Nt(()=>{a.disable!==!0&&r.bindComponent(o)}),ft(()=>{a.disable!==!0&&r.unbindComponent(o)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}var cT=[!0,!1,"ondemand"],dT={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>cT.includes(e)}};function fT(e,t){const{props:n,proxy:r}=Ie(),a=Z(!1),o=Z(null),i=Z(!1);lT({validate:m,resetValidation:v});let s=0,u;const l=C(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length!==0),c=C(()=>n.disable!==!0&&l.value===!0&&t.value===!1),d=C(()=>n.error===!0||a.value===!0),f=C(()=>typeof n.errorMessage=="string"&&n.errorMessage.length!==0?n.errorMessage:o.value);ke(()=>n.modelValue,()=>{i.value=!0,c.value===!0&&n.lazyRules===!1&&p()});function h(){n.lazyRules!=="ondemand"&&c.value===!0&&i.value===!0&&p()}ke(()=>n.reactiveRules,y=>{y===!0?u===void 0&&(u=ke(()=>n.rules,h,{immediate:!0,deep:!0})):u!==void 0&&(u(),u=void 0)},{immediate:!0}),ke(()=>n.lazyRules,h),ke(e,y=>{y===!0?i.value=!0:c.value===!0&&n.lazyRules!=="ondemand"&&p()});function v(){s++,t.value=!1,i.value=!1,a.value=!1,o.value=null,p.cancel()}function m(y=n.modelValue){if(n.disable===!0||l.value===!1)return!0;const x=++s,b=t.value!==!0?()=>{i.value=!0}:()=>{},g=(S,E)=>{S===!0&&b(),a.value=S,o.value=E||null,t.value=!1},w=[];for(let S=0;S<n.rules.length;S++){const E=n.rules[S];let R;if(typeof E=="function"?R=E(y,Sl):typeof E=="string"&&Sl[E]!==void 0&&(R=Sl[E](y)),R===!1||typeof R=="string")return g(!0,R),!1;R!==!0&&R!==void 0&&w.push(R)}return w.length===0?(g(!1),!0):(t.value=!0,Promise.all(w).then(S=>{if(S===void 0||Array.isArray(S)===!1||S.length===0)return x===s&&g(!1),!0;const E=S.find(R=>R===!1||typeof R=="string");return x===s&&g(E!==void 0,E),E===void 0},S=>(x===s&&(console.error(S),g(!0)),!1)))}const p=hs(m,0);return ft(()=>{u?.(),p.cancel()}),Object.assign(r,{resetValidation:v,validate:m}),mn(r,"hasError",()=>d.value),{isDirtyModel:i,hasRules:l,hasError:d,errorMessage:f,validate:m,resetValidation:v}}function ni(e){return e!=null&&(""+e).length!==0}var s1={...wt,...dT,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},jc={...s1,maxlength:[Number,String]},Gc=["update:modelValue","clear","focus","blur"];function Kc({requiredForAttr:e=!0,tagProp:t,changeEvent:n=!1}={}){const{props:r,proxy:a}=Ie(),o=_t(r,a.$q),i=Hc({required:e,getValue:()=>r.for});return{requiredForAttr:e,changeEvent:n,tag:t===!0?C(()=>r.tag):{value:"label"},isDark:o,editable:C(()=>r.disable!==!0&&r.readonly!==!0),innerLoading:Z(!1),focused:Z(!1),hasPopupOpen:!1,splitAttrs:r1(),targetUid:i,rootRef:Z(null),targetRef:Z(null),controlRef:Z(null)}}function Xc(e){const{props:t,emit:n,slots:r,attrs:a,proxy:o}=Ie(),{$q:i}=o;let s=null;e.hasValue===void 0&&(e.hasValue=C(()=>ni(t.modelValue))),e.emitValue===void 0&&(e.emitValue=q=>{n("update:modelValue",q)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:A,onFocusout:k}),Object.assign(e,{clearValue:M,onControlFocusin:A,onControlFocusout:k,focus:E}),e.computedCounter===void 0&&(e.computedCounter=C(()=>{if(t.counter!==!1){const q=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,K=t.maxlength!==void 0?t.maxlength:t.maxValues;return q+(K!==void 0?" / "+K:"")}}));const{isDirtyModel:u,hasRules:l,hasError:c,errorMessage:d,resetValidation:f}=fT(e.focused,e.innerLoading),h=e.floatingLabel!==void 0?C(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):C(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),v=C(()=>t.bottomSlots===!0||t.hint!==void 0||l.value===!0||t.counter===!0||t.error!==null),m=C(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),p=C(()=>`q-field row no-wrap items-start q-field--${m.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(h.value===!0?" q-field--float":"")+(x.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(c.value===!0?" q-field--error":"")+(c.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&v.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),y=C(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(c.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length!==0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),x=C(()=>t.labelSlot===!0||t.label!==void 0),b=C(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&c.value!==!0?` text-${t.labelColor}`:"")),g=C(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:h.value,modelValue:t.modelValue,emitValue:e.emitValue})),w=C(()=>{const q={};return e.targetUid.value&&(q.for=e.targetUid.value),t.disable===!0&&(q["aria-disabled"]="true"),q});function S(){const q=document.activeElement;let K=e.targetRef?.value;K&&(q===null||q.id!==e.targetUid.value)&&(K.hasAttribute("tabindex")===!0||(K=K.querySelector("[tabindex]")),K!==q&&K?.focus({preventScroll:!0}))}function E(){gs(S)}function R(){jk(S);const q=document.activeElement;q!==null&&e.rootRef.value.contains(q)&&q.blur()}function A(q){s!==null&&(clearTimeout(s),s=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,n("focus",q))}function k(q,K){s!==null&&clearTimeout(s),s=setTimeout(()=>{s=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,n("blur",q)),K?.())})}function M(q){it(q),i.platform.is.mobile!==!0?(e.targetRef?.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),n("update:modelValue",null),e.changeEvent===!0&&n("change",null),n("clear",t.modelValue),mt(()=>{const K=u.value;f(),u.value=K})}function T(q){[13,32].includes(q.keyCode)&&M(q)}function D(){const q=[];return r.prepend!==void 0&&q.push(_("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:gn},r.prepend())),q.push(_("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},I())),c.value===!0&&t.noErrorIcon===!1&&q.push(V("error",[_(Ct,{name:i.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?q.push(V("inner-loading-append",r.loading!==void 0?r.loading():[_(Wr,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&q.push(V("inner-clearable-append",[_(Ct,{class:"q-field__focusable-action",name:t.clearIcon||i.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":i.lang.label.clear,onKeyup:T,onClick:M})])),r.append!==void 0&&q.push(_("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:gn},r.append())),e.getInnerAppend!==void 0&&q.push(V("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&q.push(e.getControlChild()),q}function I(){const q=[];return t.prefix!==void 0&&t.prefix!==null&&q.push(_("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&q.push(e.getShadowControl()),x.value===!0&&q.push(_("div",{class:b.value},He(r.label,t.label))),e.getControl!==void 0?q.push(e.getControl()):r.rawControl!==void 0?q.push(r.rawControl()):r.control!==void 0&&q.push(_("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},r.control(g.value))),t.suffix!==void 0&&t.suffix!==null&&q.push(_("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),q.concat(He(r.default))}function F(){let q,K;c.value===!0?d.value!==null?(q=[_("div",{role:"alert"},d.value)],K=`q--slot-error-${d.value}`):(q=He(r.error),K="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(q=[_("div",t.hint)],K=`q--slot-hint-${t.hint}`):(q=He(r.hint),K="q--slot-hint"));const oe=t.counter===!0||r.counter!==void 0;if(t.hideBottomSpace===!0&&oe===!1&&q===void 0)return;const W=_("div",{key:K,class:"q-field__messages col"},q);return _("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:gn},[t.hideBottomSpace===!0?W:_(pn,{name:"q-transition--field-message"},()=>W),oe===!0?_("div",{class:"q-field__counter"},r.counter!==void 0?r.counter():e.computedCounter.value):null])}function V(q,K){return K===null?null:_("div",{key:q,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},K)}let L=!1;return ca(()=>{L=!0}),bo(()=>{L===!0&&t.autofocus===!0&&o.focus()}),t.autofocus===!0&&Nt(()=>{o.focus()}),ft(()=>{s!==null&&clearTimeout(s)}),Object.assign(o,{focus:E,blur:R}),function(){const K=e.getControl===void 0&&r.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...w.value}:w.value;return _(e.tag.value,{ref:e.rootRef,class:[p.value,a.class],style:a.style,...K},[r.before!==void 0?_("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:gn},r.before()):null,_("div",{class:"q-field__inner relative-position col self-stretch"},[_("div",{ref:e.controlRef,class:y.value,tabindex:-1,...e.controlEvents},D()),v.value===!0?F():null]),r.after!==void 0?_("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:gn},r.after()):null])}}var hT=Ce({name:"QField",inheritAttrs:!1,props:{...jc,tag:{type:String,default:"label"}},emits:Gc,setup(){return Xc(Kc({tagProp:!0}))}});function wi(e,t,n,r){const a=[];return e.forEach(o=>{r(o)===!0?a.push(o):t.push({failedPropValidation:n,file:o})}),a}function Yu(e){e?.dataTransfer&&(e.dataTransfer.dropEffect="copy"),it(e)}var u1={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},l1=["rejected"];function c1({editable:e,dnd:t,getFileInput:n,addFilesToQueue:r}){const{props:a,emit:o,proxy:i}=Ie(),s=Z(null),u=C(()=>a.accept!==void 0?a.accept.split(",").map(x=>(x=x.trim(),x==="*"?"*/":(x.endsWith("/*")&&(x=x.slice(0,x.length-1)),x.toUpperCase()))):null),l=C(()=>parseInt(a.maxFiles,10)),c=C(()=>parseInt(a.maxTotalSize,10));function d(x){if(e.value)if(x!==Object(x)&&(x={target:null}),x.target?.matches('input[type="file"]')===!0)x.clientX===0&&x.clientY===0&&Gt(x);else{const b=n();b!==x.target&&b?.click(x)}}function f(x){e.value&&x&&r(null,x)}function h(x,b,g,w){let S=Array.from(b||x.target.files);const E=[],R=()=>{E.length!==0&&o("rejected",E)};if(a.accept!==void 0&&u.value.indexOf("*/")===-1&&(S=wi(S,E,"accept",A=>u.value.some(k=>A.type.toUpperCase().startsWith(k)||A.name.toUpperCase().endsWith(k))),S.length===0))return R();if(a.maxFileSize!==void 0){const A=parseInt(a.maxFileSize,10);if(S=wi(S,E,"max-file-size",k=>k.size<=A),S.length===0)return R()}if(a.multiple!==!0&&S.length!==0&&(S=[S[0]]),S.forEach(A=>{A.__key=A.webkitRelativePath+A.lastModified+A.name+A.size}),w===!0){const A=g.map(k=>k.__key);S=wi(S,E,"duplicate",k=>A.includes(k.__key)===!1)}if(S.length===0)return R();if(a.maxTotalSize!==void 0){let A=w===!0?g.reduce((k,M)=>k+M.size,0):0;if(S=wi(S,E,"max-total-size",k=>(A+=k.size,A<=c.value)),S.length===0)return R()}if(typeof a.filter=="function"){const A=a.filter(S);S=wi(S,E,"filter",k=>A.includes(k))}if(a.maxFiles!==void 0){let A=w===!0?g.length:0;if(S=wi(S,E,"max-files",()=>(A++,A<=l.value)),S.length===0)return R()}if(R(),S.length!==0)return S}function v(x){Yu(x),t.value!==!0&&(t.value=!0)}function m(x){it(x),(x.relatedTarget!==null||nt.is.safari!==!0?x.relatedTarget!==s.value:document.elementsFromPoint(x.clientX,x.clientY).includes(s.value)===!1)===!0&&(t.value=!1)}function p(x){Yu(x);const b=x.dataTransfer.files;b.length!==0&&r(null,b),t.value=!1}function y(x){if(t.value===!0)return _("div",{ref:s,class:`q-${x}__dnd absolute-full`,onDragenter:Yu,onDragover:Yu,onDragleave:m,onDrop:p})}return Object.assign(i,{pickFiles:d,addFiles:f}),{pickFiles:d,addFiles:f,onDragover:v,onDragleave:m,processFiles:h,getDndNode:y,maxFilesNumber:l,maxTotalSizeNumber:c}}function d1(e,t){function n(){const r=e.modelValue;try{const a="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(r)===r&&("length"in r?Array.from(r):[r]).forEach(o=>{a.items.add(o)}),{files:a.files}}catch{return{files:void 0}}}return C(t===!0?()=>{if(e.type==="file")return n()}:n)}Ce({name:"QFile",inheritAttrs:!1,props:{...s1,...Mr,...u1,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Gc,...l1],setup(e,{slots:t,emit:n,attrs:r}){const{proxy:a}=Ie(),o=Kc(),i=Z(null),s=Z(!1),u=_v(e),{pickFiles:l,onDragover:c,onDragleave:d,processFiles:f,getDndNode:h}=c1({editable:o.editable,dnd:s,getFileInput:T,addFilesToQueue:D}),v=d1(e),m=C(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),p=C(()=>ni(m.value)),y=C(()=>m.value.map(L=>L.name).join(", ")),x=C(()=>Zf(m.value.reduce((L,q)=>L+q.size,0))),b=C(()=>({totalSize:x.value,filesNumber:m.value.length,maxFiles:e.maxFiles})),g=C(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:u.value,...r,id:o.targetUid.value,disabled:o.editable.value!==!0})),w=C(()=>"q-file q-field--auto-height"+(s.value===!0?" q-file--dnd":"")),S=C(()=>e.multiple===!0&&e.append===!0);function E(L){const q=m.value.slice();q.splice(L,1),A(q)}function R(L){const q=m.value.indexOf(L);q!==-1&&E(q)}function A(L){n("update:modelValue",e.multiple===!0?L:L[0])}function k(L){L.keyCode===13&&gn(L)}function M(L){(L.keyCode===13||L.keyCode===32)&&l(L)}function T(){return i.value}function D(L,q){const K=f(L,q,m.value,S.value),oe=T();oe!=null&&(oe.value=""),K!==void 0&&((e.multiple===!0?e.modelValue&&K.every(W=>m.value.includes(W)):e.modelValue===K[0])||A(S.value===!0?m.value.concat(K):K))}function I(){return[_("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function F(){if(t.file!==void 0)return m.value.length===0?I():m.value.map((q,K)=>t.file({index:K,file:q,ref:this}));if(t.selected!==void 0)return m.value.length===0?I():t.selected({files:m.value,ref:this});if(e.useChips===!0)return m.value.length===0?I():m.value.map((q,K)=>_(Rx,{key:"file-"+K,removable:o.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{E(K)}},()=>_("span",{class:"ellipsis",textContent:q.name})));const L=e.displayValue!==void 0?e.displayValue:y.value;return L.length!==0?[_("div",{class:e.inputClass,style:e.inputStyle,textContent:L})]:I()}function V(){const L={ref:i,...g.value,...v.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:D};return e.multiple===!0&&(L.multiple=!0),_("input",L)}return Object.assign(o,{fieldClass:w,emitValue:A,hasValue:p,inputRef:i,innerValue:m,floatingLabel:C(()=>p.value===!0||ni(e.displayValue)),computedCounter:C(()=>{if(e.counterLabel!==void 0)return e.counterLabel(b.value);const L=e.maxFiles;return`${m.value.length}${L!==void 0?" / "+L:""} (${x.value})`}),getControlChild:()=>h("file"),getControl:()=>{const L={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return o.editable.value===!0&&Object.assign(L,{onDragover:c,onDragleave:d,onKeydown:k,onKeyup:M}),_("div",L,[V()].concat(F()))}}),Object.assign(a,{removeAtIndex:E,removeFile:R,getNativeElement:()=>i.value}),mn(a,"nativeEl",()=>i.value),Xc(o)}});Ce({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=Ie(),a=sn(si,Rt);if(a===Rt)return console.error("QFooter needs to be child of QLayout"),Rt;const o=Z(parseInt(e.heightHint,10)),i=Z(!0),s=Z(ar.value===!0||a.isContainer.value===!0?0:window.innerHeight),u=C(()=>e.reveal===!0||a.view.value.indexOf("F")!==-1||r.platform.is.ios&&a.isContainer.value===!0),l=C(()=>a.isContainer.value===!0?a.containerHeight.value:s.value),c=C(()=>{if(e.modelValue!==!0)return 0;if(u.value===!0)return i.value===!0?o.value:0;const w=a.scroll.value.position+l.value+o.value-a.height.value;return w>0?w:0}),d=C(()=>e.modelValue!==!0||u.value===!0&&i.value!==!0),f=C(()=>e.modelValue===!0&&d.value===!0&&e.reveal===!0),h=C(()=>"q-footer q-layout__section--marginal "+(u.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(d.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(u.value!==!0?" hidden":""):"")),v=C(()=>{const w=a.rows.value.bottom,S={};return w[0]==="l"&&a.left.space===!0&&(S[r.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),w[2]==="r"&&a.right.space===!0&&(S[r.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),S});function m(w,S){a.update("footer",w,S)}function p(w,S){w.value!==S&&(w.value=S)}function y({height:w}){p(o,w),m("size",w)}function x(){if(e.reveal!==!0)return;const{direction:w,position:S,inflectionPoint:E}=a.scroll.value;p(i,w==="up"||S-E<100||a.height.value-l.value-S-o.value<300)}function b(w){f.value===!0&&p(i,!0),n("focusin",w)}ke(()=>e.modelValue,w=>{m("space",w),p(i,!0),a.animate()}),ke(c,w=>{m("offset",w)}),ke(()=>e.reveal,w=>{w===!1&&p(i,e.modelValue)}),ke(i,w=>{a.animate(),n("reveal",w)}),ke([o,a.scroll,a.height],x),ke(()=>r.screen.height,w=>{a.isContainer.value!==!0&&p(s,w)});const g={};return a.instances.footer=g,e.modelValue===!0&&m("size",o.value),m("space",e.modelValue),m("offset",c.value),ft(()=>{a.instances.footer===g&&(a.instances.footer=void 0,m("size",0),m("offset",0),m("space",!1))}),()=>{const w=Jt(t.default,[_(ei,{debounce:0,onResize:y})]);return e.elevated===!0&&w.push(_("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),_("footer",{class:h.value,style:v.value,onFocusin:b},w)}}});Ce({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:n}){const r=Ie(),a=Z(null);let o=0;const i=[];function s(h){const v=typeof h=="boolean"?h:e.noErrorFocus!==!0,m=++o,p=(b,g)=>{n(`validation${b===!0?"Success":"Error"}`,g)},y=b=>{const g=b.validate();return typeof g.then=="function"?g.then(w=>({valid:w,comp:b}),w=>({valid:!1,comp:b,err:w})):Promise.resolve({valid:g,comp:b})};return(e.greedy===!0?Promise.all(i.map(y)).then(b=>b.filter(g=>g.valid!==!0)):i.reduce((b,g)=>b.then(()=>y(g).then(w=>{if(w.valid===!1)return Promise.reject(w)})),Promise.resolve()).catch(b=>[b])).then(b=>{if(b===void 0||b.length===0)return m===o&&p(!0),!0;if(m===o){const{comp:g,err:w}=b[0];if(w!==void 0&&console.error(w),p(!1,g),v===!0){const S=b.find(({comp:E})=>typeof E.focus=="function"&&lo(E.$)===!1);S!==void 0&&S.comp.focus()}}return!1})}function u(){o++,i.forEach(h=>{typeof h.resetValidation=="function"&&h.resetValidation()})}function l(h){h!==void 0&&it(h);const v=o+1;s().then(m=>{v===o&&m===!0&&(e.onSubmit!==void 0?n("submit",h):h?.target!==void 0&&typeof h.target.submit=="function"&&h.target.submit())})}function c(h){h!==void 0&&it(h),n("reset"),mt(()=>{u(),e.autofocus===!0&&e.noResetFocus!==!0&&d()})}function d(){gs(()=>{if(a.value===null)return;(a.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(a.value.querySelectorAll("[tabindex]"),v=>v.tabIndex!==-1))?.focus({preventScroll:!0})})}Er(Ub,{bindComponent(h){i.push(h)},unbindComponent(h){const v=i.indexOf(h);v!==-1&&i.splice(v,1)}});let f=!1;return ca(()=>{f=!0}),bo(()=>{f===!0&&e.autofocus===!0&&d()}),Nt(()=>{e.autofocus===!0&&d()}),Object.assign(r.proxy,{validate:s,resetValidation:u,submit:l,reset:c,focus:d,getValidationComponents:()=>i}),()=>_("form",{class:"q-form",ref:a,onSubmit:l,onReset:c},He(t.default))}});Ce({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=Ie(),a=sn(si,Rt);if(a===Rt)return console.error("QHeader needs to be child of QLayout"),Rt;const o=Z(parseInt(e.heightHint,10)),i=Z(!0),s=C(()=>e.reveal===!0||a.view.value.indexOf("H")!==-1||r.platform.is.ios&&a.isContainer.value===!0),u=C(()=>{if(e.modelValue!==!0)return 0;if(s.value===!0)return i.value===!0?o.value:0;const x=o.value-a.scroll.value.position;return x>0?x:0}),l=C(()=>e.modelValue!==!0||s.value===!0&&i.value!==!0),c=C(()=>e.modelValue===!0&&l.value===!0&&e.reveal===!0),d=C(()=>"q-header q-layout__section--marginal "+(s.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(l.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),f=C(()=>{const x=a.rows.value.top,b={};return x[0]==="l"&&a.left.space===!0&&(b[r.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),x[2]==="r"&&a.right.space===!0&&(b[r.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),b});function h(x,b){a.update("header",x,b)}function v(x,b){x.value!==b&&(x.value=b)}function m({height:x}){v(o,x),h("size",x)}function p(x){c.value===!0&&v(i,!0),n("focusin",x)}ke(()=>e.modelValue,x=>{h("space",x),v(i,!0),a.animate()}),ke(u,x=>{h("offset",x)}),ke(()=>e.reveal,x=>{x===!1&&v(i,e.modelValue)}),ke(i,x=>{a.animate(),n("reveal",x)}),ke(a.scroll,x=>{e.reveal===!0&&v(i,x.direction==="up"||x.position<=e.revealOffset||x.position-x.inflectionPoint<100)});const y={};return a.instances.header=y,e.modelValue===!0&&h("size",o.value),h("space",e.modelValue),h("offset",u.value),ft(()=>{a.instances.header===y&&(a.instances.header=void 0,h("size",0),h("offset",0),h("space",!1))}),()=>{const x=Cu(t.default,[]);return e.elevated===!0&&x.push(_("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),x.push(_(ei,{debounce:0,onResize:m})),_("header",{class:d.value,style:f.value,onFocusin:p},x)}}});var Ov={ratio:[String,Number]};function Bv(e,t){return C(()=>{const n=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(n)!==!0&&n>0?{paddingBottom:`${100/n}%`}:null})}var vT=1.7778;Ce({name:"QImg",props:{...Ov,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:vT},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:n}){const r=Z(e.initialRatio),a=Bv(e,r),o=Ie(),{registerTimeout:i,removeTimeout:s}=Oa(),{registerTimeout:u,removeTimeout:l}=Oa(),c=C(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),d=C(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),f=[Z(null),Z(c.value)],h=Z(0),v=Z(!1),m=Z(!1),p=C(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),y=C(()=>({width:e.width,height:e.height})),x=C(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),b=C(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function g(){if(l(),e.loadingShowDelay===0){v.value=!0;return}u(()=>{v.value=!0},e.loadingShowDelay)}function w(){l(),v.value=!1}function S({target:T}){lo(o)===!1&&(s(),r.value=T.naturalHeight===0?.5:T.naturalWidth/T.naturalHeight,E(T,1))}function E(T,D){D===1e3||lo(o)===!0||(T.complete===!0?R(T):i(()=>{E(T,D+1)},50))}function R(T){lo(o)!==!0&&(h.value=h.value^1,f[h.value].value=null,w(),T.getAttribute("__qerror")!=="true"&&(m.value=!1),n("load",T.currentSrc||T.src))}function A(T){s(),w(),m.value=!0,f[h.value].value=d.value,f[h.value^1].value=c.value,n("error",T)}function k(T){const D=f[T].value,I={key:"img_"+T,class:x.value,style:b.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...D};return h.value===T?Object.assign(I,{class:I.class+"current",onLoad:S,onError:A}):I.class+="loaded",_("div",{class:"q-img__container absolute-full",key:"img"+T},_("img",I))}function M(){return v.value===!1?_("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},He(t[m.value===!0?"error":"default"])):_("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[_(Wr,{color:e.spinnerColor,size:e.spinnerSize})])}{let T=function(){ke(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,D=>{s(),m.value=!1,D===null?(w(),f[h.value^1].value=c.value):g(),f[h.value].value=D},{immediate:!0})};ar.value===!0?Nt(T):T()}return()=>{const T=[];return a.value!==null&&T.push(_("div",{key:"filler",style:a.value})),f[0].value!==null&&T.push(k(0)),f[1].value!==null&&T.push(k(1)),T.push(_(pn,{name:"q-transition--fade"},M)),_("div",{key:"main",class:p.value,style:y.value,role:"img","aria-label":e.alt},T)}}});var{passive:Mo}=Ot;Ce({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:ui,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:t,emit:n}){const r=Z(!1),a=Z(!0),o=Z(null),i=Z(null);let s=e.initialIndex,u,l;const c=C(()=>"q-infinite-scroll__loading"+(r.value===!0?"":" invisible"));function d(){if(e.disable===!0||r.value===!0||a.value===!1)return;const E=Hu(u),R=co(u),A=as(u);e.reverse===!1?Math.round(R+A+e.offset)>=Math.round(E)&&f():Math.round(R)<=e.offset&&f()}function f(){if(e.disable===!0||r.value===!0||a.value===!1)return;s++,r.value=!0;const E=Hu(u);n("load",s,R=>{a.value===!0&&(r.value=!1,mt(()=>{if(e.reverse===!0){const A=Hu(u),k=co(u),M=A-E;ji(u,k+M)}R===!0?m():o.value&&o.value.closest("body")&&l()}))})}function h(){s=0}function v(){a.value===!1&&(a.value=!0,u.addEventListener("scroll",l,Mo)),d()}function m(){a.value===!0&&(a.value=!1,r.value=!1,u.removeEventListener("scroll",l,Mo),l?.cancel?.())}function p(){if(u&&a.value===!0&&u.removeEventListener("scroll",l,Mo),u=da(o.value,e.scrollTarget),a.value===!0){if(u.addEventListener("scroll",l,Mo),e.reverse===!0){const E=Hu(u),R=as(u);ji(u,E-R)}d()}}function y(E){s=E}function x(E){E=parseInt(E,10);const R=l;l=E<=0?d:hs(d,isNaN(E)===!0?100:E),u&&a.value===!0&&(R!==void 0&&u.removeEventListener("scroll",R,Mo),u.addEventListener("scroll",l,Mo))}function b(E){if(g.value===!0){if(i.value===null){E!==!0&&mt(()=>{b(!0)});return}const R=`${r.value===!0?"un":""}pauseAnimations`;Array.from(i.value.getElementsByTagName("svg")).forEach(A=>{A[R]()})}}const g=C(()=>e.disable!==!0&&a.value===!0);ke([r,g],()=>{b()}),ke(()=>e.disable,E=>{E===!0?m():v()}),ke(()=>e.reverse,()=>{r.value===!1&&a.value===!0&&d()}),ke(()=>e.scrollTarget,p),ke(()=>e.debounce,x);let w=!1;bo(()=>{w!==!1&&u&&ji(u,w)}),ca(()=>{w=u?co(u):!1}),ft(()=>{a.value===!0&&u.removeEventListener("scroll",l,Mo)}),Nt(()=>{x(e.debounce),p(),r.value===!1&&b()});const S=Ie();return Object.assign(S.proxy,{poll:()=>{l?.()},trigger:f,stop:m,reset:h,resume:v,setIndex:y,updateScrollTarget:p}),()=>{const E=Cu(t.default,[]);return g.value===!0&&E[e.reverse===!1?"push":"unshift"](_("div",{ref:i,class:c.value},He(t.loading))),_("div",{class:"q-infinite-scroll",ref:o},E)}}});Ce({name:"QInnerLoading",props:{...wt,...Xo,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:t}){const n=Ie(),r=_t(e,n.proxy.$q),{transitionProps:a,transitionStyle:o}=Vc(e),i=C(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(r.value===!0?" q-inner-loading--dark":"")),s=C(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function u(){const c=[_(Wr,{size:e.size,color:e.color})];return e.label!==void 0&&c.push(_("div",{class:s.value,style:e.labelStyle},[e.label])),c}function l(){return e.showing===!0?_("div",{class:i.value,style:o.value},t.default!==void 0?t.default():u()):null}return()=>_(pn,a.value,l)}});var _g={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},{tokenMap:Cg,tokenKeys:pT}=f1({"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}});function f1(e){const t=Object.keys(e),n={};return t.forEach(r=>{const a=e[r];n[r]={...a,regex:new RegExp(a.pattern)}}),{tokenMap:n,tokenKeys:t}}function h1(e){return new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+e.join("")+"])|(.)","g")}var Sg=/[.*+?^${}()|[\]\\]/g,mT=h1(pT),cn="",gT={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean,maskTokens:Object};function yT(e,t,n,r){let a,o,i,s,u,l;const c=C(()=>{if(e.maskTokens===void 0||e.maskTokens===null)return{tokenMap:Cg,tokenRegexMask:mT};const{tokenMap:k}=f1(e.maskTokens),M={...Cg,...k};return{tokenMap:M,tokenRegexMask:h1(Object.keys(M))}}),d=Z(null),f=Z(v());function h(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}ke(()=>e.type+e.autogrow,p),ke(()=>e.mask,k=>{if(k!==void 0)y(f.value,!0);else{const M=R(f.value);p(),e.modelValue!==M&&t("update:modelValue",M)}}),ke(()=>e.fillMask+e.reverseFillMask,()=>{d.value===!0&&y(f.value,!0)}),ke(()=>e.unmaskedValue,()=>{d.value===!0&&y(f.value)});function v(){if(p(),d.value===!0){const k=S(R(e.modelValue));return e.fillMask!==!1?A(k):k}return e.modelValue}function m(k){if(k<a.length)return a.slice(-k);let M="",T=a;const D=T.indexOf(cn);if(D!==-1){for(let I=k-T.length;I>0;I--)M+=cn;T=T.slice(0,D)+M+T.slice(D)}return T}function p(){if(d.value=e.mask!==void 0&&e.mask.length!==0&&h(),d.value===!1){s=void 0,a="",o="";return}const k=_g[e.mask]===void 0?e.mask:_g[e.mask],M=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",T=M.replace(Sg,"\\$&"),D=[],I=[],F=[];let V=e.reverseFillMask===!0,L="",q="";k.replace(c.value.tokenRegexMask,(N,Q,Y,fe,$)=>{if(fe!==void 0){const O=c.value.tokenMap[fe];F.push(O),q=O.negate,V===!0&&(I.push("(?:"+q+"+)?("+O.pattern+"+)?(?:"+q+"+)?("+O.pattern+"+)?"),V=!1),I.push("(?:"+q+"+)?("+O.pattern+")?")}else if(Y!==void 0)L="\\"+(Y==="\\"?"":Y),F.push(Y),D.push("([^"+L+"]+)?"+L+"?");else{const O=Q!==void 0?Q:$;L=O==="\\"?"\\\\\\\\":O.replace(Sg,"\\\\$&"),F.push(O),D.push("([^"+L+"]+)?"+L+"?")}});const K=new RegExp("^"+D.join("")+"("+(L===""?".":"[^"+L+"]")+"+)?"+(L===""?"":"["+L+"]*")+"$"),oe=I.length-1,W=I.map((N,Q)=>Q===0&&e.reverseFillMask===!0?new RegExp("^"+T+"*"+N):Q===oe?new RegExp("^"+N+"("+(q===""?".":q)+"+)?"+(e.reverseFillMask===!0?"$":T+"*")):new RegExp("^"+N));i=F,s=N=>{const Q=K.exec(e.reverseFillMask===!0?N:N.slice(0,F.length+1));Q!==null&&(N=Q.slice(1).join(""));const Y=[],fe=W.length;for(let $=0,O=N;$<fe;$++){const ee=W[$].exec(O);if(ee===null)break;O=O.slice(ee.shift().length),Y.push(...ee)}return Y.length!==0?Y.join(""):N},a=F.map(N=>typeof N=="string"?N:cn).join(""),o=a.split(cn).join(M)}function y(k,M,T){const D=r.value,I=D.selectionEnd,F=D.value.length-I,V=R(k);M===!0&&p();const L=S(V,M),q=e.fillMask!==!1?A(L):L,K=f.value!==q;D.value!==q&&(D.value=q),K===!0&&(f.value=q),document.activeElement===D&&mt(()=>{if(q===o){const W=e.reverseFillMask===!0?o.length:0;D.setSelectionRange(W,W,"forward");return}if(T==="insertFromPaste"&&e.reverseFillMask!==!0){const W=D.selectionEnd;let N=I-1;for(let Q=u;Q<=N&&Q<W;Q++)a[Q]!==cn&&N++;b.right(D,N);return}if(["deleteContentBackward","deleteContentForward"].indexOf(T)!==-1){const W=e.reverseFillMask===!0?I===0?q.length>L.length?1:0:Math.max(0,q.length-(q===o?0:Math.min(L.length,F)+1))+1:I;D.setSelectionRange(W,W,"forward");return}if(e.reverseFillMask===!0)if(K===!0){const W=Math.max(0,q.length-(q===o?0:Math.min(L.length,F+1)));W===1&&I===1?D.setSelectionRange(W,W,"forward"):b.rightReverse(D,W)}else{const W=q.length-F;D.setSelectionRange(W,W,"backward")}else if(K===!0){const W=Math.max(0,a.indexOf(cn),Math.min(L.length,I)-1);b.right(D,W)}else{const W=I-1;b.right(D,W)}});const oe=e.unmaskedValue===!0?R(q):q;String(e.modelValue)!==oe&&(e.modelValue!==null||oe!=="")&&n(oe,!0)}function x(k,M,T){const D=S(R(k.value));M=Math.max(0,a.indexOf(cn),Math.min(D.length,M)),u=M,k.setSelectionRange(M,T,"forward")}const b={left(k,M){const T=a.slice(M-1).indexOf(cn)===-1;let D=Math.max(0,M-1);for(;D>=0;D--)if(a[D]===cn){M=D,T===!0&&M++;break}if(D<0&&a[M]!==void 0&&a[M]!==cn)return b.right(k,0);M>=0&&k.setSelectionRange(M,M,"backward")},right(k,M){const T=k.value.length;let D=Math.min(T,M+1);for(;D<=T;D++)if(a[D]===cn){M=D;break}else a[D-1]===cn&&(M=D);if(D>T&&a[M-1]!==void 0&&a[M-1]!==cn)return b.left(k,T);k.setSelectionRange(M,M,"forward")},leftReverse(k,M){const T=m(k.value.length);let D=Math.max(0,M-1);for(;D>=0;D--)if(T[D-1]===cn){M=D;break}else if(T[D]===cn&&(M=D,D===0))break;if(D<0&&T[M]!==void 0&&T[M]!==cn)return b.rightReverse(k,0);M>=0&&k.setSelectionRange(M,M,"backward")},rightReverse(k,M){const T=k.value.length,D=m(T),I=D.slice(0,M+1).indexOf(cn)===-1;let F=Math.min(T,M+1);for(;F<=T;F++)if(D[F-1]===cn){M=F,M>0&&I===!0&&M--;break}if(F>T&&D[M-1]!==void 0&&D[M-1]!==cn)return b.leftReverse(k,T);k.setSelectionRange(M,M,"forward")}};function g(k){t("click",k),l=void 0}function w(k){if(t("keydown",k),ii(k)===!0||k.altKey===!0)return;const M=r.value,T=M.selectionStart,D=M.selectionEnd;if(k.shiftKey||(l=void 0),k.keyCode===37||k.keyCode===39){k.shiftKey&&l===void 0&&(l=M.selectionDirection==="forward"?T:D);const I=b[(k.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(k.preventDefault(),I(M,l===T?D:T),k.shiftKey){const F=M.selectionStart;M.setSelectionRange(Math.min(l,F),Math.max(l,F),"forward")}}else k.keyCode===8&&e.reverseFillMask!==!0&&T===D?(b.left(M,T),M.setSelectionRange(M.selectionStart,D,"backward")):k.keyCode===46&&e.reverseFillMask===!0&&T===D&&(b.rightReverse(M,D),M.setSelectionRange(T,M.selectionEnd,"forward"))}function S(k,M){if(k==null||k==="")return"";if(e.reverseFillMask===!0)return E(k,M);const T=i;let D=0,I="";for(let F=0;F<T.length;F++){const V=k[D],L=T[F];if(typeof L=="string")I+=L,M===!0&&V===L&&D++;else if(V!==void 0&&L.regex.test(V))I+=L.transform!==void 0?L.transform(V):V,D++;else return I}return I}function E(k,M){const T=i,D=a.indexOf(cn);let I=k.length-1,F="";for(let V=T.length-1;V>=0&&I!==-1;V--){const L=T[V];let q=k[I];if(typeof L=="string")F=L+F,M===!0&&q===L&&I--;else if(q!==void 0&&L.regex.test(q))do F=(L.transform!==void 0?L.transform(q):q)+F,I--,q=k[I];while(D===V&&q!==void 0&&L.regex.test(q));else return F}return F}function R(k){return typeof k!="string"||s===void 0?typeof k=="number"?s(""+k):k:s(k)}function A(k){return o.length-k.length<=0?k:e.reverseFillMask===!0&&k.length!==0?o.slice(0,-k.length)+k:k+o.slice(k.length)}return{innerValue:f,hasMask:d,moveCursorForPaste:x,updateMaskValue:y,onMaskedKeydown:w,onMaskedClick:g}}var bT=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,xT=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,wT=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,_T=/[a-z0-9_ -]$/i;function v1(e){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,e(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(nt.is.firefox===!0?_T.test(n.data)===!1:bT.test(n.data)===!0||xT.test(n.data)===!0||wT.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}var p1=Ce({name:"QInput",inheritAttrs:!1,props:{...jc,...gT,...Mr,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Gc,"paste","change","keydown","click","animationend"],setup(e,{emit:t,attrs:n}){const{proxy:r}=Ie(),{$q:a}=r,o={};let i=NaN,s,u,l=null,c;const d=Z(null),f=_v(e),{innerValue:h,hasMask:v,moveCursorForPaste:m,updateMaskValue:p,onMaskedKeydown:y,onMaskedClick:x}=yT(e,t,V,d),b=d1(e,!0),g=C(()=>ni(h.value)),w=v1(I),S=Kc({changeEvent:!0}),E=C(()=>e.type==="textarea"||e.autogrow===!0),R=C(()=>E.value===!0||["text","search","url","tel","password"].includes(e.type)),A=C(()=>{const N={...S.splitAttrs.listeners.value,onInput:I,onPaste:D,onChange:q,onBlur:K,onFocus:Gt};return N.onCompositionstart=N.onCompositionupdate=N.onCompositionend=w,v.value===!0&&(N.onKeydown=y,N.onClick=x),e.autogrow===!0&&(N.onAnimationend=F),N}),k=C(()=>{const N={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:f.value,...S.splitAttrs.attributes.value,id:S.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return E.value===!1&&(N.type=e.type),e.autogrow===!0&&(N.rows=1),N});ke(()=>e.type,()=>{d.value&&(d.value.value=e.modelValue)}),ke(()=>e.modelValue,N=>{if(v.value===!0){if(u===!0&&(u=!1,String(N)===i))return;p(N)}else h.value!==N&&(h.value=N,e.type==="number"&&o.hasOwnProperty("value")===!0&&(s===!0?s=!1:delete o.value));e.autogrow===!0&&mt(L)}),ke(()=>e.autogrow,N=>{N===!0?mt(L):d.value!==null&&n.rows>0&&(d.value.style.height="auto")}),ke(()=>e.dense,()=>{e.autogrow===!0&&mt(L)});function M(){gs(()=>{const N=document.activeElement;d.value!==null&&d.value!==N&&(N===null||N.id!==S.targetUid.value)&&d.value.focus({preventScroll:!0})})}function T(){d.value?.select()}function D(N){if(v.value===!0&&e.reverseFillMask!==!0){const Q=N.target;m(Q,Q.selectionStart,Q.selectionEnd)}t("paste",N)}function I(N){if(!N||!N.target)return;if(e.type==="file"){t("update:modelValue",N.target.files);return}const Q=N.target.value;if(N.target.qComposing===!0){o.value=Q;return}if(v.value===!0)p(Q,!1,N.inputType);else if(V(Q),R.value===!0&&N.target===document.activeElement){const{selectionStart:Y,selectionEnd:fe}=N.target;Y!==void 0&&fe!==void 0&&mt(()=>{N.target===document.activeElement&&Q.indexOf(N.target.value)===0&&N.target.setSelectionRange(Y,fe)})}e.autogrow===!0&&L()}function F(N){t("animationend",N),L()}function V(N,Q){c=()=>{l=null,e.type!=="number"&&o.hasOwnProperty("value")===!0&&delete o.value,e.modelValue!==N&&i!==N&&(i=N,Q===!0&&(u=!0),t("update:modelValue",N),mt(()=>{i===N&&(i=NaN)})),c=void 0},e.type==="number"&&(s=!0,o.value=N),e.debounce!==void 0?(l!==null&&clearTimeout(l),o.value=N,l=setTimeout(c,e.debounce)):c()}function L(){requestAnimationFrame(()=>{const N=d.value;if(N!==null){const Q=N.parentNode.style,{scrollTop:Y}=N,{overflowY:fe,maxHeight:$}=a.platform.is.firefox===!0?{}:window.getComputedStyle(N),O=fe!==void 0&&fe!=="scroll";O===!0&&(N.style.overflowY="hidden"),Q.marginBottom=N.scrollHeight-1+"px",N.style.height="1px",N.style.height=N.scrollHeight+"px",O===!0&&(N.style.overflowY=parseInt($,10)<N.scrollHeight?"auto":"hidden"),Q.marginBottom="",N.scrollTop=Y}})}function q(N){w(N),l!==null&&(clearTimeout(l),l=null),c?.(),t("change",N.target.value)}function K(N){N!==void 0&&Gt(N),l!==null&&(clearTimeout(l),l=null),c?.(),s=!1,u=!1,delete o.value,e.type!=="file"&&setTimeout(()=>{d.value!==null&&(d.value.value=h.value!==void 0?h.value:"")})}function oe(){return o.hasOwnProperty("value")===!0?o.value:h.value!==void 0?h.value:""}ft(()=>{K()}),Nt(()=>{e.autogrow===!0&&L()}),Object.assign(S,{innerValue:h,fieldClass:C(()=>`q-${E.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:C(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:d,emitValue:V,hasValue:g,floatingLabel:C(()=>g.value===!0&&(e.type!=="number"||isNaN(h.value)===!1)||ni(e.displayValue)),getControl:()=>_(E.value===!0?"textarea":"input",{ref:d,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...k.value,...A.value,...e.type!=="file"?{value:oe()}:b.value}),getShadowControl:()=>_("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(E.value===!0?"":" text-no-wrap")},[_("span",{class:"invisible"},oe()),_("span",e.shadowText)])});const W=Xc(S);return Object.assign(r,{focus:M,select:T,getNativeElement:()=>d.value}),mn(r,"nativeEl",()=>d.value),W}}),kg={threshold:0,root:null,rootMargin:"0px"};function Eg(e,t,n){let r,a,o;typeof n=="function"?(r=n,a=kg,o=t.cfg===void 0):(r=n.handler,a=Object.assign({},kg,n.cfg),o=t.cfg===void 0||Br(t.cfg,a)===!1),t.handler!==r&&(t.handler=r),o===!0&&(t.cfg=a,t.observer?.unobserve(e),t.observer=new IntersectionObserver(([i])=>{if(typeof t.handler=="function"){if(i.rootBounds===null&&document.body.contains(e)===!0){t.observer.unobserve(e),t.observer.observe(e);return}(t.handler(i,t.observer)===!1||t.once===!0&&i.isIntersecting===!0)&&m1(e)}},a),t.observer.observe(e))}function m1(e){const t=e.__qvisible;t!==void 0&&(t.observer?.unobserve(e),delete e.__qvisible)}var CT=jr({name:"intersection",mounted(e,{modifiers:t,value:n}){const r={once:t.once===!0};Eg(e,r,n),e.__qvisible=r},updated(e,t){const n=e.__qvisible;n!==void 0&&Eg(e,n,t.value)},beforeUnmount:m1});Ce({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:t,emit:n}){const r=Z(ar.value===!0?e.ssrPrerender:!1),a=C(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:u,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:u),o=C(()=>e.disable!==!0&&(ar.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),i=C(()=>[[CT,a.value,void 0,{once:e.once}]]),s=C(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function u(c){r.value!==c.isIntersecting&&(r.value=c.isIntersecting,e.onVisibility!==void 0&&n("visibility",r.value))}function l(){if(r.value===!0)return[_("div",{key:"content",style:s.value},He(t.default))];if(t.hidden!==void 0)return[_("div",{key:"hidden",style:s.value},t.hidden())]}return()=>{const c=e.transition?[_(pn,{name:"q-transition--"+e.transition},l)]:l();return Ir(e.tag,{class:"q-intersection"},c,"main",o.value,()=>i.value)}}});var ST=["ul","ol"],kT=Ce({name:"QList",props:{...wt,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const n=Ie(),r=_t(e,n.proxy.$q),a=C(()=>ST.includes(e.tag)?null:"list"),o=C(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(r.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>_(e.tag,{class:o.value,role:a.value},He(t.default))}}),Tg=[34,37,40,33,39,38],ET=Object.keys(Mv);Ce({name:"QKnob",props:{...Mr,...Mv,modelValue:{type:Number,required:!0},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},tabindex:{type:[Number,String],default:0},disable:Boolean,readonly:Boolean},emits:["update:modelValue","change","dragValue"],setup(e,{slots:t,emit:n}){const{proxy:r}=Ie(),{$q:a}=r,o=Z(e.modelValue),i=Z(!1),s=C(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),u=C(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax);let l;function c(){o.value=e.modelValue===null?s.value:Ft(e.modelValue,s.value,u.value),M(!0)}ke(()=>`${e.modelValue}|${s.value}|${u.value}`,c),c();const d=C(()=>e.disable===!1&&e.readonly===!1),f=C(()=>"q-knob non-selectable"+(d.value===!0?" q-knob--editable":e.disable===!0?" disabled":"")),h=C(()=>(String(e.step).trim().split(".")[1]||"").length),v=C(()=>e.step===0?1:e.step),m=C(()=>e.instantFeedback===!0||i.value===!0),p=a.platform.is.mobile===!0?C(()=>d.value===!0?{onClick:E}:{}):C(()=>d.value===!0?{onMousedown:S,onClick:E,onKeydown:R,onKeyup:k}:{}),y=C(()=>d.value===!0?{tabindex:e.tabindex}:{[`aria-${e.disable===!0?"disabled":"readonly"}`]:"true"}),x=C(()=>{const I={};return ET.forEach(F=>{I[F]=e[F]}),I});function b(I){I.isFinal?(A(I.evt,!0),i.value=!1):(I.isFirst&&(w(),i.value=!0),A(I.evt))}const g=C(()=>[[Tr,b,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function w(){const{top:I,left:F,width:V,height:L}=r.$el.getBoundingClientRect();l={top:I+L/2,left:F+V/2}}function S(I){w(),A(I)}function E(I){w(),A(I,!0)}function R(I){if(Tg.includes(I.keyCode)===!1)return;it(I);const F=([34,33].includes(I.keyCode)?10:1)*v.value,V=[34,37,40].includes(I.keyCode)?-F:F;o.value=Ft(parseFloat((o.value+V).toFixed(h.value)),s.value,u.value),M()}function A(I,F){const V=Zn(I),L=Math.abs(V.top-l.top),q=Math.sqrt(L**2+Math.abs(V.left-l.left)**2);let K=Math.asin(L/q)*(180/Math.PI);V.top<l.top?K=l.left<V.left?90-K:270+K:K=l.left<V.left?K+90:270-K,a.lang.rtl===!0?K=ql(-K-e.angle,0,360):e.angle&&(K=ql(K-e.angle,0,360)),e.reverse===!0&&(K=360-K);let oe=e.min+K/360*(e.max-e.min);if(v.value!==0){const W=oe%v.value;oe=oe-W+(Math.abs(W)>=v.value/2?(W<0?-1:1)*v.value:0),oe=parseFloat(oe.toFixed(h.value))}oe=Ft(oe,s.value,u.value),n("dragValue",oe),o.value!==oe&&(o.value=oe),M(F)}function k(I){Tg.includes(I.keyCode)&&M(!0)}function M(I){e.modelValue!==o.value&&n("update:modelValue",o.value),I===!0&&n("change",o.value)}const T=ku(e);function D(){return _("input",T.value)}return()=>{const I={class:f.value,role:"slider","aria-valuemin":s.value,"aria-valuemax":u.value,"aria-valuenow":e.modelValue,...y.value,...x.value,value:o.value,instantFeedback:m.value,...p.value},F={default:t.default};return d.value===!0&&e.name!==void 0&&(F.internal=D),Ir(Mx,I,F,"knob",d.value,()=>g.value)}}});var{passive:Rg}=Ot,TT=["both","horizontal","vertical"],g1=Ce({name:"QScrollObserver",props:{axis:{type:String,validator:e=>TT.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:ui},emits:["scroll"],setup(e,{emit:t}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let r=null,a,o;ke(()=>e.scrollTarget,()=>{u(),s()});function i(){r?.();const d=Math.max(0,co(a)),f=zc(a),h={top:d-n.position.top,left:f-n.position.left};if(e.axis==="vertical"&&h.top===0||e.axis==="horizontal"&&h.left===0)return;const v=Math.abs(h.top)>=Math.abs(h.left)?h.top<0?"up":"down":h.left<0?"left":"right";n.position={top:d,left:f},n.directionChanged=n.direction!==v,n.delta=h,n.directionChanged===!0&&(n.direction=v,n.inflectionPoint=n.position),t("scroll",{...n})}function s(){a=da(o,e.scrollTarget),a.addEventListener("scroll",l,Rg),l(!0)}function u(){a!==void 0&&(a.removeEventListener("scroll",l,Rg),a=void 0)}function l(d){if(d===!0||e.debounce===0||e.debounce==="0")i();else if(r===null){const[f,h]=e.debounce?[setTimeout(i,e.debounce),clearTimeout]:[requestAnimationFrame(i),cancelAnimationFrame];r=()=>{h(f),r=null}}}const{proxy:c}=Ie();return ke(()=>c.$q.lang.rtl,i),Nt(()=>{o=c.$el.parentNode,s()}),ft(()=>{r?.(),u()}),Object.assign(c,{trigger:l,getPosition:()=>n}),Kt}});Ce({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=Ie(),a=Z(null),o=Z(r.screen.height),i=Z(e.container===!0?0:r.screen.width),s=Z({position:0,direction:"down",inflectionPoint:0}),u=Z(0),l=Z(ar.value===!0?0:Cl()),c=C(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),d=C(()=>e.container===!1?{minHeight:r.screen.height+"px"}:null),f=C(()=>l.value!==0?{[r.lang.rtl===!0?"left":"right"]:`${l.value}px`}:null),h=C(()=>l.value!==0?{[r.lang.rtl===!0?"right":"left"]:0,[r.lang.rtl===!0?"left":"right"]:`-${l.value}px`,width:`calc(100% + ${l.value}px)`}:null);function v(g){if(e.container===!0||document.qScrollPrevented!==!0){const w={position:g.position.top,direction:g.direction,directionChanged:g.directionChanged,inflectionPoint:g.inflectionPoint.top,delta:g.delta.top};s.value=w,e.onScroll!==void 0&&n("scroll",w)}}function m(g){const{height:w,width:S}=g;let E=!1;o.value!==w&&(E=!0,o.value=w,e.onScrollHeight!==void 0&&n("scrollHeight",w),y()),i.value!==S&&(E=!0,i.value=S),E===!0&&e.onResize!==void 0&&n("resize",g)}function p({height:g}){u.value!==g&&(u.value=g,y())}function y(){if(e.container===!0){const g=o.value>u.value?Cl():0;l.value!==g&&(l.value=g)}}let x=null;const b={instances:{},view:C(()=>e.view),isContainer:C(()=>e.container),rootRef:a,height:o,containerHeight:u,scrollbarWidth:l,totalWidth:C(()=>i.value+l.value),rows:C(()=>{const g=e.view.toLowerCase().split(" ");return{top:g[0].split(""),middle:g[1].split(""),bottom:g[2].split("")}}),header:ra({size:0,offset:0,space:!1}),right:ra({size:300,offset:0,space:!1}),footer:ra({size:0,offset:0,space:!1}),left:ra({size:300,offset:0,space:!1}),scroll:s,animate(){x!==null?clearTimeout(x):document.body.classList.add("q-body--layout-animate"),x=setTimeout(()=>{x=null,document.body.classList.remove("q-body--layout-animate")},155)},update(g,w,S){b[g][w]=S}};if(Er(si,b),Cl()>0){let g=function(){E=null,R.classList.remove("hide-scrollbar")},w=function(){if(E===null){if(R.scrollHeight>r.screen.height)return;R.classList.add("hide-scrollbar")}else clearTimeout(E);E=setTimeout(g,300)},S=function(A){E!==null&&A==="remove"&&(clearTimeout(E),g()),window[`${A}EventListener`]("resize",w)},E=null;const R=document.body;ke(()=>e.container!==!0?"add":"remove",S),e.container!==!0&&S("add"),Dc(()=>{S("remove")})}return()=>{const g=Jt(t.default,[_(g1,{onScroll:v}),_(ei,{onResize:m})]),w=_("div",{class:c.value,style:d.value,ref:e.container===!0?void 0:a,tabindex:-1},g);return e.container===!0?_("div",{class:"q-layout-container overflow-hidden",ref:a},[_(ei,{onResize:p}),_("div",{class:"absolute-full",style:f.value},[_("div",{class:"scroll",style:h.value},[w])])]):w}}});var RT=["horizontal","vertical","cell","none"],AT=Ce({name:"QMarkupTable",props:{...wt,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>RT.includes(e)}},setup(e,{slots:t}){const n=Ie(),r=_t(e,n.proxy.$q),a=C(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(r.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>_("div",{class:a.value},[_("table",{class:"q-table"},He(t.default))])}});Ce({name:"QNoSsr",props:{tag:{type:String,default:"div"},placeholder:String},setup(e,{slots:t}){const{isHydrated:n}=Nx();return()=>{if(n.value===!0){const o=He(t.default);return o===void 0?o:o.length>1?_(e.tag,{},o):o[0]}const r={class:"q-no-ssr-placeholder"},a=He(t.placeholder);if(a!==void 0)return a.length>1?_(e.tag,r,a):a[0];if(e.placeholder!==void 0)return _(e.tag,r,e.placeholder)}}});var IT=()=>_("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[_("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),_("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),MT=Ce({name:"QRadio",props:{...wt,...qa,...Mr,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:t,emit:n}){const{proxy:r}=Ie(),a=_t(e,r.$q),o=La(e,Sx),i=Z(null),{refocusTargetEl:s,refocusTarget:u}=Cx(e,i),l=C(()=>pt(e.modelValue)===pt(e.val)),c=C(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(a.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),d=C(()=>{const g=e.color!==void 0&&(e.keepColor===!0||l.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${l.value===!0?"truthy":"falsy"}${g}`}),f=C(()=>(l.value===!0?e.checkedIcon:e.uncheckedIcon)||null),h=C(()=>e.disable===!0?-1:e.tabindex||0),v=C(()=>{const g={type:"radio"};return e.name!==void 0&&Object.assign(g,{".checked":l.value===!0,"^checked":l.value===!0?"checked":void 0,name:e.name,value:e.val}),g}),m=wo(v);function p(g){g!==void 0&&(it(g),u(g)),e.disable!==!0&&l.value!==!0&&n("update:modelValue",e.val,g)}function y(g){(g.keyCode===13||g.keyCode===32)&&it(g)}function x(g){(g.keyCode===13||g.keyCode===32)&&p(g)}Object.assign(r,{set:p});const b=IT();return()=>{const g=f.value!==null?[_("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[_(Ct,{class:"q-radio__icon",name:f.value})])]:[b];e.disable!==!0&&m(g,"unshift"," q-radio__native q-ma-none q-pa-none");const w=[_("div",{class:d.value,style:o.value,"aria-hidden":"true"},g)];s.value!==null&&w.push(s.value);const S=e.label!==void 0?Jt(t.default,[e.label]):He(t.default);return S!==void 0&&w.push(_("div",{class:"q-radio__label q-anchor--skip"},S)),_("div",{ref:i,class:c.value,tabindex:h.value,role:"radio","aria-label":e.label,"aria-checked":l.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:p,onKeydown:y,onKeyup:x},w)}}}),DT=Ce({name:"QToggle",props:{...kx,icon:String,iconColor:String},emits:Ex,setup(e){function t(n,r){const a=C(()=>(n.value===!0?e.checkedIcon:r.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),o=C(()=>n.value===!0?e.iconColor:null);return()=>[_("div",{class:"q-toggle__track"}),_("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},a.value!==void 0?[_(Ct,{name:a.value,color:o.value})]:void 0)]}return Tx("toggle",t)}}),y1={radio:MT,checkbox:Ks,toggle:DT},PT=Object.keys(y1);function Xd(e,t){if(typeof e=="function")return e;const n=e!==void 0?e:t;return r=>r[n]}var FT=Ce({name:"QOptionGroup",props:{...wt,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(kn),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:e=>PT.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:t,slots:n}){const{proxy:{$q:r}}=Ie(),a=Array.isArray(e.modelValue);e.type==="radio"?a===!0&&console.error("q-option-group: model should not be array"):a===!1&&console.error("q-option-group: model should be array in your case");const o=_t(e,r),i=C(()=>y1[e.type]),s=C(()=>Xd(e.optionValue,"value")),u=C(()=>Xd(e.optionLabel,"label")),l=C(()=>Xd(e.optionDisable,"disable")),c=C(()=>e.options.map(v=>({val:s.value(v),name:v.name===void 0?e.name:v.name,disable:e.disable||l.value(v),leftLabel:v.leftLabel===void 0?e.leftLabel:v.leftLabel,color:v.color===void 0?e.color:v.color,checkedIcon:v.checkedIcon,uncheckedIcon:v.uncheckedIcon,dark:v.dark===void 0?o.value:v.dark,size:v.size===void 0?e.size:v.size,dense:e.dense,keepColor:v.keepColor===void 0?e.keepColor:v.keepColor}))),d=C(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),f=C(()=>{const v={role:"group"};return e.type==="radio"&&(v.role="radiogroup",e.disable===!0&&(v["aria-disabled"]="true")),v});function h(v){t("update:modelValue",v)}return()=>_("div",{class:d.value,...f.value},e.options.map((v,m)=>{const p=n["label-"+m]!==void 0?()=>n["label-"+m](v):n.label!==void 0?()=>n.label(v):void 0;return _("div",[_(i.value,{label:p===void 0?u.value(v):null,modelValue:e.modelValue,"onUpdate:modelValue":h,...c.value[m]},p)])}))}});Ce({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=Ie(),r=sn(si,Rt);if(r===Rt)return console.error("QPage needs to be a deep child of QLayout"),Rt;if(sn(Hb,Rt)===Rt)return console.error("QPage needs to be child of QPageContainer"),Rt;const o=C(()=>{const s=(r.header.space===!0?r.header.size:0)+(r.footer.space===!0?r.footer.size:0);if(typeof e.styleFn=="function"){const u=r.isContainer.value===!0?r.containerHeight.value:n.screen.height;return e.styleFn(s,u)}return{minHeight:r.isContainer.value===!0?r.containerHeight.value-s+"px":n.screen.height===0?s!==0?`calc(100vh - ${s}px)`:"100vh":n.screen.height-s+"px"}}),i=C(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>_("main",{class:i.value,style:o.value},He(t.default))}});Ce({name:"QPageContainer",setup(e,{slots:t}){const{proxy:{$q:n}}=Ie(),r=sn(si,Rt);if(r===Rt)return console.error("QPageContainer needs to be child of QLayout"),Rt;Er(Hb,!0);const a=C(()=>{const o={};return r.header.space===!0&&(o.paddingTop=`${r.header.size}px`),r.right.space===!0&&(o[`padding${n.lang.rtl===!0?"Left":"Right"}`]=`${r.right.size}px`),r.footer.space===!0&&(o.paddingBottom=`${r.footer.size}px`),r.left.space===!0&&(o[`padding${n.lang.rtl===!0?"Right":"Left"}`]=`${r.left.size}px`),o});return()=>_("div",{class:"q-page-container",style:a.value},He(t.default))}});var dh={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function b1(){const{props:e,proxy:{$q:t}}=Ie(),n=sn(si,Rt);if(n===Rt)return console.error("QPageSticky needs to be child of QLayout"),Rt;const r=C(()=>{const d=e.position;return{top:d.indexOf("top")!==-1,right:d.indexOf("right")!==-1,bottom:d.indexOf("bottom")!==-1,left:d.indexOf("left")!==-1,vertical:d==="top"||d==="bottom",horizontal:d==="left"||d==="right"}}),a=C(()=>n.header.offset),o=C(()=>n.right.offset),i=C(()=>n.footer.offset),s=C(()=>n.left.offset),u=C(()=>{let d=0,f=0;const h=r.value,v=t.lang.rtl===!0?-1:1;h.top===!0&&a.value!==0?f=`${a.value}px`:h.bottom===!0&&i.value!==0&&(f=`${-i.value}px`),h.left===!0&&s.value!==0?d=`${v*s.value}px`:h.right===!0&&o.value!==0&&(d=`${-v*o.value}px`);const m={transform:`translate(${d}, ${f})`};return e.offset&&(m.margin=`${e.offset[1]}px ${e.offset[0]}px`),h.vertical===!0?(s.value!==0&&(m[t.lang.rtl===!0?"right":"left"]=`${s.value}px`),o.value!==0&&(m[t.lang.rtl===!0?"left":"right"]=`${o.value}px`)):h.horizontal===!0&&(a.value!==0&&(m.top=`${a.value}px`),i.value!==0&&(m.bottom=`${i.value}px`)),m}),l=C(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function c(d){const f=He(d.default);return _("div",{class:l.value,style:u.value},e.expand===!0?f:[_("div",f)])}return{$layout:n,getStickyContent:c}}Ce({name:"QPageScroller",props:{...dh,scrollOffset:{type:Number,default:1e3},reverse:Boolean,duration:{type:Number,default:300},offset:{...dh.offset,default:()=>[18,18]}},emits:["click"],setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=Ie(),{$layout:a,getStickyContent:o}=b1(),i=Z(null);let s;const u=C(()=>a.height.value-(a.isContainer.value===!0?a.containerHeight.value:r.screen.height));function l(){return e.reverse===!0?u.value-a.scroll.value.position>e.scrollOffset:a.scroll.value.position>e.scrollOffset}const c=Z(l());function d(){const p=l();c.value!==p&&(c.value=p)}function f(){e.reverse===!0?s===void 0&&(s=ke(u,d)):h()}ke(a.scroll,d),ke(()=>e.reverse,f);function h(){s!==void 0&&(s(),s=void 0)}function v(p){const y=da(a.isContainer.value===!0?i.value:a.rootRef.value);ji(y,e.reverse===!0?a.height.value:0,e.duration),n("click",p)}function m(){return c.value===!0?_("div",{ref:i,class:"q-page-scroller",onClick:v},o(t)):null}return f(),ft(h),()=>_(pn,{name:"q-transition--fade"},m)}});Ce({name:"QPageSticky",props:dh,setup(e,{slots:t}){const{getStickyContent:n}=b1();return()=>n(t)}});function Ju(e,t){return[!0,!1].includes(e)?e:t}Ce({name:"QPagination",props:{...wt,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||ox.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:t}){const{proxy:n}=Ie(),{$q:r}=n,a=_t(e,r),o=C(()=>parseInt(e.min,10)),i=C(()=>parseInt(e.max,10)),s=C(()=>parseInt(e.maxPages,10)),u=C(()=>v.value+" / "+i.value),l=C(()=>Ju(e.boundaryLinks,e.input)),c=C(()=>Ju(e.boundaryNumbers,!e.input)),d=C(()=>Ju(e.directionLinks,e.input)),f=C(()=>Ju(e.ellipses,!e.input)),h=Z(null),v=C({get:()=>e.modelValue,set:F=>{if(F=parseInt(F,10),e.disable||isNaN(F))return;const V=Ft(F,o.value,i.value);e.modelValue!==V&&t("update:modelValue",V)}});ke(()=>`${o.value}|${i.value}`,()=>{v.value=e.modelValue});const m=C(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),p=C(()=>e.gutter in zl?`${zl[e.gutter]}px`:e.gutter||null),y=C(()=>p.value!==null?`--q-pagination-gutter-parent:-${p.value};--q-pagination-gutter-child:${p.value}`:null),x=C(()=>{const F=[e.iconFirst||r.iconSet.pagination.first,e.iconPrev||r.iconSet.pagination.prev,e.iconNext||r.iconSet.pagination.next,e.iconLast||r.iconSet.pagination.last];return r.lang.rtl===!0?F.reverse():F}),b=C(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),g=C(()=>mv(e,"flat")),w=C(()=>({[g.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),S=C(()=>{const F={[g.value]:!1};return e.activeDesign!==""&&(F[e.activeDesign]=!0),F}),E=C(()=>({...S.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),R=C(()=>{let F=Math.max(s.value,1+(f.value?2:0)+(c.value?2:0));const V={pgFrom:o.value,pgTo:i.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(i.value).length)}em`}};return s.value&&F<i.value-o.value+1&&(F=1+Math.floor(F/2)*2,V.pgFrom=Math.max(o.value,Math.min(i.value-F+1,e.modelValue-Math.floor(F/2))),V.pgTo=Math.min(i.value,V.pgFrom+F-1),c.value&&(V.boundaryStart=!0,V.pgFrom++),f.value&&V.pgFrom>o.value+(c.value?1:0)&&(V.ellipsesStart=!0,V.pgFrom++),c.value&&(V.boundaryEnd=!0,V.pgTo--),f.value&&V.pgTo<i.value-(c.value?1:0)&&(V.ellipsesEnd=!0,V.pgTo--)),V});function A(F){v.value=F}function k(F){v.value=v.value+F}function M(){v.value=h.value,h.value=null,r.platform.is.mobile===!0&&document.activeElement.blur()}function T(F){h.value=F}function D(F){Ar(F,13)===!0&&M()}function I(F,V,L){const q={"aria-label":V,"aria-current":"false",...w.value,...F};return L===!0&&Object.assign(q,{"aria-current":"true",...E.value}),V!==void 0&&(e.toFn!==void 0?q.to=e.toFn(V):q.onClick=()=>{A(V)}),_(Tt,q)}return Object.assign(n,{set:A,setByOffset:k}),()=>{const F=[],V=[];let L;if(l.value===!0&&(F.push(I({key:"bls",disable:e.disable||e.modelValue<=o.value,icon:x.value[0],"aria-label":r.lang.pagination.first},o.value)),V.unshift(I({key:"ble",disable:e.disable||e.modelValue>=i.value,icon:x.value[3],"aria-label":r.lang.pagination.last},i.value))),d.value===!0&&(F.push(I({key:"bdp",disable:e.disable||e.modelValue<=o.value,icon:x.value[1],"aria-label":r.lang.pagination.prev},e.modelValue-1)),V.unshift(I({key:"bdn",disable:e.disable||e.modelValue>=i.value,icon:x.value[2],"aria-label":r.lang.pagination.next},e.modelValue+1))),e.input!==!0){L=[];const{pgFrom:q,pgTo:K,marginalStyle:oe}=R.value;if(R.value.boundaryStart===!0){const W=o.value===e.modelValue;F.push(I({key:"bns",style:oe,disable:e.disable,label:o.value},o.value,W))}if(R.value.boundaryEnd===!0){const W=i.value===e.modelValue;V.unshift(I({key:"bne",style:oe,disable:e.disable,label:i.value},i.value,W))}R.value.ellipsesStart===!0&&F.push(I({key:"bes",style:oe,disable:e.disable,label:"",ripple:!1},q-1)),R.value.ellipsesEnd===!0&&V.unshift(I({key:"bee",style:oe,disable:e.disable,label:"",ripple:!1},K+1));for(let W=q;W<=K;W++)L.push(I({key:`bpg${W}`,style:oe,disable:e.disable,label:W},W,W===e.modelValue))}return _("div",{class:m.value,...b.value},[_("div",{class:"q-pagination__content row no-wrap items-center",style:y.value},[...F,e.input===!0?_(p1,{class:"inline",style:{width:`${u.value.length/1.5}em`},type:"number",dense:!0,value:h.value,disable:e.disable,dark:a.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:u.value,min:o.value,max:i.value,"onUpdate:modelValue":T,onKeyup:D,onBlur:M}):_("div",{class:"q-pagination__middle row justify-center"},L),...V])])}}});function Qd(e){let t=!1,n,r;function a(){r=arguments,t!==!0&&(t=!0,n=window.requestAnimationFrame(()=>{e.apply(this,r),r=void 0,t=!1}))}return a.cancel=()=>{window.cancelAnimationFrame(n),t=!1},a}var{passive:Zu}=Ot;Ce({name:"QParallax",props:{src:String,height:{type:Number,default:500},speed:{type:Number,default:1,validator:e=>e>=0&&e<=1},scrollTarget:ui,onScroll:Function},setup(e,{slots:t,emit:n}){const r=Z(0),a=Z(null),o=Z(null),i=Z(null);let s,u,l,c,d,f;ke(()=>e.height,()=>{s===!0&&v()}),ke(()=>e.scrollTarget,()=>{s===!0&&(x(),y())});let h=b=>{r.value=b,e.onScroll!==void 0&&n("scroll",b)};function v(){let b,g,w;f===window?(b=0,w=g=window.innerHeight):(b=Vl(f).top,g=as(f),w=b+g);const S=Vl(a.value).top,E=S+e.height;if(d!==void 0||E>b&&S<w){const R=(w-S)/(e.height+g);m((l-e.height)*R*e.speed),h(R)}}let m=b=>{u.style.transform=`translate3d(-50%,${Math.round(b)}px,0)`};function p(){l=u.naturalHeight||u.videoHeight||as(u),s===!0&&v()}function y(){s=!0,f=da(a.value,e.scrollTarget),f.addEventListener("scroll",v,Zu),window.addEventListener("resize",c,Zu),v()}function x(){s===!0&&(s=!1,f.removeEventListener("scroll",v,Zu),window.removeEventListener("resize",c,Zu),f=void 0,m.cancel(),h.cancel(),c.cancel())}return Nt(()=>{m=Qd(m),h=Qd(h),c=Qd(p),u=t.media!==void 0?o.value.children[0]:i.value,u.onload=u.onloadstart=u.loadedmetadata=p,p(),u.style.display="initial",window.IntersectionObserver!==void 0?(d=new IntersectionObserver(b=>{(b[0].isIntersecting===!0?y:x)()}),d.observe(a.value)):y()}),ft(()=>{x(),d?.disconnect(),u.onload=u.onloadstart=u.loadedmetadata=null}),()=>_("div",{ref:a,class:"q-parallax",style:{height:`${e.height}px`}},[_("div",{ref:o,class:"q-parallax__media absolute-full"},t.media!==void 0?t.media():[_("img",{ref:i,src:e.src})]),_("div",{class:"q-parallax__content absolute-full column flex-center"},t.content!==void 0?t.content({percentScrolled:r.value}):He(t.default))])}});function Xs(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const n=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const r=e.valueOf();if(Object(r)!==r){const a=new e.constructor(r);return t.set(e,a),a}}return t.set(e,n),e instanceof Set?e.forEach(r=>{n.add(Xs(r,t))}):e instanceof Map&&e.forEach((r,a)=>{n.set(a,Xs(r,t))}),Object.assign(n,...Object.keys(e).map(r=>({[r]:Xs(e[r],t)})))}Ce({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:n}){const{proxy:r}=Ie(),{$q:a}=r,o=Z(null),i=Z(""),s=Z("");let u=!1;const l=C(()=>mn({initialValue:i.value,validate:e.validate,set:c,cancel:d,updatePosition:f},"value",()=>s.value,g=>{s.value=g}));function c(){e.validate(s.value)!==!1&&(h()===!0&&(n("save",s.value,i.value),n("update:modelValue",s.value)),v())}function d(){h()===!0&&n("cancel",s.value,i.value),v()}function f(){mt(()=>{o.value.updatePosition()})}function h(){return Br(s.value,i.value)===!1}function v(){u=!0,o.value.hide()}function m(){u=!1,i.value=Xs(e.modelValue),s.value=Xs(e.modelValue),n("beforeShow")}function p(){n("show")}function y(){u===!1&&h()===!0&&(e.autoSave===!0&&e.validate(s.value)===!0?(n("save",s.value,i.value),n("update:modelValue",s.value)):n("cancel",s.value,i.value)),n("beforeHide")}function x(){n("hide")}function b(){const g=t.default!==void 0?[].concat(t.default(l.value)):[];return e.title&&g.unshift(_("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&g.push(_("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[_(Tt,{flat:!0,color:e.color,label:e.labelCancel||a.lang.label.cancel,onClick:d}),_(Tt,{flat:!0,color:e.color,label:e.labelSet||a.lang.label.set,onClick:c})])),g}return Object.assign(r,{set:c,cancel:d,show(g){o.value?.show(g)},hide(g){o.value?.hide(g)},updatePosition:f}),()=>{if(e.disable!==!0)return _($c,{ref:o,class:"q-popup-edit",cover:e.cover,onBeforeShow:m,onShow:p,onBeforeHide:y,onHide:x,onEscapeKey:d},b)}}});Ce({name:"QPopupProxy",props:{...lx,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:t,emit:n,attrs:r}){const{proxy:a}=Ie(),{$q:o}=a,i=Z(!1),s=Z(null),u=C(()=>parseInt(e.breakpoint,10)),{canShow:l}=yv({showing:i});function c(){return o.screen.width<u.value||o.screen.height<u.value?"dialog":"menu"}const d=Z(c()),f=C(()=>d.value==="menu"?{maxHeight:"99vh"}:{});ke(()=>c(),m=>{i.value!==!0&&(d.value=m)});function h(m){i.value=!0,n("show",m)}function v(m){i.value=!1,d.value=c(),n("hide",m)}return Object.assign(a,{show(m){l(m)===!0&&s.value.show(m)},hide(m){s.value.hide(m)},toggle(m){s.value.toggle(m)}}),mn(a,"currentComponent",()=>({type:d.value,ref:s.value})),()=>{const m={ref:s,...f.value,...r,onShow:h,onHide:v};let p;return d.value==="dialog"?p=Wc:(p=$c,Object.assign(m,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),_(p,m,t.default)}}});var NT={xs:2,sm:4,md:6,lg:10,xl:14};function Ag(e,t,n){return{transform:t===!0?`translateX(${n.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var OT=Ce({name:"QLinearProgress",props:{...wt,...qa,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:n}=Ie(),r=_t(e,n.$q),a=La(e,NT),o=C(()=>e.indeterminate===!0||e.query===!0),i=C(()=>e.reverse!==e.query),s=C(()=>({...a.value!==null?a.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),u=C(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),l=C(()=>Ag(e.buffer!==void 0?e.buffer:1,i.value,n.$q)),c=C(()=>`with${e.instantFeedback===!0?"out":""}-transition`),d=C(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${c.value} q-linear-progress__track--${r.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),f=C(()=>Ag(o.value===!0?1:e.value,i.value,n.$q)),h=C(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${c.value} q-linear-progress__model--${o.value===!0?"in":""}determinate`),v=C(()=>({width:`${e.value*100}%`})),m=C(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${c.value}`);return()=>{const p=[_("div",{class:d.value,style:l.value}),_("div",{class:h.value,style:f.value})];return e.stripe===!0&&o.value===!1&&p.push(_("div",{class:m.value,style:v.value})),_("div",{class:u.value,style:s.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Jt(t.default,p))}}}),_i=40,Yd=20;Ce({name:"QPullToRefresh",props:{color:String,bgColor:String,icon:String,noMouse:Boolean,disable:Boolean,scrollTarget:ui},emits:["refresh"],setup(e,{slots:t,emit:n}){const{proxy:r}=Ie(),{$q:a}=r,o=Z("pull"),i=Z(0),s=Z(!1),u=Z(-_i),l=Z(!1),c=Z({}),d=C(()=>({opacity:i.value,transform:`translateY(${u.value}px) rotate(${i.value*360}deg)`})),f=C(()=>"q-pull-to-refresh__puller row flex-center"+(l.value===!0?" q-pull-to-refresh__puller--animating":"")+(e.bgColor!==void 0?` bg-${e.bgColor}`:""));function h(w){if(w.isFinal===!0){s.value===!0&&(s.value=!1,o.value==="pulled"?(o.value="refreshing",b({pos:Yd}),p()):o.value==="pull"&&b({pos:-_i,ratio:0}));return}if(l.value===!0||o.value==="refreshing")return!1;if(w.isFirst===!0){if(co(y)!==0||w.direction!=="down")return s.value===!0&&(s.value=!1,o.value="pull",b({pos:-_i,ratio:0})),!1;s.value=!0;const{top:R,left:A}=r.$el.getBoundingClientRect();c.value={top:R+"px",left:A+"px",width:window.getComputedStyle(r.$el).getPropertyValue("width")}}gn(w.evt);const S=Math.min(140,Math.max(0,w.distance.y));u.value=S-_i,i.value=Ft(S/(Yd+_i),0,1);const E=u.value>Yd?"pulled":"pull";o.value!==E&&(o.value=E)}const v=C(()=>{const w={down:!0};return e.noMouse!==!0&&(w.mouse=!0),[[Tr,h,void 0,w]]}),m=C(()=>`q-pull-to-refresh__content${s.value===!0?" no-pointer-events":""}`);function p(){n("refresh",()=>{b({pos:-_i,ratio:0},()=>{o.value="pull"})})}let y,x=null;function b({pos:w,ratio:S},E){l.value=!0,u.value=w,S!==void 0&&(i.value=S),x!==null&&clearTimeout(x),x=setTimeout(()=>{x=null,l.value=!1,E?.()},300)}function g(){y=da(r.$el,e.scrollTarget)}return ke(()=>e.scrollTarget,g),Nt(g),ft(()=>{x!==null&&clearTimeout(x)}),Object.assign(r,{trigger:p,updateScrollTarget:g}),()=>{const w=[_("div",{class:m.value},He(t.default)),_("div",{class:"q-pull-to-refresh__puller-container fixed row flex-center no-pointer-events z-top",style:c.value},[_("div",{class:f.value,style:d.value},[o.value!=="refreshing"?_(Ct,{name:e.icon||a.iconSet.pullToRefresh.icon,color:e.color,size:"32px"}):_(Wr,{size:"24px",color:e.color})])])];return Ir("div",{class:"q-pull-to-refresh"},w,"main",e.disable===!1,()=>v.value)}}});var Xa={MIN:0,RANGE:1,MAX:2};Ce({name:"QRange",props:{...Dx,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:e=>"min"in e&&"max"in e},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:Px,setup(e,{emit:t}){const{proxy:{$q:n}}=Ie(),{state:r,methods:a}=Fx({updateValue:R,updatePosition:k,getDragging:A,formAttrs:C(()=>({type:"hidden",name:e.name,value:`${e.modelValue.min}|${e.modelValue.max}`}))}),o=Z(null),i=Z(0),s=Z(0),u=Z({min:0,max:0});function l(){u.value.min=e.modelValue.min===null?r.innerMin.value:Ft(e.modelValue.min,r.innerMin.value,r.innerMax.value),u.value.max=e.modelValue.max===null?r.innerMax.value:Ft(e.modelValue.max,r.innerMin.value,r.innerMax.value)}ke(()=>`${e.modelValue.min}|${e.modelValue.max}|${r.innerMin.value}|${r.innerMax.value}`,l),l();const c=C(()=>a.convertModelToRatio(u.value.min)),d=C(()=>a.convertModelToRatio(u.value.max)),f=C(()=>r.active.value===!0?i.value:c.value),h=C(()=>r.active.value===!0?s.value:d.value),v=C(()=>{const T={[r.positionProp.value]:`${100*f.value}%`,[r.sizeProp.value]:`${100*(h.value-f.value)}%`};return e.selectionImg!==void 0&&(T.backgroundImage=`url(${e.selectionImg}) !important`),T}),m=C(()=>{if(r.editable.value!==!0)return{};if(n.platform.is.mobile===!0)return{onClick:a.onMobileClick};const T={onMousedown:a.onActivate};return(e.dragRange===!0||e.dragOnlyRange===!0)&&Object.assign(T,{onFocus:()=>{r.focus.value="both"},onBlur:a.onBlur,onKeydown:M,onKeyup:a.onKeyup}),T});function p(T){return n.platform.is.mobile!==!0&&r.editable.value===!0&&e.dragOnlyRange!==!0?{onFocus:()=>{r.focus.value=T},onBlur:a.onBlur,onKeydown:M,onKeyup:a.onKeyup}:{}}const y=C(()=>e.dragOnlyRange!==!0?r.tabindex.value:null),x=C(()=>n.platform.is.mobile!==!0&&(e.dragRange||e.dragOnlyRange===!0)?r.tabindex.value:null),b=Z(null),g=C(()=>p("min")),w=a.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:b,key:"tmin",...g.value,tabindex:y.value}),ratio:f,label:C(()=>e.leftLabelValue!==void 0?e.leftLabelValue:u.value.min),thumbColor:C(()=>e.leftThumbColor||e.thumbColor||e.color),labelColor:C(()=>e.leftLabelColor||e.labelColor),labelTextColor:C(()=>e.leftLabelTextColor||e.labelTextColor)}),S=C(()=>p("max")),E=a.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...S.value,key:"tmax",tabindex:y.value}),ratio:h,label:C(()=>e.rightLabelValue!==void 0?e.rightLabelValue:u.value.max),thumbColor:C(()=>e.rightThumbColor||e.thumbColor||e.color),labelColor:C(()=>e.rightLabelColor||e.labelColor),labelTextColor:C(()=>e.rightLabelTextColor||e.labelTextColor)});function R(T){(u.value.min!==e.modelValue.min||u.value.max!==e.modelValue.max)&&t("update:modelValue",{...u.value}),T===!0&&t("change",{...u.value})}function A(T){const{left:D,top:I,width:F,height:V}=o.value.getBoundingClientRect(),L=e.dragOnlyRange===!0?0:e.vertical===!0?b.value.offsetHeight/(2*V):b.value.offsetWidth/(2*F),q={left:D,top:I,width:F,height:V,valueMin:u.value.min,valueMax:u.value.max,ratioMin:c.value,ratioMax:d.value},K=a.getDraggingRatio(T,q);return e.dragOnlyRange!==!0&&K<q.ratioMin+L?q.type=Xa.MIN:e.dragOnlyRange===!0||K<q.ratioMax-L?e.dragRange===!0||e.dragOnlyRange===!0?(q.type=Xa.RANGE,Object.assign(q,{offsetRatio:K,offsetModel:a.convertRatioToModel(K),rangeValue:q.valueMax-q.valueMin,rangeRatio:q.ratioMax-q.ratioMin})):q.type=q.ratioMax-K<K-q.ratioMin?Xa.MAX:Xa.MIN:q.type=Xa.MAX,q}function k(T,D=r.dragging.value){let I;const F=a.getDraggingRatio(T,D),V=a.convertRatioToModel(F);switch(D.type){case Xa.MIN:F<=D.ratioMax?(I={minR:F,maxR:D.ratioMax,min:V,max:D.valueMax},r.focus.value="min"):(I={minR:D.ratioMax,maxR:F,min:D.valueMax,max:V},r.focus.value="max");break;case Xa.MAX:F>=D.ratioMin?(I={minR:D.ratioMin,maxR:F,min:D.valueMin,max:V},r.focus.value="max"):(I={minR:F,maxR:D.ratioMin,min:V,max:D.valueMin},r.focus.value="min");break;case Xa.RANGE:const L=F-D.offsetRatio,q=Ft(D.ratioMin+L,r.innerMinRatio.value,r.innerMaxRatio.value-D.rangeRatio),K=V-D.offsetModel,oe=Ft(D.valueMin+K,r.innerMin.value,r.innerMax.value-D.rangeValue);I={minR:q,maxR:q+D.rangeRatio,min:r.roundValueFn.value(oe),max:r.roundValueFn.value(oe+D.rangeValue)},r.focus.value="both";break}u.value=u.value.min===null||u.value.max===null?{min:I.min||e.min,max:I.max||e.max}:{min:I.min,max:I.max},e.snap!==!0||e.step===0?(i.value=I.minR,s.value=I.maxR):(i.value=a.convertModelToRatio(u.value.min),s.value=a.convertModelToRatio(u.value.max))}function M(T){if(Dv.includes(T.keyCode)===!1)return;it(T);const D=([34,33].includes(T.keyCode)?10:1)*r.keyStep.value,I=([34,37,40].includes(T.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*D;if(r.focus.value==="both"){const F=u.value.max-u.value.min,V=Ft(r.roundValueFn.value(u.value.min+I),r.innerMin.value,r.innerMax.value-F);u.value={min:V,max:r.roundValueFn.value(V+F)}}else{if(r.focus.value===!1)return;{const F=r.focus.value;u.value={...u.value,[F]:Ft(r.roundValueFn.value(u.value[F]+I),F==="min"?r.innerMin.value:u.value.min,F==="max"?r.innerMax.value:u.value.max)}}}R()}return()=>{const T=a.getContent(v,x,m,D=>{D.push(w(),E())});return _("div",{ref:o,class:"q-range "+r.classes.value+(e.modelValue.min===null||e.modelValue.max===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":e.modelValue.min+"|"+e.modelValue.max},T)}}});Ce({name:"QRating",props:{...qa,...Mr,modelValue:{type:Number,required:!0},max:{type:[String,Number],default:5},icon:[String,Array],iconHalf:[String,Array],iconSelected:[String,Array],iconAriaLabel:[String,Array],color:[String,Array],colorHalf:[String,Array],colorSelected:[String,Array],noReset:Boolean,noDimming:Boolean,readonly:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=Ie(),a=La(e),o=ku(e),i=wo(o),s=Z(0);let u={};const l=C(()=>e.readonly!==!0&&e.disable!==!0),c=C(()=>`q-rating row inline items-center q-rating--${l.value===!0?"":"non-"}editable`+(e.noDimming===!0?" q-rating--no-dimming":"")+(e.disable===!0?" disabled":"")+(e.color!==void 0&&Array.isArray(e.color)===!1?` text-${e.color}`:"")),d=C(()=>{const b=Array.isArray(e.icon)===!0?e.icon.length:0,g=Array.isArray(e.iconSelected)===!0?e.iconSelected.length:0,w=Array.isArray(e.iconHalf)===!0?e.iconHalf.length:0,S=Array.isArray(e.color)===!0?e.color.length:0,E=Array.isArray(e.colorSelected)===!0?e.colorSelected.length:0,R=Array.isArray(e.colorHalf)===!0?e.colorHalf.length:0;return{iconLen:b,icon:b>0?e.icon[b-1]:e.icon,selIconLen:g,selIcon:g>0?e.iconSelected[g-1]:e.iconSelected,halfIconLen:w,halfIcon:w>0?e.iconHalf[g-1]:e.iconHalf,colorLen:S,color:S>0?e.color[S-1]:e.color,selColorLen:E,selColor:E>0?e.colorSelected[E-1]:e.colorSelected,halfColorLen:R,halfColor:R>0?e.colorHalf[R-1]:e.colorHalf}}),f=C(()=>{if(typeof e.iconAriaLabel=="string"){const b=e.iconAriaLabel.length!==0?`${e.iconAriaLabel} `:"";return g=>`${b}${g}`}if(Array.isArray(e.iconAriaLabel)===!0){const b=e.iconAriaLabel.length;if(b>0)return g=>e.iconAriaLabel[Math.min(g,b)-1]}return(b,g)=>`${g} ${b}`}),h=C(()=>{const b=[],g=d.value,w=Math.ceil(e.modelValue),S=l.value===!0?0:null,E=e.iconHalf===void 0||w===e.modelValue?-1:w;for(let R=1;R<=e.max;R++){const A=s.value===0&&e.modelValue>=R||s.value>0&&s.value>=R,k=E===R&&s.value<R,M=s.value>0&&(k===!0?w:e.modelValue)>=R&&s.value<R,T=k===!0?R<=g.halfColorLen?e.colorHalf[R-1]:g.halfColor:g.selColor!==void 0&&A===!0?R<=g.selColorLen?e.colorSelected[R-1]:g.selColor:R<=g.colorLen?e.color[R-1]:g.color,D=(k===!0?R<=g.halfIconLen?e.iconHalf[R-1]:g.halfIcon:g.selIcon!==void 0&&(A===!0||M===!0)?R<=g.selIconLen?e.iconSelected[R-1]:g.selIcon:R<=g.iconLen?e.icon[R-1]:g.icon)||r.iconSet.rating.icon;b.push({name:(k===!0?R<=g.halfIconLen?e.iconHalf[R-1]:g.halfIcon:g.selIcon!==void 0&&(A===!0||M===!0)?R<=g.selIconLen?e.iconSelected[R-1]:g.selIcon:R<=g.iconLen?e.icon[R-1]:g.icon)||r.iconSet.rating.icon,attrs:{tabindex:S,role:"radio","aria-checked":e.modelValue===R?"true":"false","aria-label":f.value(R,D)},iconClass:"q-rating__icon"+(A===!0||k===!0?" q-rating__icon--active":"")+(M===!0?" q-rating__icon--exselected":"")+(s.value===R?" q-rating__icon--hovered":"")+(T!==void 0?` text-${T}`:"")})}return b}),v=C(()=>{const b={role:"radiogroup"};return e.disable===!0&&(b["aria-disabled"]="true"),e.readonly===!0&&(b["aria-readonly"]="true"),b});function m(b){if(l.value===!0){const g=Ft(parseInt(b,10),1,parseInt(e.max,10)),w=e.noReset!==!0&&e.modelValue===g?0:g;w!==e.modelValue&&n("update:modelValue",w),s.value=0}}function p(b){l.value===!0&&(s.value=b)}function y(b,g){switch(b.keyCode){case 13:case 32:return m(g),it(b);case 37:case 40:return u[`rt${g-1}`]&&u[`rt${g-1}`].focus(),it(b);case 39:case 38:return u[`rt${g+1}`]&&u[`rt${g+1}`].focus(),it(b)}}function x(){s.value=0}return fs(()=>{u={}}),()=>{const b=[];return h.value.forEach(({iconClass:g,name:w,attrs:S},E)=>{const R=E+1;b.push(_("div",{key:R,ref:A=>{u[`rt${R}`]=A},class:"q-rating__icon-container flex flex-center",...S,onClick(){m(R)},onMouseover(){p(R)},onMouseout:x,onFocus(){p(R)},onBlur:x,onKeyup(A){y(A,R)}},Jt(t[`tip-${R}`],[_(Ct,{class:g,name:w})])))}),e.name!==void 0&&e.disable!==!0&&i(b,"push"),_("div",{class:c.value,style:a.value,...v.value},b)}}});Ce({name:"QResponsive",props:Ov,setup(e,{slots:t}){const n=Bv(e);return()=>_("div",{class:"q-responsive"},[_("div",{class:"q-responsive__filler overflow-hidden"},[_("div",{style:n.value})]),_("div",{class:"q-responsive__content absolute-full fit"},He(t.default))])}});var BT=Ce({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup(e){return()=>[_("div",{class:e.store.scroll.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:e.store.onVerticalMousedown}),_("div",{class:e.store.scroll.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:e.store.onHorizontalMousedown}),gr(_("div",{ref:e.store.scroll.vertical.ref,class:e.store.scroll.vertical.thumbClass.value,style:e.store.scroll.vertical.style.value,"aria-hidden":"true"}),e.store.thumbVertDir),gr(_("div",{ref:e.store.scroll.horizontal.ref,class:e.store.scroll.horizontal.thumbClass.value,style:e.store.scroll.horizontal.style.value,"aria-hidden":"true"}),e.store.thumbHorizDir)]}}),Ig=["vertical","horizontal"],Jd={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},Mg={prevent:!0,mouse:!0,mouseAllDir:!0},Dg=e=>e>=250?50:Math.ceil(e/5);Ce({name:"QScrollArea",props:{...wt,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:t,emit:n}){const r=Z(!1),a=Z(!1),o=Z(!1),i={vertical:Z(0),horizontal:Z(0)},s={vertical:{ref:Z(null),position:Z(0),size:Z(0)},horizontal:{ref:Z(null),position:Z(0),size:Z(0)}},{proxy:u}=Ie(),l=_t(e,u.$q);let c=null,d;const f=Z(null),h=C(()=>"q-scrollarea"+(l.value===!0?" q-scrollarea--dark":""));Object.assign(i,{verticalInner:C(()=>i.vertical.value-e.verticalOffset[0]-e.verticalOffset[1]),horizontalInner:C(()=>i.horizontal.value-e.horizontalOffset[0]-e.horizontalOffset[1])}),s.vertical.percentage=C(()=>{const I=s.vertical.size.value-i.vertical.value;if(I<=0)return 0;const F=Ft(s.vertical.position.value/I,0,1);return Math.round(F*1e4)/1e4}),s.vertical.thumbHidden=C(()=>(e.visible===null?o.value:e.visible)!==!0&&r.value===!1&&a.value===!1||s.vertical.size.value<=i.vertical.value+1),s.vertical.thumbStart=C(()=>e.verticalOffset[0]+s.vertical.percentage.value*(i.verticalInner.value-s.vertical.thumbSize.value)),s.vertical.thumbSize=C(()=>Math.round(Ft(i.verticalInner.value*i.verticalInner.value/s.vertical.size.value,Dg(i.verticalInner.value),i.verticalInner.value))),s.vertical.style=C(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${s.vertical.thumbStart.value}px`,height:`${s.vertical.thumbSize.value}px`,right:`${e.horizontalOffset[1]}px`})),s.vertical.thumbClass=C(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(s.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),s.vertical.barClass=C(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(s.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),s.horizontal.percentage=C(()=>{const I=s.horizontal.size.value-i.horizontal.value;if(I<=0)return 0;const F=Ft(Math.abs(s.horizontal.position.value)/I,0,1);return Math.round(F*1e4)/1e4}),s.horizontal.thumbHidden=C(()=>(e.visible===null?o.value:e.visible)!==!0&&r.value===!1&&a.value===!1||s.horizontal.size.value<=i.horizontal.value+1),s.horizontal.thumbStart=C(()=>e.horizontalOffset[0]+s.horizontal.percentage.value*(i.horizontalInner.value-s.horizontal.thumbSize.value)),s.horizontal.thumbSize=C(()=>Math.round(Ft(i.horizontalInner.value*i.horizontalInner.value/s.horizontal.size.value,Dg(i.horizontalInner.value),i.horizontalInner.value))),s.horizontal.style=C(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[u.$q.lang.rtl===!0?"right":"left"]:`${s.horizontal.thumbStart.value}px`,width:`${s.horizontal.thumbSize.value}px`,bottom:`${e.verticalOffset[1]}px`})),s.horizontal.thumbClass=C(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(s.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),s.horizontal.barClass=C(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(s.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const v=C(()=>s.vertical.thumbHidden.value===!0&&s.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle);function m(){const I={};return Ig.forEach(F=>{const V=s[F];Object.assign(I,{[F+"Position"]:V.position.value,[F+"Percentage"]:V.percentage.value,[F+"Size"]:V.size.value,[F+"ContainerSize"]:i[F].value,[F+"ContainerInnerSize"]:i[F+"Inner"].value})}),I}const p=hs(()=>{const I=m();I.ref=u,n("scroll",I)},0);function y(I,F,V){if(Ig.includes(I)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(I==="vertical"?ji:Pd)(f.value,F,V)}function x({height:I,width:F}){let V=!1;i.vertical.value!==I&&(i.vertical.value=I,V=!0),i.horizontal.value!==F&&(i.horizontal.value=F,V=!0),V===!0&&E()}function b({position:I}){let F=!1;s.vertical.position.value!==I.top&&(s.vertical.position.value=I.top,F=!0),s.horizontal.position.value!==I.left&&(s.horizontal.position.value=I.left,F=!0),F===!0&&E()}function g({height:I,width:F}){s.horizontal.size.value!==F&&(s.horizontal.size.value=F,E()),s.vertical.size.value!==I&&(s.vertical.size.value=I,E())}function w(I,F){const V=s[F];if(I.isFirst===!0){if(V.thumbHidden.value===!0)return;d=V.position.value,a.value=!0}else if(a.value!==!0)return;I.isFinal===!0&&(a.value=!1);const L=Jd[F],q=(V.size.value-i[F].value)/(i[F+"Inner"].value-V.thumbSize.value),K=I.distance[L.dist],oe=d+(I.direction===L.dir?1:-1)*K*q;R(oe,F)}function S(I,F){const V=s[F];if(V.thumbHidden.value!==!0){const L=F==="vertical"?e.verticalOffset[0]:e.horizontalOffset[0],q=I[Jd[F].offset]-L,K=V.thumbStart.value-L;if(q<K||q>K+V.thumbSize.value){const oe=q-V.thumbSize.value/2,W=Ft(oe/(i[F+"Inner"].value-V.thumbSize.value),0,1);R(W*Math.max(0,V.size.value-i[F].value),F)}V.ref.value!==null&&V.ref.value.dispatchEvent(new MouseEvent(I.type,I))}}function E(){r.value=!0,c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,r.value=!1},e.delay),e.onScroll!==void 0&&p()}function R(I,F){f.value[Jd[F].scroll]=I}let A=null;function k(){A!==null&&clearTimeout(A),A=setTimeout(()=>{A=null,o.value=!0},u.$q.platform.is.ios?50:0)}function M(){A!==null&&(clearTimeout(A),A=null),o.value=!1}let T=null;ke(()=>u.$q.lang.rtl,I=>{f.value!==null&&Pd(f.value,Math.abs(s.horizontal.position.value)*(I===!0?-1:1))}),ca(()=>{T={top:s.vertical.position.value,left:s.horizontal.position.value}}),bo(()=>{if(T===null)return;const I=f.value;I!==null&&(Pd(I,T.left),ji(I,T.top))}),ft(p.cancel),Object.assign(u,{getScrollTarget:()=>f.value,getScroll:m,getScrollPosition:()=>({top:s.vertical.position.value,left:s.horizontal.position.value}),getScrollPercentage:()=>({top:s.vertical.percentage.value,left:s.horizontal.percentage.value}),setScrollPosition:y,setScrollPercentage(I,F,V){y(I,F*(s[I].size.value-i[I].value)*(I==="horizontal"&&u.$q.lang.rtl===!0?-1:1),V)}});const D={scroll:s,thumbVertDir:[[Tr,I=>{w(I,"vertical")},void 0,{vertical:!0,...Mg}]],thumbHorizDir:[[Tr,I=>{w(I,"horizontal")},void 0,{horizontal:!0,...Mg}]],onVerticalMousedown(I){S(I,"vertical")},onHorizontalMousedown(I){S(I,"horizontal")}};return()=>_("div",{class:h.value,onMouseenter:k,onMouseleave:M},[_("div",{ref:f,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[_("div",{class:"q-scrollarea__content absolute",style:v.value},Jt(t.default,[_(ei,{debounce:0,onResize:g})])),_(g1,{axis:"both",onScroll:b})]),_(ei,{debounce:0,onResize:x}),_(BT,{store:D,barStyle:e.barStyle,verticalBarStyle:e.verticalBarStyle,horizontalBarStyle:e.horizontalBarStyle})])}});var Fr=1e3,qT=["start","center","end","start-force","center-force","end-force"],x1=Array.prototype.filter,LT=__QUASAR_SSR__||window.getComputedStyle(document.body).overflowAnchor===void 0?Kt:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];x1.call(n,a=>a.dataset&&a.dataset.qVsAnchor!==void 0).forEach(a=>{delete a.dataset.qVsAnchor});const r=n[t];r?.dataset&&(r.dataset.qVsAnchor="")}))};function Gi(e,t){return e+t}function Zd(e,t,n,r,a,o,i,s){const u=e===window?document.scrollingElement||document.documentElement:e,l=a===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-i-s,scrollMaxSize:0,offsetStart:-i,offsetEnd:-s};if(a===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=u.scrollLeft,c.scrollViewSize+=u.clientWidth),c.scrollMaxSize=u.scrollWidth,o===!0&&(c.scrollStart=(du===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=u.scrollTop,c.scrollViewSize+=u.clientHeight),c.scrollMaxSize=u.scrollHeight),n!==null)for(let d=n.previousElementSibling;d!==null;d=d.previousElementSibling)d.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=d[l]);if(r!==null)for(let d=r.nextElementSibling;d!==null;d=d.nextElementSibling)d.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=d[l]);if(t!==e){const d=u.getBoundingClientRect(),f=t.getBoundingClientRect();a===!0?(c.offsetStart+=f.left-d.left,c.offsetEnd-=f.width):(c.offsetStart+=f.top-d.top,c.offsetEnd-=f.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function Pg(e,t,n,r){t==="end"&&(t=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(r===!0&&(t=(du===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):n===!0?(r===!0&&(t=(du===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function Es(e,t,n,r){if(n>=r)return 0;const a=t.length,o=Math.floor(n/Fr),i=Math.floor((r-1)/Fr)+1;let s=e.slice(o,i).reduce(Gi,0);return n%Fr!==0&&(s-=t.slice(o*Fr,n).reduce(Gi,0)),r%Fr!==0&&r!==a&&(s-=t.slice(r,i*Fr).reduce(Gi,0)),s}var w1={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},_1=Object.keys(w1),fh={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...w1};function C1({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:n,virtualScrollItemSizeComputed:r}){const a=Ie(),{props:o,emit:i,proxy:s}=a,{$q:u}=s;let l,c,d,f=[],h;const v=Z(0),m=Z(0),p=Z({}),y=Z(null),x=Z(null),b=Z(null),g=Z({from:0,to:0}),w=C(()=>o.tableColspan!==void 0?o.tableColspan:100);r===void 0&&(r=C(()=>o.virtualScrollItemSize));const S=C(()=>r.value+";"+o.virtualScrollHorizontal),E=C(()=>S.value+";"+o.virtualScrollSliceRatioBefore+";"+o.virtualScrollSliceRatioAfter);ke(E,()=>{V()}),ke(S,R);function R(){F(c,!0)}function A(W){F(W===void 0?c:W)}function k(W,N){const Q=t();if(Q==null||Q.nodeType===8)return;const Y=Zd(Q,n(),y.value,x.value,o.virtualScrollHorizontal,u.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd);d!==Y.scrollViewSize&&V(Y.scrollViewSize),T(Q,Y,Math.min(e.value-1,Math.max(0,parseInt(W,10)||0)),0,qT.indexOf(N)!==-1?N:c!==-1&&W>c?"end":"start")}function M(){const W=t();if(W==null||W.nodeType===8)return;const N=Zd(W,n(),y.value,x.value,o.virtualScrollHorizontal,u.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd),Q=e.value-1,Y=N.scrollMaxSize-N.offsetStart-N.offsetEnd-m.value;if(l===N.scrollStart)return;if(N.scrollMaxSize<=0){T(W,N,0,0);return}d!==N.scrollViewSize&&V(N.scrollViewSize),D(g.value.from);const fe=Math.floor(N.scrollMaxSize-Math.max(N.scrollViewSize,N.offsetEnd)-Math.min(h[Q],N.scrollViewSize/2));if(fe>0&&Math.ceil(N.scrollStart)>=fe){T(W,N,Q,N.scrollMaxSize-N.offsetEnd-f.reduce(Gi,0));return}let $=0,O=N.scrollStart-N.offsetStart,ee=O;if(O<=Y&&O+N.scrollViewSize>=v.value)O-=v.value,$=g.value.from,ee=O;else for(let H=0;O>=f[H]&&$<Q;H++)O-=f[H],$+=Fr;for(;O>0&&$<Q;)O-=h[$],O>-N.scrollViewSize?($++,ee=O):ee=h[$]+O;T(W,N,$,ee)}function T(W,N,Q,Y,fe){const $=typeof fe=="string"&&fe.indexOf("-force")!==-1,O=$===!0?fe.replace("-force",""):fe,ee=O!==void 0?O:"start";let H=Math.max(0,Q-p.value[ee]),ue=H+p.value.total;ue>e.value&&(ue=e.value,H=Math.max(0,ue-p.value.total)),l=N.scrollStart;const ye=H!==g.value.from||ue!==g.value.to;if(ye===!1&&O===void 0){q(Q);return}const{activeElement:P}=document,B=b.value;ye===!0&&B!==null&&B!==P&&B.contains(P)===!0&&(B.addEventListener("focusout",I),setTimeout(()=>{B?.removeEventListener("focusout",I)})),LT(B,Q-H);const j=O!==void 0?h.slice(H,Q).reduce(Gi,0):0;if(ye===!0){const ne=ue>=g.value.from&&H<=g.value.to?g.value.to:ue;g.value={from:H,to:ne},v.value=Es(f,h,0,H),m.value=Es(f,h,ue,e.value),requestAnimationFrame(()=>{g.value.to!==ue&&l===N.scrollStart&&(g.value={from:g.value.from,to:ue},m.value=Es(f,h,ue,e.value))})}requestAnimationFrame(()=>{if(l!==N.scrollStart)return;ye===!0&&D(H);const ne=h.slice(H,Q).reduce(Gi,0),se=ne+N.offsetStart+v.value,J=se+h[Q];let me=se+Y;if(O!==void 0){const ge=ne-j,xe=N.scrollStart+ge;me=$!==!0&&xe<se&&J<xe+N.scrollViewSize?xe:O==="end"?J-N.scrollViewSize:se-(O==="start"?0:Math.round((N.scrollViewSize-h[Q])/2))}l=me,Pg(W,me,o.virtualScrollHorizontal,u.lang.rtl),q(Q)})}function D(W){const N=b.value;if(N){const Q=x1.call(N.children,H=>H.classList&&H.classList.contains("q-virtual-scroll--skip")===!1),Y=Q.length,fe=o.virtualScrollHorizontal===!0?H=>H.getBoundingClientRect().width:H=>H.offsetHeight;let $=W,O,ee;for(let H=0;H<Y;){for(O=fe(Q[H]),H++;H<Y&&Q[H].classList.contains("q-virtual-scroll--with-prev")===!0;)O+=fe(Q[H]),H++;ee=O-h[$],ee!==0&&(h[$]+=ee,f[Math.floor($/Fr)]+=ee),$++}}}function I(){b.value?.focus()}function F(W,N){const Q=1*r.value;(N===!0||Array.isArray(h)===!1)&&(h=[]);const Y=h.length;h.length=e.value;for(let $=e.value-1;$>=Y;$--)h[$]=Q;const fe=Math.floor((e.value-1)/Fr);f=[];for(let $=0;$<=fe;$++){let O=0;const ee=Math.min(($+1)*Fr,e.value);for(let H=$*Fr;H<ee;H++)O+=h[H];f.push(O)}c=-1,l=void 0,v.value=Es(f,h,0,g.value.from),m.value=Es(f,h,g.value.to,e.value),W>=0?(D(g.value.from),mt(()=>{k(W)})):K()}function V(W){if(W===void 0&&typeof window<"u"){const O=t();O!=null&&O.nodeType!==8&&(W=Zd(O,n(),y.value,x.value,o.virtualScrollHorizontal,u.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd).scrollViewSize)}d=W;const N=parseFloat(o.virtualScrollSliceRatioBefore)||0,Q=parseFloat(o.virtualScrollSliceRatioAfter)||0,Y=1+N+Q,fe=W===void 0||W<=0?1:Math.ceil(W/r.value),$=Math.max(1,fe,Math.ceil((o.virtualScrollSliceSize>0?o.virtualScrollSliceSize:10)/Y));p.value={total:Math.ceil($*Y),start:Math.ceil($*N),center:Math.ceil($*(.5+N)),end:Math.ceil($*(1+N)),view:fe}}function L(W,N){const Q=o.virtualScrollHorizontal===!0?"width":"height",Y={["--q-virtual-scroll-item-"+Q]:r.value+"px"};return[W==="tbody"?_(W,{class:"q-virtual-scroll__padding",key:"before",ref:y},[_("tr",[_("td",{style:{[Q]:`${v.value}px`,...Y},colspan:w.value})])]):_(W,{class:"q-virtual-scroll__padding",key:"before",ref:y,style:{[Q]:`${v.value}px`,...Y}}),_(W,{class:"q-virtual-scroll__content",key:"content",ref:b,tabindex:-1},N.flat()),W==="tbody"?_(W,{class:"q-virtual-scroll__padding",key:"after",ref:x},[_("tr",[_("td",{style:{[Q]:`${m.value}px`,...Y},colspan:w.value})])]):_(W,{class:"q-virtual-scroll__padding",key:"after",ref:x,style:{[Q]:`${m.value}px`,...Y}})]}function q(W){c!==W&&(o.onVirtualScroll!==void 0&&i("virtualScroll",{index:W,from:g.value.from,to:g.value.to-1,direction:W<c?"decrease":"increase",ref:s}),c=W)}V();const K=hs(M,u.platform.is.ios===!0?120:35);Mc(()=>{V()});let oe=!1;return ca(()=>{oe=!0}),bo(()=>{if(oe!==!0)return;const W=t();l!==void 0&&W!==void 0&&W!==null&&W.nodeType!==8?Pg(W,l,o.virtualScrollHorizontal,u.lang.rtl):k(c)}),__QUASAR_SSR__||ft(()=>{K.cancel()}),Object.assign(s,{scrollTo:k,reset:R,refresh:A}),{virtualScrollSliceRange:g,virtualScrollSliceSizeComputed:p,setVirtualScrollSize:V,onVirtualScrollEvt:K,localResetVirtualScroll:F,padVirtualScroll:L,scrollTo:k,reset:R,refresh:A}}var Fg=e=>["add","add-unique","toggle"].includes(e),VT=".*+?^${}()|[]\\",zT=Object.keys(jc);function ef(e,t){if(typeof e=="function")return e;const n=e!==void 0?e:t;return r=>r!==null&&typeof r=="object"&&n in r?r[n]:r}var $T=Ce({name:"QSelect",inheritAttrs:!1,props:{...fh,...Mr,...jc,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Fg},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:fh.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Gc,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:t,emit:n}){const{proxy:r}=Ie(),{$q:a}=r,o=Z(!1),i=Z(!1),s=Z(-1),u=Z(""),l=Z(!1),c=Z(!1);let d=null,f=null,h,v,m,p=null,y,x,b,g;const w=Z(null),S=Z(null),E=Z(null),R=Z(null),A=Z(null),k=_v(e),M=v1(we),T=C(()=>Array.isArray(e.options)?e.options.length:0),D=C(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:I,virtualScrollSliceSizeComputed:F,localResetVirtualScroll:V,padVirtualScroll:L,onVirtualScrollEvt:q,scrollTo:K,setVirtualScrollSize:oe}=C1({virtualScrollLength:T,getVirtualScrollTarget:Nn,getVirtualScrollEl:Xt,virtualScrollItemSizeComputed:D}),W=Kc(),N=C(()=>{const ae=e.mapOptions===!0&&e.multiple!==!0,ze=e.modelValue!==void 0&&(e.modelValue!==null||ae===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const $e=e.mapOptions===!0&&h!==void 0?h:[],yt=ze.map(Vt=>ce(Vt,$e));return e.modelValue===null&&ae===!0?yt.filter(Vt=>Vt!==null):yt}return ze}),Q=C(()=>{const ae={};return zT.forEach(ze=>{const $e=e[ze];$e!==void 0&&(ae[ze]=$e)}),ae}),Y=C(()=>e.optionsDark===null?W.isDark.value:e.optionsDark),fe=C(()=>ni(N.value)),$=C(()=>{let ae="q-field__input q-placeholder col";return e.hideSelected===!0||N.value.length===0?[ae,e.inputClass]:(ae+=" q-field__input--padding",e.inputClass===void 0?ae:[ae,e.inputClass])}),O=C(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),ee=C(()=>T.value===0),H=C(()=>N.value.map(ae=>le.value(ae)).join(", ")),ue=C(()=>e.displayValue!==void 0?e.displayValue:H.value),ye=C(()=>e.optionsHtml===!0?()=>!0:ae=>ae?.html===!0),P=C(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||N.value.some(ye.value))),B=C(()=>W.focused.value===!0?e.tabindex:-1),j=C(()=>{const ae={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":o.value===!0?"true":"false","aria-controls":`${W.targetUid.value}_lb`};return s.value>=0&&(ae["aria-activedescendant"]=`${W.targetUid.value}_${s.value}`),ae}),ne=C(()=>({id:`${W.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),se=C(()=>N.value.map((ae,ze)=>({index:ze,opt:ae,html:ye.value(ae),selected:!0,removeAtIndex:De,toggleOption:tt,tabindex:B.value}))),J=C(()=>{if(T.value===0)return[];const{from:ae,to:ze}=I.value;return e.options.slice(ae,ze).map(($e,yt)=>{const Vt=X.value($e)===!0,Bt=Te($e)===!0,An=ae+yt,un={clickable:!0,active:Bt,activeClass:xe.value,manualFocus:!0,focused:!1,disable:Vt,tabindex:-1,dense:e.optionsDense,dark:Y.value,role:"option","aria-selected":Bt===!0?"true":"false",id:`${W.targetUid.value}_${An}`,onClick:()=>{tt($e)}};return Vt!==!0&&(s.value===An&&(un.focused=!0),a.platform.is.desktop===!0&&(un.onMousemove=()=>{o.value===!0&&he(An)})),{index:An,opt:$e,html:ye.value($e),label:le.value($e),selected:un.active,focused:un.focused,toggleOption:tt,setOptionIndex:he,itemProps:un}})}),me=C(()=>e.dropdownIcon!==void 0?e.dropdownIcon:a.iconSet.arrow.dropdown),ge=C(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),xe=C(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),pe=C(()=>ef(e.optionValue,"value")),le=C(()=>ef(e.optionLabel,"label")),X=C(()=>ef(e.optionDisable,"disable")),de=C(()=>N.value.map(pe.value)),Re=C(()=>{const ae={onInput:we,onChange:M,onKeydown:It,onKeyup:Ve,onKeypress:ut,onFocus:Pe,onClick(ze){v===!0&&Gt(ze)}};return ae.onCompositionstart=ae.onCompositionupdate=ae.onCompositionend=M,ae});ke(N,ae=>{h=ae,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&W.innerLoading.value!==!0&&(i.value!==!0&&o.value!==!0||fe.value!==!0)&&(m!==!0&&yr(),(i.value===!0||o.value===!0)&&Ge(""))},{immediate:!0}),ke(()=>e.fillInput,yr),ke(o,hd),ke(T,TC);function Fe(ae){return e.emitValue===!0?pe.value(ae):ae}function Me(ae){if(ae!==-1&&ae<N.value.length)if(e.multiple===!0){const ze=e.modelValue.slice();n("remove",{index:ae,value:ze.splice(ae,1)[0]}),n("update:modelValue",ze)}else n("update:modelValue",null)}function De(ae){Me(ae),W.focus()}function et(ae,ze){const $e=Fe(ae);if(e.multiple!==!0){e.fillInput===!0&&Xe(le.value(ae),!0,!0),n("update:modelValue",$e);return}if(N.value.length===0){n("add",{index:0,value:$e}),n("update:modelValue",e.multiple===!0?[$e]:$e);return}if(ze===!0&&Te(ae)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const yt=e.modelValue.slice();n("add",{index:yt.length,value:$e}),yt.push($e),n("update:modelValue",yt)}function tt(ae,ze){if(W.editable.value!==!0||ae===void 0||X.value(ae)===!0)return;const $e=pe.value(ae);if(e.multiple!==!0){ze!==!0&&(Xe(e.fillInput===!0?le.value(ae):"",!0,!0),kt()),S.value?.focus(),(N.value.length===0||Br(pe.value(N.value[0]),$e)!==!0)&&n("update:modelValue",e.emitValue===!0?$e:ae);return}if((v!==!0||l.value===!0)&&W.focus(),Pe(),N.value.length===0){const Bt=e.emitValue===!0?$e:ae;n("add",{index:0,value:Bt}),n("update:modelValue",e.multiple===!0?[Bt]:Bt);return}const yt=e.modelValue.slice(),Vt=de.value.findIndex(Bt=>Br(Bt,$e));if(Vt!==-1)n("remove",{index:Vt,value:yt.splice(Vt,1)[0]});else{if(e.maxValues!==void 0&&yt.length>=e.maxValues)return;const Bt=e.emitValue===!0?$e:ae;n("add",{index:yt.length,value:Bt}),yt.push(Bt)}n("update:modelValue",yt)}function he(ae){if(a.platform.is.desktop!==!0)return;const ze=ae!==-1&&ae<T.value?ae:-1;s.value!==ze&&(s.value=ze)}function Ee(ae=1,ze){if(o.value===!0){let $e=s.value;do $e=ql($e+ae,-1,T.value-1);while($e!==-1&&$e!==s.value&&X.value(e.options[$e])===!0);s.value!==$e&&(he($e),K($e),ze!==!0&&e.useInput===!0&&e.fillInput===!0&&Ne($e>=0?le.value(e.options[$e]):y,!0))}}function ce(ae,ze){const $e=yt=>Br(pe.value(yt),ae);return e.options.find($e)||ze.find($e)||ae}function Te(ae){const ze=pe.value(ae);return de.value.find($e=>Br($e,ze))!==void 0}function Pe(ae){e.useInput===!0&&S.value!==null&&(ae===void 0||S.value===ae.target&&ae.target.value===H.value)&&S.value.select()}function Ze(ae){Ar(ae,27)===!0&&o.value===!0&&(Gt(ae),kt(),yr()),n("keyup",ae)}function Ve(ae){const{value:ze}=ae.target;if(ae.keyCode!==void 0){Ze(ae);return}if(ae.target.value="",d!==null&&(clearTimeout(d),d=null),f!==null&&(clearTimeout(f),f=null),yr(),typeof ze=="string"&&ze.length!==0){const $e=ze.toLocaleLowerCase(),yt=Bt=>{const An=e.options.find(un=>String(Bt.value(un)).toLocaleLowerCase()===$e);return An===void 0?!1:(N.value.indexOf(An)===-1?tt(An):kt(),!0)},Vt=Bt=>{yt(pe)!==!0&&Bt!==!0&&yt(le)!==!0&&Ge(ze,!0,()=>Vt(!0))};Vt()}else W.clearValue(ae)}function ut(ae){n("keypress",ae)}function It(ae){if(n("keydown",ae),ii(ae)===!0)return;const ze=u.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),$e=ae.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(s.value!==-1||ze===!0);if(ae.keyCode===27){gn(ae);return}if(ae.keyCode===9&&$e===!1){We();return}if(ae.target===void 0||ae.target.id!==W.targetUid.value||W.editable.value!==!0)return;if(ae.keyCode===40&&W.innerLoading.value!==!0&&o.value===!1){it(ae),at();return}if(ae.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&u.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Me(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(ae.keyCode===35||ae.keyCode===36)&&(typeof u.value!="string"||u.value.length===0)&&(it(ae),s.value=-1,Ee(ae.keyCode===36?1:-1,e.multiple)),(ae.keyCode===33||ae.keyCode===34)&&F.value!==void 0&&(it(ae),s.value=Math.max(-1,Math.min(T.value,s.value+(ae.keyCode===33?-1:1)*F.value.view)),Ee(ae.keyCode===33?1:-1,e.multiple)),(ae.keyCode===38||ae.keyCode===40)&&(it(ae),Ee(ae.keyCode===38?-1:1,e.multiple));const yt=T.value;if((b===void 0||g<Date.now())&&(b=""),yt>0&&e.useInput!==!0&&ae.key!==void 0&&ae.key.length===1&&ae.altKey===!1&&ae.ctrlKey===!1&&ae.metaKey===!1&&(ae.keyCode!==32||b.length!==0)){o.value!==!0&&at(ae);const Vt=ae.key.toLocaleLowerCase(),Bt=b.length===1&&b[0]===Vt;g=Date.now()+1500,Bt===!1&&(it(ae),b+=Vt);const An=new RegExp("^"+b.split("").map(vd=>VT.indexOf(vd)!==-1?"\\"+vd:vd).join(".*"),"i");let un=s.value;if(Bt===!0||un<0||An.test(le.value(e.options[un]))!==!0)do un=ql(un+1,-1,yt-1);while(un!==s.value&&(X.value(e.options[un])===!0||An.test(le.value(e.options[un]))!==!0));s.value!==un&&mt(()=>{he(un),K(un),un>=0&&e.useInput===!0&&e.fillInput===!0&&Ne(le.value(e.options[un]),!0)});return}if(!(ae.keyCode!==13&&(ae.keyCode!==32||e.useInput===!0||b!=="")&&(ae.keyCode!==9||$e===!1))){if(ae.keyCode!==9&&it(ae),s.value!==-1&&s.value<yt){tt(e.options[s.value]);return}if(ze===!0){const Vt=(Bt,An)=>{if(An){if(Fg(An)!==!0)return}else An=e.newValueMode;if(Xe("",e.multiple!==!0,!0),Bt==null)return;(An==="toggle"?tt:et)(Bt,An==="add-unique"),e.multiple!==!0&&(S.value?.focus(),kt())};if(e.onNewValue!==void 0?n("newValue",u.value,Vt):Vt(u.value),e.multiple!==!0)return}o.value===!0?We():W.innerLoading.value!==!0&&at()}}function Xt(){return v===!0?A.value:E.value!==null&&E.value.contentEl!==null?E.value.contentEl:void 0}function Nn(){return Xt()}function ja(){return e.hideSelected===!0?[]:t["selected-item"]!==void 0?se.value.map(ae=>t["selected-item"](ae)).slice():t.selected!==void 0?[].concat(t.selected()):e.useChips===!0?se.value.map((ae,ze)=>_(Rx,{key:"option-"+ze,removable:W.editable.value===!0&&X.value(ae.opt)!==!0,dense:!0,textColor:e.color,tabindex:B.value,onRemove(){ae.removeAtIndex(ze)}},()=>_("span",{class:"ellipsis",[ae.html===!0?"innerHTML":"textContent"]:le.value(ae.opt)}))):[_("span",{class:"ellipsis",[P.value===!0?"innerHTML":"textContent"]:ue.value})]}function sr(){if(ee.value===!0)return t["no-option"]!==void 0?t["no-option"]({inputValue:u.value}):void 0;const ae=t.option!==void 0?t.option:$e=>_(Uc,{key:$e.index,...$e.itemProps},()=>_(fo,()=>_(lh,()=>_("span",{[$e.html===!0?"innerHTML":"textContent"]:$e.label}))));let ze=L("div",J.value.map(ae));return t["before-options"]!==void 0&&(ze=t["before-options"]().concat(ze)),Jt(t["after-options"],ze)}function ma(ae,ze){const $e=ze===!0?{...j.value,...W.splitAttrs.attributes.value}:void 0,yt={ref:ze===!0?S:void 0,key:"i_t",class:$.value,style:e.inputStyle,value:u.value!==void 0?u.value:"",type:"search",...$e,id:ze===!0?W.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":ae===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Re.value};return ae!==!0&&v===!0&&(Array.isArray(yt.class)===!0?yt.class=[...yt.class,"no-pointer-events"]:yt.class+=" no-pointer-events"),_("input",yt)}function we(ae){d!==null&&(clearTimeout(d),d=null),f!==null&&(clearTimeout(f),f=null),!(ae&&ae.target&&ae.target.qComposing===!0)&&(Ne(ae.target.value||""),m=!0,y=u.value,W.focused.value!==!0&&(v!==!0||l.value===!0)&&W.focus(),e.onFilter!==void 0&&(d=setTimeout(()=>{d=null,Ge(u.value)},e.inputDebounce)))}function Ne(ae,ze){u.value!==ae&&(u.value=ae,ze===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",ae):f=setTimeout(()=>{f=null,n("inputValue",ae)},e.inputDebounce))}function Xe(ae,ze,$e){m=$e!==!0,e.useInput===!0&&(Ne(ae,!0),(ze===!0||$e!==!0)&&(y=ae),ze!==!0&&Ge(ae))}function Ge(ae,ze,$e){if(e.onFilter===void 0||ze!==!0&&W.focused.value!==!0)return;W.innerLoading.value===!0?n("filterAbort"):(W.innerLoading.value=!0,c.value=!0),ae!==""&&e.multiple!==!0&&N.value.length!==0&&m!==!0&&ae===le.value(N.value[0])&&(ae="");const yt=setTimeout(()=>{o.value===!0&&(o.value=!1)},10);p!==null&&clearTimeout(p),p=yt,n("filter",ae,(Vt,Bt)=>{(ze===!0||W.focused.value===!0)&&p===yt&&(clearTimeout(p),typeof Vt=="function"&&Vt(),c.value=!1,mt(()=>{W.innerLoading.value=!1,W.editable.value===!0&&(ze===!0?o.value===!0&&kt():o.value===!0?hd(!0):o.value=!0),typeof Bt=="function"&&mt(()=>{Bt(r)}),typeof $e=="function"&&mt(()=>{$e(r)})}))},()=>{W.focused.value===!0&&p===yt&&(clearTimeout(p),W.innerLoading.value=!1,c.value=!1),o.value===!0&&(o.value=!1)})}function lt(){return _($c,{ref:E,class:O.value,style:e.popupContentStyle,modelValue:o.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&ee.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:Y.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:ge.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ne.value,onScrollPassive:q,onBeforeShow:Wp,onBeforeHide:Wt,onShow:Lt},sr)}function Wt(ae){Up(ae),We()}function Lt(){oe()}function G(ae){Gt(ae),S.value?.focus(),l.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function re(ae){Gt(ae),mt(()=>{l.value=!1})}function _e(){const ae=[_(hT,{class:`col-auto ${W.fieldClass.value}`,...Q.value,for:W.targetUid.value,dark:Y.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:u.value.length!==0,...W.splitAttrs.listeners.value,onFocus:G,onBlur:re},{...t,rawControl:()=>W.getControl(!0),before:void 0,after:void 0})];return o.value===!0&&ae.push(_("div",{ref:A,class:O.value+" scroll",style:e.popupContentStyle,...ne.value,onClick:gn,onScrollPassive:q},sr())),_(Wc,{ref:R,modelValue:i.value,position:e.useInput===!0?"top":void 0,transitionShow:x,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Wp,onBeforeHide:Oe,onHide:qe,onShow:vt},()=>_("div",{class:"q-select__dialog"+(Y.value===!0?" q-select__dialog--dark q-dark":"")+(l.value===!0?" q-select__dialog--focused":"")},ae))}function Oe(ae){Up(ae),R.value!==null&&R.value.__updateRefocusTarget(W.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),W.focused.value=!1}function qe(ae){kt(),W.focused.value===!1&&n("blur",ae),yr()}function vt(){const ae=document.activeElement;(ae===null||ae.id!==W.targetUid.value)&&S.value!==null&&S.value!==ae&&S.value.focus(),oe()}function We(){i.value!==!0&&(s.value=-1,o.value===!0&&(o.value=!1),W.focused.value===!1&&(p!==null&&(clearTimeout(p),p=null),W.innerLoading.value===!0&&(n("filterAbort"),W.innerLoading.value=!1,c.value=!1)))}function at(ae){W.editable.value===!0&&(v===!0?(W.onControlFocusin(ae),i.value=!0,mt(()=>{W.focus()})):W.focus(),e.onFilter!==void 0?Ge(u.value):(ee.value!==!0||t["no-option"]!==void 0)&&(o.value=!0))}function kt(){i.value=!1,We()}function yr(){e.useInput===!0&&Xe(e.multiple!==!0&&e.fillInput===!0&&N.value.length!==0&&le.value(N.value[0])||"",!0,!0)}function hd(ae){let ze=-1;if(ae===!0){if(N.value.length!==0){const $e=pe.value(N.value[0]);ze=e.options.findIndex(yt=>Br(pe.value(yt),$e))}V(ze)}he(ze)}function TC(ae,ze){o.value===!0&&W.innerLoading.value===!1&&(V(-1,!0),mt(()=>{o.value===!0&&W.innerLoading.value===!1&&(ae>ze?V():hd(!0))}))}function Hp(){i.value===!1&&E.value!==null&&E.value.updatePosition()}function Wp(ae){ae!==void 0&&Gt(ae),n("popupShow",ae),W.hasPopupOpen=!0,W.onControlFocusin(ae)}function Up(ae){ae!==void 0&&Gt(ae),n("popupHide",ae),W.hasPopupOpen=!1,W.onControlFocusout(ae)}function jp(){v=a.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?t["no-option"]!==void 0||e.onFilter!==void 0||ee.value===!1:!0),x=a.platform.is.ios===!0&&v===!0&&e.useInput===!0?"fade":e.transitionShow}return fs(jp),av(Hp),jp(),ft(()=>{d!==null&&clearTimeout(d),f!==null&&clearTimeout(f)}),Object.assign(r,{showPopup:at,hidePopup:kt,removeAtIndex:Me,add:et,toggleOption:tt,getOptionIndex:()=>s.value,setOptionIndex:he,moveOptionSelection:Ee,filter:Ge,updateMenuPosition:Hp,updateInputValue:Xe,isOptionSelected:Te,getEmittingOptionValue:Fe,isOptionDisabled:(...ae)=>X.value.apply(null,ae)===!0,getOptionValue:(...ae)=>pe.value.apply(null,ae),getOptionLabel:(...ae)=>le.value.apply(null,ae)}),Object.assign(W,{innerValue:N,fieldClass:C(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:w,targetRef:S,hasValue:fe,showPopup:at,floatingLabel:C(()=>e.hideSelected!==!0&&fe.value===!0||typeof u.value=="number"||u.value.length!==0||ni(e.displayValue)),getControlChild:()=>{if(W.editable.value!==!1&&(i.value===!0||ee.value!==!0||t["no-option"]!==void 0))return v===!0?_e():lt();W.hasPopupOpen===!0&&(W.hasPopupOpen=!1)},controlEvents:{onFocusin(ae){W.onControlFocusin(ae)},onFocusout(ae){W.onControlFocusout(ae,()=>{yr(),We()})},onClick(ae){if(gn(ae),v!==!0&&o.value===!0){We(),S.value?.focus();return}at(ae)}},getControl:ae=>{const ze=ja(),$e=ae===!0||i.value!==!0||v!==!0;if(e.useInput===!0)ze.push(ma(ae,$e));else if(W.editable.value===!0){const Vt=$e===!0?j.value:void 0;ze.push(_("input",{ref:$e===!0?S:void 0,key:"d_t",class:"q-select__focus-target",id:$e===!0?W.targetUid.value:void 0,value:ue.value,readonly:!0,"data-autofocus":ae===!0||e.autofocus===!0||void 0,...Vt,onKeydown:It,onKeyup:Ze,onKeypress:ut})),$e===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&ze.push(_("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Ve}))}if(k.value!==void 0&&e.disable!==!0&&de.value.length!==0){const Vt=de.value.map(Bt=>_("option",{value:Bt,selected:!0}));ze.push(_("select",{class:"hidden",name:k.value,multiple:e.multiple},Vt))}const yt=e.useInput===!0||$e!==!0?void 0:W.splitAttrs.attributes.value;return _("div",{class:"q-field__native row items-center",...yt,...W.splitAttrs.listeners.value},ze)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[_(Ct,{class:"q-select__dropdown-icon"+(o.value===!0?" rotate-180":""),name:me.value})]:null}),Xc(W)}}),HT=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],WT=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];Ce({name:"QSkeleton",props:{...wt,tag:{type:String,default:"div"},type:{type:String,validator:e=>HT.includes(e),default:"rect"},animation:{type:String,validator:e=>WT.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:t}){const n=Ie(),r=_t(e,n.proxy.$q),a=C(()=>{const i=e.size!==void 0?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:i[0],height:i[1]}}),o=C(()=>`q-skeleton q-skeleton--${r.value===!0?"dark":"light"} q-skeleton--type-${e.type}`+(e.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(e.square===!0?" q-skeleton--square":"")+(e.bordered===!0?" q-skeleton--bordered":""));return()=>_(e.tag,{class:o.value,style:a.value},He(t.default))}});var Ng=[["left","center","start","width"],["right","center","end","width"],["top","start","center","height"],["bottom","end","center","height"]];Ce({name:"QSlideItem",props:{...wt,leftColor:String,rightColor:String,topColor:String,bottomColor:String,onSlide:Function},emits:["action","top","right","bottom","left"],setup(e,{slots:t,emit:n}){const{proxy:r}=Ie(),{$q:a}=r,o=_t(e,a),{getCache:i}=Eu(),s=Z(null);let u=null,l={},c={},d={};const f=C(()=>a.lang.rtl===!0?{left:"right",right:"left"}:{left:"left",right:"right"}),h=C(()=>"q-slide-item q-item-type overflow-hidden"+(o.value===!0?" q-slide-item--dark q-dark":""));function v(){s.value.style.transform="translate(0,0)"}function m(y,x,b){e.onSlide!==void 0&&n("slide",{side:y,ratio:x,isReset:b})}function p(y){const x=s.value;if(y.isFirst)l={dir:null,size:{left:0,right:0,top:0,bottom:0},scale:0},x.classList.add("no-transition"),Ng.forEach(S=>{if(t[S[0]]!==void 0){const E=d[S[0]];E.style.transform="scale(1)",l.size[S[0]]=E.getBoundingClientRect()[S[3]]}}),l.axis=y.direction==="up"||y.direction==="down"?"Y":"X";else if(y.isFinal){x.classList.remove("no-transition"),l.scale===1?(x.style.transform=`translate${l.axis}(${l.dir*100}%)`,u!==null&&clearTimeout(u),u=setTimeout(()=>{u=null,n(l.showing,{reset:v}),n("action",{side:l.showing,reset:v})},230)):(x.style.transform="translate(0,0)",m(l.showing,0,!0));return}else y.direction=l.axis==="X"?y.offset.x<0?"left":"right":y.offset.y<0?"up":"down";if(t.left===void 0&&y.direction===f.value.right||t.right===void 0&&y.direction===f.value.left||t.top===void 0&&y.direction==="down"||t.bottom===void 0&&y.direction==="up"){x.style.transform="translate(0,0)";return}let b,g,w;l.axis==="X"?(g=y.direction==="left"?-1:1,b=g===1?f.value.left:f.value.right,w=y.distance.x):(g=y.direction==="up"?-2:2,b=g===2?"top":"bottom",w=y.distance.y),!(l.dir!==null&&Math.abs(g)!==Math.abs(l.dir))&&(l.dir!==g&&(["left","right","top","bottom"].forEach(S=>{c[S]&&(c[S].style.visibility=b===S?"visible":"hidden")}),l.showing=b,l.dir=g),l.scale=Math.max(0,Math.min(1,(w-40)/l.size[b])),x.style.transform=`translate${l.axis}(${w*g/Math.abs(g)}px)`,d[b].style.transform=`scale(${l.scale})`,m(b,l.scale,!1))}return fs(()=>{c={},d={}}),ft(()=>{u!==null&&clearTimeout(u)}),Object.assign(r,{reset:v}),()=>{const y=[],x={left:t[f.value.right]!==void 0,right:t[f.value.left]!==void 0,up:t.bottom!==void 0,down:t.top!==void 0},b=Object.keys(x).filter(w=>x[w]===!0);Ng.forEach(w=>{const S=w[0];t[S]!==void 0&&y.push(_("div",{key:S,ref:E=>{c[S]=E},class:`q-slide-item__${S} absolute-full row no-wrap items-${w[1]} justify-${w[2]}`+(e[S+"Color"]!==void 0?` bg-${e[S+"Color"]}`:"")},[_("div",{ref:E=>{d[S]=E}},t[S]())]))});const g=_("div",{key:`${b.length===0?"only-":""} content`,ref:s,class:"q-slide-item__content"},He(t.default));return b.length===0?y.push(g):y.push(gr(g,i("dir#"+b.join(""),()=>{const w={prevent:!0,stop:!0,mouse:!0};return b.forEach(S=>{w[S]=!0}),[[Tr,p,void 0,w]]}))),_("div",{class:h.value},y)}}});Ce({name:"QSpace",setup(){const e=_("div",{class:"q-space"});return()=>e}});var UT='<g transform="matrix(1 0 0 -1 0 80)"><rect width="10" height="20" rx="3"><animate attributeName="height" begin="0s" dur="4.3s" values="20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="15" width="10" height="80" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="80;55;33;5;75;23;73;33;12;14;60;80" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="30" width="10" height="50" rx="3"><animate attributeName="height" begin="0s" dur="1.4s" values="50;34;78;23;56;23;34;76;80;54;21;50" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="45" width="10" height="30" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="30;45;13;80;56;72;45;76;34;23;67;30" calcMode="linear" repeatCount="indefinite"></animate></rect></g>';Ce({name:"QSpinnerAudio",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 55 80",xmlns:"http://www.w3.org/2000/svg",innerHTML:UT})}});var jT='<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd"><circle cx="5" cy="50" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" values="50;5;50;50" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" begin="0s" dur="2.2s" values="5;27;49;5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="27" cy="5" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" from="5" to="5" values="5;50;50;5" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" begin="0s" dur="2.2s" from="27" to="27" values="27;49;5;27" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="49" cy="50" r="5"><animate attributeName="cy" begin="0s" dur="2.2s" values="50;50;5;50" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="cx" from="49" to="49" begin="0s" dur="2.2s" values="49;5;27;49" calcMode="linear" repeatCount="indefinite"></animate></circle></g>';Ce({name:"QSpinnerBall",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg",innerHTML:jT})}});var GT='<rect y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="30" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="60" width="15" height="140" rx="6"><animate attributeName="height" begin="0s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="90" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="120" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect>';Ce({name:"QSpinnerBars",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",innerHTML:GT})}});var KT='<rect x="25" y="25" width="50" height="50" fill="none" stroke-width="4" stroke="currentColor"><animateTransform id="spinnerBox" attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" dur="0.5s" begin="rectBox.end"></animateTransform></rect><rect x="27" y="27" width="46" height="50" fill="currentColor"><animate id="rectBox" attributeName="height" begin="0s;spinnerBox.end" dur="1.3s" from="50" to="0" fill="freeze"></animate></rect>';Ce({name:"QSpinnerBox",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:KT})}});var XT='<circle cx="50" cy="50" r="48" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="currentColor"></circle><line stroke-linecap="round" stroke-width="4" stroke-miterlimit="10" stroke="currentColor" x1="50" y1="50" x2="85" y2="50.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="2s" repeatCount="indefinite"></animateTransform></line><line stroke-linecap="round" stroke-width="4" stroke-miterlimit="10" stroke="currentColor" x1="50" y1="50" x2="49.5" y2="74"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="15s" repeatCount="indefinite"></animateTransform></line>';Ce({name:"QSpinnerClock",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:XT})}});var QT='<rect x="0" y="0" width="100" height="100" fill="none"></rect><path d="M78,19H22c-6.6,0-12,5.4-12,12v31c0,6.6,5.4,12,12,12h37.2c0.4,3,1.8,5.6,3.7,7.6c2.4,2.5,5.1,4.1,9.1,4 c-1.4-2.1-2-7.2-2-10.3c0-0.4,0-0.8,0-1.3h8c6.6,0,12-5.4,12-12V31C90,24.4,84.6,19,78,19z" fill="currentColor"></path><circle cx="30" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;1;1" keyTimes="0;0.2;1" dur="1s" repeatCount="indefinite"></animate></circle><circle cx="50" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;0;1;1" keyTimes="0;0.2;0.4;1" dur="1s" repeatCount="indefinite"></animate></circle><circle cx="70" cy="47" r="5" fill="#fff"><animate attributeName="opacity" from="0" to="1" values="0;0;1;1" keyTimes="0;0.4;0.6;1" dur="1s" repeatCount="indefinite"></animate></circle>';Ce({name:"QSpinnerComment",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:QT})}});var YT='<rect x="0" y="0" width="100" height="100" fill="none"></rect><g transform="translate(25 25)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(75 25)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.1s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(25 75)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.7"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.3s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(75 75)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.2s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g>';Ce({name:"QSpinnerCube",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:YT})}});var JT='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>';Ce({name:"QSpinnerDots",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:JT})}});var ZT='<g transform="translate(20 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(50 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.1s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g><g transform="translate(80 50)"><rect x="-10" y="-30" width="20" height="60" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="2" to="1" begin="0.2s" repeatCount="indefinite" dur="1s" calcMode="spline" keySplines="0.1 0.9 0.4 1" keyTimes="0;1" values="2;1"></animateTransform></rect></g>';Ce({name:"QSpinnerFacebook",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",innerHTML:ZT})}});var eR='<g transform="translate(-20,-20)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="90 50 50" to="0 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g><g transform="translate(20,20) rotate(15 50 50)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="90 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g>';Ce({name:"QSpinnerGears",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:eR})}});var tR='<circle cx="12.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="0s" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="52.5" r="12.5" fill-opacity=".5"><animate attributeName="fill-opacity" begin="100ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="300ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="600ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="800ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="400ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="700ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="500ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="200ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle>';Ce({name:"QSpinnerGrid",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 105 105",xmlns:"http://www.w3.org/2000/svg",innerHTML:tR})}});var nR='<path d="M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.716-6.002 11.47-7.65 17.304-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z" fill-opacity=".5"><animate attributeName="fill-opacity" begin="0s" dur="1.4s" values="0.5;1;0.5" calcMode="linear" repeatCount="indefinite"></animate></path><path d="M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.593-2.32 17.308 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z" fill-opacity=".5"><animate attributeName="fill-opacity" begin="0.7s" dur="1.4s" values="0.5;1;0.5" calcMode="linear" repeatCount="indefinite"></animate></path><path d="M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z"></path>';Ce({name:"QSpinnerHearts",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 140 64",xmlns:"http://www.w3.org/2000/svg",innerHTML:nR})}});var rR='<g><path fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10" d="M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"></path><clipPath id="uil-hourglass-clip1"><rect x="15" y="20" width="70" height="25"><animate attributeName="height" from="25" to="0" dur="1s" repeatCount="indefinite" values="25;0;0" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="20" to="45" dur="1s" repeatCount="indefinite" values="20;45;45" keyTimes="0;0.5;1"></animate></rect></clipPath><clipPath id="uil-hourglass-clip2"><rect x="15" y="55" width="70" height="25"><animate attributeName="height" from="0" to="25" dur="1s" repeatCount="indefinite" values="0;25;25" keyTimes="0;0.5;1"></animate><animate attributeName="y" from="80" to="55" dur="1s" repeatCount="indefinite" values="80;55;55" keyTimes="0;0.5;1"></animate></rect></clipPath><path d="M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z" clip-path="url(#uil-hourglass-clip1)" fill="currentColor"></path><path d="M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z" clip-path="url(#uil-hourglass-clip2)" fill="currentColor"></path><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="180 50 50" repeatCount="indefinite" dur="1s" values="0 50 50;0 50 50;180 50 50" keyTimes="0;0.7;1"></animateTransform></g>';Ce({name:"QSpinnerHourglass",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:rR})}});var aR='<path d="M24.3,30C11.4,30,5,43.3,5,50s6.4,20,19.3,20c19.3,0,32.1-40,51.4-40C88.6,30,95,43.3,95,50s-6.4,20-19.3,20C56.4,70,43.6,30,24.3,30z" fill="none" stroke="currentColor" stroke-width="8" stroke-dasharray="10.691205342610678 10.691205342610678" stroke-dashoffset="0"><animate attributeName="stroke-dashoffset" from="0" to="21.382410685221355" begin="0" dur="2s" repeatCount="indefinite" fill="freeze"></animate></path>';Ce({name:"QSpinnerInfinity",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:aR})}});var oR='<g stroke-width="4" stroke-linecap="round"><line y1="17" y2="29" transform="translate(32,32) rotate(180)"><animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(210)"><animate attributeName="stroke-opacity" dur="750ms" values="0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(240)"><animate attributeName="stroke-opacity" dur="750ms" values=".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(270)"><animate attributeName="stroke-opacity" dur="750ms" values=".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(300)"><animate attributeName="stroke-opacity" dur="750ms" values=".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(330)"><animate attributeName="stroke-opacity" dur="750ms" values=".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(0)"><animate attributeName="stroke-opacity" dur="750ms" values=".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(30)"><animate attributeName="stroke-opacity" dur="750ms" values=".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(60)"><animate attributeName="stroke-opacity" dur="750ms" values=".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(90)"><animate attributeName="stroke-opacity" dur="750ms" values=".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(120)"><animate attributeName="stroke-opacity" dur="750ms" values=".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85" repeatCount="indefinite"></animate></line><line y1="17" y2="29" transform="translate(32,32) rotate(150)"><animate attributeName="stroke-opacity" dur="750ms" values="1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1" repeatCount="indefinite"></animate></line></g>';Ce({name:"QSpinnerIos",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64",innerHTML:oR})}});var iR='<circle cx="50" cy="50" r="44" fill="none" stroke-width="4" stroke-opacity=".5" stroke="currentColor"></circle><circle cx="8" cy="54" r="6" fill="currentColor" stroke-width="3" stroke="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 48" to="360 50 52" dur="2s" repeatCount="indefinite"></animateTransform></circle>';Ce({name:"QSpinnerOrbit",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:iR})}});var sR='<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd"><circle stroke-opacity=".5" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"></animateTransform></path></g>';Ce({name:"QSpinnerOval",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",innerHTML:sR})}});var uR='<path d="M0 50A50 50 0 0 1 50 0L50 50L0 50" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="0.8s" repeatCount="indefinite"></animateTransform></path><path d="M50 0A50 50 0 0 1 100 50L50 50L50 0" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="1.6s" repeatCount="indefinite"></animateTransform></path><path d="M100 50A50 50 0 0 1 50 100L50 50L100 50" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="2.4s" repeatCount="indefinite"></animateTransform></path><path d="M50 100A50 50 0 0 1 0 50L50 50L50 100" fill="currentColor" opacity="0.5"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="3.2s" repeatCount="indefinite"></animateTransform></path>';Ce({name:"QSpinnerPie",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:uR})}});var lR='<g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="0s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="-0.9s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle></g>';Ce({name:"QSpinnerPuff",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",innerHTML:lR})}});var cR='<g transform="scale(0.55)"><circle cx="30" cy="150" r="30" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></circle><path d="M90,150h30c0-49.7-40.3-90-90-90v30C63.1,90,90,116.9,90,150z" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0.1" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></path><path d="M150,150h30C180,67.2,112.8,0,30,0v30C96.3,30,150,83.7,150,150z" fill="currentColor"><animate attributeName="opacity" from="0" to="1" dur="1s" begin="0.2" repeatCount="indefinite" keyTimes="0;0.5;1" values="0;1;1"></animate></path></g>';Ce({name:"QSpinnerRadio",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:cR})}});var dR='<g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="2"><circle cx="22" cy="22" r="6"><animate attributeName="r" begin="1.5s" dur="3s" values="6;22" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="1.5s" dur="3s" values="1;0" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-width" begin="1.5s" dur="3s" values="2;0" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="6"><animate attributeName="r" begin="3s" dur="3s" values="6;22" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="3s" dur="3s" values="1;0" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="stroke-width" begin="3s" dur="3s" values="2;0" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="8"><animate attributeName="r" begin="0s" dur="1.5s" values="6;1;2;3;4;5;6" calcMode="linear" repeatCount="indefinite"></animate></circle></g>';Ce({name:"QSpinnerRings",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg",innerHTML:dR})}});var fR='<defs><linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"><stop stop-color="currentColor" stop-opacity="0" offset="0%"></stop><stop stop-color="currentColor" stop-opacity=".631" offset="63.146%"></stop><stop stop-color="currentColor" offset="100%"></stop></linearGradient></defs><g transform="translate(1 1)" fill="none" fill-rule="evenodd"><path d="M36 18c0-9.94-8.06-18-18-18" stroke="url(#a)" stroke-width="2"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></path><circle fill="currentColor" cx="36" cy="18" r="1"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></circle></g>';Ce({name:"QSpinnerTail",props:nn,setup(e){const{cSize:t,classes:n}=rn(e);return()=>_("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",innerHTML:fR})}});Ce({name:"QSplitter",props:{...wt,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=Ie(),a=_t(e,r),o=Z(null),i={before:Z(null),after:Z(null)},s=C(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(a.value===!0?" q-splitter--dark":"")),u=C(()=>e.horizontal===!0?"height":"width"),l=C(()=>e.reverse!==!0?"before":"after"),c=C(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function d(w){return(e.unit==="%"?w:Math.round(w))+e.unit}const f=C(()=>({[l.value]:{[u.value]:d(e.modelValue)}}));let h,v,m,p,y;function x(w){if(w.isFirst===!0){const E=o.value.getBoundingClientRect()[u.value];h=e.horizontal===!0?"up":"left",v=e.unit==="%"?100:E,m=Math.min(v,c.value[1],Math.max(c.value[0],e.modelValue)),p=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:r.lang.rtl===!0?-1:1)*(e.unit==="%"?E===0?0:100/E:1),o.value.classList.add("q-splitter--active");return}if(w.isFinal===!0){y!==e.modelValue&&n("update:modelValue",y),o.value.classList.remove("q-splitter--active");return}const S=m+p*(w.direction===h?-1:1)*w.distance[e.horizontal===!0?"y":"x"];y=Math.min(v,c.value[1],Math.max(c.value[0],S)),i[l.value].value.style[u.value]=d(y),e.emitImmediately===!0&&e.modelValue!==y&&n("update:modelValue",y)}const b=C(()=>[[Tr,x,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function g(w,S){w<S[0]?n("update:modelValue",S[0]):w>S[1]&&n("update:modelValue",S[1])}return ke(()=>e.modelValue,w=>{g(w,c.value)}),ke(()=>e.limits,()=>{mt(()=>{g(e.modelValue,c.value)})}),()=>{const w=[_("div",{ref:i.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:f.value.before},He(t.before)),_("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[Ir("div",{class:"q-splitter__separator-area absolute-full"},He(t.separator),"sep",e.disable!==!0,()=>b.value)]),_("div",{ref:i.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:f.value.after},He(t.after))];return _("div",{class:s.value,ref:o},Jt(t.default,w))}}});var S1=Ce({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:t}){const{proxy:{$q:n}}=Ie(),r=Z(null),a=C(()=>e.stepper.modelValue===e.step.name),o=C(()=>{const p=e.step.disable;return p===!0||p===""}),i=C(()=>{const p=e.step.error;return p===!0||p===""}),s=C(()=>{const p=e.step.done;return o.value===!1&&(p===!0||p==="")}),u=C(()=>{const p=e.step.headerNav,y=p===!0||p===""||p===void 0;return o.value===!1&&e.stepper.headerNav&&y}),l=C(()=>e.step.prefix&&(a.value===!1||e.stepper.activeIcon==="none")&&(i.value===!1||e.stepper.errorIcon==="none")&&(s.value===!1||e.stepper.doneIcon==="none")),c=C(()=>{const p=e.step.icon||e.stepper.inactiveIcon;if(a.value===!0){const y=e.step.activeIcon||e.stepper.activeIcon;return y==="none"?p:y||n.iconSet.stepper.active}if(i.value===!0){const y=e.step.errorIcon||e.stepper.errorIcon;return y==="none"?p:y||n.iconSet.stepper.error}if(o.value===!1&&s.value===!0){const y=e.step.doneIcon||e.stepper.doneIcon;return y==="none"?p:y||n.iconSet.stepper.done}return p}),d=C(()=>{const p=i.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(a.value===!0){const y=e.step.activeColor||e.stepper.activeColor||e.step.color;return y!==void 0?y:p}return p!==void 0?p:o.value===!1&&s.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),f=C(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(d.value!==void 0?` text-${d.value}`:"")+(i.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(l.value===!0?"prefix":"icon"):"")+(a.value===!0?" q-stepper__tab--active":"")+(s.value===!0?" q-stepper__tab--done":"")+(u.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(o.value===!0?" q-stepper__tab--disabled":"")),h=C(()=>e.stepper.headerNav!==!0?!1:u.value);function v(){r.value?.focus(),a.value===!1&&e.goToPanel(e.step.name)}function m(p){p.keyCode===13&&a.value===!1&&e.goToPanel(e.step.name)}return()=>{const p={class:f.value};u.value===!0&&(p.onClick=v,p.onKeyup=m,Object.assign(p,o.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:t.tabindex||0}));const y=[_("div",{class:"q-focus-helper",tabindex:-1,ref:r}),_("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[_("span",{class:"row flex-center"},[l.value===!0?e.step.prefix:_(Ct,{name:c.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const x=[_("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&x.push(_("div",{class:"q-stepper__caption"},e.step.caption)),y.push(_("div",{class:"q-stepper__label q-stepper__line relative-position"},x))}return gr(_("div",p,y),[[Lc,h.value]])}}});function k1(e){return _("div",{class:"q-stepper__step-content"},[_("div",{class:"q-stepper__step-inner"},He(e.default))])}var Og={setup(e,{slots:t}){return()=>k1(t)}};Ce({name:"QStep",props:{...Sv,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:t,emit:n}){const{proxy:{$q:r}}=Ie(),a=sn($b,Rt);if(a===Rt)return console.error("QStep needs to be a child of QStepper"),Rt;const{getCache:o}=Eu(),i=Z(null),s=C(()=>a.value.modelValue===e.name),u=C(()=>r.platform.is.ios!==!0&&r.platform.is.chrome===!0||s.value!==!0||a.value.vertical!==!0?{}:{onScroll(d){const{target:f}=d;f.scrollTop>0&&(f.scrollTop=0),e.onScroll!==void 0&&n("scroll",d)}}),l=C(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function c(){const d=a.value.vertical;return d===!0&&a.value.keepAlive===!0?_(ob,a.value.keepAliveProps.value,s.value===!0?[_(a.value.needsUniqueKeepAliveWrapper.value===!0?o(l.value,()=>({...Og,name:l.value})):Og,{key:l.value},t.default)]:void 0):d!==!0||s.value===!0?k1(t):void 0}return()=>_("div",{ref:i,class:"q-stepper__step",role:"tabpanel",...u.value},a.value.vertical===!0?[_(S1,{stepper:a.value,step:e,goToPanel:a.value.goToPanel}),a.value.animated===!0?_(Nv,c):c()]:[c()])}});var hR=/(-\w)/g;function vR(e){const t={};for(const n in e){const r=n.replace(hR,a=>a[1].toUpperCase());t[r]=e[n]}return t}Ce({name:"QStepper",props:{...wt,...kv,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:Ev,setup(e,{slots:t}){const n=Ie(),r=_t(e,n.proxy.$q),{updatePanelsList:a,isValidPanelName:o,updatePanelIndex:i,getPanelContent:s,getPanels:u,panelDirectives:l,goToPanel:c,keepAliveProps:d,needsUniqueKeepAliveWrapper:f}=Tv();Er($b,C(()=>({goToPanel:c,keepAliveProps:d,needsUniqueKeepAliveWrapper:f,...e})));const h=C(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(r.value===!0?" q-stepper--dark q-dark":"")),v=C(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function m(){const p=He(t.message,[]);if(e.vertical===!0){o(e.modelValue)&&i();const y=_("div",{class:"q-stepper__content"},He(t.default));return p===void 0?[y]:p.concat(y)}return[_("div",{class:v.value},u().map(y=>{const x=vR(y.props);return _(S1,{key:x.name,stepper:e,step:x,goToPanel:c})})),p,Ir("div",{class:"q-stepper__content q-panel-parent"},s(),"cont",e.swipeable,()=>l.value)]}return()=>(a(t),_("div",{class:h.value},Jt(t.navigation,m())))}});Ce({name:"QStepperNavigation",setup(e,{slots:t}){return()=>_("div",{class:"q-stepper__nav"},He(t.default))}});var pR=Ce({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:n}){const r=Ie(),{proxy:{$q:a}}=r,o=i=>{n("click",i)};return()=>{if(e.props===void 0)return _("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:o},He(t.default));let i,s;const u=r.vnode.key;if(u){if(i=e.props.colsMap[u],i===void 0)return}else i=e.props.col;if(i.sortable===!0){const c=i.align==="right"?"unshift":"push";s=Cu(t.default,[]),s[c](_(Ct,{class:i.__iconClass,name:a.iconSet.table.arrowUp}))}else s=He(t.default);const l={class:i.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:i.headerStyle,onClick:c=>{i.sortable===!0&&e.props.sort(i),o(c)}};return _("th",l,s)}}});function E1(e,t){return _("div",e,[_("table",{class:"q-table"},t)])}var mR={list:kT,table:AT},gR=["list","table","__qtable"],yR=Ce({name:"QVirtualScroll",props:{...fh,type:{type:String,default:"list",validator:e=>gR.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:ui},setup(e,{slots:t,attrs:n}){let r;const a=Z(null),o=C(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:i,localResetVirtualScroll:s,padVirtualScroll:u,onVirtualScrollEvt:l}=C1({virtualScrollLength:o,getVirtualScrollTarget:v,getVirtualScrollEl:h}),c=C(()=>{if(o.value===0)return[];const x=(b,g)=>({index:i.value.from+g,item:b});return e.itemsFn===void 0?e.items.slice(i.value.from,i.value.to).map(x):e.itemsFn(i.value.from,i.value.to-i.value.from).map(x)}),d=C(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),f=C(()=>e.scrollTarget!==void 0?{}:{tabindex:0});ke(o,()=>{s()}),ke(()=>e.scrollTarget,()=>{p(),m()});function h(){return a.value.$el||a.value}function v(){return r}function m(){r=da(h(),e.scrollTarget),r.addEventListener("scroll",l,Ot.passive)}function p(){r!==void 0&&(r.removeEventListener("scroll",l,Ot.passive),r=void 0)}function y(){let x=u(e.type==="list"?"div":"tbody",c.value.map(t.default));return t.before!==void 0&&(x=t.before().concat(x)),Jt(t.after,x)}return Mc(()=>{s()}),Nt(()=>{m()}),bo(()=>{m()}),ca(()=>{p()}),ft(()=>{p()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?E1({ref:a,class:"q-table__middle "+d.value},y()):_(mR[e.type],{...n,ref:a,class:[n.class,d.value],...f.value},y)}}});function bR(e,t){return new Date(e)-new Date(t)}var xR={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function wR(e,t,n,r){const a=C(()=>{const{sortBy:s}=t.value;return s&&n.value.find(u=>u.name===s)||null}),o=C(()=>e.sortMethod!==void 0?e.sortMethod:(s,u,l)=>{const c=n.value.find(h=>h.name===u);if(c===void 0||c.field===void 0)return s;const d=l===!0?-1:1,f=typeof c.field=="function"?h=>c.field(h):h=>h[c.field];return s.sort((h,v)=>{let m=f(h),p=f(v);return c.rawSort!==void 0?c.rawSort(m,p,h,v)*d:m==null?-1*d:p==null?1*d:c.sort!==void 0?c.sort(m,p,h,v)*d:uu(m)===!0&&uu(p)===!0?(m-p)*d:Jf(m)===!0&&Jf(p)===!0?bR(m,p)*d:typeof m=="boolean"&&typeof p=="boolean"?(m-p)*d:([m,p]=[m,p].map(y=>(y+"").toLocaleString().toLowerCase()),m<p?-1*d:m===p?0:d)})});function i(s){let u=e.columnSortOrder;if(kn(s)===!0)s.sortOrder&&(u=s.sortOrder),s=s.name;else{const d=n.value.find(f=>f.name===s);d?.sortOrder&&(u=d.sortOrder)}let{sortBy:l,descending:c}=t.value;l!==s?(l=s,c=u==="da"):e.binaryStateSort===!0?c=!c:c===!0?u==="ad"?l=null:c=!1:u==="ad"?c=!0:l=null,r({sortBy:l,descending:c,page:1})}return{columnToSort:a,computedSortMethod:o,sort:i}}var _R={filter:[String,Object],filterMethod:Function};function CR(e,t){const n=C(()=>e.filterMethod!==void 0?e.filterMethod:(r,a,o,i)=>{const s=a?a.toLowerCase():"";return r.filter(u=>o.some(l=>{const c=i(l,u)+"";return(c==="undefined"||c==="null"?"":c.toLowerCase()).indexOf(s)!==-1}))});return ke(()=>e.filter,()=>{mt(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:n}}function SR(e,t){for(const n in t)if(t[n]!==e[n])return!1;return!0}function Bg(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}var kR={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function ER(e,t){const{props:n,emit:r}=e,a=Z(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:n.rowsPerPageOptions.length!==0?n.rowsPerPageOptions[0]:5},n.pagination)),o=C(()=>{const c=n["onUpdate:pagination"]!==void 0?{...a.value,...n.pagination}:a.value;return Bg(c)}),i=C(()=>o.value.rowsNumber!==void 0);function s(c){u({pagination:c,filter:n.filter})}function u(c={}){mt(()=>{r("request",{pagination:c.pagination||o.value,filter:c.filter||n.filter,getCellValue:t})})}function l(c,d){const f=Bg({...o.value,...c});if(SR(o.value,f)===!0){i.value===!0&&d===!0&&s(f);return}if(i.value===!0){s(f);return}n.pagination!==void 0&&n["onUpdate:pagination"]!==void 0?r("update:pagination",f):a.value=f}return{innerPagination:a,computedPagination:o,isServerSide:i,requestServerInteraction:u,setPagination:l}}function TR(e,t,n,r,a,o){const{props:i,emit:s,proxy:{$q:u}}=e,l=C(()=>r.value===!0?n.value.rowsNumber||0:o.value),c=C(()=>{const{page:g,rowsPerPage:w}=n.value;return(g-1)*w}),d=C(()=>{const{page:g,rowsPerPage:w}=n.value;return g*w}),f=C(()=>n.value.page===1),h=C(()=>n.value.rowsPerPage===0?1:Math.max(1,Math.ceil(l.value/n.value.rowsPerPage))),v=C(()=>d.value===0?!0:n.value.page>=h.value),m=C(()=>(i.rowsPerPageOptions.includes(t.value.rowsPerPage)?i.rowsPerPageOptions:[t.value.rowsPerPage].concat(i.rowsPerPageOptions)).map(w=>({label:w===0?u.lang.table.allRows:""+w,value:w})));ke(h,(g,w)=>{if(g===w)return;const S=n.value.page;g&&!S?a({page:1}):g<S&&a({page:g})});function p(){a({page:1})}function y(){const{page:g}=n.value;g>1&&a({page:g-1})}function x(){const{page:g,rowsPerPage:w}=n.value;d.value>0&&g*w<l.value&&a({page:g+1})}function b(){a({page:h.value})}return i["onUpdate:pagination"]!==void 0&&s("update:pagination",{...n.value}),{firstRowIndex:c,lastRowIndex:d,isFirstPage:f,isLastPage:v,pagesNumber:h,computedRowsPerPageOptions:m,computedRowsNumber:l,firstPage:p,prevPage:y,nextPage:x,lastPage:b}}var RR={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},AR=["update:selected","selection"];function IR(e,t,n,r){const a=C(()=>{const v={};return e.selected.map(r.value).forEach(m=>{v[m]=!0}),v}),o=C(()=>e.selection!=="none"),i=C(()=>e.selection==="single"),s=C(()=>e.selection==="multiple"),u=C(()=>n.value.length!==0&&n.value.every(v=>a.value[r.value(v)]===!0)),l=C(()=>u.value!==!0&&n.value.some(v=>a.value[r.value(v)]===!0)),c=C(()=>e.selected.length);function d(v){return a.value[v]===!0}function f(){t("update:selected",[])}function h(v,m,p,y){t("selection",{rows:m,added:p,keys:v,evt:y});const x=i.value===!0?p===!0?m:[]:p===!0?e.selected.concat(m):e.selected.filter(b=>v.includes(r.value(b))===!1);t("update:selected",x)}return{hasSelectionMode:o,singleSelection:i,multipleSelection:s,allRowsSelected:u,someRowsSelected:l,rowsSelectedNumber:c,isRowSelected:d,clearSelection:f,updateSelection:h}}function qg(e){return Array.isArray(e)?e.slice():[]}var MR={expanded:Array},DR=["update:expanded"];function PR(e,t){const n=Z(qg(e.expanded));ke(()=>e.expanded,i=>{n.value=qg(i)});function r(i){return n.value.includes(i)}function a(i){e.expanded!==void 0?t("update:expanded",i):n.value=i}function o(i,s){const u=n.value.slice(),l=u.indexOf(i);s===!0?l===-1&&(u.push(i),a(u)):l!==-1&&(u.splice(l,1),a(u))}return{isRowExpanded:r,setExpanded:a,updateExpanded:o}}var FR={visibleColumns:Array};function NR(e,t,n){const r=C(()=>{if(e.columns!==void 0)return e.columns;const s=e.rows[0];return s!==void 0?Object.keys(s).map(u=>({name:u,label:u.toUpperCase(),field:u,align:uu(s[u])?"right":"left",sortable:!0})):[]}),a=C(()=>{const{sortBy:s,descending:u}=t.value;return(e.visibleColumns!==void 0?r.value.filter(c=>c.required===!0||e.visibleColumns.includes(c.name)===!0):r.value).map(c=>{const d=c.align||"right",f=`text-${d}`;return{...c,align:d,__iconClass:`q-table__sort-icon q-table__sort-icon--${d}`,__thClass:f+(c.headerClasses!==void 0?" "+c.headerClasses:"")+(c.sortable===!0?" sortable":"")+(c.name===s?` sorted ${u===!0?"sort-desc":""}`:""),__tdStyle:c.style!==void 0?typeof c.style!="function"?()=>c.style:c.style:()=>null,__tdClass:c.classes!==void 0?typeof c.classes!="function"?()=>f+" "+c.classes:h=>f+" "+c.classes(h):()=>f}})}),o=C(()=>{const s={};return a.value.forEach(u=>{s[u.name]=u}),s}),i=C(()=>e.tableColspan!==void 0?e.tableColspan:a.value.length+(n.value===!0?1:0));return{colList:r,computedCols:a,computedColsMap:o,computedColspan:i}}var el="q-table__bottom row items-center",T1={};_1.forEach(e=>{T1[e]={}});Ce({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...T1,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...wt,...Rv,...FR,..._R,...kR,...MR,...RR,...xR},emits:["request","virtualScroll",...Av,...DR,...AR],setup(e,{slots:t,emit:n}){const r=Ie(),{proxy:{$q:a}}=r,o=_t(e,a),{inFullscreen:i,toggleFullscreen:s}=Iv(),u=C(()=>typeof e.rowKey=="function"?e.rowKey:we=>we[e.rowKey]),l=Z(null),c=Z(null),d=C(()=>e.grid!==!0&&e.virtualScroll===!0),f=C(()=>" q-table__card"+(o.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),h=C(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":f.value)+(o.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(i.value===!0?" fullscreen scroll":"")),v=C(()=>h.value+(e.loading===!0?" q-table--loading":""));ke(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+h.value,()=>{d.value===!0&&c.value?.reset()});const{innerPagination:m,computedPagination:p,isServerSide:y,requestServerInteraction:x,setPagination:b}=ER(r,he),{computedFilterMethod:g}=CR(e,b),{isRowExpanded:w,setExpanded:S,updateExpanded:E}=PR(e,n),R=C(()=>{let we=e.rows;if(y.value===!0||we.length===0)return we;const{sortBy:Ne,descending:Xe}=p.value;return e.filter&&(we=g.value(we,e.filter,W.value,he)),Y.value!==null&&(we=fe.value(e.rows===we?we.slice():we,Ne,Xe)),we}),A=C(()=>R.value.length),k=C(()=>{let we=R.value;if(y.value===!0)return we;const{rowsPerPage:Ne}=p.value;return Ne!==0&&(O.value===0&&e.rows!==we?we.length>ee.value&&(we=we.slice(0,ee.value)):we=we.slice(O.value,ee.value)),we}),{hasSelectionMode:M,singleSelection:T,multipleSelection:D,allRowsSelected:I,someRowsSelected:F,rowsSelectedNumber:V,isRowSelected:L,clearSelection:q,updateSelection:K}=IR(e,n,k,u),{colList:oe,computedCols:W,computedColsMap:N,computedColspan:Q}=NR(e,p,M),{columnToSort:Y,computedSortMethod:fe,sort:$}=wR(e,p,oe,b),{firstRowIndex:O,lastRowIndex:ee,isFirstPage:H,isLastPage:ue,pagesNumber:ye,computedRowsPerPageOptions:P,computedRowsNumber:B,firstPage:j,prevPage:ne,nextPage:se,lastPage:J}=TR(r,m,p,y,b,A),me=C(()=>k.value.length===0),ge=C(()=>{const we={};return _1.forEach(Ne=>{we[Ne]=e[Ne]}),we.virtualScrollItemSize===void 0&&(we.virtualScrollItemSize=e.dense===!0?28:48),we});function xe(){d.value===!0&&c.value.reset()}function pe(){if(e.grid===!0)return ma();const we=e.hideHeader!==!0?Pe:null;if(d.value===!0){const Xe=t["top-row"],Ge=t["bottom-row"],lt={default:Wt=>Re(Wt.item,t.body,Wt.index)};if(Xe!==void 0){const Wt=_("tbody",Xe({cols:W.value}));lt.before=we===null?()=>Wt:()=>[we()].concat(Wt)}else we!==null&&(lt.before=we);return Ge!==void 0&&(lt.after=()=>_("tbody",Ge({cols:W.value}))),_(yR,{ref:c,class:e.tableClass,style:e.tableStyle,...ge.value,scrollTarget:e.virtualScrollTarget,items:k.value,type:"__qtable",tableColspan:Q.value,onVirtualScroll:X},lt)}const Ne=[Fe()];return we!==null&&Ne.unshift(we()),E1({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},Ne)}function le(we,Ne){if(c.value!==null){c.value.scrollTo(we,Ne);return}we=parseInt(we,10);const Xe=l.value.querySelector(`tbody tr:nth-of-type(${we+1})`);if(Xe!==null){const Ge=l.value.querySelector(".q-table__middle.scroll"),lt=Xe.offsetTop-e.virtualScrollStickySizeStart,Wt=lt<Ge.scrollTop?"decrease":"increase";Ge.scrollTop=lt,n("virtualScroll",{index:we,from:0,to:m.value.rowsPerPage-1,direction:Wt})}}function X(we){n("virtualScroll",we)}function de(){return[_(OT,{class:"q-table__linear-progress",color:e.color,dark:o.value,indeterminate:!0,trackColor:"transparent"})]}function Re(we,Ne,Xe){const Ge=u.value(we),lt=L(Ge);if(Ne!==void 0){const re={key:Ge,row:we,pageIndex:Xe,__trClass:lt?"selected":""};if(e.tableRowStyleFn!==void 0&&(re.__trStyle=e.tableRowStyleFn(we)),e.tableRowClassFn!==void 0){const _e=e.tableRowClassFn(we);_e&&(re.__trClass=`${_e} ${re.__trClass}`)}return Ne(Me(re))}const Wt=t["body-cell"],Lt=W.value.map(re=>{const _e=t[`body-cell-${re.name}`],Oe=_e!==void 0?_e:Wt;return Oe!==void 0?Oe(De({key:Ge,row:we,pageIndex:Xe,col:re})):_("td",{class:re.__tdClass(we),style:re.__tdStyle(we)},he(re,we))});if(M.value===!0){const re=t["body-selection"],_e=re!==void 0?re(et({key:Ge,row:we,pageIndex:Xe})):[_(Ks,{modelValue:lt,color:e.color,dark:o.value,dense:e.dense,"onUpdate:modelValue":(Oe,qe)=>{K([Ge],[we],Oe,qe)}})];Lt.unshift(_("td",{class:"q-table--col-auto-width"},_e))}const G={key:Ge,class:{selected:lt}};if(e.onRowClick!==void 0&&(G.class["cursor-pointer"]=!0,G.onClick=re=>{n("rowClick",re,we,Xe)}),e.onRowDblclick!==void 0&&(G.class["cursor-pointer"]=!0,G.onDblclick=re=>{n("rowDblclick",re,we,Xe)}),e.onRowContextmenu!==void 0&&(G.class["cursor-pointer"]=!0,G.onContextmenu=re=>{n("rowContextmenu",re,we,Xe)}),e.tableRowStyleFn!==void 0&&(G.style=e.tableRowStyleFn(we)),e.tableRowClassFn!==void 0){const re=e.tableRowClassFn(we);re&&(G.class[re]=!0)}return _("tr",G,Lt)}function Fe(){const we=t.body,Ne=t["top-row"],Xe=t["bottom-row"];let Ge=k.value.map((lt,Wt)=>Re(lt,we,Wt));return Ne!==void 0&&(Ge=Ne({cols:W.value}).concat(Ge)),Xe!==void 0&&(Ge=Ge.concat(Xe({cols:W.value}))),_("tbody",Ge)}function Me(we){return tt(we),we.cols=we.cols.map(Ne=>mn({...Ne},"value",()=>he(Ne,we.row))),we}function De(we){return tt(we),mn(we,"value",()=>he(we.col,we.row)),we}function et(we){return tt(we),we}function tt(we){Object.assign(we,{cols:W.value,colsMap:N.value,sort:$,rowIndex:O.value+we.pageIndex,color:e.color,dark:o.value,dense:e.dense}),M.value===!0&&mn(we,"selected",()=>L(we.key),(Ne,Xe)=>{K([we.key],[we.row],Ne,Xe)}),mn(we,"expand",()=>w(we.key),Ne=>{E(we.key,Ne)})}function he(we,Ne){const Xe=typeof we.field=="function"?we.field(Ne):Ne[we.field];return we.format!==void 0?we.format(Xe,Ne):Xe}const Ee=C(()=>({pagination:p.value,pagesNumber:ye.value,isFirstPage:H.value,isLastPage:ue.value,firstPage:j,prevPage:ne,nextPage:se,lastPage:J,inFullscreen:i.value,toggleFullscreen:s}));function ce(){const we=t.top,Ne=t["top-left"],Xe=t["top-right"],Ge=t["top-selection"],lt=M.value===!0&&Ge!==void 0&&V.value>0,Wt="q-table__top relative-position row items-center";if(we!==void 0)return _("div",{class:Wt},[we(Ee.value)]);let Lt;if(lt===!0?Lt=Ge(Ee.value).slice():(Lt=[],Ne!==void 0?Lt.push(_("div",{class:"q-table__control"},[Ne(Ee.value)])):e.title&&Lt.push(_("div",{class:"q-table__control"},[_("div",{class:["q-table__title",e.titleClass]},e.title)]))),Xe!==void 0&&(Lt.push(_("div",{class:"q-table__separator col"})),Lt.push(_("div",{class:"q-table__control"},[Xe(Ee.value)]))),Lt.length!==0)return _("div",{class:Wt},Lt)}const Te=C(()=>F.value===!0?null:I.value);function Pe(){const we=Ze();return e.loading===!0&&t.loading===void 0&&we.push(_("tr",{class:"q-table__progress"},[_("th",{class:"relative-position",colspan:Q.value},de())])),_("thead",we)}function Ze(){const we=t.header,Ne=t["header-cell"];if(we!==void 0)return we(Ve({header:!0})).slice();const Xe=W.value.map(Ge=>{const lt=t[`header-cell-${Ge.name}`],Wt=lt!==void 0?lt:Ne,Lt=Ve({col:Ge});return Wt!==void 0?Wt(Lt):_(pR,{key:Ge.name,props:Lt},()=>Ge.label)});if(T.value===!0&&e.grid!==!0)Xe.unshift(_("th",{class:"q-table--col-auto-width"}," "));else if(D.value===!0){const Ge=t["header-selection"],lt=Ge!==void 0?Ge(Ve({})):[_(Ks,{color:e.color,modelValue:Te.value,dark:o.value,dense:e.dense,"onUpdate:modelValue":ut})];Xe.unshift(_("th",{class:"q-table--col-auto-width"},lt))}return[_("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},Xe)]}function Ve(we){return Object.assign(we,{cols:W.value,sort:$,colsMap:N.value,color:e.color,dark:o.value,dense:e.dense}),D.value===!0&&mn(we,"selected",()=>Te.value,ut),we}function ut(we){F.value===!0&&(we=!1),K(k.value.map(u.value),k.value,we)}const It=C(()=>{const we=[e.iconFirstPage||a.iconSet.table.firstPage,e.iconPrevPage||a.iconSet.table.prevPage,e.iconNextPage||a.iconSet.table.nextPage,e.iconLastPage||a.iconSet.table.lastPage];return a.lang.rtl===!0?we.reverse():we});function Xt(){if(e.hideBottom===!0)return;if(me.value===!0){if(e.hideNoData===!0)return;const Xe=e.loading===!0?e.loadingLabel||a.lang.table.loading:e.filter?e.noResultsLabel||a.lang.table.noResults:e.noDataLabel||a.lang.table.noData,Ge=t["no-data"],lt=Ge!==void 0?[Ge({message:Xe,icon:a.iconSet.table.warning,filter:e.filter})]:[_(Ct,{class:"q-table__bottom-nodata-icon",name:a.iconSet.table.warning}),Xe];return _("div",{class:el+" q-table__bottom--nodata"},lt)}const we=t.bottom;if(we!==void 0)return _("div",{class:el},[we(Ee.value)]);const Ne=e.hideSelectedBanner!==!0&&M.value===!0&&V.value>0?[_("div",{class:"q-table__control"},[_("div",[(e.selectedRowsLabel||a.lang.table.selectedRecords)(V.value)])])]:[];if(e.hidePagination!==!0)return _("div",{class:el+" justify-end"},ja(Ne));if(Ne.length!==0)return _("div",{class:el},Ne)}function Nn(we){b({page:1,rowsPerPage:we.value})}function ja(we){let Ne;const{rowsPerPage:Xe}=p.value,Ge=e.paginationLabel||a.lang.table.pagination,lt=t.pagination,Wt=e.rowsPerPageOptions.length>1;if(we.push(_("div",{class:"q-table__separator col"})),Wt===!0&&we.push(_("div",{class:"q-table__control"},[_("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||a.lang.table.recordsPerPage]),_($T,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:Xe,options:P.value,displayValue:Xe===0?a.lang.table.allRows:Xe,dark:o.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Nn})])),lt!==void 0)Ne=lt(Ee.value);else if(Ne=[_("span",Xe!==0?{class:"q-table__bottom-item"}:{},[Xe?Ge(O.value+1,Math.min(ee.value,B.value),B.value):Ge(1,A.value,B.value)])],Xe!==0&&ye.value>1){const Lt={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(Lt.size="sm"),ye.value>2&&Ne.push(_(Tt,{key:"pgFirst",...Lt,icon:It.value[0],disable:H.value,"aria-label":a.lang.pagination.first,onClick:j})),Ne.push(_(Tt,{key:"pgPrev",...Lt,icon:It.value[1],disable:H.value,"aria-label":a.lang.pagination.prev,onClick:ne}),_(Tt,{key:"pgNext",...Lt,icon:It.value[2],disable:ue.value,"aria-label":a.lang.pagination.next,onClick:se})),ye.value>2&&Ne.push(_(Tt,{key:"pgLast",...Lt,icon:It.value[3],disable:ue.value,"aria-label":a.lang.pagination.last,onClick:J}))}return we.push(_("div",{class:"q-table__control"},Ne)),we}function sr(){const we=e.gridHeader===!0?[_("table",{class:"q-table"},[Pe()])]:e.loading===!0&&t.loading===void 0?de():void 0;return _("div",{class:"q-table__middle"},we)}function ma(){const we=t.item!==void 0?t.item:Ne=>{const Xe=Ne.cols.map(lt=>_("div",{class:"q-table__grid-item-row"},[_("div",{class:"q-table__grid-item-title"},[lt.label]),_("div",{class:"q-table__grid-item-value"},[lt.value])]));if(M.value===!0){const lt=t["body-selection"],Wt=lt!==void 0?lt(Ne):[_(Ks,{modelValue:Ne.selected,color:e.color,dark:o.value,dense:e.dense,"onUpdate:modelValue":(Lt,G)=>{K([Ne.key],[Ne.row],Lt,G)}})];Xe.unshift(_("div",{class:"q-table__grid-item-row"},Wt),_(ti,{dark:o.value}))}const Ge={class:["q-table__grid-item-card"+f.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(Ge.style=[Ge.style,e.cardStyleFn(Ne.row)]),e.cardClassFn!==void 0){const lt=e.cardClassFn(Ne.row);lt&&(Ge.class[0]+=` ${lt}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(Ge.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(Ge.onClick=lt=>{n("RowClick",lt,Ne.row,Ne.pageIndex)}),e.onRowDblclick!==void 0&&(Ge.onDblclick=lt=>{n("RowDblclick",lt,Ne.row,Ne.pageIndex)}),e.onRowContextmenu!==void 0&&(Ge.onContextmenu=lt=>{n("rowContextmenu",lt,Ne.row,Ne.pageIndex)})),_("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(Ne.selected===!0?" q-table__grid-item--selected":"")},[_("div",Ge,Xe)])};return _("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},k.value.map((Ne,Xe)=>we(Me({key:u.value(Ne),row:Ne,pageIndex:Xe}))))}return Object.assign(r.proxy,{requestServerInteraction:x,setPagination:b,firstPage:j,prevPage:ne,nextPage:se,lastPage:J,isRowSelected:L,clearSelection:q,isRowExpanded:w,setExpanded:S,sort:$,resetVirtualScroll:xe,scrollTo:le,getCellValue:he}),Fb(r.proxy,{filteredSortedRows:()=>R.value,computedRows:()=>k.value,computedRowsNumber:()=>B.value}),()=>{const we=[ce()],Ne={ref:l,class:v.value};return e.grid===!0?we.push(sr()):Object.assign(Ne,{class:[Ne.class,e.cardClass],style:e.cardStyle}),we.push(pe(),Xt()),e.loading===!0&&t.loading!==void 0&&we.push(t.loading()),_("div",Ne,we)}}});Ce({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:t}){const n=C(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>_("tr",{style:e.props?.__trStyle,class:n.value},He(t.default))}});Ce({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const n=Ie(),r=C(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return _("td",{class:r.value},He(t.default));const a=n.vnode.key,o=(e.props.colsMap!==void 0?e.props.colsMap[a]:null)||e.props.col;if(o===void 0)return;const{row:i}=e.props;return _("td",{class:r.value+o.__tdClass(i),style:o.__tdStyle(i)},He(t.default))}}});Ce({name:"QRouteTab",props:{...Su,...qx},emits:Bx,setup(e,{slots:t,emit:n}){const r=qc({useDisableForRouterLinkProps:!1}),{renderTab:a,$tabs:o}=Lx(e,t,n,{exact:C(()=>e.exact),...r});return ke(()=>`${e.name} | ${e.exact} | ${(r.resolvedLink.value||{}).href}`,o.verifyRouteModel),()=>a(r.linkTag.value,r.linkAttrs.value)}});function OR(e,t){return e.hour!==null&&e.minute===null?"minute":"hour"}function BR(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}Ce({name:"QTime",props:{...wt,...Mr,...Ql,modelValue:{required:!0,validator:e=>typeof e=="string"||e===null},mask:{...Ql.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Wx,setup(e,{slots:t,emit:n}){const r=Ie(),{$q:a}=r.proxy,o=_t(e,a),{tabindex:i,headerClass:s,getLocale:u,getCurrentDate:l}=Ux(e,a),c=ku(e),d=wo(c);let f,h;const v=Z(null),m=C(()=>fe()),p=C(()=>u()),y=C(()=>$()),x=Os(e.modelValue,m.value,p.value,e.calendar,y.value),b=Z(OR(x)),g=Z(x),w=Z(x.hour===null||x.hour<12),S=C(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(o.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),E=C(()=>{const he=g.value;return{hour:he.hour===null?"--":R.value===!0?Et(he.hour):String(w.value===!0?he.hour===0?12:he.hour:he.hour>12?he.hour-12:he.hour),minute:he.minute===null?"--":Et(he.minute),second:he.second===null?"--":Et(he.second)}}),R=C(()=>e.format24h!==null?e.format24h:a.lang.date.format24h),A=C(()=>{const he=b.value==="hour",Ee=he===!0?12:60,ce=g.value[b.value];let Pe=`rotate(${Math.round(ce*(360/Ee))-180}deg) translateX(-50%)`;return he===!0&&R.value===!0&&g.value.hour>=12&&(Pe+=" scale(.7)"),{transform:Pe}}),k=C(()=>g.value.hour!==null),M=C(()=>k.value===!0&&g.value.minute!==null),T=C(()=>e.hourOptions!==void 0?he=>e.hourOptions.includes(he):e.options!==void 0?he=>e.options(he,null,null):null),D=C(()=>e.minuteOptions!==void 0?he=>e.minuteOptions.includes(he):e.options!==void 0?he=>e.options(g.value.hour,he,null):null),I=C(()=>e.secondOptions!==void 0?he=>e.secondOptions.includes(he):e.options!==void 0?he=>e.options(g.value.hour,g.value.minute,he):null),F=C(()=>{if(T.value===null)return null;const he=N(0,11,T.value),Ee=N(12,11,T.value);return{am:he,pm:Ee,values:he.values.concat(Ee.values)}}),V=C(()=>D.value!==null?N(0,59,D.value):null),L=C(()=>I.value!==null?N(0,59,I.value):null),q=C(()=>{switch(b.value){case"hour":return F.value;case"minute":return V.value;case"second":return L.value}}),K=C(()=>{let he,Ee,ce=0,Te=1;const Pe=q.value!==null?q.value.values:void 0;b.value==="hour"?R.value===!0?(he=0,Ee=23):(he=0,Ee=11,w.value===!1&&(ce=12)):(he=0,Ee=55,Te=5);const Ze=[];for(let Ve=he,ut=he;Ve<=Ee;Ve+=Te,ut++){const It=Ve+ce,Xt=Pe?.includes(It)===!1,Nn=b.value==="hour"&&Ve===0?R.value===!0?"00":"12":Ve;Ze.push({val:It,index:ut,disable:Xt,label:Nn})}return Ze}),oe=C(()=>[[Tr,H,void 0,{stop:!0,prevent:!0,mouse:!0}]]);ke(()=>e.modelValue,he=>{const Ee=Os(he,m.value,p.value,e.calendar,y.value);(Ee.dateHash!==g.value.dateHash||Ee.timeHash!==g.value.timeHash)&&(g.value=Ee,Ee.hour===null?b.value="hour":w.value=Ee.hour<12)}),ke([m,p],()=>{mt(()=>{De()})});function W(){const he={...l(),...BR()};De(he),Object.assign(g.value,he),b.value="hour"}function N(he,Ee,ce){const Te=Array.apply(null,{length:Ee+1}).map((Pe,Ze)=>{const Ve=Ze+he;return{index:Ve,val:ce(Ve)===!0}}).filter(Pe=>Pe.val===!0).map(Pe=>Pe.index);return{min:Te[0],max:Te[Te.length-1],values:Te,threshold:Ee+1}}function Q(he,Ee,ce){const Te=Math.abs(he-Ee);return Math.min(Te,ce-Te)}function Y(he,{min:Ee,max:ce,values:Te,threshold:Pe}){if(he===Ee)return Ee;if(he<Ee||he>ce)return Q(he,Ee,Pe)<=Q(he,ce,Pe)?Ee:ce;const Ze=Te.findIndex(It=>he<=It),Ve=Te[Ze-1],ut=Te[Ze];return he-Ve<=ut-he?Ve:ut}function fe(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function $(){if(typeof e.defaultDate!="string"){const he=l(!0);return he.dateHash=Ca(he),he}return Os(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function O(){return lo(r)===!0||q.value!==null&&(q.value.values.length===0||b.value==="hour"&&R.value!==!0&&F.value[w.value===!0?"am":"pm"].values.length===0)}function ee(){const he=v.value,{top:Ee,left:ce,width:Te}=he.getBoundingClientRect(),Pe=Te/2;return{top:Ee+Pe,left:ce+Pe,dist:Pe*.7}}function H(he){if(O()!==!0){if(he.isFirst===!0){f=ee(),h=ye(he.evt,f);return}h=ye(he.evt,f,h),he.isFinal===!0&&(f=!1,h=null,ue())}}function ue(){b.value==="hour"?b.value="minute":e.withSeconds&&b.value==="minute"&&(b.value="second")}function ye(he,Ee,ce){const Te=Zn(he),Pe=Math.abs(Te.top-Ee.top),Ze=Math.sqrt(Math.pow(Math.abs(Te.top-Ee.top),2)+Math.pow(Math.abs(Te.left-Ee.left),2));let Ve,ut=Math.asin(Pe/Ze)*(180/Math.PI);if(Te.top<Ee.top?ut=Ee.left<Te.left?90-ut:270+ut:ut=Ee.left<Te.left?ut+90:270-ut,b.value==="hour"){if(Ve=ut/30,F.value!==null){const It=R.value!==!0?w.value===!0:F.value.am.values.length!==0&&F.value.pm.values.length!==0?Ze>=Ee.dist:F.value.am.values.length!==0;Ve=Y(Ve+(It===!0?0:12),F.value[It===!0?"am":"pm"])}else Ve=Math.round(Ve),R.value===!0?Ze<Ee.dist?Ve<12&&(Ve+=12):Ve===12&&(Ve=0):w.value===!0&&Ve===12?Ve=0:w.value===!1&&Ve!==12&&(Ve+=12);R.value===!0&&(w.value=Ve<12)}else Ve=Math.round(ut/6)%60,b.value==="minute"&&V.value!==null?Ve=Y(Ve,V.value):b.value==="second"&&L.value!==null&&(Ve=Y(Ve,L.value));return ce!==Ve&&X[b.value](Ve),Ve}const P={hour(){b.value="hour"},minute(){b.value="minute"},second(){b.value="second"}};function B(he){he.keyCode===13&&de()}function j(he){he.keyCode===13&&Re()}function ne(he){O()!==!0&&(a.platform.is.desktop!==!0&&ye(he,ee()),ue())}function se(he){O()!==!0&&ye(he,ee())}function J(he){if(he.keyCode===13)b.value="hour";else if([37,39].includes(he.keyCode)){const Ee=he.keyCode===37?-1:1;if(F.value!==null){const ce=R.value===!0?F.value.values:F.value[w.value===!0?"am":"pm"].values;if(ce.length===0)return;if(g.value.hour===null)xe(ce[0]);else{const Te=(ce.length+ce.indexOf(g.value.hour)+Ee)%ce.length;xe(ce[Te])}}else{const ce=R.value===!0?24:12,Te=R.value!==!0&&w.value===!1?12:0,Pe=g.value.hour===null?-Ee:g.value.hour;xe(Te+(24+Pe+Ee)%ce)}}}function me(he){if(he.keyCode===13)b.value="minute";else if([37,39].includes(he.keyCode)){const Ee=he.keyCode===37?-1:1;if(V.value!==null){const ce=V.value.values;if(ce.length===0)return;if(g.value.minute===null)pe(ce[0]);else{const Te=(ce.length+ce.indexOf(g.value.minute)+Ee)%ce.length;pe(ce[Te])}}else{const ce=g.value.minute===null?-Ee:g.value.minute;pe((60+ce+Ee)%60)}}}function ge(he){if(he.keyCode===13)b.value="second";else if([37,39].includes(he.keyCode)){const Ee=he.keyCode===37?-1:1;if(L.value!==null){const ce=L.value.values;if(ce.length===0)return;if(g.value.seconds===null)le(ce[0]);else{const Te=(ce.length+ce.indexOf(g.value.second)+Ee)%ce.length;le(ce[Te])}}else{const ce=g.value.second===null?-Ee:g.value.second;le((60+ce+Ee)%60)}}}function xe(he){g.value.hour!==he&&(g.value.hour=he,Me())}function pe(he){g.value.minute!==he&&(g.value.minute=he,Me())}function le(he){g.value.second!==he&&(g.value.second=he,Me())}const X={hour:xe,minute:pe,second:le};function de(){w.value===!1&&(w.value=!0,g.value.hour!==null&&(g.value.hour-=12,Me()))}function Re(){w.value===!0&&(w.value=!1,g.value.hour!==null&&(g.value.hour+=12,Me()))}function Fe(he){const Ee=e.modelValue;b.value!==he&&Ee!==void 0&&Ee!==null&&Ee!==""&&typeof Ee!="string"&&(b.value=he)}function Me(){if(T.value!==null&&T.value(g.value.hour)!==!0){g.value=Os(),Fe("hour");return}if(D.value!==null&&D.value(g.value.minute)!==!0){g.value.minute=null,g.value.second=null,Fe("minute");return}if(e.withSeconds===!0&&I.value!==null&&I.value(g.value.second)!==!0){g.value.second=null,Fe("second");return}g.value.hour===null||g.value.minute===null||e.withSeconds===!0&&g.value.second===null||De()}function De(he){const Ee=Object.assign({...g.value},he),ce=e.calendar==="persian"?Et(Ee.hour)+":"+Et(Ee.minute)+(e.withSeconds===!0?":"+Et(Ee.second):""):Qx(new Date(Ee.year,Ee.month===null?null:Ee.month-1,Ee.day,Ee.hour,Ee.minute,Ee.second,Ee.millisecond),m.value,p.value,Ee.year,Ee.timezoneOffset);Ee.changed=ce!==e.modelValue,n("update:modelValue",ce,Ee)}function et(){const he=[_("div",{class:"q-time__link "+(b.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:i.value,onClick:P.hour,onKeyup:J},E.value.hour),_("div",":"),_("div",k.value===!0?{class:"q-time__link "+(b.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:i.value,onKeyup:me,onClick:P.minute}:{class:"q-time__link"},E.value.minute)];e.withSeconds===!0&&he.push(_("div",":"),_("div",M.value===!0?{class:"q-time__link "+(b.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:i.value,onKeyup:ge,onClick:P.second}:{class:"q-time__link"},E.value.second));const Ee=[_("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},he)];return R.value===!1&&Ee.push(_("div",{class:"q-time__header-ampm column items-between no-wrap"},[_("div",{class:"q-time__link "+(w.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:i.value,onClick:de,onKeyup:B},"AM"),_("div",{class:"q-time__link "+(w.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:i.value,onClick:Re,onKeyup:j},"PM")])),_("div",{class:"q-time__header flex flex-center no-wrap "+s.value},Ee)}function tt(){const he=g.value[b.value];return _("div",{class:"q-time__content col relative-position"},[_(pn,{name:"q-transition--scale"},()=>_("div",{key:"clock"+b.value,class:"q-time__container-parent absolute-full"},[_("div",{ref:v,class:"q-time__container-child fit overflow-hidden"},[gr(_("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:ne,onMousedown:se},[_("div",{class:"q-time__clock-circle fit"},[_("div",{class:"q-time__clock-pointer"+(g.value[b.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:A.value}),K.value.map(Ee=>_("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${Ee.index}`+(Ee.val===he?" q-time__clock-position--active "+s.value:Ee.disable===!0?" q-time__clock-position--disable":"")},[_("span",Ee.label)]))])]),oe.value)])])),e.nowBtn===!0?_(Tt,{class:"q-time__now-button absolute",icon:a.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:i.value,onClick:W}):null])}return r.proxy.setNow=W,()=>{const he=[tt()],Ee=He(t.default);return Ee!==void 0&&he.push(_("div",{class:"q-time__actions"},Ee)),e.name!==void 0&&e.disable!==!0&&d(he,"push"),_("div",{class:S.value,tabindex:-1},[et(),_("div",{class:"q-time__main col overflow-auto"},he)])}}});Ce({name:"QTimeline",props:{...wt,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:t}){const n=Ie(),r=_t(e,n.proxy.$q);Er(zb,e);const a=C(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(r.value===!0?" q-timeline--dark":""));return()=>_("ul",{class:a.value},He(t.default))}});Ce({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:t}){const n=sn(zb,Rt);if(n===Rt)return console.error("QTimelineEntry needs to be child of QTimeline"),Rt;const r=C(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),a=C(()=>`q-timeline__dot text-${e.color||n.color}`),o=C(()=>n.layout==="comfortable"&&n.side==="left");return()=>{const i=Cu(t.default,[]);if(e.body!==void 0&&i.unshift(e.body),e.heading===!0){const l=[_("div"),_("div"),_(e.tag,{class:"q-timeline__heading-title"},i)];return _("div",{class:"q-timeline__heading"},o.value===!0?l.reverse():l)}let s;e.icon!==void 0?s=[_(Ct,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(s=[_("img",{class:"q-timeline__dot-img",src:e.avatar})]);const u=[_("div",{class:"q-timeline__subtitle"},[_("span",{},He(t.subtitle,[e.subtitle]))]),_("div",{class:a.value},s),_("div",{class:"q-timeline__content"},[_("h6",{class:"q-timeline__title"},He(t.title,[e.title]))].concat(i))];return _("li",{class:r.value},o.value===!0?u.reverse():u)}}});Ce({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:t}){const n=C(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>_("div",{class:n.value,role:"toolbar"},He(t.default))}});Ce({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:t}){const n=C(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>_("div",{class:n.value},He(t.default))}});var qR=["none","strict","leaf","leaf-filtered"];Ce({name:"QTree",props:{...wt,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>qR.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:{},noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(e,{slots:t,emit:n}){const{proxy:r}=Ie(),{$q:a}=r,o=_t(e,a),i=Z({}),s=Z(e.ticked||[]),u=Z(e.expanded||[]);let l={};fs(()=>{l={}});const c=C(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(o.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),d=C(()=>e.selected!==void 0),f=C(()=>e.icon||a.iconSet.tree.icon),h=C(()=>e.controlColor||e.color),v=C(()=>e.textColor!==void 0?` text-${e.textColor}`:""),m=C(()=>{const N=e.selectedColor||e.color;return N?` text-${N}`:""}),p=C(()=>e.filterMethod!==void 0?e.filterMethod:(N,Q)=>{const Y=Q.toLowerCase();return N[e.labelKey]&&N[e.labelKey].toLowerCase().indexOf(Y)!==-1}),y=C(()=>{const N={},Q=(Y,fe)=>{const $=Y.tickStrategy||(fe?fe.tickStrategy:e.tickStrategy),O=Y[e.nodeKey],ee=Y[e.childrenKey]&&Array.isArray(Y[e.childrenKey])&&Y[e.childrenKey].length!==0,H=Y.disabled!==!0&&d.value===!0&&Y.selectable!==!1,ue=Y.disabled!==!0&&Y.expandable!==!1,ye=$!=="none",P=$==="strict",B=$==="leaf-filtered",j=$==="leaf"||$==="leaf-filtered";let ne=Y.disabled!==!0&&Y.tickable!==!1;j===!0&&ne===!0&&fe&&fe.tickable!==!0&&(ne=!1);let se=Y.lazy;se===!0&&i.value[O]!==void 0&&Array.isArray(Y[e.childrenKey])===!0&&(se=i.value[O]);const J={key:O,parent:fe,isParent:ee,lazy:se,disabled:Y.disabled,link:Y.disabled!==!0&&(H===!0||ue===!0&&(ee===!0||se===!0)),children:[],matchesFilter:e.filter?p.value(Y,e.filter):!0,selected:O===e.selected&&H===!0,selectable:H,expanded:ee===!0?u.value.includes(O):!1,expandable:ue,noTick:Y.noTick===!0||P!==!0&&se&&se!=="loaded",tickable:ne,tickStrategy:$,hasTicking:ye,strictTicking:P,leafFilteredTicking:B,leafTicking:j,ticked:P===!0?s.value.includes(O):ee===!0?!1:s.value.includes(O)};if(N[O]=J,ee===!0&&(J.children=Y[e.childrenKey].map(me=>Q(me,J)),e.filter&&(J.matchesFilter!==!0?J.matchesFilter=J.children.some(me=>me.matchesFilter):J.noTick!==!0&&J.disabled!==!0&&J.tickable===!0&&B===!0&&J.children.every(me=>me.matchesFilter!==!0||me.noTick===!0||me.tickable!==!0)===!0&&(J.tickable=!1)),J.matchesFilter===!0&&(J.noTick!==!0&&P!==!0&&J.children.every(me=>me.noTick)===!0&&(J.noTick=!0),j))){if(J.ticked=!1,J.indeterminate=J.children.some(me=>me.indeterminate===!0),J.tickable=J.tickable===!0&&J.children.some(me=>me.tickable),J.indeterminate!==!0){const me=J.children.reduce((ge,xe)=>xe.ticked===!0?ge+1:ge,0);me===J.children.length?J.ticked=!0:me>0&&(J.indeterminate=!0)}J.indeterminate===!0&&(J.indeterminateNextState=J.children.every(me=>me.tickable!==!0||me.ticked!==!0))}return J};return e.nodes.forEach(Y=>Q(Y,null)),N});ke(()=>e.ticked,N=>{s.value=N}),ke(()=>e.expanded,N=>{u.value=N});function x(N){const Q=[].reduce,Y=(fe,$)=>{if(fe||!$)return fe;if(Array.isArray($)===!0)return Q.call(Object($),Y,fe);if($[e.nodeKey]===N)return $;if($[e.childrenKey])return Y(null,$[e.childrenKey])};return Y(null,e.nodes)}function b(){return s.value.map(N=>x(N))}function g(){return u.value.map(N=>x(N))}function w(N){return N&&y.value[N]?y.value[N].expanded:!1}function S(){e.expanded!==void 0?n("update:expanded",[]):u.value=[]}function E(){const N=[],Q=Y=>{Y[e.childrenKey]&&Y[e.childrenKey].length!==0&&Y.expandable!==!1&&Y.disabled!==!0&&(N.push(Y[e.nodeKey]),Y[e.childrenKey].forEach(Q))};e.nodes.forEach(Q),e.expanded!==void 0?n("update:expanded",N):u.value=N}function R(N,Q,Y=x(N),fe=y.value[N]){if(fe.lazy&&fe.lazy!=="loaded"){if(fe.lazy==="loading")return;i.value[N]="loading",Array.isArray(Y[e.childrenKey])!==!0&&(Y[e.childrenKey]=[]),n("lazyLoad",{node:Y,key:N,done:$=>{i.value[N]="loaded",Y[e.childrenKey]=Array.isArray($)===!0?$:[],mt(()=>{y.value[N]?.isParent===!0&&A(N,!0)})},fail:()=>{delete i.value[N],Y[e.childrenKey].length===0&&delete Y[e.childrenKey]}})}else fe.isParent===!0&&fe.expandable===!0&&A(N,Q)}function A(N,Q){let Y=u.value;const fe=e.expanded!==void 0;if(fe===!0&&(Y=Y.slice()),Q){if(e.accordion&&y.value[N]){const $=[];y.value[N].parent?y.value[N].parent.children.forEach(O=>{O.key!==N&&O.expandable===!0&&$.push(O.key)}):e.nodes.forEach(O=>{const ee=O[e.nodeKey];ee!==N&&$.push(ee)}),$.length!==0&&(Y=Y.filter(O=>$.includes(O)===!1))}Y=Y.concat([N]).filter(($,O,ee)=>ee.indexOf($)===O)}else Y=Y.filter($=>$!==N);fe===!0?n("update:expanded",Y):u.value=Y}function k(N){return N&&y.value[N]?y.value[N].ticked:!1}function M(N,Q){let Y=s.value;const fe=e.ticked!==void 0;fe===!0&&(Y=Y.slice()),Q?Y=Y.concat(N).filter(($,O,ee)=>ee.indexOf($)===O):Y=Y.filter($=>N.includes($)===!1),fe===!0&&n("update:ticked",Y)}function T(N,Q,Y){const fe={tree:r,node:N,key:Y,color:e.color,dark:o.value};return mn(fe,"expanded",()=>Q.expanded,$=>{$!==Q.expanded&&R(Y,$)}),mn(fe,"ticked",()=>Q.ticked,$=>{$!==Q.ticked&&M([Y],$)}),fe}function D(N){return(e.filter?N.filter(Q=>y.value[Q[e.nodeKey]].matchesFilter):N).map(Q=>L(Q))}function I(N){if(N.icon!==void 0)return _(Ct,{class:"q-tree__icon q-mr-sm",name:N.icon,color:N.iconColor});const Q=N.img||N.avatar;if(Q)return _("img",{class:`q-tree__${N.img?"img":"avatar"} q-mr-sm`,src:Q})}function F(){n("afterShow")}function V(){n("afterHide")}function L(N){const Q=N[e.nodeKey],Y=y.value[Q],fe=N.header&&t[`header-${N.header}`]||t["default-header"],$=Y.isParent===!0?D(N[e.childrenKey]):[],O=$.length!==0||Y.lazy&&Y.lazy!=="loaded";let ee=N.body&&t[`body-${N.body}`]||t["default-body"];const H=fe!==void 0||ee!==void 0?T(N,Y,Q):null;return ee!==void 0&&(ee=_("div",{class:"q-tree__node-body relative-position"},[_("div",{class:v.value},[ee(H)])])),_("div",{key:Q,class:`q-tree__node relative-position q-tree__node--${O===!0?"parent":"child"}`},[_("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(Y.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(Y.selected===!0?" q-tree__node--selected":"")+(Y.disabled===!0?" q-tree__node--disabled":""),tabindex:Y.link===!0?0:-1,ariaExpanded:$.length>0?Y.expanded:null,role:"treeitem",onClick:ue=>{K(N,Y,ue)},onKeypress(ue){ii(ue)!==!0&&(ue.keyCode===13?K(N,Y,ue,!0):ue.keyCode===32&&oe(N,Y,ue,!0))}},[_("div",{class:"q-focus-helper",tabindex:-1,ref:ue=>{l[Y.key]=ue}}),Y.lazy==="loading"?_(Wr,{class:"q-tree__spinner",color:h.value}):O===!0?_(Ct,{class:"q-tree__arrow"+(Y.expanded===!0?" q-tree__arrow--rotate":""),name:f.value,onClick(ue){oe(N,Y,ue)}}):null,Y.hasTicking===!0&&Y.noTick!==!0?_(Ks,{class:"q-tree__tickbox",modelValue:Y.indeterminate===!0?null:Y.ticked,color:h.value,dark:o.value,dense:!0,keepColor:!0,disable:Y.tickable!==!0,onKeydown:it,"onUpdate:modelValue":ue=>{W(Y,ue)}}):null,_("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(Y.selected===!0?m.value:v.value)},[fe?fe(H):[I(N),_("div",N[e.labelKey])]])]),O===!0?e.noTransition===!0?Y.expanded===!0?_("div",{class:"q-tree__node-collapsible"+v.value,key:`${Q}__q`},[ee,_("div",{class:"q-tree__children"+(Y.disabled===!0?" q-tree__node--disabled":""),role:"group"},$)]):null:_(Nv,{duration:e.duration,onShow:F,onHide:V},()=>gr(_("div",{class:"q-tree__node-collapsible"+v.value,key:`${Q}__q`},[ee,_("div",{class:"q-tree__children"+(Y.disabled===!0?" q-tree__node--disabled":""),role:"group"},$)]),[[Mb,Y.expanded]])):ee])}function q(N){l[N]?.focus()}function K(N,Q,Y,fe){fe!==!0&&Q.selectable!==!1&&q(Q.key),d.value&&Q.selectable?e.noSelectionUnset===!1?n("update:selected",Q.key!==e.selected?Q.key:null):Q.key!==e.selected&&n("update:selected",Q.key===void 0?null:Q.key):oe(N,Q,Y,fe),typeof N.handler=="function"&&N.handler(N)}function oe(N,Q,Y,fe){Y!==void 0&&it(Y),fe!==!0&&Q.selectable!==!1&&q(Q.key),R(Q.key,!Q.expanded,N,Q)}function W(N,Q){if(N.indeterminate===!0&&(Q=N.indeterminateNextState),N.strictTicking)M([N.key],Q);else if(N.leafTicking){const Y=[],fe=$=>{$.isParent?(Q!==!0&&$.noTick!==!0&&$.tickable===!0&&Y.push($.key),$.leafTicking===!0&&$.children.forEach(fe)):$.noTick!==!0&&$.tickable===!0&&($.leafFilteredTicking!==!0||$.matchesFilter===!0)&&Y.push($.key)};fe(N),M(Y,Q)}}return e.defaultExpandAll===!0&&E(),Object.assign(r,{getNodeByKey:x,getTickedNodes:b,getExpandedNodes:g,isExpanded:w,collapseAll:S,expandAll:E,setExpanded:R,isTicked:k,setTicked:M}),()=>{const N=D(e.nodes);return _("div",{class:c.value,role:"tree"},N.length===0?e.filter?e.noResultsLabel||a.lang.tree.noResults:e.noNodesLabel||a.lang.tree.noNodes:N)}}});function Lg(e){return(e*100).toFixed(2)+"%"}var LR={...wt,...u1,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,thumbnailFit:{type:String,default:"cover"},autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},R1=[...l1,"start","finish","added","removed"];function VR(e,t){const n=Ie(),{props:r,slots:a,emit:o,proxy:i}=n,{$q:s}=i,u=_t(r,s);function l(H,ue,ye){if(H.__status=ue,ue==="idle"){H.__uploaded=0,H.__progress=0,H.__sizeLabel=Zf(H.size),H.__progressLabel="0.00%";return}if(ue==="failed"){i.$forceUpdate();return}H.__uploaded=ue==="uploaded"?H.size:ye,H.__progress=ue==="uploaded"?1:Math.min(.9999,H.__uploaded/H.size),H.__progressLabel=Lg(H.__progress),i.$forceUpdate()}const c=C(()=>r.disable!==!0&&r.readonly!==!0),d=Z(!1),f=Z(null),h=Z(null),v={files:Z([]),queuedFiles:Z([]),uploadedFiles:Z([]),uploadedSize:Z(0),updateFileStatus:l,isAlive:()=>lo(n)===!1},{pickFiles:m,addFiles:p,onDragover:y,onDragleave:x,processFiles:b,getDndNode:g,maxFilesNumber:w,maxTotalSizeNumber:S}=c1({editable:c,dnd:d,getFileInput:W,addFilesToQueue:N});Object.assign(v,e({props:r,slots:a,emit:o,helpers:v,exposeApi:H=>{Object.assign(v,H)}})),v.isBusy===void 0&&(v.isBusy=Z(!1));const E=Z(0),R=C(()=>E.value===0?0:v.uploadedSize.value/E.value),A=C(()=>Lg(R.value)),k=C(()=>Zf(E.value)),M=C(()=>c.value===!0&&v.isUploading.value!==!0&&(r.multiple===!0||v.queuedFiles.value.length===0)&&(r.maxFiles===void 0||v.files.value.length<w.value)&&(r.maxTotalSize===void 0||E.value<S.value)),T=C(()=>c.value===!0&&v.isBusy.value!==!0&&v.isUploading.value!==!0&&v.queuedFiles.value.length!==0);Er(Gb,fe);const D=C(()=>"q-uploader column no-wrap"+(u.value===!0?" q-uploader--dark q-dark":"")+(r.bordered===!0?" q-uploader--bordered":"")+(r.square===!0?" q-uploader--square no-border-radius":"")+(r.flat===!0?" q-uploader--flat no-shadow":"")+(r.disable===!0?" disabled q-uploader--disable":"")+(d.value===!0?" q-uploader--dnd":"")),I=C(()=>"q-uploader__header"+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:""));ke(v.isUploading,(H,ue)=>{ue===!1&&H===!0?o("start"):ue===!0&&H===!1&&o("finish")});function F(){r.disable===!1&&(v.abort(),v.uploadedSize.value=0,E.value=0,oe(),v.files.value=[],v.queuedFiles.value=[],v.uploadedFiles.value=[])}function V(){r.disable===!1&&q(["uploaded"],()=>{v.uploadedFiles.value=[]})}function L(){q(["idle","failed"],({size:H})=>{E.value-=H,v.queuedFiles.value=[]})}function q(H,ue){if(r.disable===!0)return;const ye={files:[],size:0},P=v.files.value.filter(B=>H.indexOf(B.__status)===-1?!0:(ye.size+=B.size,ye.files.push(B),B.__img!==void 0&&window.URL.revokeObjectURL(B.__img.src),!1));ye.files.length!==0&&(v.files.value=P,ue(ye),o("removed",ye.files))}function K(H){r.disable||(H.__status==="uploaded"?v.uploadedFiles.value=v.uploadedFiles.value.filter(ue=>ue.__key!==H.__key):H.__status==="uploading"?H.__abort():E.value-=H.size,v.files.value=v.files.value.filter(ue=>ue.__key!==H.__key?!0:(ue.__img!==void 0&&window.URL.revokeObjectURL(ue.__img.src),!1)),v.queuedFiles.value=v.queuedFiles.value.filter(ue=>ue.__key!==H.__key),o("removed",[H]))}function oe(){v.files.value.forEach(H=>{H.__img!==void 0&&window.URL.revokeObjectURL(H.__img.src)})}function W(){return h.value||f.value.getElementsByClassName("q-uploader__input")[0]}function N(H,ue){const ye=b(H,ue,v.files.value,!0),P=W();P!=null&&(P.value=""),ye!==void 0&&(ye.forEach(B=>{if(v.updateFileStatus(B,"idle"),E.value+=B.size,r.noThumbnails!==!0&&B.type.toUpperCase().startsWith("IMAGE")){const j=new Image;j.src=window.URL.createObjectURL(B),B.__img=j}}),v.files.value=v.files.value.concat(ye),v.queuedFiles.value=v.queuedFiles.value.concat(ye),o("added",ye),r.autoUpload===!0&&v.upload())}function Q(){T.value===!0&&v.upload()}function Y(H,ue,ye){if(H===!0){const P={type:"a",key:ue,icon:s.iconSet.uploader[ue],flat:!0,dense:!0};let B;return ue==="add"?(P.onClick=m,B=fe):P.onClick=ye,_(Tt,P,B)}}function fe(){return _("input",{ref:h,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:r.accept,multiple:r.multiple===!0?"multiple":void 0,capture:r.capture,onMousedown:Gt,onClick:m,onChange:N})}function $(){return a.header!==void 0?a.header(ee):[_("div",{class:"q-uploader__header-content column"},[_("div",{class:"flex flex-center no-wrap q-gutter-xs"},[Y(v.queuedFiles.value.length!==0,"removeQueue",L),Y(v.uploadedFiles.value.length!==0,"removeUploaded",V),v.isUploading.value===!0?_(Wr,{class:"q-uploader__spinner"}):null,_("div",{class:"col column justify-center"},[r.label!==void 0?_("div",{class:"q-uploader__title"},[r.label]):null,_("div",{class:"q-uploader__subtitle"},[k.value+" / "+A.value])]),Y(M.value,"add"),Y(r.hideUploadBtn===!1&&T.value===!0,"upload",v.upload),Y(v.isUploading.value,"clear",v.abort)])])]}function O(){return a.list!==void 0?a.list(ee):v.files.value.map(H=>_("div",{key:H.__key,class:"q-uploader__file relative-position"+(r.noThumbnails!==!0&&H.__img!==void 0?" q-uploader__file--img":"")+(H.__status==="failed"?" q-uploader__file--failed":H.__status==="uploaded"?" q-uploader__file--uploaded":""),style:r.noThumbnails!==!0&&H.__img!==void 0?{backgroundImage:'url("'+H.__img.src+'")',backgroundSize:r.thumbnailFit}:null},[_("div",{class:"q-uploader__file-header row flex-center no-wrap"},[H.__status==="failed"?_(Ct,{class:"q-uploader__file-status",name:s.iconSet.type.negative,color:"negative"}):null,_("div",{class:"q-uploader__file-header-content col"},[_("div",{class:"q-uploader__title"},[H.name]),_("div",{class:"q-uploader__subtitle row items-center no-wrap"},[H.__sizeLabel+" / "+H.__progressLabel])]),H.__status==="uploading"?_(Mx,{value:H.__progress,min:0,max:1,indeterminate:H.__progress===0}):_(Tt,{round:!0,dense:!0,flat:!0,icon:s.iconSet.uploader[H.__status==="uploaded"?"done":"clear"],onClick:()=>{K(H)}})])]))}ft(()=>{v.isUploading.value===!0&&v.abort(),v.files.value.length!==0&&oe()});const ee={};for(const H in v)Fn(v[H])===!0?mn(ee,H,()=>v[H].value):ee[H]=v[H];return Object.assign(ee,{upload:Q,reset:F,removeUploadedFiles:V,removeQueuedFiles:L,removeFile:K,pickFiles:m,addFiles:p}),Fb(ee,{canAddFiles:()=>M.value,canUpload:()=>T.value,uploadSizeLabel:()=>k.value,uploadProgressLabel:()=>A.value}),t({...v,upload:Q,reset:F,removeUploadedFiles:V,removeQueuedFiles:L,removeFile:K,pickFiles:m,addFiles:p,canAddFiles:M,canUpload:T,uploadSizeLabel:k,uploadProgressLabel:A}),()=>{const H=[_("div",{class:I.value},$()),_("div",{class:"q-uploader__list scroll"},O()),g("uploader")];v.isBusy.value===!0&&H.push(_("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[_(Wr)]));const ue={ref:f,class:D.value};return M.value===!0&&Object.assign(ue,{onDragover:y,onDragleave:x}),_("div",ue,H)}}var zR=()=>!0;function A1(e){const t={};return e.forEach(n=>{t[n]=zR}),t}var $R=A1(R1),HR=({name:e,props:t,emits:n,injectPlugin:r})=>Ce({name:e,props:{...LR,...t},emits:kn(n)===!0?{...$R,...n}:[...R1,...n],setup(a,{expose:o}){return VR(r,o)}});function xa(e){return typeof e=="function"?e:()=>e}var WR="QUploader",UR={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},jR=["factoryFailed","uploaded","failed","uploading"];function GR({props:e,emit:t,helpers:n}){const r=Z([]),a=Z([]),o=Z(0),i=C(()=>({url:xa(e.url),method:xa(e.method),headers:xa(e.headers),formFields:xa(e.formFields),fieldName:xa(e.fieldName),withCredentials:xa(e.withCredentials),sendRaw:xa(e.sendRaw),batch:xa(e.batch)})),s=C(()=>o.value>0),u=C(()=>a.value.length!==0);let l;function c(){r.value.forEach(v=>{v.abort()}),a.value.length!==0&&(l=!0)}function d(){const v=n.queuedFiles.value.slice(0);n.queuedFiles.value=[],i.value.batch(v)?f(v):v.forEach(m=>{f([m])})}function f(v){if(o.value++,typeof e.factory!="function"){h(v,{});return}const m=e.factory(v);if(!m)t("factoryFailed",new Error("QUploader: factory() does not return properly"),v),o.value--;else if(typeof m.catch=="function"&&typeof m.then=="function"){a.value.push(m);const p=y=>{n.isAlive()===!0&&(a.value=a.value.filter(x=>x!==m),a.value.length===0&&(l=!1),n.queuedFiles.value=n.queuedFiles.value.concat(v),v.forEach(x=>{n.updateFileStatus(x,"failed")}),t("factoryFailed",y,v),o.value--)};m.then(y=>{l===!0?p(new Error("Aborted")):n.isAlive()===!0&&(a.value=a.value.filter(x=>x!==m),h(v,y))}).catch(p)}else h(v,m||{})}function h(v,m){const p=new FormData,y=new XMLHttpRequest,x=(T,D)=>m[T]!==void 0?xa(m[T])(D):i.value[T](D),b=x("url",v);if(!b){console.error("q-uploader: invalid or no URL specified"),o.value--;return}const g=x("formFields",v);g!==void 0&&g.forEach(T=>{p.append(T.name,T.value)});let w=0,S=0,E=0,R=0,A;y.upload.addEventListener("progress",T=>{if(A===!0)return;const D=Math.min(R,T.loaded);n.uploadedSize.value+=D-E,E=D;let I=E-S;for(let F=w;I>0&&F<v.length;F++){const V=v[F];if(I>V.size)I-=V.size,w++,S+=V.size,n.updateFileStatus(V,"uploading",V.size);else{n.updateFileStatus(V,"uploading",I);return}}},!1),y.onreadystatechange=()=>{y.readyState<4||(y.status&&y.status<400?(n.uploadedFiles.value=n.uploadedFiles.value.concat(v),v.forEach(T=>{n.updateFileStatus(T,"uploaded")}),t("uploaded",{files:v,xhr:y})):(A=!0,n.uploadedSize.value-=E,n.queuedFiles.value=n.queuedFiles.value.concat(v),v.forEach(T=>{n.updateFileStatus(T,"failed")}),t("failed",{files:v,xhr:y})),o.value--,r.value=r.value.filter(T=>T!==y))},y.open(x("method",v),b),x("withCredentials",v)===!0&&(y.withCredentials=!0);const k=x("headers",v);k!==void 0&&k.forEach(T=>{y.setRequestHeader(T.name,T.value)});const M=x("sendRaw",v);v.forEach(T=>{n.updateFileStatus(T,"uploading",0),M!==!0&&p.append(x("fieldName",T),T,T.name),T.xhr=y,T.__abort=()=>{y.abort()},R+=T.size}),t("uploading",{files:v,xhr:y}),r.value.push(y),M===!0?y.send(new Blob(v)):y.send(p)}return{isUploading:s,isBusy:u,abort:c,upload:d}}var KR={name:WR,props:UR,emits:jR,injectPlugin:GR};HR(KR);Ce({name:"QUploaderAddTrigger",setup(){const e=sn(Gb,Rt);return e===Rt&&console.error("QUploaderAddTrigger needs to be child of QUploader"),e}});Ce({name:"QVideo",props:{...Ov,src:{type:String,required:!0},title:String,fetchpriority:{type:String,default:"auto"},loading:{type:String,default:"eager"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin"}},setup(e){const t=Bv(e),n=C(()=>"q-video"+(e.ratio!==void 0?" q-video--responsive":""));return()=>_("div",{class:n.value,style:t.value},[_("iframe",{src:e.src,title:e.title,fetchpriority:e.fetchpriority,loading:e.loading,referrerpolicy:e.referrerpolicy,frameborder:"0",allowfullscreen:!0})])}});function Vg(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}jr({name:"close-popup",beforeMount(e,{value:t}){const n={depth:Vg(t),handler(r){n.depth!==0&&setTimeout(()=>{const a=Xk(e);a!==void 0&&Qk(a,r,n.depth)})},handlerKey(r){Ar(r,13)===!0&&n.handler(r)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=Vg(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});var XR=0,Ts=void 0;function zg(e,t){Ts===void 0&&(Ts=document.createElement("div"),Ts.style.cssText="position: absolute; left: 0; top: 0",document.body.appendChild(Ts));const n=e.getBoundingClientRect(),r=Ts.getBoundingClientRect(),{marginLeft:a,marginRight:o,marginTop:i,marginBottom:s}=window.getComputedStyle(e),u=parseInt(a,10)+parseInt(o,10),l=parseInt(i,10)+parseInt(s,10);return{left:n.left-r.left,top:n.top-r.top,width:n.right-n.left,height:n.bottom-n.top,widthM:n.right-n.left+(t===!0?0:u),heightM:n.bottom-n.top+(t===!0?0:l),marginH:t===!0?u:0,marginV:t===!0?l:0}}function tl(e){return{width:e.scrollWidth,height:e.scrollHeight}}var $g=["Top","Right","Bottom","Left"],Hg=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],QR=/-block|-inline|block-|inline-/,YR=/(-block|-inline|block-|inline-).*:/;function Wg(e,t){const n=window.getComputedStyle(e),r={};for(let a=0;a<t.length;a++){const o=t[a];if(n[o]==="")if(o==="cssText"){const i=n.length;let s="";for(let u=0;u<i;u++)QR.test(n[u])!==!0&&(s+=n[u]+": "+n[n[u]]+"; ");r[o]=s}else if(["borderWidth","borderStyle","borderColor"].indexOf(o)!==-1){const i=o.replace("border","");let s="";for(let u=0;u<$g.length;u++){const l="border"+$g[u]+i;s+=n[l]+" "}r[o]=s}else if(o==="borderRadius"){let i="",s="";for(let u=0;u<Hg.length;u++){const l=n[Hg[u]].split(" ");i+=l[0]+" ",s+=(l[1]===void 0?l[0]:l[1])+" "}r[o]=i+"/ "+s}else r[o]=n[o];else o==="cssText"?r[o]=n[o].split(";").filter(i=>YR.test(i)!==!0).join(";"):r[o]=n[o]}return r}var JR=["absolute","fixed","relative","sticky"];function Ug(e){let t=e,n=0;for(;t!==null&&t!==document;){const{position:r,zIndex:a}=window.getComputedStyle(t),o=Number(a);o>n&&(t===e||JR.includes(r)===!0)&&(n=o),t=t.parentNode}return n}function ZR(e){return{from:e.from,to:e.to!==void 0?e.to:e.from}}function eA(e){return typeof e=="number"?e={duration:e}:typeof e=="function"&&(e={onEnd:e}),{...e,waitFor:e.waitFor===void 0?0:e.waitFor,duration:isNaN(e.duration)===!0?300:parseInt(e.duration,10),easing:typeof e.easing=="string"&&e.easing.length!==0?e.easing:"ease-in-out",delay:isNaN(e.delay)===!0?0:parseInt(e.delay,10),fill:typeof e.fill=="string"&&e.fill.length!==0?e.fill:"none",resize:e.resize===!0,useCSS:e.useCSS===!0||e.usecss===!0,hideFromClone:e.hideFromClone===!0||e.hidefromclone===!0,keepToClone:e.keepToClone===!0||e.keeptoclone===!0,tween:e.tween===!0,tweenFromOpacity:isNaN(e.tweenFromOpacity)===!0?.6:parseFloat(e.tweenFromOpacity),tweenToOpacity:isNaN(e.tweenToOpacity)===!0?.5:parseFloat(e.tweenToOpacity)}}function jg(e){const t=typeof e;return t==="function"?e():t==="string"?document.querySelector(e):e}function Gg(e){return e&&e.ownerDocument===document&&e.parentNode!==null}function tA(e){let t=()=>!1,n=!1,r=!0;const a=ZR(e),o=eA(e),i=jg(a.from);if(Gg(i)!==!0)return t;typeof i.qMorphCancel=="function"&&i.qMorphCancel();let s,u,l,c;const d=i.parentNode,f=i.nextElementSibling,h=zg(i,o.resize),{width:v,height:m}=tl(d),{borderWidth:p,borderStyle:y,borderColor:x,borderRadius:b,backgroundColor:g,transform:w,position:S,cssText:E}=Wg(i,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),R=i.classList.toString(),A=i.style.cssText,k=i.cloneNode(!0),M=o.tween===!0?i.cloneNode(!0):void 0;M!==void 0&&(M.className=M.classList.toString().split(" ").filter(D=>/^bg-/.test(D)===!1).join(" ")),o.hideFromClone===!0&&k.classList.add("q-morph--internal"),k.setAttribute("aria-hidden","true"),k.style.transition="none",k.style.animation="none",k.style.pointerEvents="none",d.insertBefore(k,f),i.qMorphCancel=()=>{n=!0,k.remove(),M?.remove(),o.hideFromClone===!0&&k.classList.remove("q-morph--internal"),i.qMorphCancel=void 0};const T=()=>{const D=jg(a.to);if(n===!0||Gg(D)!==!0){typeof i.qMorphCancel=="function"&&i.qMorphCancel();return}i!==D&&typeof D.qMorphCancel=="function"&&D.qMorphCancel(),o.keepToClone!==!0&&D.classList.add("q-morph--internal"),k.classList.add("q-morph--internal");const{width:I,height:F}=tl(d),{width:V,height:L}=tl(D.parentNode);o.hideFromClone!==!0&&k.classList.remove("q-morph--internal"),D.qMorphCancel=()=>{n=!0,k.remove(),M?.remove(),o.hideFromClone===!0&&k.classList.remove("q-morph--internal"),o.keepToClone!==!0&&D.classList.remove("q-morph--internal"),i.qMorphCancel=void 0,D.qMorphCancel=void 0};const q=()=>{if(n===!0){typeof D.qMorphCancel=="function"&&D.qMorphCancel();return}o.hideFromClone!==!0&&(k.classList.add("q-morph--internal"),k.innerHTML="",k.style.left=0,k.style.right="unset",k.style.top=0,k.style.bottom="unset",k.style.transform="none"),o.keepToClone!==!0&&D.classList.remove("q-morph--internal");const K=D.parentNode,{width:oe,height:W}=tl(K),N=D.cloneNode(o.keepToClone);N.setAttribute("aria-hidden","true"),o.keepToClone!==!0&&(N.style.left=0,N.style.right="unset",N.style.top=0,N.style.bottom="unset",N.style.transform="none",N.style.pointerEvents="none"),N.classList.add("q-morph--internal");const Q=D===i&&d===K?k:D.nextElementSibling;K.insertBefore(N,Q);const{borderWidth:Y,borderStyle:fe,borderColor:$,borderRadius:O,backgroundColor:ee,transform:H,position:ue,cssText:ye}=Wg(D,["borderWidth","borderStyle","borderColor","borderRadius","backgroundColor","transform","position","cssText"]),P=D.classList.toString(),B=D.style.cssText;D.style.cssText=ye,D.style.transform="none",D.style.animation="none",D.style.transition="none",D.className=P.split(" ").filter(Te=>/^bg-/.test(Te)===!1).join(" ");const j=zg(D,o.resize),ne=h.left-j.left,se=h.top-j.top,J=h.width/(j.width>0?j.width:10),me=h.height/(j.height>0?j.height:100),ge=v-I,xe=m-F,pe=oe-V,le=W-L,X=Math.max(h.widthM,ge),de=Math.max(h.heightM,xe),Re=Math.max(j.widthM,pe),Fe=Math.max(j.heightM,le),Me=i===D&&["absolute","fixed"].includes(ue)===!1&&["absolute","fixed"].includes(S)===!1;let De=ue==="fixed",et=K;for(;De!==!0&&et!==document;)De=window.getComputedStyle(et).position==="fixed",et=et.parentNode;if(o.hideFromClone!==!0&&(k.style.display="block",k.style.flex="0 0 auto",k.style.opacity=0,k.style.minWidth="unset",k.style.maxWidth="unset",k.style.minHeight="unset",k.style.maxHeight="unset",k.classList.remove("q-morph--internal")),o.keepToClone!==!0&&(N.style.display="block",N.style.flex="0 0 auto",N.style.opacity=0,N.style.minWidth="unset",N.style.maxWidth="unset",N.style.minHeight="unset",N.style.maxHeight="unset"),N.classList.remove("q-morph--internal"),typeof o.classes=="string"&&(D.className+=" "+o.classes),typeof o.style=="string")D.style.cssText+=" "+o.style;else if(kn(o.style)===!0)for(const Te in o.style)D.style[Te]=o.style[Te];const tt=Ug(k),he=Ug(D),Ee=De===!0?document.documentElement:{scrollLeft:0,scrollTop:0};D.style.position=De===!0?"fixed":"absolute",D.style.left=`${j.left-Ee.scrollLeft}px`,D.style.right="unset",D.style.top=`${j.top-Ee.scrollTop}px`,D.style.margin=0,o.resize===!0&&(D.style.minWidth="unset",D.style.maxWidth="unset",D.style.minHeight="unset",D.style.maxHeight="unset",D.style.overflow="hidden",D.style.overflowX="hidden",D.style.overflowY="hidden"),document.body.appendChild(D),M!==void 0&&(M.style.cssText=E,M.style.transform="none",M.style.animation="none",M.style.transition="none",M.style.position=D.style.position,M.style.left=`${h.left-Ee.scrollLeft}px`,M.style.right="unset",M.style.top=`${h.top-Ee.scrollTop}px`,M.style.margin=0,M.style.pointerEvents="none",o.resize===!0&&(M.style.minWidth="unset",M.style.maxWidth="unset",M.style.minHeight="unset",M.style.maxHeight="unset",M.style.overflow="hidden",M.style.overflowX="hidden",M.style.overflowY="hidden"),document.body.appendChild(M));const ce=Te=>{i===D&&r!==!0?(D.style.cssText=A,D.className=R):(D.style.cssText=B,D.className=P),N.parentNode===K&&K.insertBefore(D,N),k.remove(),N.remove(),M?.remove(),t=()=>!1,i.qMorphCancel=void 0,D.qMorphCancel=void 0,typeof o.onEnd=="function"&&o.onEnd(r===!0?"to":"from",Te===!0)};if(o.useCSS!==!0&&typeof D.animate=="function"){const Te=o.resize===!0?{transform:`translate(${ne}px, ${se}px)`,width:`${X}px`,height:`${de}px`}:{transform:`translate(${ne}px, ${se}px) scale(${J}, ${me})`},Pe=o.resize===!0?{width:`${Re}px`,height:`${Fe}px`}:{},Ze=o.resize===!0?{width:`${X}px`,height:`${de}px`}:{},Ve=o.resize===!0?{transform:`translate(${-1*ne}px, ${-1*se}px)`,width:`${Re}px`,height:`${Fe}px`}:{transform:`translate(${-1*ne}px, ${-1*se}px) scale(${1/J}, ${1/me})`},ut=M!==void 0?{opacity:o.tweenToOpacity}:{backgroundColor:g},It=M!==void 0?{opacity:1}:{backgroundColor:ee};c=D.animate([{margin:0,borderWidth:p,borderStyle:y,borderColor:x,borderRadius:b,zIndex:tt,transformOrigin:"0 0",...Te,...ut},{margin:0,borderWidth:Y,borderStyle:fe,borderColor:$,borderRadius:O,zIndex:he,transformOrigin:"0 0",transform:H,...Pe,...It}],{duration:o.duration,easing:o.easing,fill:o.fill,delay:o.delay}),u=M===void 0?void 0:M.animate([{opacity:o.tweenFromOpacity,margin:0,borderWidth:p,borderStyle:y,borderColor:x,borderRadius:b,zIndex:tt,transformOrigin:"0 0",transform:w,...Ze},{opacity:0,margin:0,borderWidth:Y,borderStyle:fe,borderColor:$,borderRadius:O,zIndex:he,transformOrigin:"0 0",...Ve}],{duration:o.duration,easing:o.easing,fill:o.fill,delay:o.delay}),s=o.hideFromClone===!0||Me===!0?void 0:k.animate([{margin:`${xe<0?xe/2:0}px ${ge<0?ge/2:0}px`,width:`${X+h.marginH}px`,height:`${de+h.marginV}px`},{margin:0,width:0,height:0}],{duration:o.duration,easing:o.easing,fill:o.fill,delay:o.delay}),l=o.keepToClone===!0?void 0:N.animate([Me===!0?{margin:`${xe<0?xe/2:0}px ${ge<0?ge/2:0}px`,width:`${X+h.marginH}px`,height:`${de+h.marginV}px`}:{margin:0,width:0,height:0},{margin:`${le<0?le/2:0}px ${pe<0?pe/2:0}px`,width:`${Re+j.marginH}px`,height:`${Fe+j.marginV}px`}],{duration:o.duration,easing:o.easing,fill:o.fill,delay:o.delay});const Xt=Nn=>{s?.cancel(),u?.cancel(),l?.cancel(),c.cancel(),c.removeEventListener("finish",Xt),c.removeEventListener("cancel",Xt),ce(Nn),s=void 0,u=void 0,l=void 0,c=void 0};i.qMorphCancel=()=>{i.qMorphCancel=void 0,n=!0,Xt()},D.qMorphCancel=()=>{D.qMorphCancel=void 0,n=!0,Xt()},c.addEventListener("finish",Xt),c.addEventListener("cancel",Xt),t=Nn=>n===!0||c===void 0?!1:Nn===!0?(Xt(!0),!0):(r=r!==!0,s?.reverse(),u?.reverse(),l?.reverse(),c.reverse(),!0)}else{const Te=`q-morph-anim-${++XR}`,Pe=document.createElement("style"),Ze=o.resize===!0?`
            transform: translate(${ne}px, ${se}px);
            width: ${X}px;
            height: ${de}px;
          `:`transform: translate(${ne}px, ${se}px) scale(${J}, ${me});`,Ve=o.resize===!0?`
            width: ${Re}px;
            height: ${Fe}px;
          `:"",ut=o.resize===!0?`
            width: ${X}px;
            height: ${de}px;
          `:"",It=o.resize===!0?`
            transform: translate(${-1*ne}px, ${-1*se}px);
            width: ${Re}px;
            height: ${Fe}px;
          `:`transform: translate(${-1*ne}px, ${-1*se}px) scale(${1/J}, ${1/me});`,Xt=M!==void 0?`opacity: ${o.tweenToOpacity};`:`background-color: ${g};`,Nn=M!==void 0?"opacity: 1;":`background-color: ${ee};`,ja=M===void 0?"":`
            @keyframes ${Te}-from-tween {
              0% {
                opacity: ${o.tweenFromOpacity};
                margin: 0;
                border-width: ${p};
                border-style: ${y};
                border-color: ${x};
                border-radius: ${b};
                z-index: ${tt};
                transform-origin: 0 0;
                transform: ${w};
                ${ut}
              }

              100% {
                opacity: 0;
                margin: 0;
                border-width: ${Y};
                border-style: ${fe};
                border-color: ${$};
                border-radius: ${O};
                z-index: ${he};
                transform-origin: 0 0;
                ${It}
              }
            }
          `,sr=o.hideFromClone===!0||Me===!0?"":`
            @keyframes ${Te}-from {
              0% {
                margin: ${xe<0?xe/2:0}px ${ge<0?ge/2:0}px;
                width: ${X+h.marginH}px;
                height: ${de+h.marginV}px;
              }

              100% {
                margin: 0;
                width: 0;
                height: 0;
              }
            }
          `,ma=Me===!0?`
            margin: ${xe<0?xe/2:0}px ${ge<0?ge/2:0}px;
            width: ${X+h.marginH}px;
            height: ${de+h.marginV}px;
          `:`
            margin: 0;
            width: 0;
            height: 0;
          `,we=o.keepToClone===!0?"":`
            @keyframes ${Te}-to {
              0% {
                ${ma}
              }

              100% {
                margin: ${le<0?le/2:0}px ${pe<0?pe/2:0}px;
                width: ${Re+j.marginH}px;
                height: ${Fe+j.marginV}px;
              }
            }
          `;Pe.innerHTML=`
          @keyframes ${Te} {
            0% {
              margin: 0;
              border-width: ${p};
              border-style: ${y};
              border-color: ${x};
              border-radius: ${b};
              background-color: ${g};
              z-index: ${tt};
              transform-origin: 0 0;
              ${Ze}
              ${Xt}
            }

            100% {
              margin: 0;
              border-width: ${Y};
              border-style: ${fe};
              border-color: ${$};
              border-radius: ${O};
              background-color: ${ee};
              z-index: ${he};
              transform-origin: 0 0;
              transform: ${H};
              ${Ve}
              ${Nn}
            }
          }

          ${sr}

          ${ja}

          ${we}
        `,document.head.appendChild(Pe);let Ne="normal";k.style.animation=`${o.duration}ms ${o.easing} ${o.delay}ms ${Ne} ${o.fill} ${Te}-from`,M!==void 0&&(M.style.animation=`${o.duration}ms ${o.easing} ${o.delay}ms ${Ne} ${o.fill} ${Te}-from-tween`),N.style.animation=`${o.duration}ms ${o.easing} ${o.delay}ms ${Ne} ${o.fill} ${Te}-to`,D.style.animation=`${o.duration}ms ${o.easing} ${o.delay}ms ${Ne} ${o.fill} ${Te}`;const Xe=Ge=>{Ge===Object(Ge)&&Ge.animationName!==Te||(D.removeEventListener("animationend",Xe),D.removeEventListener("animationcancel",Xe),ce(),Pe.remove())};i.qMorphCancel=()=>{i.qMorphCancel=void 0,n=!0,Xe()},D.qMorphCancel=()=>{D.qMorphCancel=void 0,n=!0,Xe()},D.addEventListener("animationend",Xe),D.addEventListener("animationcancel",Xe),t=Ge=>n===!0||!D||!k||!N?!1:Ge===!0?(Xe(),!0):(r=r!==!0,Ne=Ne==="normal"?"reverse":"normal",k.style.animationDirection=Ne,M.style.animationDirection=Ne,N.style.animationDirection=Ne,D.style.animationDirection=Ne,!0)}};o.waitFor>0||o.waitFor==="transitionend"||o.waitFor===Object(o.waitFor)&&typeof o.waitFor.then=="function"?(o.waitFor>0?new Promise(oe=>setTimeout(oe,o.waitFor)):o.waitFor==="transitionend"?new Promise(oe=>{const W=()=>{N!==null&&(clearTimeout(N),N=null),D&&(D.removeEventListener("transitionend",W),D.removeEventListener("transitioncancel",W)),oe()};let N=setTimeout(W,400);D.addEventListener("transitionend",W),D.addEventListener("transitioncancel",W)}):o.waitFor).then(q).catch(()=>{typeof D.qMorphCancel=="function"&&D.qMorphCancel()}):q()};return typeof e.onToggle=="function"&&e.onToggle(),requestAnimationFrame(T),D=>t(D)}var Yl={},nA=["duration","delay","easing","fill","classes","style","duration","resize","useCSS","hideFromClone","keepToClone","tween","tweenFromOpacity","tweenToOpacity","waitFor","onEnd"],rA=["resize","useCSS","hideFromClone","keepToClone","tween"];function Ni(e,t){e.clsAction!==t&&(e.clsAction=t,e.el.classList[t]("q-morph--invisible"))}function I1(e){if(e.animating===!0||e.queue.length<2)return;const[t,n]=e.queue;e.animating=!0,t.animating=!0,n.animating=!0,Ni(t,"remove"),Ni(n,"remove");const r=tA({from:t.el,to:n.el,onToggle(){Ni(t,"add"),Ni(n,"remove")},...n.opts,onEnd(a,o){n.opts.onEnd?.(a,o),o!==!0&&(t.animating=!1,n.animating=!1,e.animating=!1,e.cancel=void 0,e.queue.shift(),I1(e))}});e.cancel=()=>{r(!0),e.cancel=void 0}}function M1(e,t){const n=t.opts;rA.forEach(r=>{n[r]=e[r]===!0})}function aA(e,t){const n=typeof e=="string"&&e.length!==0?e.split(":"):[];t.name=n[0],t.group=n[1],Object.assign(t.opts,{duration:isNaN(n[2])===!0?300:parseFloat(n[2]),waitFor:n[3]})}function oA(e,t){e.group!==void 0&&(t.group=e.group),e.name!==void 0&&(t.name=e.name);const n=t.opts;nA.forEach(r=>{e[r]!==void 0&&(n[r]=e[r])})}function iA(e,t){if(t.name===e){const n=Yl[t.group];n===void 0?(Yl[t.group]={name:t.group,model:e,queue:[t],animating:!1},Ni(t,"remove")):n.model!==e&&(n.model=e,n.queue.push(t),n.animating===!1&&n.queue.length===2&&I1(n));return}t.animating===!1&&Ni(t,"add")}function Kg(e,t){let n;Object(t)===t?(n=""+t.model,oA(t,e),M1(t,e)):n=""+t,n!==e.model?(e.model=n,iA(n,e)):e.animating===!1&&e.clsAction!==void 0&&e.el.classList[e.clsAction]("q-morph--invisible")}jr({name:"morph",mounted(e,t){const n={el:e,animating:!1,opts:{}};M1(t.modifiers,n),aA(t.arg,n),Kg(n,t.value),e.__qmorph=n},updated(e,t){Kg(e.__qmorph,t.value)},beforeUnmount(e){const t=e.__qmorph,n=Yl[t.group];n!==void 0&&n.queue.indexOf(t)!==-1&&(n.queue=n.queue.filter(a=>a!==t),n.queue.length===0&&(n.cancel?.(),delete Yl[t.group])),t.clsAction==="add"&&e.classList.remove("q-morph--invisible"),delete e.__qmorph}});var sA={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0};function Xg(e,t,n){t.handler=n,t.observer?.disconnect(),t.observer=new MutationObserver(r=>{typeof t.handler=="function"&&(t.handler(r)===!1||t.once===!0)&&D1(e)}),t.observer.observe(e,t.opts)}function D1(e){const t=e.__qmutation;t!==void 0&&(t.observer?.disconnect(),delete e.__qmutation)}jr({name:"mutation",mounted(e,{modifiers:{once:t,...n},value:r}){const a={once:t,opts:Object.keys(n).length===0?sA:n};Xg(e,a,r),e.__qmutation=a},updated(e,{oldValue:t,value:n}){const r=e.__qmutation;r!==void 0&&t!==n&&Xg(e,r,n)},beforeUnmount:D1});var{passive:Jl}=Ot;function Qg(e,{value:t,oldValue:n}){if(typeof t!="function"){e.scrollTarget.removeEventListener("scroll",e.scroll,Jl);return}e.handler=t,typeof n!="function"&&(e.scrollTarget.addEventListener("scroll",e.scroll,Jl),e.scroll())}jr({name:"scroll-fire",mounted(e,t){const n={scrollTarget:da(e),scroll:hs(()=>{let r,a;n.scrollTarget===window?(a=e.getBoundingClientRect().bottom,r=window.innerHeight):(a=Vl(e).top+as(e),r=Vl(n.scrollTarget).top+as(n.scrollTarget)),a>0&&a<r&&(n.scrollTarget.removeEventListener("scroll",n.scroll,Jl),n.handler(e))},25)};Qg(n,t),e.__qscrollfire=n},updated(e,t){t.value!==t.oldValue&&Qg(e.__qscrollfire,t)},beforeUnmount(e){const t=e.__qscrollfire;t.scrollTarget.removeEventListener("scroll",t.scroll,Jl),t.scroll.cancel(),delete e.__qscrollfire}});function Yg(e,{value:t,oldValue:n}){if(typeof t!="function"){e.scrollTarget.removeEventListener("scroll",e.scroll,Ot.passive);return}e.handler=t,typeof n!="function"&&e.scrollTarget.addEventListener("scroll",e.scroll,Ot.passive)}jr({name:"scroll",mounted(e,t){const n={scrollTarget:da(e),scroll(){n.handler(co(n.scrollTarget),zc(n.scrollTarget))}};Yg(n,t),e.__qscroll=n},updated(e,t){e.__qscroll!==void 0&&t.oldValue!==t.value&&Yg(e.__qscroll,t)},beforeUnmount(e){const t=e.__qscroll;t.scrollTarget.removeEventListener("scroll",t.scroll,Ot.passive),delete e.__qscroll}});jr({name:"touch-hold",beforeMount(e,t){const{modifiers:n}=t;if(n.mouse!==!0&&nt.has.touch!==!0)return;const r={handler:t.value,noop:Kt,mouseStart(o){typeof r.handler=="function"&&Oc(o)===!0&&(Qt(r,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),r.start(o,!0))},touchStart(o){if(o.target!==void 0&&typeof r.handler=="function"){const i=o.target;Qt(r,"temp",[[i,"touchmove","move","passiveCapture"],[i,"touchcancel","end","notPassiveCapture"],[i,"touchend","end","notPassiveCapture"]]),r.start(o)}},start(o,i){r.origin=Zn(o);const s=Date.now();nt.is.mobile===!0&&(document.body.classList.add("non-selectable"),Vr(),r.styleCleanup=u=>{r.styleCleanup=void 0;const l=()=>{document.body.classList.remove("non-selectable")};u===!0?(Vr(),setTimeout(l,10)):l()}),r.triggered=!1,r.sensitivity=i===!0?r.mouseSensitivity:r.touchSensitivity,r.timer=setTimeout(()=>{r.timer=void 0,Vr(),r.triggered=!0,r.handler({evt:o,touch:i!==!0,mouse:i===!0,position:r.origin,duration:Date.now()-s})},r.duration)},move(o){const{top:i,left:s}=Zn(o);r.timer!==void 0&&(Math.abs(s-r.origin.left)>=r.sensitivity||Math.abs(i-r.origin.top)>=r.sensitivity)&&(clearTimeout(r.timer),r.timer=void 0)},end(o){Kn(r,"temp"),r.styleCleanup?.(r.triggered),r.triggered===!0?o!==void 0&&it(o):r.timer!==void 0&&(clearTimeout(r.timer),r.timer=void 0)}},a=[600,5,7];if(typeof t.arg=="string"&&t.arg.length!==0&&t.arg.split(":").forEach((o,i)=>{const s=parseInt(o,10);s&&(a[i]=s)}),[r.duration,r.touchSensitivity,r.mouseSensitivity]=a,e.__qtouchhold=r,n.mouse===!0){const o=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";Qt(r,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}nt.has.touch===!0&&Qt(r,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchend","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchhold;n!==void 0&&t.oldValue!==t.value&&(typeof t.value!="function"&&n.end(),n.handler=t.value)},beforeUnmount(e){const t=e.__qtouchhold;t!==void 0&&(Kn(t,"main"),Kn(t,"temp"),t.timer!==void 0&&clearTimeout(t.timer),t.styleCleanup?.(),delete e.__qtouchhold)}});var P1={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},uA=new RegExp(`^([\\d+]+|${Object.keys(P1).join("|")})$`,"i");function lA(e,t){const{top:n,left:r}=Zn(e);return Math.abs(r-t.left)>=7||Math.abs(n-t.top)>=7}jr({name:"touch-repeat",beforeMount(e,{modifiers:t,value:n,arg:r}){const a=Object.keys(t).reduce((u,l)=>{if(uA.test(l)===!0){const c=isNaN(parseInt(l,10))?P1[l.toLowerCase()]:parseInt(l,10);c>=0&&u.push(c)}return u},[]);if(t.mouse!==!0&&nt.has.touch!==!0&&a.length===0)return;const o=typeof r=="string"&&r.length!==0?r.split(":").map(u=>parseInt(u,10)):[0,600,300],i=o.length-1,s={keyboard:a,handler:n,noop:Kt,mouseStart(u){s.event===void 0&&typeof s.handler=="function"&&Oc(u)===!0&&(Qt(s,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),s.start(u,!0))},keyboardStart(u){if(typeof s.handler=="function"&&Ar(u,a)===!0){if((o[0]===0||s.event!==void 0)&&(it(u),e.focus(),s.event!==void 0))return;Qt(s,"temp",[[document,"keyup","end","notPassiveCapture"],[document,"click","end","notPassiveCapture"]]),s.start(u,!1,!0)}},touchStart(u){if(u.target!==void 0&&typeof s.handler=="function"){const l=u.target;Qt(s,"temp",[[l,"touchmove","move","passiveCapture"],[l,"touchcancel","end","notPassiveCapture"],[l,"touchend","end","notPassiveCapture"]]),s.start(u)}},start(u,l,c){c!==!0&&(s.origin=Zn(u));function d(h){s.styleCleanup=void 0,document.documentElement.style.cursor="";const v=()=>{document.body.classList.remove("non-selectable")};h===!0?(Vr(),setTimeout(v,10)):v()}nt.is.mobile===!0&&(document.body.classList.add("non-selectable"),Vr(),s.styleCleanup=d),s.event={touch:l!==!0&&c!==!0,mouse:l===!0,keyboard:c===!0,startTime:Date.now(),repeatCount:0};const f=()=>{if(s.timer=void 0,s.event===void 0)return;s.event.repeatCount===0&&(s.event.evt=u,c===!0?s.event.keyCode=u.keyCode:s.event.position=Zn(u),nt.is.mobile!==!0&&(document.documentElement.style.cursor="pointer",document.body.classList.add("non-selectable"),Vr(),s.styleCleanup=d)),s.event.duration=Date.now()-s.event.startTime,s.event.repeatCount+=1,s.handler(s.event);const h=i<s.event.repeatCount?i:s.event.repeatCount;s.timer=setTimeout(f,o[h])};o[0]===0?f():s.timer=setTimeout(f,o[0])},move(u){s.event!==void 0&&s.timer!==void 0&&lA(u,s.origin)===!0&&(clearTimeout(s.timer),s.timer=void 0)},end(u){s.event!==void 0&&(s.styleCleanup?.(!0),u!==void 0&&s.event.repeatCount>0&&it(u),Kn(s,"temp"),s.timer!==void 0&&(clearTimeout(s.timer),s.timer=void 0),s.event=void 0)}};if(e.__qtouchrepeat=s,t.mouse===!0){const u=t.mouseCapture===!0||t.mousecapture===!0?"Capture":"";Qt(s,"main",[[e,"mousedown","mouseStart",`passive${u}`]])}if(nt.has.touch===!0&&Qt(s,"main",[[e,"touchstart","touchStart",`passive${t.capture===!0?"Capture":""}`],[e,"touchend","noop","passiveCapture"]]),a.length!==0){const u=t.keyCapture===!0||t.keycapture===!0?"Capture":"";Qt(s,"main",[[e,"keydown","keyboardStart",`notPassive${u}`]])}},updated(e,{oldValue:t,value:n}){const r=e.__qtouchrepeat;r!==void 0&&t!==n&&(typeof n!="function"&&r.end(),r.handler=n)},beforeUnmount(e){const t=e.__qtouchrepeat;t!==void 0&&(t.timer!==void 0&&clearTimeout(t.timer),Kn(t,"main"),Kn(t,"temp"),t.styleCleanup?.(),delete e.__qtouchrepeat)}});function cA(e,t=document.body){if(!(t instanceof Element))throw new TypeError("Expected a DOM element");return getComputedStyle(t).getPropertyValue(`--q-${e}`).trim()||null}var nl;function dA(){return nt.is.winphone?"msapplication-navbutton-color":"theme-color"}function fA(e){const t=document.getElementsByTagName("META");for(const n in t)if(t[n].name===e)return t[n]}function hA(e){nl===void 0&&(nl=dA());let t=fA(nl);const n=t===void 0;n&&(t=document.createElement("meta"),t.setAttribute("name",nl)),t.setAttribute("content",e),n&&document.head.appendChild(t)}nt.is.mobile===!0&&(nt.is.nativeMobile===!0||nt.is.winphone===!0||nt.is.safari===!0||nt.is.webkit===!0||nt.is.vivaldi);var Rs={};function vA(e){Object.assign(Bn,{request:e,exit:e,toggle:e})}function F1(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||null}function N1(){const e=Bn.activeEl=Bn.isActive===!1?null:F1();Kk(e===null||e===document.documentElement?document.body:e)}function pA(){Bn.isActive=Bn.isActive===!1,N1()}function Jg(e,t){try{const n=e[t]();return n===void 0?Promise.resolve():n}catch(n){return Promise.reject(n)}}var Bn=xo({isActive:!1,activeEl:null},{isCapable:!1,install({$q:e}){e.fullscreen=this}});Rs.request=["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"].find(e=>document.documentElement[e]!==void 0),Bn.isCapable=Rs.request!==void 0,Bn.isCapable===!1?vA(()=>Promise.reject("Not capable")):(Object.assign(Bn,{request(e){const t=e||document.documentElement,{activeEl:n}=Bn;return t===n?Promise.resolve():(n!==null&&t.contains(n)===!0?Bn.exit():Promise.resolve()).finally(()=>Jg(t,Rs.request))},exit(){return Bn.isActive===!0?Jg(document,Rs.exit):Promise.resolve()},toggle(e){return Bn.isActive===!0?Bn.exit():Bn.request(e)}}),Rs.exit=["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"].find(e=>document[e]),Bn.isActive=!!F1(),Bn.isActive===!0&&N1(),["onfullscreenchange","onmsfullscreenchange","onwebkitfullscreenchange"].forEach(e=>{document[e]=pA}));var mA=xo({appVisible:!0},{install({$q:e}){mn(e,"appVisible",()=>this.appVisible)}});{let e,t;if(typeof document.hidden<"u"?(e="hidden",t="visibilitychange"):typeof document.msHidden<"u"?(e="msHidden",t="msvisibilitychange"):typeof document.webkitHidden<"u"&&(e="webkitHidden",t="webkitvisibilitychange"),t&&typeof document[e]<"u"){const n=()=>{mA.appVisible=!document[e]};document.addEventListener(t,n,!1)}}Ce({name:"BottomSheetComponent",props:{...wt,title:String,message:String,actions:Array,grid:Boolean,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(e,{emit:t}){const{proxy:n}=Ie(),r=_t(e,n.$q),a=Z(null);function o(){a.value.show()}function i(){a.value.hide()}function s(h){t("ok",h),i()}function u(){t("hide")}function l(){return e.actions.map(h=>{const v=h.avatar||h.img;return h.label===void 0?_(ti,{class:"col-all",dark:r.value}):_("div",{class:["q-bottom-sheet__item q-hoverable q-focusable cursor-pointer relative-position",h.class],style:h.style,tabindex:0,role:"listitem",onClick(){s(h)},onKeyup(m){m.keyCode===13&&s(h)}},[_("div",{class:"q-focus-helper"}),h.icon?_(Ct,{name:h.icon,color:h.color}):v?_("img",{class:h.avatar?"q-bottom-sheet__avatar":"",src:v}):_("div",{class:"q-bottom-sheet__empty-icon"}),_("div",h.label)])})}function c(){return e.actions.map(h=>{const v=h.avatar||h.img;return h.label===void 0?_(ti,{spaced:!0,dark:r.value}):_(Uc,{class:["q-bottom-sheet__item",h.classes],style:h.style,tabindex:0,clickable:!0,dark:r.value,onClick(){s(h)}},()=>[_(fo,{avatar:!0},()=>h.icon?_(Ct,{name:h.icon,color:h.color}):v?_("img",{class:h.avatar?"q-bottom-sheet__avatar":"",src:v}):null),_(fo,()=>h.label)])})}function d(){const h=[];return e.title&&h.push(_(qo,{class:"q-dialog__title"},()=>e.title)),e.message&&h.push(_(qo,{class:"q-dialog__message"},()=>e.message)),h.push(e.grid===!0?_("div",{class:"row items-stretch justify-start",role:"list"},l()):_("div",{role:"list"},c())),h}function f(){return[_(_x,{class:[`q-bottom-sheet q-bottom-sheet--${e.grid===!0?"grid":"list"}`+(r.value===!0?" q-bottom-sheet--dark q-dark":""),e.cardClass],style:e.cardStyle},d)]}return Object.assign(n,{show:o,hide:i}),()=>_(Wc,{ref:a,position:"bottom",onHide:u},f)}});function O1(e){return encodeURIComponent(e)}function B1(e){return decodeURIComponent(e)}function gA(e){return O1(e===Object(e)?JSON.stringify(e):""+e)}function yA(e){if(e==="")return e;e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),e=B1(e.replace(/\+/g," "));try{const t=JSON.parse(e);(t===Object(t)||Array.isArray(t)===!0)&&(e=t)}catch{}return e}function q1(e){const t=new Date;return t.setMilliseconds(t.getMilliseconds()+e),t.toUTCString()}function bA(e){let t=0;const n=e.match(/(\d+)d/),r=e.match(/(\d+)h/),a=e.match(/(\d+)m/),o=e.match(/(\d+)s/);return n&&(t+=n[1]*864e5),r&&(t+=r[1]*36e5),a&&(t+=a[1]*6e4),o&&(t+=o[1]*1e3),t===0?e:q1(t)}function L1(e,t,n={},r){let a,o;n.expires!==void 0&&(Object.prototype.toString.call(n.expires)==="[object Date]"?a=n.expires.toUTCString():typeof n.expires=="string"?a=bA(n.expires):(o=parseFloat(n.expires),a=isNaN(o)===!1?q1(o*864e5):n.expires));const i=`${O1(e)}=${gA(t)}`,s=[i,a!==void 0?"; Expires="+a:"",n.path?"; Path="+n.path:"",n.domain?"; Domain="+n.domain:"",n.sameSite?"; SameSite="+n.sameSite:"",n.httpOnly?"; HttpOnly":"",n.secure?"; Secure":"",n.other?"; "+n.other:""].join("");if(r){r.req.qCookies?r.req.qCookies.push(s):r.req.qCookies=[s],r.res.setHeader("Set-Cookie",r.req.qCookies);let u=r.req.headers.cookie||"";if(a!==void 0&&o<0){const l=Zl(e,r);l!==void 0&&(u=u.replace(`${e}=${l}; `,"").replace(`; ${e}=${l}`,"").replace(`${e}=${l}`,""))}else u=u?`${i}; ${u}`:s;r.req.headers.cookie=u}else document.cookie=s}function Zl(e,t){const n=t?t.req.headers:document,r=n.cookie?n.cookie.split("; "):[],a=r.length;let o=e?null:{},i=0,s,u,l;for(;i<a;i++)if(s=r[i].split("="),u=B1(s.shift()),l=s.join("="),!e)o[u]=l;else if(e===u){o=yA(l);break}return o}function xA(e,t,n){L1(e,"",{expires:-1,...t},n)}function wA(e,t){return Zl(e,t)!==null}function V1(e){return{get:t=>Zl(t,e),set:(t,n,r)=>L1(t,n,r,e),has:t=>wA(t,e),remove:(t,n)=>xA(t,n,e),getAll:()=>Zl(null,e)}}var z1={install({$q:e,ssrContext:t}){e.cookies=this}};__QUASAR_SSR__&&(z1.parseSSR=e=>{if(e!==void 0)return V1(e)});Object.assign(z1,V1());Ce({name:"DialogPluginComponent",props:{...wt,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:e=>["ok","cancel","none"].includes(e)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(e,{emit:t}){const{proxy:n}=Ie(),{$q:r}=n,a=_t(e,r),o=Z(null),i=Z(e.prompt!==void 0?e.prompt.model:e.options!==void 0?e.options.model:void 0),s=C(()=>"q-dialog-plugin"+(a.value===!0?" q-dialog-plugin--dark q-dark":"")+(e.progress!==!1?" q-dialog-plugin--progress":"")),u=C(()=>e.color||(a.value===!0?"amber":"primary")),l=C(()=>e.progress===!1?null:kn(e.progress)===!0?{component:e.progress.spinner||Wr,props:{color:e.progress.color||u.value}}:{component:Wr,props:{color:u.value}}),c=C(()=>e.prompt!==void 0||e.options!==void 0),d=C(()=>{if(c.value!==!0)return{};const{model:I,isValid:F,items:V,...L}=e.prompt!==void 0?e.prompt:e.options;return L}),f=C(()=>kn(e.ok)===!0||e.ok===!0?r.lang.label.ok:e.ok),h=C(()=>kn(e.cancel)===!0||e.cancel===!0?r.lang.label.cancel:e.cancel),v=C(()=>e.prompt!==void 0?e.prompt.isValid!==void 0&&e.prompt.isValid(i.value)!==!0:e.options!==void 0?e.options.isValid!==void 0&&e.options.isValid(i.value)!==!0:!1),m=C(()=>({color:u.value,label:f.value,ripple:!1,disable:v.value,...kn(e.ok)===!0?e.ok:{flat:!0},"data-autofocus":e.focus==="ok"&&c.value!==!0||void 0,onClick:b})),p=C(()=>({color:u.value,label:h.value,ripple:!1,...kn(e.cancel)===!0?e.cancel:{flat:!0},"data-autofocus":e.focus==="cancel"&&c.value!==!0||void 0,onClick:g}));ke(()=>e.prompt&&e.prompt.model,S),ke(()=>e.options&&e.options.model,S);function y(){o.value.show()}function x(){o.value.hide()}function b(){t("ok",pt(i.value)),x()}function g(){x()}function w(){t("hide")}function S(I){i.value=I}function E(I){v.value!==!0&&e.prompt.type!=="textarea"&&Ar(I,13)===!0&&b()}function R(I,F){return e.html===!0?_(qo,{class:I,innerHTML:F}):_(qo,{class:I},()=>F)}function A(){return[_(p1,{color:u.value,dense:!0,autofocus:!0,dark:a.value,...d.value,modelValue:i.value,"onUpdate:modelValue":S,onKeyup:E})]}function k(){return[_(FT,{color:u.value,options:e.options.items,dark:a.value,...d.value,modelValue:i.value,"onUpdate:modelValue":S})]}function M(){const I=[];return e.cancel&&I.push(_(Tt,p.value)),e.ok&&I.push(_(Tt,m.value)),_(fE,{class:e.stackButtons===!0?"items-end":"",vertical:e.stackButtons,align:"right"},()=>I)}function T(){const I=[];return e.title&&I.push(R("q-dialog__title",e.title)),e.progress!==!1&&I.push(_(qo,{class:"q-dialog__progress"},()=>_(l.value.component,l.value.props))),e.message&&I.push(R("q-dialog__message",e.message)),e.prompt!==void 0?I.push(_(qo,{class:"scroll q-dialog-plugin__form"},A)):e.options!==void 0&&I.push(_(ti,{dark:a.value}),_(qo,{class:"scroll q-dialog-plugin__form"},k),_(ti,{dark:a.value})),(e.ok||e.cancel)&&I.push(M()),I}function D(){return[_(_x,{class:[s.value,e.cardClass],style:e.cardStyle,dark:a.value},T)]}return Object.assign(n,{show:y,hide:x}),()=>_(Wc,{ref:o,onHide:w},D)}});var Ci,tf,Zg=0,Do=null,Cn={},zo={},$1={group:"__default_quasar_group__",delay:0,message:!1,html:!1,spinnerSize:80,spinnerColor:"",messageColor:"",backgroundColor:"",boxClass:"",spinner:Wr,customClass:""},H1={...$1};function _A(e){if(e?.group!==void 0&&zo[e.group]!==void 0)return Object.assign(zo[e.group],e);const t=kn(e)===!0&&e.ignoreDefaults===!0?{...$1,...e}:{...H1,...e};return zo[t.group]=t,t}var Xr=xo({isActive:!1},{show(e){Cn=_A(e);const{group:t}=Cn;return Xr.isActive=!0,Ci!==void 0?(Cn.uid=Zg,tf.$forceUpdate()):(Cn.uid=++Zg,Do!==null&&clearTimeout(Do),Do=setTimeout(()=>{Do=null;const n=bv("q-loading");Ci=Xb({name:"QLoading",setup(){Nt(()=>{uh(!0)});function r(){Xr.isActive!==!0&&Ci!==void 0&&(uh(!1),Ci.unmount(n),fx(n),Ci=void 0,tf=void 0)}function a(){if(Xr.isActive!==!0)return null;const o=[_(Cn.spinner,{class:"q-loading__spinner",color:Cn.spinnerColor,size:Cn.spinnerSize})];return Cn.message&&o.push(_("div",{class:"q-loading__message"+(Cn.messageColor?` text-${Cn.messageColor}`:""),[Cn.html===!0?"innerHTML":"textContent"]:Cn.message})),_("div",{class:"q-loading fullscreen flex flex-center z-max "+Cn.customClass.trim(),key:Cn.uid},[_("div",{class:"q-loading__backdrop"+(Cn.backgroundColor?` bg-${Cn.backgroundColor}`:"")}),_("div",{class:"q-loading__box column items-center "+Cn.boxClass},o)])}return()=>_(pn,{name:"q-transition--fade",appear:!0,onAfterLeave:r},a)}},Xr.__parentApp),tf=Ci.mount(n)},Cn.delay)),n=>{if(n===void 0||Object(n)!==n){Xr.hide(t);return}Xr.show({...n,group:t})}},hide(e){if(Xr.isActive===!0){if(e===void 0)zo={};else{if(zo[e]===void 0)return;{delete zo[e];const t=Object.keys(zo);if(t.length!==0){const n=t[t.length-1];Xr.show({group:n});return}}}Do!==null&&(clearTimeout(Do),Do=null),Xr.isActive=!1}},setDefaults(e){kn(e)===!0&&Object.assign(H1,e)},install({$q:e,parentApp:t}){e.loading=this,Xr.__parentApp=t,e.config.loading!==void 0&&this.setDefaults(e.config.loading)}}),rl=Z(null),e0=xo({isActive:!1},{start:Kt,stop:Kt,increment:Kt,setDefaults:Kt,install({$q:e,parentApp:t}){if(e.loadingBar=this,this.__installed===!0){e.config.loadingBar!==void 0&&this.setDefaults(e.config.loadingBar);return}const n=Z(e.config.loadingBar!==void 0?{...e.config.loadingBar}:{});function r(){e0.isActive=!0}function a(){e0.isActive=!1}const o=bv("q-loading-bar");Xb({name:"LoadingBar",devtools:{hide:!0},setup:()=>()=>_(kk,{...n.value,onStart:r,onStop:a,ref:rl})},t).mount(o),Object.assign(this,{start(i){rl.value.start(i)},stop(){rl.value.stop()},increment(){rl.value.increment.apply(null,arguments)},setDefaults(i){kn(i)===!0&&Object.assign(n.value,i)}})}});function CA(e){return Jf(e)===!0?"__q_date|"+e.getTime():gk(e)===!0?"__q_expr|"+e.source:typeof e=="number"?"__q_numb|"+e:typeof e=="boolean"?"__q_bool|"+(e?"1":"0"):typeof e=="string"?"__q_strn|"+e:typeof e=="function"?"__q_strn|"+e.toString():e===Object(e)?"__q_objt|"+JSON.stringify(e):e}function SA(e){if(e.length<9)return e;const n=e.substring(0,8),r=e.substring(9);switch(n){case"__q_date":const a=Number(r);return new Date(Number.isNaN(a)===!0?r:a);case"__q_expr":return new RegExp(r);case"__q_numb":return Number(r);case"__q_bool":return r==="1";case"__q_strn":return""+r;case"__q_objt":return JSON.parse(r);default:return e}}function W1(){const e=()=>null;return{has:()=>!1,hasItem:()=>!1,getLength:()=>0,getItem:e,getIndex:e,getKey:e,getAll:()=>{},getAllKeys:()=>[],set:Kt,setItem:Kt,remove:Kt,removeItem:Kt,clear:Kt,isEmpty:()=>!0}}function U1(e){const t=window[e+"Storage"],n=i=>{const s=t.getItem(i);return s?SA(s):null},r=i=>t.getItem(i)!==null,a=(i,s)=>{t.setItem(i,CA(s))},o=i=>{t.removeItem(i)};return{has:r,hasItem:r,getLength:()=>t.length,getItem:n,getIndex:i=>i<t.length?n(t.key(i)):null,getKey:i=>i<t.length?t.key(i):null,getAll:()=>{let i;const s={},u=t.length;for(let l=0;l<u;l++)i=t.key(l),s[i]=n(i);return s},getAllKeys:()=>{const i=[],s=t.length;for(let u=0;u<s;u++)i.push(t.key(u));return i},set:a,setItem:a,remove:o,removeItem:o,clear:()=>{t.clear()},isEmpty:()=>t.length===0}}var j1=nt.has.webStorage===!1?W1():U1("local"),kA={install({$q:e}){e.localStorage=j1}};Object.assign(kA,j1);var G1=nt.has.webStorage===!1?W1():U1("session"),EA={install({$q:e}){e.sessionStorage=G1}};Object.assign(EA,G1);var TA=["ok","hide"];A1(TA);var RA={version:"2.18.6",install:bk,lang:Bc,iconSet:Vb};const Ii=typeof document<"u";function K1(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function AA(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&K1(e.default)}const Mt=Object.assign;function nf(e,t){const n={};for(const r in t){const a=t[r];n[r]=Ur(a)?a.map(e):e(a)}return n}const Qs=()=>{},Ur=Array.isArray;function t0(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}const X1=/#/g,IA=/&/g,MA=/\//g,DA=/=/g,PA=/\?/g,Q1=/\+/g,FA=/%5B/g,NA=/%5D/g,Y1=/%5E/g,OA=/%60/g,J1=/%7B/g,BA=/%7C/g,Z1=/%7D/g,qA=/%20/g;function qv(e){return e==null?"":encodeURI(""+e).replace(BA,"|").replace(FA,"[").replace(NA,"]")}function LA(e){return qv(e).replace(J1,"{").replace(Z1,"}").replace(Y1,"^")}function hh(e){return qv(e).replace(Q1,"%2B").replace(qA,"+").replace(X1,"%23").replace(IA,"%26").replace(OA,"`").replace(J1,"{").replace(Z1,"}").replace(Y1,"^")}function VA(e){return hh(e).replace(DA,"%3D")}function zA(e){return qv(e).replace(X1,"%23").replace(PA,"%3F")}function $A(e){return zA(e).replace(MA,"%2F")}function fu(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const HA=/\/$/,WA=e=>e.replace(HA,"");function rf(e,t,n="/"){let r,a={},o="",i="";const s=t.indexOf("#");let u=t.indexOf("?");return u=s>=0&&u>s?-1:u,u>=0&&(r=t.slice(0,u),o=t.slice(u,s>0?s:t.length),a=e(o.slice(1))),s>=0&&(r=r||t.slice(0,s),i=t.slice(s,t.length)),r=KA(r??t,n),{fullPath:r+o+i,path:r,query:a,hash:fu(i)}}function UA(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function n0(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function jA(e,t,n){const r=t.matched.length-1,a=n.matched.length-1;return r>-1&&r===a&&is(t.matched[r],n.matched[a])&&ew(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function is(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ew(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!GA(e[n],t[n]))return!1;return!0}function GA(e,t){return Ur(e)?r0(e,t):Ur(t)?r0(t,e):e===t}function r0(e,t){return Ur(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function KA(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),a=r[r.length-1];(a===".."||a===".")&&r.push("");let o=n.length-1,i,s;for(i=0;i<r.length;i++)if(s=r[i],s!==".")if(s==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(i).join("/")}const Qa={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let vh=(function(e){return e.pop="pop",e.push="push",e})({}),af=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function XA(e){if(!e)if(Ii){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),WA(e)}const QA=/^[^#]+#/;function YA(e,t){return e.replace(QA,"#")+t}function JA(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Qc=()=>({left:window.scrollX,top:window.scrollY});function ZA(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;t=JA(a,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function a0(e,t){return(history.state?history.state.position-t:-1)+e}const ph=new Map;function eI(e,t){ph.set(e,t)}function tI(e){const t=ph.get(e);return ph.delete(e),t}function nI(e){return typeof e=="string"||e&&typeof e=="object"}function tw(e){return typeof e=="string"||typeof e=="symbol"}let on=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const nw=Symbol("");on.MATCHER_NOT_FOUND+"",on.NAVIGATION_GUARD_REDIRECT+"",on.NAVIGATION_ABORTED+"",on.NAVIGATION_CANCELLED+"",on.NAVIGATION_DUPLICATED+"";function ss(e,t){return Mt(new Error,{type:e,[nw]:!0},t)}function wa(e,t){return e instanceof Error&&nw in e&&(t==null||!!(e.type&t))}const rI=["params","query","hash"];function aI(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of rI)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function oI(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const a=n[r].replace(Q1," "),o=a.indexOf("="),i=fu(o<0?a:a.slice(0,o)),s=o<0?null:fu(a.slice(o+1));if(i in t){let u=t[i];Ur(u)||(u=t[i]=[u]),u.push(s)}else t[i]=s}return t}function o0(e){let t="";for(let n in e){const r=e[n];if(n=VA(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Ur(r)?r.map(a=>a&&hh(a)):[r&&hh(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function iI(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Ur(r)?r.map(a=>a==null?null:""+a):r==null?r:""+r)}return t}const sI=Symbol(""),i0=Symbol(""),Lv=Symbol(""),rw=Symbol(""),mh=Symbol("");function As(){let e=[];function t(r){return e.push(r),()=>{const a=e.indexOf(r);a>-1&&e.splice(a,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function ro(e,t,n,r,a,o=i=>i()){const i=r&&(r.enterCallbacks[a]=r.enterCallbacks[a]||[]);return()=>new Promise((s,u)=>{const l=f=>{f===!1?u(ss(on.NAVIGATION_ABORTED,{from:n,to:t})):f instanceof Error?u(f):nI(f)?u(ss(on.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(i&&r.enterCallbacks[a]===i&&typeof f=="function"&&i.push(f),s())},c=o(()=>e.call(r&&r.instances[a],t,n,l));let d=Promise.resolve(c);e.length<3&&(d=d.then(l)),d.catch(f=>u(f))})}function of(e,t,n,r,a=o=>o()){const o=[];for(const i of e)for(const s in i.components){let u=i.components[s];if(!(t!=="beforeRouteEnter"&&!i.instances[s]))if(K1(u)){const l=(u.__vccOpts||u)[t];l&&o.push(ro(l,n,r,i,s,a))}else{let l=u();o.push(()=>l.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${s}" at "${i.path}"`);const d=AA(c)?c.default:c;i.mods[s]=c,i.components[s]=d;const f=(d.__vccOpts||d)[t];return f&&ro(f,n,r,i,s,a)()}))}}return o}function uI(e,t){const n=[],r=[],a=[],o=Math.max(t.matched.length,e.matched.length);for(let i=0;i<o;i++){const s=t.matched[i];s&&(e.matched.find(l=>is(l,s))?r.push(s):n.push(s));const u=e.matched[i];u&&(t.matched.find(l=>is(l,u))||a.push(u))}return[n,r,a]}let lI=()=>location.protocol+"//"+location.host;function aw(e,t){const{pathname:n,search:r,hash:a}=t,o=e.indexOf("#");if(o>-1){let i=a.includes(e.slice(o))?e.slice(o).length:1,s=a.slice(i);return s[0]!=="/"&&(s="/"+s),n0(s,"")}return n0(n,e)+r+a}function cI(e,t,n,r){let a=[],o=[],i=null;const s=({state:f})=>{const h=aw(e,location),v=n.value,m=t.value;let p=0;if(f){if(n.value=h,t.value=f,i&&i===v){i=null;return}p=m?f.position-m.position:0}else r(h);a.forEach(y=>{y(n.value,v,{delta:p,type:vh.pop,direction:p?p>0?af.forward:af.back:af.unknown})})};function u(){i=n.value}function l(f){a.push(f);const h=()=>{const v=a.indexOf(f);v>-1&&a.splice(v,1)};return o.push(h),h}function c(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(Mt({},f.state,{scroll:Qc()}),"")}}function d(){for(const f of o)f();o=[],window.removeEventListener("popstate",s),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",s),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:u,listen:l,destroy:d}}function s0(e,t,n,r=!1,a=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:a?Qc():null}}function dI(e){const{history:t,location:n}=window,r={value:aw(e,n)},a={value:t.state};a.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(u,l,c){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+u:lI()+e+u;try{t[c?"replaceState":"pushState"](l,"",f),a.value=l}catch(h){console.error(h),n[c?"replace":"assign"](f)}}function i(u,l){o(u,Mt({},t.state,s0(a.value.back,u,a.value.forward,!0),l,{position:a.value.position}),!0),r.value=u}function s(u,l){const c=Mt({},a.value,t.state,{forward:u,scroll:Qc()});o(c.current,c,!0),o(u,Mt({},s0(r.value,u,null),{position:c.position+1},l),!1),r.value=u}return{location:r,state:a,push:s,replace:i}}function fI(e){e=XA(e);const t=dI(e),n=cI(e,t.state,t.location,t.replace);function r(o,i=!0){i||n.pauseListeners(),history.go(o)}const a=Mt({location:"",base:e,go:r,createHref:YA.bind(null,e)},t,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}let $o=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var fn=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(fn||{});const hI={type:$o.Static,value:""},vI=/[a-zA-Z0-9_]/;function pI(e){if(!e)return[[]];if(e==="/")return[[hI]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${l}": ${h}`)}let n=fn.Static,r=n;const a=[];let o;function i(){o&&a.push(o),o=[]}let s=0,u,l="",c="";function d(){l&&(n===fn.Static?o.push({type:$o.Static,value:l}):n===fn.Param||n===fn.ParamRegExp||n===fn.ParamRegExpEnd?(o.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),o.push({type:$o.Param,value:l,regexp:c,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),l="")}function f(){l+=u}for(;s<e.length;){if(u=e[s++],u==="\\"&&n!==fn.ParamRegExp){r=n,n=fn.EscapeNext;continue}switch(n){case fn.Static:u==="/"?(l&&d(),i()):u===":"?(d(),n=fn.Param):f();break;case fn.EscapeNext:f(),n=r;break;case fn.Param:u==="("?n=fn.ParamRegExp:vI.test(u)?f():(d(),n=fn.Static,u!=="*"&&u!=="?"&&u!=="+"&&s--);break;case fn.ParamRegExp:u===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+u:n=fn.ParamRegExpEnd:c+=u;break;case fn.ParamRegExpEnd:d(),n=fn.Static,u!=="*"&&u!=="?"&&u!=="+"&&s--,c="";break;default:t("Unknown state");break}}return n===fn.ParamRegExp&&t(`Unfinished custom RegExp for param "${l}"`),d(),i(),a}const u0="[^/]+?",mI={sensitive:!1,strict:!1,start:!0,end:!0};var Yn=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(Yn||{});const gI=/[.+*?^${}()[\]/\\]/g;function yI(e,t){const n=Mt({},mI,t),r=[];let a=n.start?"^":"";const o=[];for(const l of e){const c=l.length?[]:[Yn.Root];n.strict&&!l.length&&(a+="/");for(let d=0;d<l.length;d++){const f=l[d];let h=Yn.Segment+(n.sensitive?Yn.BonusCaseSensitive:0);if(f.type===$o.Static)d||(a+="/"),a+=f.value.replace(gI,"\\$&"),h+=Yn.Static;else if(f.type===$o.Param){const{value:v,repeatable:m,optional:p,regexp:y}=f;o.push({name:v,repeatable:m,optional:p});const x=y||u0;if(x!==u0){h+=Yn.BonusCustomRegExp;try{`${x}`}catch(g){throw new Error(`Invalid custom RegExp for param "${v}" (${x}): `+g.message)}}let b=m?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;d||(b=p&&l.length<2?`(?:/${b})`:"/"+b),p&&(b+="?"),a+=b,h+=Yn.Dynamic,p&&(h+=Yn.BonusOptional),m&&(h+=Yn.BonusRepeatable),x===".*"&&(h+=Yn.BonusWildcard)}c.push(h)}r.push(c)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=Yn.BonusStrict}n.strict||(a+="/?"),n.end?a+="$":n.strict&&!a.endsWith("/")&&(a+="(?:/|$)");const i=new RegExp(a,n.sensitive?"":"i");function s(l){const c=l.match(i),d={};if(!c)return null;for(let f=1;f<c.length;f++){const h=c[f]||"",v=o[f-1];d[v.name]=h&&v.repeatable?h.split("/"):h}return d}function u(l){let c="",d=!1;for(const f of e){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of f)if(h.type===$o.Static)c+=h.value;else if(h.type===$o.Param){const{value:v,repeatable:m,optional:p}=h,y=v in l?l[v]:"";if(Ur(y)&&!m)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const x=Ur(y)?y.join("/"):y;if(!x)if(p)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${v}"`);c+=x}}return c||"/"}return{re:i,score:r,keys:o,parse:s,stringify:u}}function bI(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===Yn.Static+Yn.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===Yn.Static+Yn.Segment?1:-1:0}function ow(e,t){let n=0;const r=e.score,a=t.score;for(;n<r.length&&n<a.length;){const o=bI(r[n],a[n]);if(o)return o;n++}if(Math.abs(a.length-r.length)===1){if(l0(r))return 1;if(l0(a))return-1}return a.length-r.length}function l0(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const xI={strict:!1,end:!0,sensitive:!1};function wI(e,t,n){const r=yI(pI(e.path),n),a=Mt(r,{record:e,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function _I(e,t){const n=[],r=new Map;t=t0(xI,t);function a(d){return r.get(d)}function o(d,f,h){const v=!h,m=d0(d);m.aliasOf=h&&h.record;const p=t0(t,d),y=[m];if("alias"in d){const g=typeof d.alias=="string"?[d.alias]:d.alias;for(const w of g)y.push(d0(Mt({},m,{components:h?h.record.components:m.components,path:w,aliasOf:h?h.record:m})))}let x,b;for(const g of y){const{path:w}=g;if(f&&w[0]!=="/"){const S=f.record.path,E=S[S.length-1]==="/"?"":"/";g.path=f.record.path+(w&&E+w)}if(x=wI(g,f,p),h?h.alias.push(x):(b=b||x,b!==x&&b.alias.push(x),v&&d.name&&!f0(x)&&i(d.name)),iw(x)&&u(x),m.children){const S=m.children;for(let E=0;E<S.length;E++)o(S[E],x,h&&h.children[E])}h=h||x}return b?()=>{i(b)}:Qs}function i(d){if(tw(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(i),f.alias.forEach(i))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(i),d.alias.forEach(i))}}function s(){return n}function u(d){const f=kI(d,n);n.splice(f,0,d),d.record.name&&!f0(d)&&r.set(d.record.name,d)}function l(d,f){let h,v={},m,p;if("name"in d&&d.name){if(h=r.get(d.name),!h)throw ss(on.MATCHER_NOT_FOUND,{location:d});p=h.record.name,v=Mt(c0(f.params,h.keys.filter(b=>!b.optional).concat(h.parent?h.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),d.params&&c0(d.params,h.keys.map(b=>b.name))),m=h.stringify(v)}else if(d.path!=null)m=d.path,h=n.find(b=>b.re.test(m)),h&&(v=h.parse(m),p=h.record.name);else{if(h=f.name?r.get(f.name):n.find(b=>b.re.test(f.path)),!h)throw ss(on.MATCHER_NOT_FOUND,{location:d,currentLocation:f});p=h.record.name,v=Mt({},f.params,d.params),m=h.stringify(v)}const y=[];let x=h;for(;x;)y.unshift(x.record),x=x.parent;return{name:p,path:m,params:v,matched:y,meta:SI(y)}}e.forEach(d=>o(d));function c(){n.length=0,r.clear()}return{addRoute:o,resolve:l,removeRoute:i,clearRoutes:c,getRoutes:s,getRecordMatcher:a}}function c0(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function d0(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:CI(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function CI(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function f0(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function SI(e){return e.reduce((t,n)=>Mt(t,n.meta),{})}function kI(e,t){let n=0,r=t.length;for(;n!==r;){const o=n+r>>1;ow(e,t[o])<0?r=o:n=o+1}const a=EI(e);return a&&(r=t.lastIndexOf(a,r-1)),r}function EI(e){let t=e;for(;t=t.parent;)if(iw(t)&&ow(e,t)===0)return t}function iw({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function h0(e){const t=sn(Lv),n=sn(rw),r=C(()=>{const u=Ko(e.to);return t.resolve(u)}),a=C(()=>{const{matched:u}=r.value,{length:l}=u,c=u[l-1],d=n.matched;if(!c||!d.length)return-1;const f=d.findIndex(is.bind(null,c));if(f>-1)return f;const h=v0(u[l-2]);return l>1&&v0(c)===h&&d[d.length-1].path!==h?d.findIndex(is.bind(null,u[l-2])):f}),o=C(()=>a.value>-1&&MI(n.params,r.value.params)),i=C(()=>a.value>-1&&a.value===n.matched.length-1&&ew(n.params,r.value.params));function s(u={}){if(II(u)){const l=t[Ko(e.replace)?"replace":"push"](Ko(e.to)).catch(Qs);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:C(()=>r.value.href),isActive:o,isExactActive:i,navigate:s}}function TI(e){return e.length===1?e[0]:e}const RI=rv({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:h0,setup(e,{slots:t}){const n=ra(h0(e)),{options:r}=sn(Lv),a=C(()=>({[p0(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[p0(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&TI(t.default(n));return e.custom?o:_("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},o)}}}),AI=RI;function II(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function MI(e,t){for(const n in t){const r=t[n],a=e[n];if(typeof r=="string"){if(r!==a)return!1}else if(!Ur(a)||a.length!==r.length||r.some((o,i)=>o!==a[i]))return!1}return!0}function v0(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const p0=(e,t,n)=>e??t??n,DI=rv({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=sn(mh),a=C(()=>e.route||r.value),o=sn(i0,0),i=C(()=>{let l=Ko(o);const{matched:c}=a.value;let d;for(;(d=c[l])&&!d.components;)l++;return l}),s=C(()=>a.value.matched[i.value]);Er(i0,C(()=>i.value+1)),Er(sI,s),Er(mh,a);const u=Z();return ke(()=>[u.value,s.value,e.name],([l,c,d],[f,h,v])=>{c&&(c.instances[d]=l,h&&h!==c&&l&&l===f&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),l&&c&&(!h||!is(c,h)||!f)&&(c.enterCallbacks[d]||[]).forEach(m=>m(l))},{flush:"post"}),()=>{const l=a.value,c=e.name,d=s.value,f=d&&d.components[c];if(!f)return m0(n.default,{Component:f,route:l});const h=d.props[c],v=h?h===!0?l.params:typeof h=="function"?h(l):h:null,p=_(f,Mt({},v,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(d.instances[c]=null)},ref:u}));return m0(n.default,{Component:p,route:l})||p}}});function m0(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const PI=DI;function FI(e){const t=_I(e.routes,e),n=e.parseQuery||oI,r=e.stringifyQuery||o0,a=e.history,o=As(),i=As(),s=As(),u=s2(Qa);let l=Qa;Ii&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=nf.bind(null,O=>""+O),d=nf.bind(null,$A),f=nf.bind(null,fu);function h(O,ee){let H,ue;return tw(O)?(H=t.getRecordMatcher(O),ue=ee):ue=O,t.addRoute(ue,H)}function v(O){const ee=t.getRecordMatcher(O);ee&&t.removeRoute(ee)}function m(){return t.getRoutes().map(O=>O.record)}function p(O){return!!t.getRecordMatcher(O)}function y(O,ee){if(ee=Mt({},ee||u.value),typeof O=="string"){const j=rf(n,O,ee.path),ne=t.resolve({path:j.path},ee),se=a.createHref(j.fullPath);return Mt(j,ne,{params:f(ne.params),hash:fu(j.hash),redirectedFrom:void 0,href:se})}let H;if(O.path!=null)H=Mt({},O,{path:rf(n,O.path,ee.path).path});else{const j=Mt({},O.params);for(const ne in j)j[ne]==null&&delete j[ne];H=Mt({},O,{params:d(j)}),ee.params=d(ee.params)}const ue=t.resolve(H,ee),ye=O.hash||"";ue.params=c(f(ue.params));const P=UA(r,Mt({},O,{hash:LA(ye),path:ue.path})),B=a.createHref(P);return Mt({fullPath:P,hash:ye,query:r===o0?iI(O.query):O.query||{}},ue,{redirectedFrom:void 0,href:B})}function x(O){return typeof O=="string"?rf(n,O,u.value.path):Mt({},O)}function b(O,ee){if(l!==O)return ss(on.NAVIGATION_CANCELLED,{from:ee,to:O})}function g(O){return E(O)}function w(O){return g(Mt(x(O),{replace:!0}))}function S(O,ee){const H=O.matched[O.matched.length-1];if(H&&H.redirect){const{redirect:ue}=H;let ye=typeof ue=="function"?ue(O,ee):ue;return typeof ye=="string"&&(ye=ye.includes("?")||ye.includes("#")?ye=x(ye):{path:ye},ye.params={}),Mt({query:O.query,hash:O.hash,params:ye.path!=null?{}:O.params},ye)}}function E(O,ee){const H=l=y(O),ue=u.value,ye=O.state,P=O.force,B=O.replace===!0,j=S(H,ue);if(j)return E(Mt(x(j),{state:typeof j=="object"?Mt({},ye,j.state):ye,force:P,replace:B}),ee||H);const ne=H;ne.redirectedFrom=ee;let se;return!P&&jA(r,ue,H)&&(se=ss(on.NAVIGATION_DUPLICATED,{to:ne,from:ue}),W(ue,ue,!0,!1)),(se?Promise.resolve(se):k(ne,ue)).catch(J=>wa(J)?wa(J,on.NAVIGATION_GUARD_REDIRECT)?J:oe(J):q(J,ne,ue)).then(J=>{if(J){if(wa(J,on.NAVIGATION_GUARD_REDIRECT))return E(Mt({replace:B},x(J.to),{state:typeof J.to=="object"?Mt({},ye,J.to.state):ye,force:P}),ee||ne)}else J=T(ne,ue,!0,B,ye);return M(ne,ue,J),J})}function R(O,ee){const H=b(O,ee);return H?Promise.reject(H):Promise.resolve()}function A(O){const ee=Y.values().next().value;return ee&&typeof ee.runWithContext=="function"?ee.runWithContext(O):O()}function k(O,ee){let H;const[ue,ye,P]=uI(O,ee);H=of(ue.reverse(),"beforeRouteLeave",O,ee);for(const j of ue)j.leaveGuards.forEach(ne=>{H.push(ro(ne,O,ee))});const B=R.bind(null,O,ee);return H.push(B),$(H).then(()=>{H=[];for(const j of o.list())H.push(ro(j,O,ee));return H.push(B),$(H)}).then(()=>{H=of(ye,"beforeRouteUpdate",O,ee);for(const j of ye)j.updateGuards.forEach(ne=>{H.push(ro(ne,O,ee))});return H.push(B),$(H)}).then(()=>{H=[];for(const j of P)if(j.beforeEnter)if(Ur(j.beforeEnter))for(const ne of j.beforeEnter)H.push(ro(ne,O,ee));else H.push(ro(j.beforeEnter,O,ee));return H.push(B),$(H)}).then(()=>(O.matched.forEach(j=>j.enterCallbacks={}),H=of(P,"beforeRouteEnter",O,ee,A),H.push(B),$(H))).then(()=>{H=[];for(const j of i.list())H.push(ro(j,O,ee));return H.push(B),$(H)}).catch(j=>wa(j,on.NAVIGATION_CANCELLED)?j:Promise.reject(j))}function M(O,ee,H){s.list().forEach(ue=>A(()=>ue(O,ee,H)))}function T(O,ee,H,ue,ye){const P=b(O,ee);if(P)return P;const B=ee===Qa,j=Ii?history.state:{};H&&(ue||B?a.replace(O.fullPath,Mt({scroll:B&&j&&j.scroll},ye)):a.push(O.fullPath,ye)),u.value=O,W(O,ee,H,B),oe()}let D;function I(){D||(D=a.listen((O,ee,H)=>{if(!fe.listening)return;const ue=y(O),ye=S(ue,fe.currentRoute.value);if(ye){E(Mt(ye,{replace:!0,force:!0}),ue).catch(Qs);return}l=ue;const P=u.value;Ii&&eI(a0(P.fullPath,H.delta),Qc()),k(ue,P).catch(B=>wa(B,on.NAVIGATION_ABORTED|on.NAVIGATION_CANCELLED)?B:wa(B,on.NAVIGATION_GUARD_REDIRECT)?(E(Mt(x(B.to),{force:!0}),ue).then(j=>{wa(j,on.NAVIGATION_ABORTED|on.NAVIGATION_DUPLICATED)&&!H.delta&&H.type===vh.pop&&a.go(-1,!1)}).catch(Qs),Promise.reject()):(H.delta&&a.go(-H.delta,!1),q(B,ue,P))).then(B=>{B=B||T(ue,P,!1),B&&(H.delta&&!wa(B,on.NAVIGATION_CANCELLED)?a.go(-H.delta,!1):H.type===vh.pop&&wa(B,on.NAVIGATION_ABORTED|on.NAVIGATION_DUPLICATED)&&a.go(-1,!1)),M(ue,P,B)}).catch(Qs)}))}let F=As(),V=As(),L;function q(O,ee,H){oe(O);const ue=V.list();return ue.length?ue.forEach(ye=>ye(O,ee,H)):console.error(O),Promise.reject(O)}function K(){return L&&u.value!==Qa?Promise.resolve():new Promise((O,ee)=>{F.add([O,ee])})}function oe(O){return L||(L=!O,I(),F.list().forEach(([ee,H])=>O?H(O):ee()),F.reset()),O}function W(O,ee,H,ue){const{scrollBehavior:ye}=e;if(!Ii||!ye)return Promise.resolve();const P=!H&&tI(a0(O.fullPath,0))||(ue||!H)&&history.state&&history.state.scroll||null;return mt().then(()=>ye(O,ee,P)).then(B=>B&&ZA(B)).catch(B=>q(B,O,ee))}const N=O=>a.go(O);let Q;const Y=new Set,fe={currentRoute:u,listening:!0,addRoute:h,removeRoute:v,clearRoutes:t.clearRoutes,hasRoute:p,getRoutes:m,resolve:y,options:e,push:g,replace:w,go:N,back:()=>N(-1),forward:()=>N(1),beforeEach:o.add,beforeResolve:i.add,afterEach:s.add,onError:V.add,isReady:K,install(O){O.component("RouterLink",AI),O.component("RouterView",PI),O.config.globalProperties.$router=fe,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>Ko(u)}),Ii&&!Q&&u.value===Qa&&(Q=!0,g(a.location).catch(ue=>{}));const ee={};for(const ue in Qa)Object.defineProperty(ee,ue,{get:()=>u.value[ue],enumerable:!0});O.provide(Lv,fe),O.provide(rw,Jh(ee)),O.provide(mh,u);const H=O.unmount;Y.add(O),O.unmount=function(){Y.delete(O),Y.size<1&&(l=Qa,D&&D(),D=null,u.value=Qa,Q=!1,L=!1),H()}}};function $(O){return O.reduce((ee,H)=>ee.then(()=>A(H)),Promise.resolve())}return fe}const NI={},OI={class:"home"};function BI(e,t){const n=sb("router-link");return Or(),Ia("div",OI,[t[3]||(t[3]=bt("h1",null," Sistema de Registro y Asistencia",-1)),Un(n,{to:"/registro"},{default:gl(()=>[...t[0]||(t[0]=[xl("Registrar Persona",-1)])]),_:1}),t[4]||(t[4]=bt("br",null,null,-1)),Un(n,{to:"/camara"},{default:gl(()=>[...t[1]||(t[1]=[xl("Probar Cmara",-1)])]),_:1}),t[5]||(t[5]=bt("br",null,null,-1)),Un(n,{to:"/asistencia"},{default:gl(()=>[...t[2]||(t[2]=[xl("Asistencia",-1)])]),_:1})])}const qI=Pb(NI,[["render",BI]]),LI={class:"camara"},VI={class:"error"},zI={__name:"CamaraTest",setup(e){const t=Z(null),n=Z(""),r=async()=>{try{const a=await navigator.mediaDevices.getUserMedia({video:!0});t.value.srcObject=a}catch(a){n.value=" ERROR: "+a.message}};return(a,o)=>(Or(),Ia("div",LI,[o[0]||(o[0]=bt("h2",null," Test Cmara",-1)),bt("video",{ref_key:"video",ref:t,autoplay:"",playsinline:"",class:"video"},null,512),bt("div",null,[bt("button",{onClick:r},"Encender Cmara")]),bt("p",VI,Uo(n.value),1)]))}};var sw=function(e,t){return(sw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])})(e,t)};function Gr(e,t){function n(){this.constructor=e}sw(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Ue(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(l){try{u(r.next(l))}catch(c){o(c)}}function s(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?a(l.value):new n((function(c){c(l.value)})).then(i,s)}u((r=r.apply(e,[])).next())}))}function je(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return(function(c){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(c[0]===6&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(d){c=[6,d],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}})([u,l])}}}var $I=(function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=t,this.platform=n},e.prototype.registerFlag=function(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){var a=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+a+"."),this.set(t,a)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,n){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,a=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(o){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return HI(r,i[0],i[1]),i.join("=")})),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach((function(o){var i=o.split(":"),s=i[0],u=i[1];t.urlFlags[s]=(function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")})(s,u)}))}},e})();function HI(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function Se(){return uw}var uw=null,ec=new Map,gh=new Map;function lw(e,t){var n=dw(e,t);return ec.get(n)}function WI(e){return gh.get(e)}function g0(e){for(var t=ec.entries(),n=[];;){var r=t.next(),a=r.done,o=r.value;if(a)break;var i=o[0],s=o[1];i.split("_")[0]===e&&n.push(s)}return n}function cw(e){var t=e.kernelName,n=e.backendName,r=dw(t,n);if(ec.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");ec.set(r,e)}function UI(e){var t=e.kernelName;gh.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),gh.set(t,e)}function dw(e,t){return t+"_"+e}function yh(e,t,n){return Math.max(e,Math.min(t,n))}function fw(e){return e%2==0?e:e+1}function jI(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function U(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Pt(e,t,n){n===void 0&&(n=""),U(En(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function ys(e){U(e!=null,(function(){return"The input to the tensor constructor must be a non-null value."}))}function us(e,t,n){if(t===void 0&&(t=[]),n===void 0&&(n=!1),t==null&&(t=[]),Array.isArray(e)||ia(e)&&!n)for(var r=0;r<e.length;++r)us(e[r],t,n);else t.push(e);return t}function Ke(e){if(e.length===0)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function En(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ln(e){return e%1==0}function GI(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function bh(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Ki(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function y0(e,t,n){return t===void 0&&(t=function(r){return 0}),new Promise((function(r,a){var o=0,i=function(){if(e())r();else{o++;var s=t(o);n!=null&&o>=n?a():setTimeout(i,s)}};i()}))}function KI(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(e[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(r===-1){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(n===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var o=e.slice();return o[r]=t/n,o}function _n(e,t){var n=t.length;return U((e=e==null?t.map((function(r,a){return a})):[].concat(e)).every((function(r){return r>=-n&&r<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),U(e.every((function(r){return ln(r)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(r){return r<0?n+r:r}))}function Lo(e,t){for(var n=[],r=[],a=t!=null&&Array.isArray(t)&&t.length===0,o=t==null||a?null:_n(t,e).sort(),i=0,s=0;s<e.length;++s){if(o!=null){if(o[i]===s&&e[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(o[i]==null||o[i]>s)&&e[s]===1&&(n.push(e[s]),r.push(s)),o[i]<=s&&i++}e[s]!==1&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function hu(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function tc(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);n=new Array(t)}return n}function XI(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function QI(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function YI(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function ia(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function hw(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function JI(e){if(e==null)return 0;var t=0;return e.forEach((function(n){return t+=n.length})),t}function Vv(e){return typeof e=="string"||e instanceof String}function ZI(e){return typeof e=="boolean"}function eM(e){return typeof e=="number"}function Tu(e){return Array.isArray(e)?Tu(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":eM(e)?"float32":Vv(e)?"string":ZI(e)?"bool":"float32"}function xh(e){return!!(e&&e.constructor&&e.call&&e.apply)}function wh(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function sa(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function vw(e,t,n){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=us(e)),n&&XI(e,t),(function(o,i){return o instanceof Float32Array&&i==="float32"||o instanceof Int32Array&&i==="int32"||o instanceof Uint8Array&&i==="bool"})(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)Math.round(e[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+t)}function b0(e,t){if(e.length===0)return t[0];var n=e.reduce((function(r,a){return r*a}));if(n===0)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return(function r(a,o,i){var s=new Array;if(o.length===1)for(var u=o[0],l=0;l<u;l++)s[l]=i[a+l];else{u=o[0];var c=o.slice(1),d=c.reduce((function(f,h){return f*h}));for(l=0;l<u;l++)s[l]=r(a+l*d,c,i)}return s})(0,e,t)}function pw(e,t){for(var n=Ru(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Ru(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function ea(){return Se().platform.now()}function mw(e){e.forEach((function(t){U(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function tM(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Se().platform.encode(e,t)}function nc(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Se().platform.decode(e,t)}function x0(e,t,n){if(t===0)return 0;if(t===1)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function nM(e,t,n){if(t===0)return[];if(t===1)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}var rM=(function(){function e(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new aM)}return e.prototype.profileKernel=function(t,n,r){var a,o=this,i=this.backendTimer.time((function(){a=r()}));return a.forEach((function(s){s.data().then((function(u){(function(l,c,d){if(c!=="float32")return!1;for(var f=0;f<l.length;f++){var h=l[f];if(isNaN(h)||!isFinite(h))return console.warn("Found "+h+" in the result of '"+d+"'"),!0}})(u,s.dtype,t),i.then((function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),o.logger.logKernelProfile(t,s,u,l.kernelMs,n,c)}))}))})),a},e})(),aM=(function(){function e(){}return e.prototype.logKernelProfile=function(t,n,r,a,o,i){var s=typeof a=="number"?Ki(a+"ms",9):a.error,u=Ki(t,25),l=n.rank,c=n.size,d=Ki(n.shape.toString(),14),f="";for(var h in o){var v=o[h].shape||n.shape,m=v.length;f+=h+": "+m+"D "+(m>0?v:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+d+"	%c"+c+"	%c"+f+"	%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e})(),w0=20,Is=3,sf=7;function oM(e,t,n,r){var a=sa(t),o=(function(l,c,d,f){var h=Ke(c),v=f[f.length-1],m=new Array(v).fill(0),p=c.length,y=d==="complex64"?Ds(l):l;if(p>1)for(var x=0;x<h/v;x++)for(var b=x*v,g=0;g<v;g++)m[g]=Math.max(m[g],Ms(y[b+g],0,d).length);return m})(e,t,n,a),i=t.length,s=(function l(c,d,f,h,v,m){m===void 0&&(m=!0);var p=f==="complex64"?2:1,y=d[0],x=d.length;if(x===0)return f==="complex64"?[Ms(Ds(c)[0],0,f)]:f==="bool"?[gw(c[0])]:[c[0].toString()];if(x===1){if(y>w0){var b=Is*p,g=Array.from(c.slice(0,b)),w=Array.from(c.slice((y-Is)*p,y*p));return f==="complex64"&&(g=Ds(g),w=Ds(w)),["["+g.map((function(F,V){return Ms(F,v[V],f)})).join(", ")+", ..., "+w.map((function(F,V){return Ms(F,v[y-Is+V],f)})).join(", ")+"]"]}return["["+(f==="complex64"?Ds(c):Array.from(c)).map((function(F,V){return Ms(F,v[V],f)})).join(", ")+"]"]}var S=d.slice(1),E=h.slice(1),R=h[0]*p,A=[];if(y>w0){for(var k=0;k<Is;k++){var M=(T=k*R)+R;A.push.apply(A,l(c.slice(T,M),S,f,E,v,!1))}for(A.push("..."),k=y-Is;k<y;k++)M=(T=k*R)+R,A.push.apply(A,l(c.slice(T,M),S,f,E,v,k===y-1))}else for(k=0;k<y;k++){var T;M=(T=k*R)+R,A.push.apply(A,l(c.slice(T,M),S,f,E,v,k===y-1))}var D=x===2?",":"";for(A[0]="["+A[0]+D,k=1;k<A.length-1;k++)A[k]=" "+A[k]+D;var I=`,
`;for(k=2;k<x;k++)I+=`
`;return A[A.length-1]=" "+A[A.length-1]+"]"+(m?"":I),A})(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map((function(l){return"    "+l})).join(`
`)),u.join(`
`)}function Ms(e,t,n){return Ki(Array.isArray(e)?parseFloat(e[0].toFixed(sf))+" + "+parseFloat(e[1].toFixed(sf))+"j":Vv(e)?"'"+e+"'":n==="bool"?gw(e):parseFloat(e.toFixed(sf)).toString(),t)}function gw(e){return e===0?"false":"true"}function Ds(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var vu=(function(){function e(t,n,r){var a=this;if(this.dtype=n,this.shape=t.slice(),this.size=Ke(t),r!=null){var o=r.length;U(o===this.size,(function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+a.size+"'."}))}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||tc(n,this.size),this.strides=sa(t)}return e.prototype.set=function(t){for(var n=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),U(r.length===this.rank,(function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"}));var o=this.locToIndex(r);this.values[o]=t},e.prototype.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.length===0&&(t=[0]);for(var r=0,a=0,o=t;a<o.length;a++){var i=o[a];if(i<0||i>=this.shape[r]){var s="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=t[t.length-1],l=0;l<t.length-1;++l)u+=this.strides[l]*t[l];return this.values[u]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return ta().makeTensor(this.values,this.shape,this.dtype)},e})(),ta=null,be=null,yw=null,Yt=(function(){function e(t,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Ke(t),this.strides=sa(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),U(this.size===1,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,n){return this.throwIfDisposed(),this.reshape([t,n])},e.prototype.as3D=function(t,n,r){return this.throwIfDisposed(),this.reshape([t,n,r])},e.prototype.as4D=function(t,n,r,a){return this.throwIfDisposed(),this.reshape([t,n,r,a])},e.prototype.as5D=function(t,n,r,a,o){return this.throwIfDisposed(),this.reshape([t,n,r,a,o])},e.prototype.asType=function(t){return this.throwIfDisposed(),be.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Ue(this,void 0,void 0,(function(){var t;return je(this,(function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,be.buffer(this.shape,this.dtype,t)]}}))}))},e.prototype.bufferSync=function(){return be.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Ue(this,void 0,void 0,(function(){var t;return je(this,(function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,b0(this.shape,t)]}}))}))},e.prototype.arraySync=function(){return b0(this.shape,this.dataSync())},e.prototype.data=function(){return Ue(this,void 0,void 0,(function(){var t,n;return je(this,(function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=ta().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:n=r.sent();try{return[2,n.map((function(a){return nc(a)}))]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var t=ta().readSync(this.dataId);if(this.dtype==="string")try{return t.map((function(n){return nc(n)}))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return Ue(this,void 0,void 0,(function(){var t;return je(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,ta().read(this.dataId)];case 1:return t=n.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(ta().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),be.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),be.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),be.expandDims(this,t)},e.prototype.cumsum=function(t,n,r){return t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1),be.cumsum(this,t,n,r)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),be.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),be.clone(this)},e.prototype.oneHot=function(t,n,r){return this.throwIfDisposed(),be.oneHot(this,t,n,r)},e.prototype.toString=function(t){return t===void 0&&(t=!1),oM(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),be.tile(this,t)},e.prototype.gather=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),be.gather(this,t,n)},e.prototype.matMul=function(t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),be.matMul(this,t,n,r)},e.prototype.dot=function(t){return this.throwIfDisposed(),be.dot(this,t)},e.prototype.norm=function(t,n,r){return t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),be.norm(this,t,n,r)},e.prototype.slice=function(t,n){return this.throwIfDisposed(),be.slice(this,t,n)},e.prototype.reverse=function(t){return this.throwIfDisposed(),be.reverse(this,t)},e.prototype.concat=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),be.concat([this].concat(t),n)},e.prototype.split=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),be.split(this,t,n)},e.prototype.stack=function(t,n){return n===void 0&&(n=0),be.stack([this,t],n)},e.prototype.unstack=function(t){return t===void 0&&(t=0),be.unstack(this,t)},e.prototype.pad=function(t,n){return n===void 0&&(n=0),be.pad(this,t,n)},e.prototype.batchNormalization=function(t,n,r,a,o){return r===void 0&&(r=.001),yw("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,n,o,a,r)},e.prototype.batchNorm=function(t,n,r,a,o){return o===void 0&&(o=.001),this.throwIfDisposed(),be.batchNorm(this,t,n,r,a,o)},e.prototype.all=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),be.all(this,t,n)},e.prototype.any=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),be.any(this,t,n)},e.prototype.logSumExp=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),be.logSumExp(this,t,n)},e.prototype.sum=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),be.sum(this,t,n)},e.prototype.prod=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),be.prod(this,t,n)},e.prototype.mean=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),be.mean(this,t,n)},e.prototype.min=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),be.min(this,t,n)},e.prototype.max=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),be.max(this,t,n)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),be.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),be.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),be.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),be.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),be.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),be.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),be.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),be.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),be.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),be.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),be.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),be.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),be.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),be.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),be.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),be.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),be.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),be.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),be.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),be.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),be.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),be.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),be.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),be.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),be.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),be.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),be.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),be.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),be.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),be.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),be.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),be.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),be.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),be.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),be.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),be.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),be.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),be.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),be.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),be.logicalXor(this,t)},e.prototype.where=function(t,n){return this.throwIfDisposed(),be.where(t,this,n)},e.prototype.neg=function(){return this.throwIfDisposed(),be.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),be.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),be.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),be.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),be.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),be.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),be.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),be.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),be.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),be.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),be.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),be.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),be.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),be.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),be.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),be.abs(this)},e.prototype.clipByValue=function(t,n){return this.throwIfDisposed(),be.clipByValue(this,t,n)},e.prototype.relu=function(){return this.throwIfDisposed(),be.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),be.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),be.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),be.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),be.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),be.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),be.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),be.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),be.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),be.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),be.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),be.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),be.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),be.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),be.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),be.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),be.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),be.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),be.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),be.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),be.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),be.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),be.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),be.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),be.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),be.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),be.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),be.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),be.image.resizeBilinear(this,t,n)},e.prototype.resizeNearestNeighbor=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),be.image.resizeNearestNeighbor(this,t,n)},e.prototype.conv1d=function(t,n,r,a,o,i){return a===void 0&&(a="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),be.conv1d(this,t,n,r,a,o,i)},e.prototype.conv2d=function(t,n,r,a,o,i){return a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),be.conv2d(this,t,n,r,a,o,i)},e.prototype.conv2dTranspose=function(t,n,r,a,o){return this.throwIfDisposed(),be.conv2dTranspose(this,t,n,r,a,o)},e.prototype.depthwiseConv2D=function(t,n,r,a,o,i){return a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),be.depthwiseConv2d(this,t,n,r,a,o,i)},e.prototype.separableConv2d=function(t,n,r,a,o,i){return o===void 0&&(o=[1,1]),i===void 0&&(i="NHWC"),this.throwIfDisposed(),be.separableConv2d(this,t,n,r,a,o,i)},e.prototype.avgPool=function(t,n,r,a){return this.throwIfDisposed(),be.avgPool(this,t,n,r,a)},e.prototype.maxPool=function(t,n,r,a){return this.throwIfDisposed(),be.maxPool(this,t,n,r,a)},e.prototype.localResponseNormalization=function(t,n,r,a){return t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),a===void 0&&(a=.5),be.localResponseNormalization(this,t,n,r,a)},e.prototype.pool=function(t,n,r,a,o){return this.throwIfDisposed(),be.pool(this,t,n,r,a,o)},e.prototype.variable=function(t,n,r){return t===void 0&&(t=!0),this.throwIfDisposed(),ta().makeVariable(this,t,n,r)},e.prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),be.unsortedSegmentSum(this,t,n)},e.prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),be.batchToSpaceND(this,t,n)},e.prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),be.spaceToBatchND(this,t,n)},e.prototype.topk=function(t,n){return t===void 0&&(t=1),n===void 0&&(n=!0),this.throwIfDisposed(),be.topk(this,t,n)},e.prototype.stridedSlice=function(t,n,r,a,o,i,s,u){return a===void 0&&(a=0),o===void 0&&(o=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),be.stridedSlice(this,t,n,r,a,o,i,s,u)},e.prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),be.depthToSpace(this,t,n)},e.prototype.fft=function(){return this.throwIfDisposed(),be.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),be.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),be.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),be.spectral.irfft(this)},e})();Object.defineProperty(Yt,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var _0,_h,Ch,Sh,kh,ls=(function(e){function t(n,r,a,o){var i=e.call(this,n.shape,n.dtype,n.dataId,o)||this;return i.trainable=r,i.name=a,i}return Gr(t,e),t.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!En(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");ta().disposeTensor(this),this.dataId=n.dataId,ta().incRef(this,null)},t.prototype.dispose=function(){ta().disposeVariable(this),this.isDisposedInternal=!0},t})(Yt);Object.defineProperty(ls,Symbol.hasInstance,{value:function(e){return e instanceof Yt&&e.assign!=null&&e.assign instanceof Function}}),(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(_0||(_0={})),(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(_h||(_h={})),(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(Ch||(Ch={})),(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(Sh||(Sh={})),(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(kh||(kh={}));var iM={float32:Sh,int32:_h,bool:Ch,complex64:kh};function Dn(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return iM[e][t]}function uf(e){return Dn(e,"int32")}function tn(e,t){if(e.dtype===t.dtype)return[e,t];var n=Dn(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function sM(e,t){U(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function bw(e){var t=[];return(function n(r,a,o){if(r!=null){if(r instanceof Yt)return void a.push(r);if(i=r,!(!Array.isArray(i)&&typeof i!="object")){var i,s=r;for(var u in s){var l=s[u];o.has(l)||(o.add(l),n(l,a,o))}}}})(e,t,new Set),t}var lf,C0=(function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e})(),uM=(function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new C0}return e.prototype.ready=function(){return Ue(this,void 0,void 0,(function(){var t,n,r;return je(this,(function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then((function(){}))];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),n=0,a.label=1;case 1:return n<t.length?(r=t[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),n=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,n,r){return r===void 0&&(r=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:n,priority:r},!0)},e.prototype.setBackend=function(t){return Ue(this,void 0,void 0,(function(){var n,r,a;return je(this,(function(o){switch(o.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return a=o.sent(),[3,3];case 2:a=r,o.label=3;case 3:if(!a)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new rM(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var t=this;g0(this.backendName).forEach((function(n){n.setupFunc!=null&&n.setupFunc(t.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(t){var n=this;g0(t).forEach((function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[t])}))},e.prototype.initializeBackend=function(t){var n=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var o=++this.pendingBackendInitId,i=a.then((function(s){return!(o<n.pendingBackendInitId)&&(n.registry[t]=s,n.pendingBackendInit=null,!0)})).catch((function(s){return!(o<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),!1)}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[t]=a,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(n,r){return t.registryFactory[r].priority-t.registryFactory[n].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),n=0;n<t.length;n++){var r=t[n],a=this.initializeBackend(r),o=a.success,i=a.asyncInit;if(i||o)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,n){var r=this.state.tensorInfo.get(n),a=r.backend,o=this.readSync(n);a.disposeData(n),r.backend=t,t.move(n,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,n){var r,a=this,o=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=t}return this.scopedRun((function(){return a.startScope(o)}),(function(){return a.endScope(r)}),(function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r}))},e.prototype.scopedRun=function(t,n,r){t();try{var a=r();return n(),a}catch(o){throw n(),o}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var n=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),r={x:t};return this.addTapeNode(this.state.activeScope.name,r,[n],(function(a){return{x:function(){return a.toFloat()}}}),[]),n},e.prototype.runKernel=function(t,n,r,a,o){return this.runKernelFunc(null,n,null,t,r,a,o)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,n,r){var a=this.backend.numDataIds(),o=0;r.forEach((function(u){o+=u.dtype==="complex64"?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-n-o-i;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,n,r,a,o,i,s){var u,l=this;i===void 0&&(i=[]),s===void 0&&(s=[]);var c=[],d=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var f,h=function(x){d&&(c=x.map((function(b){return l.keep(l.clone(b))})))},v=this.state.numBytes,m=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var p,y=lw(a,this.backendName);return f=y!=null?function(){var x=l.backend.numDataIds();p=y.kernelFunc({inputs:n,attrs:o,backend:l.backend});var b=Array.isArray(p)?p:[p];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(a,x,b);var g=b.map((function(S){var E=S.dataId,R=S.shape,A=S.dtype;return l.makeTensorFromDataId(E,R,A)})),w=g.filter((function(S,E){return s[E]}));return h((i||[]).slice().concat(w)),g}:function(){var x=l.backend.numDataIds();p=l.tidy((function(){return t(l.backend,h)}));var b=Array.isArray(p)?p:[p];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(a,x,b),b},this.scopedRun((function(){return l.state.kernelDepth++}),(function(){return l.state.kernelDepth--}),(function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(a,n,(function(){return f()})):f()})),d&&this.addTapeNode(a,n,u,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-v,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-m,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map((function(x){return n[x].shape})),outputShapes:u.map((function(x){return x.shape}))}),Array.isArray(p)?u:u[0]},e.prototype.makeTensor=function(t,n,r,a){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var o=t;r==="string"&&Vv(t[0])&&(o=t.map((function(c){return tM(c)})));var i=a.write(o,n,r),s=new Yt(n,r,i,this.nextTensorId());if(this.incRef(s,a),r==="string"){var u=this.state.tensorInfo.get(i),l=JI(o);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},e.prototype.makeTensorFromDataId=function(t,n,r,a){var o=new Yt(n,r=r||"float32",t,this.nextTensorId());return this.incRef(o,a),o},e.prototype.makeVariable=function(t,n,r,a){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==t.dtype&&(t=t.asType(a));var o=new ls(t,n,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},e.prototype.incRef=function(t,n){var r=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(a=t.size*hw(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof ls||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(t.dataId);n.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var n=this.state.registeredVariables[t];this.disposeVariable(n)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return Ue(this,void 0,void 0,(function(){var n,r;return je(this,(function(a){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(o){return o.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,n,r,a,o){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:o},u=WI(t);u!=null&&(a=u.gradFunc),a!=null&&(s.gradient=function(l){return l=l.map((function(c,d){if(c==null){var f=r[d],h=Ru(f.size,f.dtype);return i.makeTensor(h,f.shape,f.dtype)}return c})),a(l.length>1?l:l[0],o)}),this.state.activeTape.push(s)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n},e.prototype.endScope=function(t){for(var n=this,r=bw(t),a=new Set(r.map((function(u){return u.id}))),o=0;o<this.state.activeScope.track.length;o++){var i=this.state.activeScope.track[o];i.kept||a.has(i.id)||i.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach((function(u){u.kept||u.scopeId!==s.id||n.track(u)}))},e.prototype.gradients=function(t,n,r,a){var o=this;if(a===void 0&&(a=!1),U(n.length>0,(function(){return"gradients() received an empty list of xs."})),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var i=this.scopedRun((function(){return o.startTape()}),(function(){return o.endTape()}),(function(){return o.tidy("forward",t)}));U(i instanceof Yt,(function(){return"The result y returned by f() must be a tensor."}));var s=(function(u,l,c){for(var d={},f={},h=0;h<l.length;h++)d[l[h].id]=!0;for(h=0;h<u.length;h++){var v=(S=u[h]).inputs;for(var m in v){for(var p=v[m],y=!1,x=0;x<l.length;x++)if(d[p.id]){S.outputs.forEach((function(k){return d[k.id]=!0})),y=!0,f[S.id]=!0;break}if(y)break}}var b={};b[c.id]=!0;var g={};for(h=u.length-1;h>=0;h--)for(v=(S=u[h]).inputs,x=0;x<S.outputs.length;x++)if(b[S.outputs[x].id]){for(var m in v)b[v[m].id]=!0,g[S.id]=!0;break}var w=[];for(h=0;h<u.length;h++){var S;if(f[(S=u[h]).id]&&g[S.id]){var E={};for(var m in S.inputs){var R=S.inputs[m];d[R.id]&&(E[m]=R)}var A=Object.assign({},S);A.inputs=E,A.outputs=S.outputs,w.push(A)}}return w})(this.state.activeTape,n,i);if(!a&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var u,l,c={};c[i.id]=r??(u=i.shape,l=pw(Ke(u),"float32"),ie.makeTensor(l,u,"float32")),(function(f,h,v){for(var m=function(y){var x=h[y],b=[];if(x.outputs.forEach((function(E){var R=f[E.id];R!=null?b.push(R):b.push(null)})),x.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+x.kernelName+".");var g=x.gradient(b),w=function(E){if(!(E in g))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(g)+".");var R=v((function(){return g[E]()}));if(R.dtype!=="float32")throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+R.dtype+"'");var A=x.inputs[E];if(!En(R.shape,A.shape))throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input '"+E+"' has shape '"+R.shape+"', which does not match the shape of the input '"+A.shape+"'");if(f[A.id]==null)f[A.id]=R;else{var k=f[A.id];f[A.id]=k.add(R),k.dispose()}};for(var S in x.inputs)w(S)},p=h.length-1;p>=0;p--)m(p)})(c,s,(function(f){return o.tidy(f)}));var d=n.map((function(f){return c[f.id]}));return o.state.gradientDepth===0&&(o.state.activeTape.forEach((function(f){for(var h=0,v=f.saved;h<v.length;h++)v[h].dispose()})),o.state.activeTape=null),{value:i,grads:d}}))},e.prototype.customGrad=function(t){var n=this;return U(xh(t),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var r,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];U(a.every((function(s){return s instanceof Yt})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return a.forEach((function(s,u){i[u]=s})),n.runKernelFunc((function(s,u){return U((r=t.apply(void 0,a.concat([u]))).value instanceof Yt,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),U(xh(r.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),r.value}),i,(function(s,u){var l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];U(c.length===a.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),U(c.every((function(f){return f instanceof Yt})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var d={};return c.forEach((function(f,h){d[h]=function(){return f}})),d}))}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return Ue(this,void 0,void 0,(function(){var n,r;return je(this,(function(a){switch(a.label){case 0:return n=ea(),[4,this.backend.time(t)];case 1:return(r=a.sent()).wallMs=ea()-n,[2,r]}}))}))},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new C0,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e})(),ie=(function(){var e=(function(){if(lf==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}lf=n}return lf})();if(e._tfengine==null){var t=new $I(e);e._tfengine=new uM(t)}return(function(n){uw=n})(e._tfengine.ENV),ta=function(){return e._tfengine},e._tfengine})();function xw(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var _a=Se();_a.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),_a.registerFlag("IS_BROWSER",(function(){return xw()})),_a.registerFlag("IS_NODE",(function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0})),_a.registerFlag("IS_CHROME",(function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),_a.registerFlag("PROD",(function(){return!1})),_a.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return _a.getBool("DEBUG")})),_a.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),_a.registerFlag("IS_TEST",(function(){return!1}));var pu,hr,lr,Oo={},cf={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function lM(e,t){Oo[e]=t}function fa(e){e in Oo||(Oo[e]=(function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=(function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")})(n);return r.addEventListener("webglcontextlost",(function(a){a.preventDefault(),delete Oo[n]}),!1),n===1?r.getContext("webgl",cf)||r.getContext("experimental-webgl",cf):r.getContext("webgl2",cf)})(e));var t=Oo[e];return t.isContextLost()?(delete Oo[e],fa(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Oo[e])}function Yc(e,t){return[t,e]}function Ys(e){var t=Ke(e);return bh(Math.ceil(t/4))}function Au(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function zv(e,t){var n,r,a,o,i,s,u,l,c,d=e;return Se().getNumber("WEBGL_VERSION")===2?(n=d.R32F,r=d.R16F,a=d.RGBA16F,o=d.RGBA32F,i=d.RED,s=4,u=1,l=d.HALF_FLOAT,c=d.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=d.RGBA,i=e.RGBA,s=4,u=4,l=t!=null?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function Qe(e,t,n){var r=n();return t&&(function(a){var o=a.getError();if(o!==a.NO_ERROR)throw new Error("WebGL Error: "+hM(a,o))})(e),r}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(pu||(pu={})),(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(hr||(hr={})),(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(lr||(lr={}));var cM=596e-10,dM=65504;function fM(e){return!!(Se().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||cM<Math.abs(e)&&Math.abs(e)<dM)}function hM(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function al(e,t,n){return Va(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function vM(e,t,n){var r=Va(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(Qe(e,t,(function(){return e.shaderSource(r,n)})),Qe(e,t,(function(){return e.compileShader(r)})),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function pM(e,t,n){var r=Va(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(Qe(e,t,(function(){return e.shaderSource(r,n)})),Qe(e,t,(function(){return e.compileShader(r)})),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw(function(a,o){var i=mM.exec(o);if(i==null)return console.log("Couldn't parse line number in error: "+o),void console.log(a);for(var s=+i[1],u=a.split(`
`),l=u.length.toString().length+2,c=u.map((function(p,y){return Ki((y+1).toString(),l)+p})),d=0,f=0;f<c.length;f++)d=Math.max(c[f].length,d);var h=c.slice(0,s-1),v=c.slice(s-1,s),m=c.slice(s);console.log(h.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+Ki(v[0],d),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))})(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var df,ff,mM=/ERROR: [0-9]+:([0-9]+):/g;function gM(e,t){return Va(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function yM(e,t,n){if(Qe(e,t,(function(){return e.linkProgram(n)})),e.getProgramParameter(n,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function hf(e,t,n){if(Qe(e,t,(function(){return e.validateProgram(n)})),e.getProgramParameter(n,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function bM(e,t,n){var r=Va(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Qe(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Qe(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function xM(e,t,n){var r=Va(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Qe(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),Qe(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function wM(e,t){return Va(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function _M(e,t){var n=Se().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function CM(e,t){return Va(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function S0(e,t,n,r,a,o,i,s){var u=e.getAttribLocation(n,r);return u!==-1&&(Qe(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,a)})),Qe(e,t,(function(){return e.vertexAttribPointer(u,o,e.FLOAT,!1,i,s)})),Qe(e,t,(function(){return e.enableVertexAttribArray(u)})),!0)}function SM(e,t,n,r){AM(e,r),Qe(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),Qe(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function kM(e,t,n,r){return Va(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function EM(e,t,n){return e.getUniformLocation(t,n)}function TM(e,t,n,r,a,o){Qe(e,t,(function(){return SM(e,t,r,o)})),Qe(e,t,(function(){return e.uniform1i(a,o)}))}function vf(e,t,n,r){Qe(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),Qe(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function k0(e,t,n){Qe(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),Qe(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function ol(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+RM(e,t))}function RM(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Va(e,t,n,r){var a=Qe(e,t,(function(){return n()}));if(a==null)throw new Error(r);return a}function AM(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function rc(e,t){return t===void 0&&(t=2),Ke(e.slice(0,e.length-t))}function ac(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function pf(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[rc(e)].concat(ac(e))),t}function IM(e,t){var n;t===void 0&&(t=!1);var r=Se().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,(e=e.map((function(l,c){return c>=e.length-2?fw(e[c]):e[c]}))).length===1&&(e=[2,e[0]])),e.length!==2){var a=Lo(e);e=a.newShape}var o=Ke(e);if(e.length<=1&&o<=r)return[1,o];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var i=rc(e),s=2,u=2;return e.length&&(s=(n=ac(e))[0],u=n[1]),bh(o=i*(s/2)*(u/2)).map((function(l){return 2*l}))}return bh(o)}function il(e){return e%2==0}function sl(e,t){if(En(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||il(n)&&il(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&il(e[0])&&il(t[0])}function MM(e){if(df==null){var t=fa(e);df=t.getParameter(t.MAX_TEXTURE_SIZE)}return df}function DM(e){if(ff==null){var t=fa(e);ff=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ff)}function PM(e){if(e===0)return 0;var t=fa(e);return Sr(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:Sr(t,"EXT_disjoint_timer_query")?1:0}function Sr(e,t){return e.getExtension(t)!=null}function E0(e){try{if(fa(e)!=null)return!0}catch{return!1}return!1}function FM(e){if(e===0)return!1;var t=fa(e);if(e===1){if(!Sr(t,"OES_texture_float"))return!1}else if(!Sr(t,"EXT_color_buffer_float"))return!1;return Eh(t)}function NM(e){if(e===0)return!1;var t=fa(e);if(e!==1){if(Sr(t,"EXT_color_buffer_float"))return Eh(t);if(Sr(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return(function(r,a){var o=zv(r,a),i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(i),r.deleteFramebuffer(s),u})(t,n)}return!1}return!!Sr(t,"OES_texture_float")&&!!Sr(t,"WEBGL_color_buffer_float")&&Eh(t)}function Eh(e){var t=zv(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function OM(e){return e===2&&fa(e).fenceSync!=null}var ot=Se();function ww(e){Se().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Le(e,t){return ie.tidy(e,t)}function rr(e){bw(e).forEach((function(t){return t.dispose()}))}function BM(e){return ie.keep(e)}function oc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Se().getBool("IS_TEST")||console.warn.apply(console,e)}function _o(e,t){var n=e;if(ia(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||ia(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&Se().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&(function a(o,i,s){if(s=s||[],!Array.isArray(o)&&!ia(o))return void U(i.length===0,(function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+i[0]+" elements"}));U(i.length>0,(function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"})),U(o.length===i[0],(function(){return"Element arr["+s.join("][")+"] should have "+i[0]+" elements, but has "+o.length+" elements"}));for(var u=i.slice(1),l=0;l<o.length;++l)a(o[l],u,s.concat(l))})(e,r,[]),r}function T0(e,t,n,r){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function z(e,t,n,r){if(r===void 0&&(r="numeric"),e instanceof Yt)return T0(r,e.dtype,t,n),e;var a=Tu(e);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),T0(r,a,t,n),e==null||!ia(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var o=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+o+"'")}var i=_o(e,a);ia(e)||Array.isArray(e)||(e=[e]);var s=a!=="string"?vw(e,a,Se().getBool("DEBUG")):us(e,[],!0);return ie.makeTensor(s,i,a)}function ic(e,t,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(a,o){return z(a,t+"["+o+"]",n)}),r)}function _w(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function qM(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)n.indexOf(s)===-1?a.push(e[o++]):a.push(t[i++]);return a}function qn(e,t){for(var n=[],r=e.length,a=0;a<r;a++)t.indexOf(a)===-1&&n.push(e[a]);return[n,t.map((function(o){return e[o]}))]}function or(e,t){return qM(e,t.map((function(n){return 1})),t)}function ur(e,t,n){U(_w(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function ha(e,t){if(_w(e,t))return null;for(var n=[],r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach((function(a){return n.push(a)})),n}function $v(e){return e.map((function(t,n){return[n,t]})).sort((function(t,n){return t[1]-n[1]})).map((function(t){return t[0]}))}function va(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function LM(e,t){var n=e[0].length;e.forEach((function(a,o){U(a.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+n+")"}))})),U(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(a,o){for(var i=0;i<n;i++)U(i===t||a[i]===r[i],(function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."}))}))}function cs(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function te(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var a=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];ie.startScope(n);try{var s=r.apply(void 0,o);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ie.endScope(s),s}catch(u){throw ie.endScope(null),u}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}ot.registerFlag("HAS_WEBGL",(function(){return ot.getNumber("WEBGL_VERSION")>0})),ot.registerFlag("WEBGL_VERSION",(function(){return E0(2)?2:E0(1)?1:0})),ot.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return ot.get("WEBGL_VERSION")===2})),ot.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),ot.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),ot.registerFlag("WEBGL_PACK",(function(){return ot.getBool("HAS_WEBGL")})),ot.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return ot.getBool("WEBGL_PACK")})),ot.registerFlag("WEBGL_PACK_CLIP",(function(){return ot.getBool("WEBGL_PACK")})),ot.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),ot.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return ot.getBool("WEBGL_PACK")})),ot.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return ot.getBool("WEBGL_PACK")})),ot.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return ot.getBool("WEBGL_PACK")})),ot.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return ot.getBool("WEBGL_PACK")})),ot.registerFlag("WEBGL_PACK_REDUCE",(function(){return ot.getBool("WEBGL_PACK")})),ot.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return ot.getBool("WEBGL_PACK")})),ot.registerFlag("WEBGL_CONV_IM2COL",(function(){return ot.getBool("WEBGL_PACK")})),ot.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return MM(ot.getNumber("WEBGL_VERSION"))})),ot.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return DM(ot.getNumber("WEBGL_VERSION"))})),ot.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=ot.getNumber("WEBGL_VERSION");return e===0?0:PM(e)})),ot.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return ot.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),ot.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return FM(ot.getNumber("WEBGL_VERSION"))})),ot.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!ot.getBool("WEBGL_FORCE_F16_TEXTURES")&&ot.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),ot.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return NM(ot.getNumber("WEBGL_VERSION"))})),ot.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return OM(ot.getNumber("WEBGL_VERSION"))})),ot.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return ot.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),yw=ww;var Mn=te({complex_:function(e,t){var n=z(e,"real","complex"),r=z(t,"imag","complex");return Pt(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),ie.runKernelFunc((function(a){return a.complex(n,r)}),{$real:n,$imag:r})}}),Cr=te({real_:function(e){var t=z(e,"input","real");return ie.runKernelFunc((function(n){return n.real(t)}),{$input:t})}}),na=te({imag_:function(e){var t=z(e,"input","imag");return ie.runKernelFunc((function(n){return n.imag(t)}),{$input:t})}});function Pn(e,t,n){return Co(e,t,_o(e,n),n)}function Co(e,t,n,r){if(r==null&&(r=Tu(e)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ia(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){mw(t);var a=Ke(t),o=Ke(n);U(a===o,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+a+" values but has "+o}));for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==Ke(t.slice(i));U(n[i]===t[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return ia(e)||Array.isArray(e)||(e=[e]),t=t||n,e=r!=="string"?vw(e,r,Se().getBool("DEBUG")):us(e,[],!0),ie.makeTensor(e,t,r)}function Be(e,t){if((ia(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&ia(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Co(e,[],[],t)}function dn(e,t){ys(e);var n=_o(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Co(e,null,n,t)}function ho(e,t,n){if(ys(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=_o(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Co(e,t,r,n)}function Hv(e,t,n){if(ys(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=_o(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Co(e,t,r,n)}function tr(e,t,n){if(ys(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=_o(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Co(e,t,r,n)}function VM(e,t,n){if(ys(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=_o(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Co(e,t,r,n)}function zM(e,t,n){if(ys(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=_o(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Co(e,t=t||r,r,n)}function $M(e,t,n,r){return t===void 0&&(t=!0),ie.makeVariable(e,t,n,r)}function bs(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=bs(e,"float32"),r=Ut(e,"float32");return Mn(n,r)}var a=pw(Ke(e),t);return ie.makeTensor(a,e,t)}function Ut(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=Ut(e,"float32"),r=Ut(e,"float32");return Mn(n,r)}var a=Ru(Ke(e),t);return ie.makeTensor(a,e,t)}function ua(e,t,n){return ie.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function HM(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return ie.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})}function sc(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Ut([0],r);var a=Ru(Math.abs(Math.ceil((t-e)/n)),r);t<e&&n===1&&(n=-1),a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+n;return dn(a,r)}var Cw=te({onesLike_:function(e){var t=z(e,"x","onesLike");if(t.dtype==="complex64"){var n=Cw(Cr(t)),r=St(na(t));return Mn(n,r)}return ie.runKernelFunc((function(a){return a.onesLike(t)}),{$x:t},(function(a,o){return{$x:function(){return St(a)}}}))}}),St=te({zerosLike_:function(e){var t=z(e,"x","zerosLike");return ie.runKernelFunc((function(n){return n.zerosLike(t)}),{$x:t},(function(n,r){return{$x:function(){return St(n)}}}))}}),yn=te({concat_:function(e,t){t===void 0&&(t=0),U(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=ic(e,"tensors","concat");n[0].dtype==="complex64"&&n.forEach((function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")})),t=_n(t,n[0].shape)[0];var r=cs(n.map((function(s){return s.shape})),t);if(Ke(r)===0)return Pn([],r);if((n=n.filter((function(s){return s.size>0}))).length===1)return n[0];var a=n.map((function(s){return s.shape}));LM(a,t);var o=n,i={axis:t};return ie.runKernelFunc((function(s){return s.concat(n,t)}),o,(function(s){var u=a.map((function(l){return l[t]}));return Wv(s,u,t).map((function(l){return function(){return l}}))}),"Concat",i)}}),WM=te({concat1d_:function(e){return yn(e,0)}}),UM=te({concat2d_:function(e,t){return yn(e,t)}}),jM=te({concat3d_:function(e,t){return yn(e,t)}}),GM=te({concat4d_:function(e,t){return yn(e,t)}}),Wv=te({split_:function(e,t,n){n===void 0&&(n=0);var r,a=z(e,"x","split");return n=_n(n,a.shape)[0],typeof t=="number"?(U(a.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(a.shape[n]/t)):(U(a.shape[n]===t.reduce((function(o,i){return o+i})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),ie.runKernelFunc((function(o){return o.split(a,r,n)}),{$x:a},(function(o){return{$x:function(){return yn(o,n)}}}))}});function li(e,t){return e(t={exports:{}},t.exports),t.exports}var KM=li((function(e){(function(t,n,r){function a(s){var u,l=this,c=(u=4022871197,function(d){d=d.toString();for(var f=0;f<d.length;f++){var h=.02519603282416938*(u+=d.charCodeAt(f));h-=u=h>>>0,u=(h*=u)>>>0,u+=4294967296*(h-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var d=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=0|d)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function o(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function i(s,u){var l=new a(s),c=u&&u.state,d=l.next;return d.int32=function(){return 4294967296*l.next()|0},d.double=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=i:this.alea=i})(0,e)})),XM=li((function(e){(function(t,n,r){function a(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var d=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^d^d>>>8},s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function i(s,u){var l=new a(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=i:this.xor128=i})(0,e)})),QM=li((function(e){(function(t,n,r){function a(s){var u=this,l="";u.next=function(){var d=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^d^d<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function i(s,u){var l=new a(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=i:this.xorwow=i})(0,e)})),YM=li((function(e){(function(t,n,r){function a(s){var u=this;u.next=function(){var l,c,d=u.x,f=u.i;return l=d[f],c=(l^=l>>>7)^l<<24,c^=(l=d[f+1&7])^l>>>10,c^=(l=d[f+3&7])^l>>>3,c^=(l=d[f+4&7])^l<<7,l=d[f+7&7],c^=(l^=l<<13)^l<<9,d[f]=c,u.i=f+1&7,c},(function(l,c){var d,f=[];if(c===(0|c))f[0]=c;else for(c=""+c,d=0;d<c.length;++d)f[7&d]=f[7&d]<<15^c.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],l.x=f,l.i=0,d=256;d>0;--d)l.next()})(u,s)}function o(s,u){return u.x=s.x.slice(),u.i=s.i,u}function i(s,u){s==null&&(s=+new Date);var l=new a(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(c.x&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=i:this.xorshift7=i})(0,e)})),JM=li((function(e){(function(t,n,r){function a(s){var u=this;u.next=function(){var l,c,d=u.w,f=u.X,h=u.i;return u.w=d=d+1640531527|0,c=f[h+34&127],l=f[h=h+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=f[h]=c^l,u.i=h,c+(d^d>>>16)|0},(function(l,c){var d,f,h,v,m,p=[],y=128;for(c===(0|c)?(f=c,c=null):(c+="\0",f=0,y=Math.max(y,c.length)),h=0,v=-32;v<y;++v)c&&(f^=c.charCodeAt((v+32)%c.length)),v===0&&(m=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,v>=0&&(m=m+1640531527|0,h=(d=p[127&v]^=f+m)==0?h+1:0);for(h>=128&&(p[127&(c&&c.length||0)]=-1),h=127,v=512;v>0;--v)f=p[h+34&127],d=p[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,p[h]=f^d;l.w=m,l.X=p,l.i=h})(u,s)}function o(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function i(s,u){s==null&&(s=+new Date);var l=new a(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(c.X&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=i:this.xor4096=i})(0,e)})),ZM=li((function(e){(function(t,n,r){function a(s){var u=this,l="";u.next=function(){var d=u.b,f=u.c,h=u.d,v=u.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^v,v=v-d|0,u.b=d=d<<20^d>>>12^f,u.c=f=f-h|0,u.d=h<<16^f>>>16^v,u.a=v-d|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function o(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function i(s,u){var l=new a(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=i:this.tychei=i})(0,e)})),Bo=li((function(e){(function(t,n){var r,a=this,o=256,i=6,s="random",u=n.pow(o,i),l=n.pow(2,52),c=2*l,d=o-1;function f(y,x,b){var g=[],w=m((function R(A,k){var M,T=[],D=typeof A;if(k&&D=="object")for(M in A)try{T.push(R(A[M],k-1))}catch{}return T.length?T:D=="string"?A:A+"\0"})((x=x==1?{entropy:!0}:x||{}).entropy?[y,p(t)]:y??(function(){try{var R;return r&&(R=r.randomBytes)?R=R(o):(R=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(R)),p(R)}catch{var A=a.navigator,k=A&&A.plugins;return[+new Date,a,k,a.screen,p(t)]}})(),3),g),S=new h(g),E=function(){for(var R=S.g(i),A=u,k=0;R<l;)R=(R+k)*o,A*=o,k=S.g(1);for(;R>=c;)R/=2,A/=2,k>>>=1;return(R+k)/A};return E.int32=function(){return 0|S.g(4)},E.quick=function(){return S.g(4)/4294967296},E.double=E,m(p(S.S),t),(x.pass||b||function(R,A,k,M){return M&&(M.S&&v(M,S),R.state=function(){return v(S,{})}),k?(n[s]=R,A):R})(E,w,"global"in x?x.global:this==n,x.state)}function h(y){var x,b=y.length,g=this,w=0,S=g.i=g.j=0,E=g.S=[];for(b||(y=[b++]);w<o;)E[w]=w++;for(w=0;w<o;w++)E[w]=E[S=d&S+y[w%b]+(x=E[w])],E[S]=x;(g.g=function(R){for(var A,k=0,M=g.i,T=g.j,D=g.S;R--;)A=D[M=d&M+1],k=k*o+D[d&(D[M]=D[T=d&T+A])+(D[T]=A)];return g.i=M,g.j=T,k})(o)}function v(y,x){return x.i=y.i,x.j=y.j,x.S=y.S.slice(),x}function m(y,x){for(var b,g=y+"",w=0;w<g.length;)x[d&w]=d&(b^=19*x[d&w])+g.charCodeAt(w++);return p(x)}function p(y){return String.fromCharCode.apply(0,y)}if(n["seed"+s]=f,m(n.random(),t),e.exports){e.exports=f;try{r=require("crypto")}catch{}}})([],Math)}));Bo.alea=KM,Bo.xor128=XM,Bo.xorwow=QM,Bo.xorshift7=YM,Bo.xor4096=JM,Bo.tychei=ZM;var Jc=Bo.alea,Uv=(function(){function e(t,n,r,a,o){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=Jc(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var n,r,a=!1;!a;){var o=void 0,i=void 0,s=void 0;do s=(o=2*this.random()-1)*o+(i=2*this.random()-1)*i;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*o*u,r=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(n)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e})(),eD=(function(){function e(t,n,r,a){this.alpha=t,this.beta=1/n,this.dtype=r;var o=a||Math.random();this.randu=Jc(o.toString()),this.randn=new Uv(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,n,r,a,o,i;;){do a=this.randn.nextValue(),i=1+this.c*a;while(i<=0);if(i*=i*i,n=1-.331*(t=a*a)*t,r=.5*t+this.d*(1-i+Math.log(i)),(o=this.randu())<n||Math.log(o)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e})(),tD=(function(){function e(t,n,r,a){var o=this;if(t===void 0&&(t=0),n===void 0&&(n=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=t,this.range=n-t,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+n+" <= 1 and dtype is not float");this.random=Jc(a)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e})();function ct(e,t,n){return t===void 0&&(t="float32"),t=t||"float32",mw(e),new vu(e,t,n)}function nD(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var Sw=te({batchToSpaceND_:function(e,t,n){var r=z(e,"x","batchToSpaceND"),a=t.reduce((function(o,i){return o*i}));return U(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),U(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),U(r.shape[0]%a==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+a})),ie.runKernelFunc((function(o){return o.batchToSpaceND(r,t,n)}),{$x:r},(function(o){return{$x:function(){return o.spaceToBatchND(t,n)}}}))}}),rD=te({broadcastTo_:function(e,t){var n=z(e,"broadcastTo","x"),r=n.shape;if(t.some((function(u){return!(u>0)||u%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=n.reshape(a)}for(var o=Array.from(t),i=t.length-1;i>=0;i--)if(n.shape[i]===t[i])o[i]=1;else if(n.shape[i]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=o.map((function(u,l){return u>1?l:-1})).filter((function(u){return u>=0}));return s.length===0?n.clone():ie.runKernelFunc((function(u){return u.tile(n,o)}),{input:n},(function(u){return{input:function(){return u.sum(s,!0)}}}))}}),aD=te({cast_:function(e,t){var n=z(e,"x","cast");if(!QI(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:t};return ie.runKernelFunc((function(a){return a.cast(n,t)}),{x:n},(function(a){return{x:function(){return a.clone()}}}),"Cast",r)}}),oD=te({clone_:function(e){var t=z(e,"x","clone",null);return ie.runKernelFunc((function(){return ie.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{$x:t},(function(n){return{$x:function(){return n.toFloat()}}}))}}),iD=te({cumsum_:function(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var a=z(e,"x","cumsum"),o=ha([t|=0],a.rank),i=a;o!=null&&(i=a.transpose(o));var s=va(1,a.rank)[0],u=ie.runKernelFunc((function(l){return l.cumsum(i,s,n,r)}),{permutedX:i},(function(l){return{permutedX:function(){return l.cumsum(t,n,!r)}}}));return o!=null&&(u=u.transpose(o)),u}}),sD=te({depthToSpace_:function(e,t,n){n===void 0&&(n="NHWC");var r=z(e,"x","depthToSpace"),a=n==="NHWC"?r.shape[1]:r.shape[2],o=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];return U(a*t>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+t+`  for depthToSpace with input shape
      `+r.shape})),U(o*t>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+t+` for depthToSpace with input shape
          `+r.shape})),U(i%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+i+" for depthToSpace with input shape "+r.shape})),ie.runKernelFunc((function(s){return s.depthToSpace(r,t,n)}),{$x:r})}}),_r=te({expandDims_:function(e,t){t===void 0&&(t=0);var n=z(e,"x","expandDims",null);U(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(U(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),qr(n,r)}}),kw=te({eye_:function(e,t,n,r){r===void 0&&(r="float32"),t==null&&(t=e);for(var a=ct([e,t],r),o=e<=t?e:t,i=0;i<o;++i)a.set(1,i,i);var s=a.toTensor().as2D(e,t);if(n==null)return s;if(n.length===1)return Xi(_r(s,0),[n[0],1,1]);if(n.length===2)return Xi(_r(_r(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Xi(_r(_r(_r(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),uD=te({multinomial_:function(e,t,n,r){r===void 0&&(r=!1);var a=z(e,"logits","multinomial"),o=a.size,i=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=i===1?a.as2D(1,-1):a,u=ie.runKernelFunc((function(l){return l.multinomial(s,r,t,n)}),{logits2D:s});return i===1?u.as1D():u}}),Th=te({oneHot_:function(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var a=z(e,"indices","oneHot","int32"),o=a.shape.concat([t]);return a=a.flatten(),ie.runKernelFunc((function(i){return i.oneHot(a,t,n,r)}),{$indices:a},(function(i){return{$indices:function(){return Ut(a.shape,"float32")}}})).reshape(o)}}),ci=te({pad_:function(e,t,n){n===void 0&&(n=0);var r=z(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n};return ie.runKernelFunc((function(o){return o.pad(r,t,n)}),{x:r},(function(o){var i=t.map((function(s){return s[0]}));return{x:function(){return o.slice(i,r.shape)}}}),"PadV2",a)}}),lD=te({pad1d_:function(e,t,n){return n===void 0&&(n=0),U(t.length===2,(function(){return"Invalid number of paddings. Must be length of 2."})),ci(e,[t],n)}}),cD=te({pad2d_:function(e,t,n){return n===void 0&&(n=0),U(t.length===2&&t[0].length===2&&t[1].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ci(e,t,n)}}),dD=te({pad3d_:function(e,t,n){return n===void 0&&(n=0),U(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ci(e,t,n)}}),fD=te({pad4d_:function(e,t,n){return n===void 0&&(n=0),U(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ci(e,t,n)}}),hD=te({rand_:function(e,t,n){var r=Ke(e),a=null;if(n==null||n==="float32")a=new Float32Array(r);else if(n==="int32")a=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var o=0;o<r;o++)a[o]=t();return ie.makeTensor(a,e,n)}}),vD=te({randomNormal_:function(e,t,n,r,a){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new Uv(t,n,r,!1,a),i=ct(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),pD=te({randomGamma_:function(e,t,n,r,a){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new eD(t,n,r,a),i=ct(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),Ew=te({randomUniform_:function(e,t,n,r,a){t===void 0&&(t=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var o=ct(e,r),i=new tD(t,n,null,a),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),qr=te({reshape_:function(e,t){var n=z(e,"x","reshape",null);t=KI(t,n.size),U(n.size===Ke(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return ie.runKernelFunc((function(a){return a.reshape(n,t)}),{x:n},(function(a){return{x:function(){return a.reshape(n.shape)}}}),"Reshape",r)}}),Tw=te({spaceToBatchND_:function(e,t,n){var r=z(e,"x","spaceToBatchND");return U(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),U(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),U(r.shape.reduce((function(a,o,i){return i>0&&i<=t.length?a&&(o+n[i-1][0]+n[i-1][1])%t[i-1]==0:a}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),ie.runKernelFunc((function(a){return a.spaceToBatchND(r,t,n)}),{$x:r},(function(a){return{$x:function(){return a.batchToSpaceND(t,n)}}}))}}),Rw=te({squeeze_:function(e,t){var n=z(e,"x","squeeze");return qr(n,Lo(n.shape,t).newShape)}}),mr=te({stack_:function(e,t){t===void 0&&(t=0);var n=ic(e,"tensors","stack");if(U(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length===1)return n[0].expandDims(t);var r=n[0].rank,a=n[0].shape,o=n[0].dtype;U(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(s){Pt(a,s.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(s){U(o===s.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=n.map((function(s){return s.expandDims(t)}));return yn(i,t)}}),Xi=te({tile_:function(e,t){var n=z(e,"x","tile",null);U(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],a={reps:t};return ie.runKernelFunc((function(o,i){var s=o.tile(n,t);return i([n]),s}),{x:n},(function(o,i){var s=i[0];return{x:function(){var u=St(s);if(s.rank===1)for(var l=0;l<t[0];++l)u=u.add(o.slice([l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(l=0;l<t[0];++l)for(var c=0;c<t[1];++c)u=u.add(o.slice([l*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(l=0;l<t[0];++l)for(c=0;c<t[1];++c)for(var d=0;d<t[2];++d)u=u.add(o.slice([l*s.shape[0],c*s.shape[1],d*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(l=0;l<t[0];++l)for(c=0;c<t[1];++c)for(d=0;d<t[2];++d)for(var f=0;f<t[3];++f)u=u.add(o.slice([l*s.shape[0],c*s.shape[1],d*s.shape[2],f*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return u}}}),"Tile",a,r)}}),mD=te({truncatedNormal_:function(e,t,n,r,a){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new Uv(t,n,r,!0,a),i=ct(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),bn=te({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var n=z(e,"x","unstack");U(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return ie.runKernelFunc((function(a){return a.unstack(n,t)}),{x:n},(function(a){return{x:function(){return mr(a,t)}}}),"Unpack",r)}}),gD=function(e,t){return Ue(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c,d;return je(this,(function(f){switch(f.label){case 0:return n=z(e,"x","setdiff1d"),r=z(t,"y","setdiff1d"),U(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),U(n.rank===1,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),U(r.rank===1,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return a=f.sent(),[4,r.data()];case 2:for(o=f.sent(),i=new Set(o),s=0,c=0;c<a.length;c++)i.has(a[c])||s++;for(u=new vu([s],n.dtype),l=new vu([s],"int32"),c=0,d=0;c<a.length;c++)i.has(a[c])||(u.values[d]=a[c],l.values[d]=c,d++);return[2,[u.toTensor(),l.toTensor()]]}}))}))};function uc(e,t,n,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var o=t.length,i=0;i<o;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(o+1))}return a}function lc(e,t,n){n===void 0&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{var o=[],i=[];for(a=1;a<e;++a)a>=2*t+1||a%2==1?i.push(a):o.push(a);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function cc(e,t,n,r){r===void 0&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function Aw(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Iw(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function Mw(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],a=1,o=0;o<n.length-1;++o)a*=n[o];var i=e.shape,s=n.slice();s.pop();var u=1;for(o=r;o<e.rank;++o)u*=i[o],s.push(i[o]);var l=sa(e.shape).map((function(c){return c/u})).concat([1]).slice(0,r);return[s,a,u,l]}var Dw=30;function mf(e){return e<=Dw?e:wh(e,Math.floor(Math.sqrt(e)))}function yD(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+a+".";if(n.rank<a)throw new Error(o+" update.rank < "+a+". ");if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != "+(a+e.length-r));for(var i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+t.shape[i]+").");for(i=0;i<n.rank-a;++i)if(n.shape[i+a]!==e[i+r])throw new Error(o+" updates.shape["+(i+a)+"] ("+n.shape[i+a]+") != shape["+(i+a)+"] ("+e[i+a]+")")}function bD(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}yD(n,t,e)}function dc(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,o=n.length,i=1,s=a;s<o;++s)i*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:Ke(t.shape)/u,sliceSize:i,strides:sa(n.slice(0,a)).concat([1]),outputSize:Ke(n)}}function xD(e,t,n){U(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),U(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(o){U(t[o]+n[o]<=e.shape[o],(function(){return"Error in slice"+e.rank+"D: begin["+o+"] + size["+o+"] ("+(t[o]+n[o])+") would overflow input.shape["+o+"] ("+e.shape[o]+")"}))},a=0;a<e.rank;++a)r(a)}function R0(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function jv(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function wD(e,t,n,r,a){var o=t[a],i=n[a]||1;(e&1<<a||o==null)&&(o=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[a];return o<0&&(o+=s),o=yh(0,o,s-1)}function _D(e,t,n,r,a){var o=t[a],i=n[a]||1;(e&1<<a||o==null)&&(o=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[a];return o<0&&(o+=s),o=i>0?yh(0,o,s):yh(-1,o,s-1)}function Pw(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function Fw(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function CD(e,t){U(xh(e),(function(){return"The f passed in variableGrads(f) must be a function"})),U(t==null||Array.isArray(t)&&t.every((function(c){return c instanceof ls})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=t!=null;if(!n)for(var r in t=[],ie.registeredVariables)t.push(ie.registeredVariables[r]);var a=n?t.filter((function(c){return!c.trainable})):null,o=t.length;U((t=t.filter((function(c){return c.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."}));var i=ie.gradients(e,t,null,!0),s=i.value,u=i.grads;U(u.some((function(c){return c!=null})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),U(s.rank===0,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var l={};return t.forEach((function(c,d){u[d]!=null&&(l[c.name]=u[d])})),a?.forEach((function(c){return l[c.name]=null})),{value:s,grads:l}}function Zc(e){return ie.customGrad(e)}var za=te({softmax_:function(e,t){t===void 0&&(t=-1);var n=z(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return ie.runKernelFunc((function(r,a){var o=r.softmax(n,t);return a([o]),o}),{logits:n},(function(r,a){var o=a[0],i=r.mul(o);return{logits:function(){return i.sub(i.sum([t],!0).mul(o))}}}),"Softmax",{dim:t},[],[!0])}}),SD=te({logSoftmax_:function(e,t){t===void 0&&(t=-1);var n=z(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return Zc((function(r,a){var o=r.max(t,!0),i=r.sub(o),s=i.toFloat().sub(i.exp().sum(t,!0).log());return a([s]),{value:s,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(t,!0).mul(c))}}}))(n)}}),Nw=(function(){function e(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,n){this.dataIdsCount++,this.data.set(t,n)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e})(),Ow=(function(){function e(){}return e.prototype.time=function(t){return ve("time")},e.prototype.read=function(t){return ve("read")},e.prototype.readSync=function(t){return ve("readSync")},e.prototype.numDataIds=function(){return ve("numDataIds")},e.prototype.disposeData=function(t){return ve("disposeData")},e.prototype.write=function(t,n,r){return ve("write")},e.prototype.move=function(t,n,r,a){return ve("move")},e.prototype.memory=function(){return ve("memory")},e.prototype.floatPrecision=function(){return ve("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,n,r,a){return ve("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,ve("fusedBatchMatMul")},e.prototype.slice=function(t,n,r){return ve("slice")},e.prototype.stridedSlice=function(t,n,r,a){return ve("stridedSlice")},e.prototype.unstack=function(t,n){return ve("unstack")},e.prototype.reverse=function(t,n){return ve("reverse")},e.prototype.concat=function(t,n){return ve("concat")},e.prototype.neg=function(t){return ve("neg")},e.prototype.add=function(t,n){return ve("add")},e.prototype.addN=function(t){return ve("addN")},e.prototype.subtract=function(t,n){return ve("subtract")},e.prototype.multiply=function(t,n){return ve("multiply")},e.prototype.realDivide=function(t,n){return ve("realDivide")},e.prototype.floorDiv=function(t,n){return ve("floorDiv")},e.prototype.sum=function(t,n){return ve("sum")},e.prototype.prod=function(t,n){return ve("prod")},e.prototype.unsortedSegmentSum=function(t,n,r){return ve("unsortedSegmentSum")},e.prototype.argMin=function(t,n){return ve("argMin")},e.prototype.argMax=function(t,n){return ve("argMax")},e.prototype.equal=function(t,n){return ve("equal")},e.prototype.notEqual=function(t,n){return ve("notEqual")},e.prototype.less=function(t,n){return ve("less")},e.prototype.lessEqual=function(t,n){return ve("lessEqual")},e.prototype.greater=function(t,n){return ve("greater")},e.prototype.greaterEqual=function(t,n){return ve("greaterEqual")},e.prototype.logicalNot=function(t){return ve("logicalNot")},e.prototype.logicalAnd=function(t,n){return ve("logicalAnd")},e.prototype.logicalOr=function(t,n){return ve("logicalOr")},e.prototype.where=function(t){return ve("where")},e.prototype.select=function(t,n,r){return ve("select")},e.prototype.topk=function(t,n,r){return ve("topk")},e.prototype.min=function(t,n){return ve("min")},e.prototype.minimum=function(t,n){return ve("minimum")},e.prototype.mod=function(t,n){return ve("mod")},e.prototype.max=function(t,n){return ve("max")},e.prototype.maximum=function(t,n){return ve("maximum")},e.prototype.all=function(t,n){return ve("all")},e.prototype.any=function(t,n){return ve("any")},e.prototype.squaredDifference=function(t,n){return ve("squaredDifference")},e.prototype.ceil=function(t){return ve("ceil")},e.prototype.floor=function(t){return ve("floor")},e.prototype.round=function(t){return ve("round")},e.prototype.sign=function(t){return ve("sign")},e.prototype.isNaN=function(t){return ve("isNaN")},e.prototype.isInf=function(t){return ve("isInf")},e.prototype.isFinite=function(t){return ve("isFinite")},e.prototype.pow=function(t,n){return ve("pow")},e.prototype.exp=function(t){return ve("exp")},e.prototype.expm1=function(t){return ve("expm1")},e.prototype.softmax=function(t,n){return ve("softmax")},e.prototype.log=function(t){return ve("log")},e.prototype.log1p=function(t){return ve("log1p")},e.prototype.sqrt=function(t){return ve("sqrt")},e.prototype.rsqrt=function(t){return ve("rsqrt")},e.prototype.square=function(t){return ve("square")},e.prototype.reciprocal=function(t){return ve("reciprocal")},e.prototype.relu=function(t){return ve("relu")},e.prototype.relu6=function(t){return ve("relu6")},e.prototype.prelu=function(t,n){return ve("prelu")},e.prototype.elu=function(t){return ve("elu")},e.prototype.eluDer=function(t,n){return ve("eluDer")},e.prototype.selu=function(t){return ve("selu")},e.prototype.int=function(t){return ve("int")},e.prototype.clip=function(t,n,r){return ve("clip")},e.prototype.abs=function(t){return ve("abs")},e.prototype.complexAbs=function(t){return ve("complexAbs")},e.prototype.sigmoid=function(t){return ve("sigmoid")},e.prototype.softplus=function(t){return ve("softplus")},e.prototype.sin=function(t){return ve("sin")},e.prototype.cos=function(t){return ve("cos")},e.prototype.tan=function(t){return ve("tan")},e.prototype.asin=function(t){return ve("asin")},e.prototype.acos=function(t){return ve("acos")},e.prototype.atan=function(t){return ve("atan")},e.prototype.atan2=function(t,n){return ve("atan2")},e.prototype.sinh=function(t){return ve("sinh")},e.prototype.cosh=function(t){return ve("cosh")},e.prototype.tanh=function(t){return ve("tanh")},e.prototype.asinh=function(t){return ve("asinh")},e.prototype.acosh=function(t){return ve("acosh")},e.prototype.atanh=function(t){return ve("atanh")},e.prototype.erf=function(t){return ve("erf")},e.prototype.step=function(t,n){return ve("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,ve("fusedConv2d")},e.prototype.conv2d=function(t,n,r){return ve("conv2d")},e.prototype.conv2dDerInput=function(t,n,r){return ve("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,n,r){return ve("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,ve("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,n,r){return ve("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,n,r){return ve("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,n,r){return ve("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,n,r){return ve("conv3d")},e.prototype.conv3dDerInput=function(t,n,r){return ve("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,n,r){return ve("conv3dDerFilter")},e.prototype.maxPool=function(t,n){return ve("maxPool")},e.prototype.maxPoolBackprop=function(t,n,r,a){return ve("maxPoolBackprop")},e.prototype.avgPool=function(t,n){return ve("avgPool")},e.prototype.avgPoolBackprop=function(t,n,r){return ve("avgPoolBackprop")},e.prototype.avgPool3d=function(t,n){return ve("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,n,r){return ve("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,n){return ve("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,n,r,a){return ve("maxPool3dBackprop")},e.prototype.reshape=function(t,n){return ve("reshape")},e.prototype.cast=function(t,n){return ve("cast")},e.prototype.tile=function(t,n){return ve("tile")},e.prototype.pad=function(t,n,r){return ve("pad")},e.prototype.transpose=function(t,n){return ve("transpose")},e.prototype.gather=function(t,n,r){return ve("gather")},e.prototype.gatherND=function(t,n){return ve("gatherND")},e.prototype.scatterND=function(t,n,r){return ve("scatterND")},e.prototype.batchToSpaceND=function(t,n,r){return ve("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,n,r){return ve("spaceToBatchND")},e.prototype.resizeBilinear=function(t,n,r,a){return ve("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,n,r){return ve("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,n,r,a){return ve("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,n,r){return ve("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,n,r,a,o,i){return ve("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,n,r,a,o){return ve("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,n,r,a,o,i,s){return ve("LRNGrad")},e.prototype.multinomial=function(t,n,r,a){return ve("multinomial")},e.prototype.oneHot=function(t,n,r,a){return ve("oneHot")},e.prototype.cumsum=function(t,n,r,a){return ve("cumsum")},e.prototype.nonMaxSuppression=function(t,n,r,a,o){return ve("nonMaxSuppression")},e.prototype.fft=function(t){return ve("fft")},e.prototype.ifft=function(t){return ve("ifft")},e.prototype.complex=function(t,n){return ve("complex")},e.prototype.real=function(t){return ve("real")},e.prototype.imag=function(t){return ve("imag")},e.prototype.cropAndResize=function(t,n,r,a,o,i){return ve("cropAndResize")},e.prototype.depthToSpace=function(t,n,r){return ve("depthToSpace")},e.prototype.split=function(t,n,r){return ve("split")},e.prototype.sparseToDense=function(t,n,r,a){return ve("sparseToDense")},e.prototype.diag=function(t){return ve("diag")},e.prototype.fill=function(t,n,r){return ve("fill")},e.prototype.onesLike=function(t){return ve("onesLike")},e.prototype.zerosLike=function(t){return ve("zerosLike")},e.prototype.linspace=function(t,n,r){return ve("linspace")},e.prototype.dispose=function(){return ve("dispose")},e})();function ve(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function io(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&i===1&&r.unshift(o)}return r}function xn(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(a==null||a===1&&i>1)&&n.unshift(o)}return n}function xt(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];o==null&&(o=1);var i=t[t.length-a-1];if(i==null&&(i=1),o===1)n.unshift(i);else if(i===1)n.unshift(o);else{if(o!==i)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(o)}}return n}function mu(e,t,n,r,a,o,i){i===void 0&&(i="channelsLast");var s,u=vc(t),l=u[0],c=u[1];if(i==="channelsLast")s=[l,c,e[3],e[3]];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);s=[l,c,e[1],e[1]]}return di(e,s,n,r,a,o,!1,i)}function fc(e,t,n,r,a,o,i){i===void 0&&(i="NDHWC");var s,u,l=Rh(t),c=l[0],d=l[1],f=l[2];if(i==="NDHWC")u="channelsLast",s=[c,d,f,e[4],e[4]];else{if(i!=="NCDHW")throw new Error("Unknown dataFormat "+i);u="channelsFirst",s=[c,d,f,e[1],e[1]]}return hc(e,s,n,r,a,!1,u,o)}function di(e,t,n,r,a,o,i,s){i===void 0&&(i=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],f=u[3];if(s==="channelsLast")l=e[0],c=e[1],d=e[2],f=e[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=e[0],f=e[1],c=e[2],d=e[3]}var h,v=t[0],m=t[1],p=t[3],y=vc(n),x=y[0],b=y[1],g=vc(r),w=g[0],S=g[1],E=Qi(v,w),R=Qi(m,S),A=(function(I,F,V,L,q,K,oe,W){var N,Q,Y;if(typeof I=="number"){N={top:I,bottom:I,left:I,right:I,type:I===0?"VALID":"NUMBER"};var fe=(function(ye,P,B,j,ne){j==null&&(j=Bw(ye,P,B));var se=ye[0],J=ye[1],me=Js((se-P+2*j)/B+1,ne);U(ln(me),(function(){return"The output # of rows ("+me+") must be an integer. Change the stride and/or zero pad parameters"}));var ge=Js((J-P+2*j)/B+1,ne);return U(ln(ge),(function(){return"The output # of columns ("+ge+") must be an integer. Change the stride and/or zero pad parameters"})),[me,ge]})([F,V],K,L,I,W);Q=fe[0],Y=fe[1]}else if(I==="same"){Q=Math.ceil(F/L),Y=Math.ceil(V/q);var $=Math.max(0,(Q-1)*L+K-F),O=Math.max(0,(Y-1)*q+oe-V),ee=Math.floor($/2),H=$-ee,ue=Math.floor(O/2);N={top:ee,bottom:H,left:ue,right:O-ue,type:"SAME"}}else{if(I!=="valid")throw Error("Unknown padding parameter: "+I);N={top:0,bottom:0,left:0,right:0,type:"VALID"},Q=Math.ceil((F-K+1)/L),Y=Math.ceil((V-oe+1)/q)}return{padInfo:N,outHeight:Q,outWidth:Y}})(a,c,d,x,b,E,R,o),k=A.padInfo,M=A.outHeight,T=A.outWidth,D=i?p*f:p;return s==="channelsFirst"?h=[l,D,M,T]:s==="channelsLast"&&(h=[l,M,T,D]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:d,inChannels:f,outHeight:M,outWidth:T,outChannels:D,padInfo:k,strideHeight:x,strideWidth:b,filterHeight:v,filterWidth:m,effectiveFilterHeight:E,effectiveFilterWidth:R,dilationHeight:w,dilationWidth:S,inShape:e,outShape:h,filterShape:t}}function hc(e,t,n,r,a,o,i,s){o===void 0&&(o=!1),i===void 0&&(i="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],f=u[3],h=u[4];if(i==="channelsLast")l=e[0],c=e[1],d=e[2],f=e[3],h=e[4];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);l=e[0],h=e[1],c=e[2],d=e[3],f=e[4]}var v,m=t[0],p=t[1],y=t[2],x=t[4],b=Rh(n),g=b[0],w=b[1],S=b[2],E=Rh(r),R=E[0],A=E[1],k=E[2],M=Qi(m,R),T=Qi(p,A),D=Qi(y,k),I=(function(oe,W,N,Q,Y,fe,$,O,ee,H,ue){var ye,P,B,j;if(typeof oe=="number"){ye={top:oe,bottom:oe,left:oe,right:oe,front:oe,back:oe,type:oe===0?"VALID":"NUMBER"};var ne=(function(de,Re,Fe,Me,De,et){De==null&&(De=Bw(de,Re,Me));var tt=de[0],he=de[1],Ee=de[2],ce=Js((tt-Re+2*De)/Me+1,et);U(ln(ce),(function(){return"The output # of depths ("+ce+") must be an integer. Change the stride and/or zero pad parameters"}));var Te=Js((he-Re+2*De)/Me+1,et);U(ln(Te),(function(){return"The output # of rows ("+Te+") must be an integer. Change the stride and/or zero pad parameters"}));var Pe=Js((Ee-Re+2*De)/Me+1,et);return U(ln(Pe),(function(){return"The output # of columns ("+Pe+") must be an integer. Change the stride and/or zero pad parameters"})),[ce,Te,Pe,Fe]})([W,N,Q,1],O,1,Y,oe,ue);P=ne[0],B=ne[1],j=ne[2]}else if(oe==="same"){P=Math.ceil(W/Y),B=Math.ceil(N/fe),j=Math.ceil(Q/$);var se=(P-1)*Y+O-W,J=(B-1)*fe+ee-N,me=(j-1)*$+H-Q,ge=Math.floor(se/2),xe=se-ge,pe=Math.floor(J/2),le=J-pe,X=Math.floor(me/2);ye={top:pe,bottom:le,left:X,right:me-X,front:ge,back:xe,type:"SAME"}}else{if(oe!=="valid")throw Error("Unknown padding parameter: "+oe);ye={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},P=Math.ceil((W-O+1)/Y),B=Math.ceil((N-ee+1)/fe),j=Math.ceil((Q-H+1)/$)}return{padInfo:ye,outDepth:P,outHeight:B,outWidth:j}})(a,c,d,f,g,w,S,M,T,D,s),F=I.padInfo,V=I.outDepth,L=I.outHeight,q=I.outWidth,K=o?x*h:x;return i==="channelsFirst"?v=[l,K,V,L,q]:i==="channelsLast"&&(v=[l,V,L,q,K]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:d,inWidth:f,inChannels:h,outDepth:V,outHeight:L,outWidth:q,outChannels:K,padInfo:F,strideDepth:g,strideHeight:w,strideWidth:S,filterDepth:m,filterHeight:p,filterWidth:y,effectiveFilterDepth:M,effectiveFilterHeight:T,effectiveFilterWidth:D,dilationDepth:R,dilationHeight:A,dilationWidth:k,inShape:e,outShape:v,filterShape:t}}function Bw(e,t,n,r){r===void 0&&(r=1);var a=Qi(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function vc(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Rh(e){return typeof e=="number"?[e,e,e]:e}function Qi(e,t){return t<=1?e:e+(e-1)*(t-1)}function Js(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function ds(e){var t=vc(e),n=t[0],r=t[1],a=t[2];return n===1&&r===1&&a===1}function ir(e,t){return ds(e)||ds(t)}function Gv(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function qw(e,t,n){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var r=Ut(e.shape),a=e.toFloat(),o=n.complex(a,r);return r.dispose(),a.dispose(),o}if(!YI(e.dtype,t))return ie.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var i=n.real(e);return o=i.cast(t),i.dispose(),o}if(t==="int32")return n.int(e);if(t==="bool"){var s=Be(0,e.dtype);return o=n.notEqual(e,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function Ah(e,t){return ie.makeTensorFromDataId(e.dataId,t,e.dtype)}function Lw(e,t,n){var r=(t-e)/(n-1),a=Ru(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return dn(a,"float32")}function Ih(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function A0(e,t){return{real:e[2*t],imag:e[2*t+1]}}function kD(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function ED(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function TD(e,t,n){var r=(function(o,i,s){return(function(u,l,c){for(var d=0,f=u.length,h=0,v=!1;d<f;){var m=c(l,u[h=d+(f-d>>>1)]);m>0?d=h+1:(f=h,v=!m)}return v?d:-d-1})(o,i,s||RD)})(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function RD(e,t){return e>t?1:e<t?-1:0}function Kv(e,t,n,r,a){return Vw(e,t,n,r,a,0).selectedIndices}function Xv(e,t,n,r,a,o){var i=Vw(e,t,n,r,a,o);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function Vw(e,t,n,r,a,o,i,s){s===void 0&&(s=!1);for(var u=Array.from(t).map((function(g,w){return{score:g,boxIndex:w,suppressBeginIndex:0}})).filter((function(g){return g.score>a})).sort(I0),l=o>0?-.5/o:0,c=[],d=[];c.length<n&&u.length>0;){var f=u.pop(),h=f.score,v=f.boxIndex,m=f.suppressBeginIndex;if(h<a)break;for(var p=!1,y=c.length-1;y>=m;--y){var x=AD(e,v,c[y]);if(x>=r){p=!0;break}if(f.score=f.score*ID(r,l,x),f.score<=a)break}f.suppressBeginIndex=c.length,p||(f.score===h?(c.push(v),d.push(f.score)):f.score>a&&TD(u,f,I0))}var b=c.length;return s&&(c.fill(0,b),d.fill(0,b)),{selectedIndices:dn(c,"int32"),selectedScores:dn(d,"float32"),numValidOutputs:Be(b,"int32")}}function AD(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),h=(s-o)*(u-i),v=(d-l)*(f-c);if(h<=0||v<=0)return 0;var m=Math.max(o,l),p=Math.max(i,c),y=Math.min(s,d),x=Math.min(u,f),b=Math.max(y-m,0)*Math.max(x-p,0);return b/(h+v-b)}function ID(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function I0(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function zw(e,t,n){var r=new Array(e.rank).fill(0),a=e.shape.slice();return t.map((function(o){a[n]=o;var i=e.slice(r,a);return r[n]+=o,i}))}function $w(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var a=ct(n,e.dtype);for(r=0;r<a.values.length;++r){for(var o=a.indexToLoc(r),i=new Array(e.rank),s=0;s<i.length;s++)i[s]=o[s]%e.shape[s];var u=e.locToIndex(i);a.values[r]=e.values[u]}return a.toTensor()}function Hw(e,t,n,r,a){for(var o=t[t.length-1],i=[e.length/o,o],s=i[0],u=i[1],l=hu(n,s*r),c=hu("int32",s*r),d=0;d<s;d++){for(var f=d*u,h=e.subarray(f,f+u),v=[],m=0;m<h.length;m++)v.push({value:h[m],index:m});v.sort((function(g,w){return w.value-g.value}));var p=d*r,y=l.subarray(p,p+r),x=c.subarray(p,p+r);for(m=0;m<r;m++)y[m]=v[m].value,x[m]=v[m].index}var b=t.slice();return b[b.length-1]=r,[Pn(l,b,n),Pn(c,b,"int32")]}function Qv(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var a=ct(e,"int32"),o=ct([n.length,e.length],"int32");for(r=0;r<n.length;r++){var i=a.indexToLoc(n[r]),s=r*e.length;o.values.set(i,s)}return o.toTensor()}var MD=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(a,o){return"T"+o}));var n=[];this.variableNames.forEach((function(a){n.push("float v"+a+" = get"+a+"AtOutCoords();")}));var r=this.variableNames.map((function(a){return"v"+a})).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},DD=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(a,o){return"T"+o}));var n=[];this.variableNames.forEach((function(a){n.push("vec4 v"+a+" = get"+a+"AtOutCoords();")}));var r=this.variableNames.map((function(a){return"v"+a})).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},PD=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,o=e.inSize,i=Math.ceil(o/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];var s=t==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function Ww(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(n){return e+"."+n}))}function nr(e,t){return t===1?[e]:Ww(e,t)}function Hn(){var e,t,n,r,a,o,i,s,u,l;return Se().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Ho(e,t,n){n===void 0&&(n="index");var r=sa(t);return r.map((function(a,o){return"int "+e[o]+" = "+n+" / "+a+"; "+(o===r.length-1?"int "+e[o+1]+" = "+n+" - "+e[o]+" * "+a:"index -= "+e[o]+" * "+a)+";"})).join("")}function Yv(e){var t=sa(e).map((function(n){return n.toString()}));return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var Uw=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function FD(e,t,n,r){var a=[];e.forEach((function(h){var v=Ke(h.shapeInfo.logicalShape);h.shapeInfo.isUniform?a.push("uniform float "+h.name+(v>1?"["+v+"]":"")+";"):(a.push("uniform sampler2D "+h.name+";"),a.push("uniform int offset"+h.name+";"))}));var o,i,s=a.join(`
`),u=e.map((function(h){return(function(v,m,p){p===void 0&&(p=!1);var y="";y+=p?jw(v):Mi(v);var x=v.shapeInfo.logicalShape,b=m.logicalShape;return x.length<=b.length&&(y+=p?(function(g,w){var S,E=g.name,R=E.charAt(0).toUpperCase()+E.slice(1),A="get"+R+"AtOutCoords",k=g.shapeInfo.logicalShape.length,M=w.logicalShape.length,T=io(g.shapeInfo.logicalShape,w.logicalShape),D=Ht(M),I=M-k,F=["x","y","z","w","u","v"];S=k===0?"":M<2&&T.length>=1?"coords = 0;":T.map((function(N){return"coords."+F[N+I]+" = 0;"})).join(`
`);var V="";V=M<2&&k>0?"coords":g.shapeInfo.logicalShape.map((function(N,Q){return"coords."+F[Q+I]})).join(", ");var L="return outputValue;",q=Ke(g.shapeInfo.logicalShape)===1,K=Ke(w.logicalShape)===1;if(k!==1||q||K){if(q&&!K)L=M===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(T.length){var oe=k-2,W=k-1;T.indexOf(oe)>-1&&T.indexOf(W)>-1?L="return vec4(outputValue.x);":T.indexOf(oe)>-1?L="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":T.indexOf(W)>-1&&(L="return vec4(outputValue.xx, outputValue.zz);")}}else L=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+A+`() {
      `+D+` coords = getOutputCoords();
      `+S+`
      vec4 outputValue = get`+R+"("+V+`);
      `+L+`
    }
  `})(v,m):(function(g,w){var S=g.name,E=S.charAt(0).toUpperCase()+S.slice(1),R="get"+E+"AtOutCoords",A=w.texShape,k=g.shapeInfo.texShape,M=g.shapeInfo.logicalShape.length,T=w.logicalShape.length;if(!g.shapeInfo.isUniform&&M===T&&g.shapeInfo.flatOffset==null&&En(k,A))return`
      float `+R+`() {
        return sampleTexture(`+S+`, resultUV);
      }
    `;var D,I=Ht(T),F=io(g.shapeInfo.logicalShape,w.logicalShape),V=T-M,L=["x","y","z","w","u","v"];D=M===0?"":T<2&&F.length>=1?"coords = 0;":F.map((function(K){return"coords."+L[K+V]+" = 0;"})).join(`
`);var q="";return q=T<2&&M>0?"coords":g.shapeInfo.logicalShape.map((function(K,oe){return"coords."+L[oe+V]})).join(", "),`
    float `+R+`() {
      `+I+` coords = getOutputCoords();
      `+D+`
      return get`+E+"("+q+`);
    }
  `})(v,m)),y})(h,t,r)})).join(`
`),l=t.texShape,c=Hn(),d=(function(h){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+h.texture2D+`(textureSampler, uv).r;
    }
  `})(c),f=(function(h){return h.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+h.varyingFs+` vec2 resultUV;
    `+h.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+h.defineSpecialNaN+`
    `+h.defineSpecialInf+`
    `+h.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+ND+`
    `+OD+`
    `+BD+`
  `})(c);return t.isPacked?(o=(function(h,v){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(g,w){var S=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];return S[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return 2 * (resTexRC.x * `+S[1]+` + resTexRC.y);
    }
  `})(0,v);case 2:return(function(g,w){var S=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];if(En(g,w))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `;var E=Math.ceil(g[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `})(h,v);case 3:return m=h,p=v,y=[Math.ceil(p[0]/2),Math.ceil(p[1]/2)],x=Math.ceil(m[2]/2),b=x*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      int b = index / `+b+`;
      index -= b * `+b+`;

      int r = 2 * (index / `+x+`);
      int c = imod(index, `+x+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return(function(g,w){for(var S=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],E=Math.ceil(g[g.length-1]/2),R=E*Math.ceil(g[g.length-2]/2),A=R,k="",M="b, r, c",T=2;T<g.length-1;T++)A*=g[g.length-T-1],k=`
      int b`+T+" = index / "+A+`;
      index -= b`+T+" * "+A+`;
    `+k,M="b"+T+", "+M;return`
    ivec`+g.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+k+`

      int b = index / `+R+`;
      index -= b * `+R+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+g.length+"("+M+`);
    }
  `})(h,v)}var m,p,y,x,b})(t.logicalShape,l),i=(function(h){return`
    void setOutput(vec4 val) {
      `+h.output+` = val;
    }
  `})(c)):(o=(function(h,v){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(y,x){return x[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+x[1]+`.0);
      }
    `:x[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+x[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      return resTexRC.x * `+x[1]+` + resTexRC.y;
    }
  `})(0,v);case 2:return(function(y,x){return En(y,x)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+x[0]+", "+x[1]+`));
      }
    `:y[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:y[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      int r = index / `+y[1]+`;
      int c = index - r * `+y[1]+`;
      return ivec2(r, c);
    }
  `})(h,v);case 3:return m=v,p=Ho(["r","c","d"],h),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+p+`
      return ivec3(r, c, d);
    }
  `;case 4:return(function(y,x){var b=Ho(["r","c","d","d2"],y);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+b+`
      return ivec4(r, c, d, d2);
    }
  `})(h,v);case 5:return(function(y,x){var b=Ho(["r","c","d","d2","d3"],y);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+x[0]+`,
                             `+x[1]+`));

      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+b+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `})(h,v);case 6:return(function(y,x){var b=Ho(["r","c","d","d2","d3","d4"],y);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+b+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `})(h,v);default:throw new Error(h.length+"-D output sampling is not yet supported")}var m,p})(t.logicalShape,l),i=(function(h){return`
    void setOutput(float val) {
      `+h.output+` = vec4(val, 0, 0, 0);
    }
  `})(c)),r&&(f+=qD),[f,d,i,s,o,u,n].join(`
`)}function Mi(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return(function(n){var r=n.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var o=n.shapeInfo.texShape,i=o[0],s=o[1];if(i===1&&s===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,l=u[0],c=u[1],d=Po(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+d+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(e);case 1:return(function(n){var r=n.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+Si(n)+`
      }
    `;var o=n.shapeInfo.texShape,i=o[0],s=o[1];if(s===1&&i===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=Po(r);return s===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+i+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:i===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+i+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(e);case 2:return(function(n){var r=n.shapeInfo.logicalShape,a=n.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),i=n.shapeInfo.texShape;if(i!=null&&En(r,i)){var s=i[0],u=i[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var l=Lo(r),c=l.newShape,d=l.keptDims,f=c;if(f.length<r.length){var h=Di(n,f);return`
      `+Mi(h)+`
      float `+o+`(int row, int col) {
        return `+o+"("+Pi(["row","col"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Si(n)+`
      }
    `;var v=i[0],m=i[1],p=Po(a);return m===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+p+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+v+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:v===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+p+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+p+`;
    vec2 uv = uvFromFlat(`+v+", "+m+`, index);
    return sampleTexture(`+a+`, uv);
  }
`})(e);case 3:return(function(n){var r=n.shapeInfo.logicalShape,a=n.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),i=r[1]*r[2],s=r[2],u=Lo(r),l=u.newShape,c=u.keptDims,d=l;if(d.length<r.length){var f=Di(n,d);return`
        `+Mi(f)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+Pi(["row","col","depth"],c)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+i+", "+s+`, 1)));
        `+Si(n)+`
      }
    `;var h=n.shapeInfo.texShape,v=h[0],m=h[1],p=n.shapeInfo.flatOffset;if(m===i&&p==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+v+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(m===s&&p==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+v+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var y=Po(a);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+i+" + col * "+s+" + depth + "+y+`;
        vec2 uv = uvFromFlat(`+v+", "+m+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `})(e);case 4:return(function(n){var r=n.shapeInfo.logicalShape,a=n.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),i=r[3],s=r[2]*i,u=r[1]*s,l=Lo(r),c=l.newShape,d=l.keptDims;if(c.length<r.length){var f=Di(n,c);return`
      `+Mi(f)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+Pi(["row","col","depth","depth2"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+i+`, 1)));
        `+Si(n)+`
      }
    `;var h=n.shapeInfo.flatOffset,v=n.shapeInfo.texShape,m=v[0],p=v[1];if(p===u&&h==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+p+".0, "+m+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(p===i&&h==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+p+".0, "+m+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var y=Po(a);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+i+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+p+", index + "+y+`);
      return sampleTexture(`+a+`, uv);
    }
  `})(e);case 5:return(function(n){var r=n.shapeInfo.logicalShape,a=n.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),i=r[4],s=r[3]*i,u=r[2]*s,l=r[1]*u,c=Lo(r),d=c.newShape,f=c.keptDims;if(d.length<r.length){var h=Di(n,d);return`
      `+Mi(h)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+Pi(["row","col","depth","depth2","depth3"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+i+`)) +
          depth3;
        `+Si(n)+`
      }
    `;var v=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,p=m[0],y=m[1];if(y===l&&v==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+p+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(y===i&&v==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+p+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var x=Po(a);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+i+" + depth3 + "+x+`;
      vec2 uv = uvFromFlat(`+p+", "+y+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `})(e);case 6:return(function(n){var r=n.shapeInfo.logicalShape,a=n.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),i=Lo(r),s=i.newShape,u=i.keptDims;if(s.length<r.length){var l=Di(n,s);return`
      `+Mi(l)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+Pi(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],d=r[4]*c,f=r[3]*d,h=r[2]*f,v=r[1]*h;if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+v+", "+h+", "+f+", "+d+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+Si(n)+`
      }
    `;var m=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,y=p[0],x=p[1];if(x===v&&m==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+h+", "+f+", "+d+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+x+".0, "+y+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(x===c&&m==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+x+".0, "+y+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var b=Po(a);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+v+" + col * "+h+" + depth * "+f+` +
          depth2 * `+d+" + depth3 * "+c+" + depth4 + "+b+`;
      vec2 uv = uvFromFlat(`+y+", "+x+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `})(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function jw(e){var t,n,r;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Hn(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return(function(a){var o=a.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),s=a.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=Hn();return`
    vec4 `+i+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+o+`, uv);
    }
  `})(e);case 2:return(function(a){var o=a.shapeInfo.logicalShape,i=a.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),u=a.shapeInfo.texShape,l=u[0],c=u[1],d=Hn();if(u!=null&&En(o,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+d.texture2D+"("+i+`, uv);
      }
    `;var f=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],h=Math.ceil(o[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+h+", "+f[0]+", "+f[1]+`, row, col);
      return `+d.texture2D+"("+i+`, uv);
    }
  `})(e);case 3:return(function(a){var o=a.shapeInfo.logicalShape,i=a.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),u=a.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(o[0]===1){var c=o.slice(1),d=Di(a,c);return`
        `+jw(d)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+Pi(["b","row","col"],[1,2])+`);
        }
      `}var f=l[0],h=l[1],v=Math.ceil(o[2]/2),m=v*Math.ceil(o[1]/2),p=Hn();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+f+", "+h+", "+m+", "+v+`, b, row, col);
      return `+p.texture2D+"("+i+`, uv);
    }
  `})(e);default:return(function(a){for(var o=a.shapeInfo.logicalShape,i=o.length,s=a.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=a.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],d=c[0],f=c[1],h=Math.ceil(o[i-1]/2),v=h*Math.ceil(o[i-2]/2),m="int b, int row, int col",p="b * "+v+" + (row / 2) * "+h+" + (col / 2)",y=2;y<i-1;y++)m="int b"+y+", "+m,v*=o[i-y-1],p="b"+y+" * "+v+" + "+p;var x=Hn();return`
    vec4 `+u+"("+m+`) {
      int index = `+p+`;
      int texR = index / `+f+`;
      int texC = index - texR * `+f+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+f+", "+d+`);
      return `+x.texture2D+"("+s+`, uv);
    }
  `})(e)}}var ND=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,OD=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,BD=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,qD=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Po(e){return"offset"+e}function Si(e){var t=e.name,n=Ke(e.shapeInfo.logicalShape);return n<2?"return "+t+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function Ht(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Di(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Pi(e,t){return t.map((function(n){return e[n]})).join(", ")}var LD=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,U(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var a=e[e.length-1],o=Math.ceil(a/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,l=u.length,c=Ht(l),d=nr("coords",l);if(o===1){var f=Ht(s=l+1);i=`
        `+f+" sourceLocR = "+f+"("+d.join()+`, 0);
        ++`+d[l-1]+`;
        `+f+" sourceLocG = "+f+"("+d.join()+`, 0);
        ++`+d[l-2]+`;
        `+f+" sourceLocA = "+f+"("+d.join()+`, 0);
        --`+d[l-1]+`;
        `+f+" sourceLocB = "+f+"("+d.join()+`, 0);
        --`+d[l-2]+";"}else s=l,i=`
        `+c+` sourceLocR = coords;
        ++`+d[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+d[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+d[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+d[l-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),v="."+h[s-1],m=h.map((function(R){return"int "+R})),p=nr("sourceLocR",s-1).concat("inIdx.r"),y=nr("sourceLocG",s-1).concat("inIdx.g"),x=nr("sourceLocB",s-1).concat("inIdx.b"),b=nr("sourceLocA",s-1).concat("inIdx.a"),g=n==="max"?"greaterThan":"lessThan",w=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+p.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+x.join()+`),
                             getBestIndicesAChannel(`+b.join()+")));",S=`vec4(
            getAChannel(`+p.join()+`),
            hasNextCol ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow ? getAChannel(`+x.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+b.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+h.join()+`),
                                          vec2(`+h.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+h.join()+`),
                               vec2(`+h.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+d[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+d[l-2]+" < "+(u[l-2]-1)+`;
        `+i+`
        ivec4 srcIdx = ivec4(sourceLocR`+v+", sourceLocG"+v+`,
          sourceLocB`+v+", sourceLocA"+v+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+S+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+w+`
          vec4 candidate = `+S+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+g+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},VD=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,d=1/(t*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+d+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+i+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},zD=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=c-1-e.padInfo.front,v=d-1-e.padInfo.top,m=f-1-e.padInfo.left,p=1/(t*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+v+", "+m+`);
      const float avgMultiplier = float(`+p+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+d+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},$D=function(e,t,n,r,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],xt(e,t),xt(e,n);var i="0.0";r!=null&&(xt(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";a!=null&&(xt(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+i+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},HD=function(e,t,n,r,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],xt(e,t),xt(e,n);var i="vec4(0.0)";r!=null&&(xt(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";a!=null&&(xt(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+i+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},WD="return areal * breal - aimag * bimag;",UD="return areal * bimag + aimag * breal;",M0=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=xt(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},gf="return a + b;",yf="return a - b;",D0="return a * b;",Gw="return (a < 0.) ? b * a : a;",an=function(e,t,n){this.variableNames=["A","B"],this.outputShape=xt(t,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},Kw=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,ka=function(e,t,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=xt(t,n);var a=this.outputShape.length,o="";if(r)if(a===0||Ke(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+Ht(a)+` coords = getOutputCoords();
        `,a===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var i=nr("coords",a);o+=`
            bool nextRowOutOfBounds =
              (`+i[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+i[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},jD=(function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(a,o){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(o,"maxVal")),a.gl.uniform1f(r.minLoc,t),a.gl.uniform1f(r.maxLoc,n)}},e})(),GD=(function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(a,o){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(o,"maxVal")),a.gl.uniform1f(r.minLoc,t),a.gl.uniform1f(r.maxLoc,n)}},e})(),KD=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},XD=function(e){this.outputShape=[],this.outputShape=cs(e,1),this.variableNames=e.map((function(s,u){return"T"+u}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var a=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+a+"));")}var o=t.length,i=t[t.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+i+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},QD=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=cs(e,t);var n=this.outputShape,r=n.length,a=Ht(r),o=nr("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(p,y){return"T"+y}));var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var l=i[t],c=i.slice(-2),d=i.join(),f="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+d+"), vec2("+c.join()+`));
        }`;for(u=1;u<s.length;u++){var h=s[u-1];f+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+ul(i,l,h)+`),
            vec2(`+ul(c,l,h)+`));
        }`}var v=s.length,m=s[s.length-1];f+=`
        return getChannel(
          getT`+v+"("+ul(i,l,m)+`),
          vec2(`+ul(c,l,m)+"));",this.userCode=`
      float getValue(`+i.map((function(p){return"int "+p}))+`) {
        `+f+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+n[r-2]+` &&
            `+o[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function ul(e,t,n){var r=e.indexOf(t);return e.map((function(a,o){return o===r?a+" - "+n:a})).join()}var YD=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+a+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},JD=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=e.dataFormat==="channelsLast",i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=o?1:2,l=o?2:3,c=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},ZD=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,o=e.padInfo.top,i=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+a+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+o+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+i+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},eP=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},tP=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+a+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},nP=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},P0=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.padInfo.top,o=e.padInfo.left,i=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,f=4*Math.floor(e.inChannels/4),h=e.inChannels%4,v=e.dataFormat==="channelsLast",m=v?1:2,p=v?2:3,y=v?3:1,x="",b="";n&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,b="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+i+", "+s+`);
      const ivec2 pads = ivec2(`+a+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+y+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+p+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+f+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+v+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(h===1)+`) {

              if (`+v+`) {
                dotProd +=
                    getX(batch, xR, xC, `+f+`) *
                    getW(wR, wC, `+f+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+f+`, xR, xC) *
                    getW(wR, wC, `+f+`, d2);
              }

            } else if (`+(h===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2)
              );

              if (`+v+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(h===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2),
                getW(wR, wC, `+f+` + 2, d2)
              );

              if (`+v+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1),
                  getX(batch, xR, xC, `+f+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC),
                  getX(batch, `+f+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+g+`
        `+b+`
        setOutput(result);
      }
    `},rP=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,f=e.filterWidth,h=4*Math.floor(e.inChannels/4),v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+o+", "+i+`);
      const ivec3 pads = ivec3(`+t+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+h+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(v===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+h+`) *
                  getW(wF, wR, wC, `+h+`, d2);
              } else if (`+(v===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(v===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1),
                  getX(batch, xF, xR, xC, `+h+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2),
                  getW(wF, wR, wC, `+h+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},F0=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.inHeight,o=e.inWidth,i=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,v=e.outChannels/e.inChannels,m="",p="";n&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,p="result = activation(result);");var y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+v+`;
        int q = d2 - d1 * `+v+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+f+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+y+`
        `+p+`
        setOutput(result);
      }
    `},N0=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var a=e.inHeight,o=e.inWidth,i=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,v=h,m="int xR; int xC; int xCOffset;",p=0;p<f;p++)for(var y=0;y<h;y++)m+=`
          vec4 xTexelR`+p+"C"+2*y+` = vec4(0.);
          vec4 wR`+p+"C"+y+` = vec4(0.);
          vec4 xR`+p+"C"+y+" = vec4(0.);";for(p=0;p<f;p++)for(var x=0;x<v;x++){if(m+=`
          xR = xRCorner + `+p*c+`;
          xC = xCCorner + `+(y=2*x)*d+`;
        `,l===1){if(y<h&&(m+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+p+"C"+y+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+p+"C"+y+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+p+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+p+"C"+y+" = vec4(previous.zw, xTexelR"+p+"C"+y+`.xy);
                } else {
                  xR`+p+"C"+y+" = vec4(0, 0, xTexelR"+p+"C"+y+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+p+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+p+"C"+y+` = vec4(0.);
                }

                xR`+p+"C"+y+" = xTexelR"+p+"C"+y+`;
              `,y+1<h)){var b=s%2==0?fw(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(m+=`
                  xCOffset = xC + `+s%2+" + "+b+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+p+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,d>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+p+"C"+y+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+p+"C"+y+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+p+"C"+(y+1)+` = vec4(
                    xTexelR`+p+"C"+y+".zw, xTexelR"+p+"C"+(y+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+b+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+p+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+p+"C"+(y+1)+" = xTexelR"+p+"C"+(y+2)+`;
                `}}else y<h&&(m+=`
              if(xR >= 0 && xR < `+a+`) {
            `,s%2==1?(m+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+p+"C"+y+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+p+"C"+y+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+p+"C"+(y+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+p+"C"+(y+2)+` = vec4(0.);
                }

                xR`+p+"C"+y+` = vec4(
                  xTexelR`+p+"C"+y+".zw, xTexelR"+p+"C"+(y+2)+`.zw);
              `,y+1<h&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+p+"C"+(y+1)+" = vec4(xTexelR"+p+"C"+(y+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+p+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+p+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+p+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+p+"C"+(y+2)+` = vec4(0.);
                }

                xR`+p+"C"+y+` = vec4(
                  xTexelR`+p+"C"+y+".xy, xTexelR"+p+"C"+(y+2)+`.xy);
              `,y+1<h&&(m+=`
                  xR`+p+"C"+(y+1)+` = vec4(
                    xTexelR`+p+"C"+y+".zw, xTexelR"+p+"C"+(y+2)+`.zw);
                `)),m+="}");y<h&&(m+=`
            vec4 wTexelR`+p+"C"+y+" = getW("+p+", "+y+`, d1, q);
            wR`+p+"C"+y+" = vec4(wTexelR"+p+"C"+y+".xz, wTexelR"+p+"C"+y+`.xz);
          `,y+1<h&&(m+=`
              vec4 wTexelR`+p+"C"+(y+1)+" = getW("+p+", "+(y+1)+`, d1, q);
              wR`+p+"C"+(y+1)+` =
                vec4(wTexelR`+p+"C"+(y+1)+".xz, wTexelR"+p+"C"+(y+1)+".xz);"))}for(p=0;p<f;p++)for(y=0;y<h;y++)m+="dotProd += xR"+p+"C"+y+" * wR"+p+"C"+y+";";var g="",w="";n&&(g=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,w="result = activation(result);");var S=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+S+`
        `+w+`
        setOutput(result);
      }
    `},aP=function(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=e[0],i=e[1],s=e[2],u=e[3],l=t[0],c=n[0],d=n[1];this.outputShape=[l,c,d,u];var f=r==="bilinear"?1:0,h=[i-1+".0",s-1+".0"],v=h[0],m=h[1],p=c>1?[""+(i-1)/(c-1),"(y2-y1) * height_ratio","y1*"+v+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+v],y=p[0],x=p[1],b=p[2],g=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=g[0],S=g[1],E=g[2];this.userCode=`
      const float height_ratio = float(`+y+`);
      const float width_ratio = float(`+w+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+x+`;
        float width_scale = `+S+`;

        float in_y = `+b+`;
        if( in_y < 0.0 || in_y > `+v+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+f+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},oP=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=e[e.length-1],o=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Ht(r)+` coords = getOutputCoords();
        int end = `+O0(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+O0(r,"coords")+` = idx;
          val += getX(`+(function(i,s){if(i===1)return""+s;if(i===2)return s+".x, "+s+".y";if(i===3)return s+".x, "+s+".y, "+s+".z";if(i===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+i+" is not yet supported")})(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function O0(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var iP=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=pu.DENSE;var t=Ys(e),n=Hn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Ho(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},sP=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=pu.DENSE;var t=Ys(e),n=Hn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Ho(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},uP=(function(){function e(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e})(),lP=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},cP=function(e){this.variableNames=["A"],this.outTexUsage=hr.DOWNLOAD;var t=Hn();this.outputShape=e,this.userCode=`
      `+Uw+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},dP=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=hr.DOWNLOAD;var t=Hn();this.outputShape=e,this.userCode=`
      `+Uw+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},fP=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=Hn(),a=t[0],o=t[1];this.outputShape=e;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode=`
      `+Yv(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+i+`, 0., 0., 0.);
      }
    `},hP=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Hn(),a=t[0],o=t[1];this.outputShape=e;var i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;i+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+e[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+e[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Yv(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+i+`

        `+r.output+" = "+s+`;
      }
    `},vP="return real * expR - imag * expI;",pP="return real * expI + imag * expR;",B0=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var a=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},mP=(function(){function e(t,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,a){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(n.valueLoc,t)}},e})(),gP=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var a=Ht(this.rank),o=(function(i,s){var u=i.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],d=0;d<i.length;d++)d===s?c.push("int(getIndices("+l[d]+"))"):c.push(""+l[d]);return c.join()})(e,n);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},yP=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=Ht(t.length),a=Ht(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function bP(e,t){var n=Hn();return vM(e,t,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function xP(e,t){return bM(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function wP(e,t){return xM(e,t,new Uint16Array([0,1,2,2,1,3]))}function Iu(e,t,n,r,a,o,i){_M(n,r);var s=wM(e,t),u=e.TEXTURE_2D;return Qe(e,t,(function(){return e.bindTexture(u,s)})),Qe(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),Qe(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),Qe(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)})),Qe(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)})),Qe(e,t,(function(){return e.texImage2D(u,0,a,n,r,0,o,i,null)})),Qe(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function _P(e,t,n,r,a){var o=Yc(n,r);return Iu(e,t,o[0],o[1],a.internalFormatFloat,a.textureFormatFloat,e.FLOAT)}function CP(e,t,n,r,a){var o=Yc(n,r);return Iu(e,t,o[0],o[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function SP(e,t,n,r,a){var o=Yc(n,r);return Iu(e,t,o[0],o[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function kP(e,t,n,r,a){var o=Au(n,r);return Iu(e,t,o[0],o[1],a.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function EP(e,t,n,r,a){var o=Au(n,r);return Iu(e,t,o[0],o[1],a.internalFormatPackedHalfFloat,e.RGBA,a.textureTypeHalfFloat)}function TP(e,t,n,r){return Qe(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),S0(e,t,n,"clipSpacePos",r,3,20,0)&&S0(e,t,n,"uv",r,2,20,12)}function RP(e,t,n,r,a,o,i){var s,u,l;Qe(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),o instanceof Uint8Array?(s=new Uint8Array(r*a*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*a*4),u=e.FLOAT,l=i.internalFormatPackedFloat),s.set(o),Qe(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,a,0,e.RGBA,u,s)})),Qe(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function AP(e,t,n,r){Qe(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?Qe(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):Qe(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),Qe(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function IP(e,t,n,r,a){var o=e.createBuffer();Qe(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,o)}));var i=16*n*r;return Qe(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),Qe(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),Qe(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),o}function MP(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function DP(e,t,n,r,a){var o=Yc(n,r),i=o[0],s=o[1],u=new Uint8Array(n*r*4);return Qe(e,t,(function(){return e.readPixels(0,0,i,s,a.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function PP(e,t,n,r,a,o,i,s){var u=e,l=new Float32Array((function(c,d){var f=Au(c,d);return f[0]*f[1]*4})(o,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function FP(e,t,n,r){var a=new Float32Array(n*r*4);return Qe(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,a)})),a}var NP=(function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Se().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,lM(n,t)):this.gl=fa(n);var r="WEBGL_color_buffer_float";if(Se().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=al(this.gl,this.debug,"OES_texture_float"),Sr(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=al(this.gl,this.debug,"OES_texture_half_float");else if(Se().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Sr(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=al(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Se().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Sr(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Sr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=xP(this.gl,this.debug),this.indexBuffer=wP(this.gl,this.debug),this.framebuffer=CM(this.gl,this.debug),this.textureConfig=zv(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Se().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;Qe(n,this.debug,(function(){return n.finish()})),Qe(n,this.debug,(function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)})),Qe(n,this.debug,(function(){return n.deleteFramebuffer(t.framebuffer)})),Qe(n,this.debug,(function(){return n.bindBuffer(n.ARRAY_BUFFER,null)})),Qe(n,this.debug,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)})),Qe(n,this.debug,(function(){return n.deleteBuffer(t.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,n){return this.throwIfDisposed(),_P(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,n){return this.throwIfDisposed(),CP(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,n){return this.throwIfDisposed(),SP(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,n){this.throwIfDisposed(),AP(this.gl,this.debug,t,n)},e.prototype.uploadDenseMatrixToTexture=function(t,n,r,a){this.throwIfDisposed(),RP(this.gl,this.debug,t,n,r,a,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,n){return this.throwIfDisposed(),EP(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,n){return this.throwIfDisposed(),kP(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var n=this;this.throwIfDisposed(),this.outputTexture===t&&(k0(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Qe(this.gl,this.debug,(function(){return n.gl.deleteTexture(t)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,n,r){var a=this;return this.downloadMatrixDriver(t,(function(){return DP(a.gl,a.debug,n,r,a.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(t,n,r,a,o,i){return PP(this.gl,t,0,0,0,o,i,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,n){return MP(this.gl,t,n)},e.prototype.createBufferFromTexture=function(t,n,r){this.bindTextureToFrameBuffer(t);var a=IP(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var n,r,a=this;if(Se().getBool("WEBGL_FENCE_API_ENABLED")){var o=t,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=function(){var s=o.clientWaitSync(i,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},n=i}else Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(n,Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},e.prototype.downloadMatrixFromPackedTexture=function(t,n,r){var a=this;return this.downloadMatrixDriver(t,(function(){return FP(a.gl,a.debug,n,r)}))},e.prototype.createProgram=function(t){this.throwIfDisposed();var n=this.gl,r=pM(n,this.debug,t),a=bP(n,this.debug),o=gM(n,this.debug);return Qe(n,this.debug,(function(){return n.attachShader(o,a)})),Qe(n,this.debug,(function(){return n.attachShader(o,r)})),yM(n,this.debug,o),this.debug&&hf(n,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=TP(n,this.debug,this.program,this.vertexBuffer)),o},e.prototype.deleteProgram=function(t){var n=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&Qe(this.gl,this.debug,(function(){return n.gl.deleteProgram(t)}))},e.prototype.setProgram=function(t){var n=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&hf(this.gl,this.debug,this.program),Qe(this.gl,this.debug,(function(){return n.gl.useProgram(t)}))},e.prototype.getUniformLocation=function(t,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?kM(this.gl,this.debug,t,n):EM(this.gl,t,n)},e.prototype.getAttributeLocation=function(t,n){var r=this;return this.throwIfDisposed(),Qe(this.gl,this.debug,(function(){return r.gl.getAttribLocation(t,n)}))},e.prototype.getUniformLocationNoThrow=function(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)},e.prototype.setInputMatrixTexture=function(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),TM(this.gl,this.debug,this.program,t,n,r)},e.prototype.setOutputMatrixTexture=function(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)},e.prototype.setOutputPackedMatrixTexture=function(t,n,r){this.throwIfDisposed();var a=Au(n,r),o=a[0],i=a[1];this.setOutputMatrixTextureDriver(t,o,i)},e.prototype.setOutputMatrixWriteRegion=function(t,n,r,a){this.setOutputMatrixWriteRegionDriver(r,t,a,n)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,n,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&hf(this.gl,this.debug,this.program),ol(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),Qe(t,this.debug,(function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Qe(this.gl,this.debug,(function(){return t.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=al(this.gl,this.debug,Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(n.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),o=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,o),o},e.prototype.endQuery=function(){if(Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return Ue(this,void 0,void 0,(function(){var n=this;return je(this,(function(r){switch(r.label){case 0:return[4,y0((function(){return n.disposed||n.isQueryAvailable(t,Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return r.sent(),[2,this.getQueryTime(t,Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(t,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(t,a.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,n){if(n===0)return!0;if(n===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),o&&!this.disjoint},e.prototype.pollFence=function(t){var n=this;return new Promise((function(r){n.addItemToPoll((function(){return t.isFencePassed()}),(function(){return r()}))}))},e.prototype.pollItems=function(){for(var t=(function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1})(this.itemsToPoll.map((function(r){return r.isDoneFn}))),n=0;n<=t;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,n){var r=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1||y0((function(){return r.pollItems(),r.itemsToPoll.length===0}))},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),vf(this.gl,this.debug,t,this.framebuffer),this.debug&&ol(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(vf(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&ol(this.gl)):k0(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,n){this.bindTextureToFrameBuffer(t);var r=n();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(t,n,r){this.throwIfDisposed();var a=this.gl;vf(a,this.debug,t,this.framebuffer),this.debug&&ol(a),this.outputTexture=t,Qe(a,this.debug,(function(){return a.viewport(0,0,n,r)})),Qe(a,this.debug,(function(){return a.scissor(0,0,n,r)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(t,n,r,a){var o=this;this.throwIfDisposed(),Qe(this.gl,this.debug,(function(){return o.gl.scissor(t,n,r,a)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e})();function q0(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(n,r){var a=n.logicalShape,o=t[r],i=o.shape;if(!En(a,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+i+" must match");if(!n.isUniform||!o.isUniform){var s=n.texShape,u=o.isUniform?null:o.texData.texShape;if(!En(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}}))}var OP=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,a=n.inChannels,o=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,d=n.dataFormat,f=s.left,h=s.top,v=a*r,m=Hn(),p=d==="channelsLast",y=p?0:1,x=p?1:2,b="",g=0;g<=1;g++)for(var w=0;w<=1;w++)b+=`
          blockIndex = rc.y + `+w+`;
          pos = rc.x + `+g+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+i+" - "+h+`;
            d0 = offsetY + `+c+" * (pos / "+v+`);

            if(d0 < `+t[y]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+o+". - "+f+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+v+".) / "+a+`.));

              if(d1 < `+t[x]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+p+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*g+w)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*g+w)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+b+`

        `+m.output+` = result;
      }
    `},BP=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var o,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";o=a===.5?"inversesqrt("+u+")":a===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+i+"; j <= "+i+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},qP=function(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},LP=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";o=a===.5?"inversesqrt("+u+")":a===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+i+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+i+"; j <= "+i+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},VP=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,o=e.effectiveFilterWidth,i=a-1-e.padInfo.top,s=o-1-e.padInfo.left,u=a*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},zP=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.front,d=u-1-e.padInfo.top,f=l-1-e.padInfo.left,h=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+d+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+i+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+h+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},bf=function(e,t,n,r,a,o,i){n===void 0&&(n=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),o===void 0&&(o=null),i===void 0&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",v="";o&&(h=i?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,v="result = activation(result);");var m=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+h+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+d[0]+" * "+f[0]+`);
          result += (`+d[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+v+`

        setOutput(result);
      }
    `},$P=(function(){function e(t,n,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,a){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(n.seedLoc,t)}},e})(),HP=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},WP=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=nr("rc",t),r=Ht(t),a=(function(s,u,l){if(s===1)return"rc > "+u[0];for(var c="",d=s-2;d<s;d++)c+=l[d]+" >= "+u[d],d<s-1&&(c+="||");return c})(t,e,n),o=(function(s,u,l,c){if(s===1)return"";var d=c.slice(-2);return`
    int r = `+d[0]+`;
    int c = `+d[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `})(t,e[e.length-1],e[e.length-2],n),i=(function(s,u){var l=s.length,c=(function(d,f){for(var h=[],v=0;v<=1;v++)for(var m=0;m<=1;m++){for(var p=(v===0?"r":"rp1")+", "+(m===0?"c":"cp1"),y=2;y<d;y++)p=f[f.length-1-y]+","+p;h.push(p)}return h})(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"})(e,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+i+`));
          }
        }
      `}},UP=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(u,l){return u[0]+e[l]+u[1]}));var r=e.length,a=Ht(r),o=t.map((function(u){return u[0]})).join(","),i=t.map((function(u,l){return u[0]+e[l]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+o+`);
      `+a+" end = "+a+"("+i+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+i+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},jP=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(p,y){return p[0]+e[y]+p[1]}));for(var r=e.length,a=Ht(r),o=t.map((function(p){return p[0]})).join(","),i=t.map((function(p,y){return p[0]+e[y]})).join(","),s=nr("rc",r),u=nr("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",d=[a+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],f=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",v=0,m=r===1?2:4;v<m;v++)h+=`
        `+d[v]+`
        if (`+f+`) {
          result[`+v+"] = float("+n+`);
        } else {
          `+a+` source = rc - start;
          result[`+v+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+o+`);
      const `+a+" end = "+a+"("+i+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+h+`
        setOutput(result);
      }
    `},xf=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;var f=t==="avg",h="0.0";if(f||(h="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+o+`);
        const ivec2 pads = ivec2(`+c+", "+d+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+i+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(v="avgValue / count");var m=4*Math.floor(r/4),p=r%4,y=`
      if (`+f+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+o+`);
      const ivec2 pads = ivec2(`+c+", "+d+`);
      const float initializationValue = `+h+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+h+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+i+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+y+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(p===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(p===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(p===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+y+`
          }
        }
        setOutput(`+v+`);
      }
    `}},wf=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.front,v=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;var p=t==="avg",y="0.0";if(p||(y="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+o+", "+i+`);
        const ivec3 pads = ivec3(`+h+", "+v+", "+m+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+d+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+f+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+d+" * "+f+` +
                      wR * `+f+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var x=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(x="avgValue / count");var b=4*Math.floor(r/4),g=r%4,w=`
      if (`+p+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+o+", "+i+`);
      const ivec3 pads = ivec3(`+h+", "+v+", "+m+`);
      const float initializationValue = `+y+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+y+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+b+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+w+`
            }

            int xC = xCCorner + `+b+`;
            if (`+(g===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(g===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(g===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+w+`
            }
          }
          setOutput(`+x+`);
        }
      }
    `}},GP=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,o=Math.ceil(a/n);this.outputShape=[r,o];var i="0.0",s="";t==="prod"?i="1.0":t==="min"?(i="1.0 / 1e-20",s="min"):t==="max"&&(i="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?u="sumValue":t==="prod"?u="prodValue":t==="all"?u="allValue":t==="any"&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,d=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,f="vec4";t==="all"?(i="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):t==="any"&&(i="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");var h="";a%n>0&&(h=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+i+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+i+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+d+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===2)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===3)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+d+`
        }
        setOutput(`+u+`);
      }
    `},KP=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Ho(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+Yv(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+n+`

        setOutput(result);
      }
    `},XP=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],o=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?a-1:a,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],f=l[1]/c[1],h=1/d,v=1/f,m=2*Math.ceil(h)+2,p=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+p+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},QP=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],o=e[1],i=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},YP=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=e[0],o=e[1],i=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+i+`.0,
                                     `+i+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},JP=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],o=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?a-1:a,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],f=l[1]/c[1],h=1/d,v=1/f,m=2*Math.ceil(h)+2,p=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+p+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},ZP=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],o=e[1],i=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},eF=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,n!==1){var r=e.map((function(o,i){return(function(s){return t.indexOf(s)!==-1&&e[s]!==1?e[s]+" - coords["+s+"] - 1":"coords["+s+"]"})(i)})).join(","),a=Ht(n);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},tF=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=nr("rc",n),a=r[n-1]+" + 1 < "+this.outputShape[n-1],o=r[n-2]+" + 1 < "+this.outputShape[n-2],i=Ht(n);function s(u){var l=e.map((function(c,d){return(function(f,h){return t.indexOf(f)!==-1&&e[f]!==1?e[f]+" - "+h[f]+" - 1":""+h[f]})(d,u)}));return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+i+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+(function(u){return s(u)})(r.slice())+`;
          if(`+a+`){
            result.g = `+(function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)})(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+(function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)})(r.slice())+`;
            if(`+a+`) {
              result.a = `+(function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)})(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},L0=function(e,t,n,r,a,o,i){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Ht(a.length),u=Ht(o.length),l="";n===1?l="i":n===2&&(l="i, j");var c="getIndices("+l+")",d="";r===1?d="i":r===2&&(d="i, coords[1]");var f="getUpdates("+d+")",h=t>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+a+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+h+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+f+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},nF=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,o=e.numSegments,i=o*Math.ceil(a/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";a%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var d="";a%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+d+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},rF=function(e,t,n){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)a="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<t.length;u++)s.push(""+o[u]),u<e&&i.push(""+o[u]);r=i.join(),a=s.join()}var l=Ht(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},aF=(function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=Ht(this.rank),a="uniform int start["+this.rank+"];",o=(function(i){if(i===1)return"sourceLoc";if(i<=6)return _f.slice(0,i).map((function(s){return"sourceLoc."+s})).join(",");throw Error("Slicing for rank "+i+" is not yet supported")})(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+t.map((function(i,s){return"sourceLoc."+_f[s]+" = start["+s+"] + coords."+_f[s]+";"})).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+n+`
        setOutput(getSource(`+o+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,a){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(a,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e})(),_f=["x","y","z","w","u","v"],oF=(function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=Ht(this.rank),r=nr("coords",this.rank),a=nr("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",i="getChannel(getSource("+a.join()+"), "+o+")",s=`
      result.x = `+i+`;
      if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+i+`;
        --`+a[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+i+`;
        if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+i+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+t.map((function(c,d){return"start["+d+"]"})).join()+");":t.map((function(c,d){return a[d]+" = "+r[d]+" + start["+d+"];"})).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,a){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(a,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e})(),iF=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=Ht(n.length),o=Ht(n.length),i="";if(r===1)i="coords * strides + begin";else{var s=0;i=n.map((function(u,l){return s++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"})).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+e+`);
      `+a+" strides = "+a+"("+t+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+i+`));
      }
    `},sF=(function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,n,r){var a,o=V0(n,r),i=z0(t,o,r);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[i].shift();return this.usedTextures[i].push(s),s}return this.numUsedTextures++,this.log(),o===lr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===lr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===lr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===lr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===lr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(a),a},e.prototype.releaseTexture=function(t,n,r,a){if(this.freeTextures!=null){var o=z0(n,V0(r,a),a);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(t),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[o],s=i.indexOf(t);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(s,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach((function(r){t.gpgpu.deleteMatrixTexture(r)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(a){t.gpgpu.deleteMatrixTexture(a)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e})();function V0(e,t){if(e===hr.UPLOAD)return lr.PACKED_2X2_FLOAT32;if(e===hr.RENDER||e==null)return(function(n){return Se().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?lr.PACKED_2X2_FLOAT32:lr.UNPACKED_FLOAT32:n?lr.PACKED_2X2_FLOAT16:lr.UNPACKED_FLOAT16})(t);if(e===hr.DOWNLOAD||e===hr.PIXELS)return lr.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function z0(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var uF=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var a=Ht(this.rank),o=(function(i){var s=i.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+i[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<i.length;c++)l.push("imod("+u[c]+", "+i[c]+")");return l.join()})(e);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},lF=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var a=Ht(this.rank),o=(function(i){var s=i.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),c=0;c<i.length;c++)l[i[c]]=u[c];return l.join()})(t);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},cF=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=Ht(this.rank),o=Ww("rc",this.rank),i=new Array(this.rank);for(r=0;r<t.length;r++)i[t[r]]=o[r];var s="vec2("+i.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+i.join()+"), "+s+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},Jv=1.7580993408473768,Zv=1.0507009873554805,ht=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Kr="if (isnan(x)) return x;",dF="return x;",$0="return abs(x);",Xw=Kr+`
  return (x < 0.0) ? 0.0 : x;
`,Qw=Kr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Yw="return (x >= 0.0) ? x : (exp(x) - 1.0);",fF=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Jv+`;
  float scale = `+Zv+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,H0="return -x;",W0="return ceil(x);",U0="return floor(x);",j0="return exp(x);",G0="return exp(x) - 1.0;",hF=Kr+`
  return sin(x);
`,vF=Kr+`
  return cos(x);
`,pF=Kr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,mF=Kr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,gF=Kr+`
  return atan(x);
`,yF=Kr+"return log(x + sqrt(x * x + 1.0));",bF=Kr+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,xF=Kr+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,ll="return x;",wF="return x;",Jw=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Zw=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,e_=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Ps=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},_F=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=nr("rc",t),r=Ht(t),a=(function(s,u){if(s===1)return"rc";for(var l="",c=0;c<s;c++)l+=u[c],c<s-1&&(l+=",");return l})(t,n),o=n.slice(-2),i=t<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+i+`));
      }
    `},cl={};function dl(e,t){if(t===void 0&&(t=!1),e==="linear")return t?wF:dF;if(e==="relu")return t?Jw:Xw;if(e==="elu")return t?e_:Yw;if(e==="relu6")return t?Zw:Qw;if(e==="prelu")return t?Kw:Gw;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var CF=600,SF=(function(e){function t(n){var r,a=e.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!Se().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var o=fa(Se().getNumber("WEBGL_VERSION"));a.binaryCache=((r=Se().getNumber("WEBGL_VERSION"))in cl||(cl[r]={}),cl[r]),a.gpgpu=new NP(o),a.canvas=o.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=n,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=n.gl.canvas;return a.textureManager=new sF(a.gpgpu),a.numMBBeforeWarning=Se().global.screen==null?1024:Se().global.screen.height*Se().global.screen.width*window.devicePixelRatio*CF/1024/1024,a.texData=new Nw(a,ie),a}return Gr(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(n,r,a){if(Se().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:a,values:n,usage:hr.UPLOAD}),o},t.prototype.move=function(n,r,a,o){if(Se().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:a,dtype:o,values:r,usage:hr.UPLOAD})},t.prototype.readSync=function(n){var r=this.texData.get(n),a=r.values,o=r.dtype,i=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;c=l?new Ps(u,ll):new ht(u,ll);var d=this.runWebGLProgram(c,[{dataId:n,shape:u,dtype:o}],o),f=this.readSync(d.dataId);return this.disposeData(d.dataId),f}if(a!=null)return this.convertAndCacheOnCPU(n);if(o==="string")return a;var h,v,m=this.activeTimers!=null;return m&&(h=ea()),o==="complex64"?v=Ih(i.real.dataSync(),i.imag.dataSync()):v=this.getValuesFromTexture(n),m&&(this.downloadWaitMs+=ea()-h),this.convertAndCacheOnCPU(n,v)},t.prototype.read=function(n){return Ue(this,void 0,void 0,(function(){var r,a,o,i,s,u,l,c,d,f,h,v,m,p,y,x,b,g,w,S,E,R;return je(this,(function(A){switch(A.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise((function(k){return r.push(k)}))];if(a=this.texData.get(n),o=a.values,i=a.shape,s=a.slice,u=a.dtype,l=a.complexTensors,c=a.isPacked,s!=null)return d=void 0,d=c?new Ps(i,ll):new ht(i,ll),f=this.runWebGLProgram(d,[{dataId:n,shape:i,dtype:u}],u),h=this.read(f.dataId),this.disposeData(f.dataId),[2,h];if(o!=null)return[2,this.convertAndCacheOnCPU(n)];if(!Se().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Se().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return v=null,u!=="complex64"&&Se().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(n),p=this.texData.get(m.dataId),v=(R=this.gpgpu).createBufferFromTexture.apply(R,[p.texture].concat(Ys(i)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:A.sent(),A.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return x=A.sent(),b=x[0],g=x[1],y=Ih(b,g),[3,5];case 4:v==null?y=this.getValuesFromTexture(n):(w=Ke(i),y=this.gpgpu.downloadFloat32MatrixFromBuffer(v,w)),A.label=5;case 5:return m!=null&&this.disposeData(m.dataId),S=this.convertAndCacheOnCPU(n,y),E=this.pendingRead.get(n),this.pendingRead.delete(n),E.forEach((function(k){return k(S)})),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,S]}}))}))},t.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var a=n[r];if(!fM(a))throw Se().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(n){var r,a=this.texData.get(n),o=a.shape,i=a.dtype,s=a.isPacked,u=Ke(o);if(Se().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),c=this.texData.get(l.dataId),d=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(Ys(o))).subarray(0,u);return this.disposeData(l.dataId),d}var f=Se().getBool("WEBGL_PACK")&&s===!0,h=f?pf(o):o,v=f?new dP(h):new cP(h),m=this.runWebGLProgram(v,[{shape:h,dtype:i,dataId:n}],"float32"),p=this.texData.get(m.dataId),y=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture,p.texShape[0],p.texShape[1]).subarray(0,u);return this.disposeData(m.dataId),y},t.prototype.time=function(n){return Ue(this,void 0,void 0,(function(){var r,a,o,i,s,u,l;return je(this,(function(c){switch(c.label){case 0:return r=this.activeTimers,a=[],o=!1,this.programTimersStack==null?(this.programTimersStack=a,o=!0):this.activeTimers.push(a),this.activeTimers=a,n(),i=us(this.activeTimers.map((function(d){return d.query}))).filter((function(d){return d!=null})),s=us(this.activeTimers.map((function(d){return d.name}))).filter((function(d){return d!=null})),this.activeTimers=r,o&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return l=c.sent(),u.kernelMs=jI(l),u.getExtraProfileInfo=function(){return l.map((function(d,f){return{name:s[f],ms:d}})).map((function(d){return d.name+": "+d.ms})).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ea(),endMs:null}},t.prototype.endTimer=function(n){return Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=ea(),n)},t.prototype.getQueryTime=function(n){return Ue(this,void 0,void 0,(function(){var r;return je(this,(function(a){return Se().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]}))}))},t.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},t.prototype.releaseGPUData=function(n){var r=this.texData.get(n),a=r.texture,o=r.dtype,i=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||n,d=this.dataRefCount.get(c);d>1?this.dataRefCount.set(c,d-1):(this.dataRefCount.delete(c),a!=null&&(this.numBytesInGPU-=this.computeBytes(i,o),this.textureManager.releaseTexture(a,i,s,u)));var f=this.texData.get(n);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null},t.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},t.prototype.getDataInfo=function(n){return this.texData.get(n)},t.prototype.getCPUBackend=function(){return Se().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=ie.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(n,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every((function(o){return a.texData.get(o.dataId).texture==null&&o.size<r}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(n,r){var a=this.makeOutput(n.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:ie.keep(n.clone()),imag:ie.keep(r.clone())},a},t.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,a){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,a);if(Ke(a)===0)return Pn([],a,n.dtype);var o=this.texData.get(n.dataId).isPacked,i=Pw(n.shape,r,a);if(o||!i){var s=Se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oF(a):new aF(a),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,a)},t.prototype.shallowSlice=function(n,r,a){var o=this.texData.get(n.dataId),i=this.makeOutput(a,n.dtype),s=this.texData.get(i.dataId);Object.assign(s,o),s.shape=a,s.dtype=n.dtype;var u=Fw(r,n.strides);o.slice&&(u+=o.slice.flatOffset),s.slice={flatOffset:u,origDataId:o.slice&&o.slice.origDataId||n.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),i},t.prototype.stridedSlice=function(n,r,a,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,a,o);var i=jv(r,a,o);if(i.some((function(u){return u===0})))return Pn([],i);var s=new iF(r,o,i);return this.compileAndRun(s,[n])},t.prototype.reverse=function(n,r){var a=Se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tF(n.shape,r):new eF(n.shape,r);return this.compileAndRun(a,[n])},t.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var a=n.map((function(h){return Cr(h)})),o=n.map((function(h){return na(h)}));return Mn(this.concat(a,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>Se().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(n.length/2),s=this.concat(n.slice(0,i),r),u=this.concat(n.slice(i),r);return this.concat([s,u],r)}if(Se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new QD(n.map((function(h){return h.shape})),r);return this.compileAndRun(l,n)}var c=cs(n.map((function(h){return h.shape})),r),d=n.map((function(h){return h.as2D(-1,Ke(h.shape.slice(r)))})),f=new XD(d.map((function(h){return h.shape})));return this.compileAndRun(f,d).reshape(c)},t.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,H0,n.dtype);var r=new ht(n.shape,H0);return this.compileAndRun(r,[n])},t.prototype.batchMatMul=function(n,r,a,o){var i=a?n.shape[2]:n.shape[1],s=o?r.shape[1]:r.shape[2],u=a?n.shape[1]:n.shape[2],l=n.shape[0];if((i===1||s===1)&&u>1e3){a&&(n=n.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var c=s===1?n:n.as3D(l,u,1),d=s===1?2:1,f=s===1?r.as3D(l,1,u):r;return this.multiply(c,f).sum(d,!0)}var h=Dn(n.dtype,r.dtype),v=new bf(n.shape,[l,i,s],a,o);return this.compileAndRun(v,[n,r],h)},t.prototype.fusedBatchMatMul=function(n){var r=n.a,a=n.b,o=n.transposeA,i=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=o?r.shape[2]:r.shape[1],d=i?a.shape[1]:a.shape[2],f=r.shape[0],h=Dn(r.dtype,a.dtype),v=s!=null,m=l!=null,p=u?dl(u,!0):null,y=new bf(r.shape,[f,c,d],o,i,v,p,m),x=[r,a];return s&&x.push(s),l&&x.push(l),this.compileAndRun(y,x,h)},t.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var a=this.texData.get(n.dataId),o=this.texData.get(r.dataId),i=new M0(WD,n.shape,r.shape),s=new M0(UD,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,a.complexTensors.real),this.makeComplexComponentTensorInfo(n,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],l=this.compileAndRun(i,u),c=this.compileAndRun(s,u),d=this.complex(l,c);return l.dispose(),c.dispose(),d}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,D0,n.dtype);var f=new an(D0,n.shape,r.shape);return this.compileAndRun(f,[n,r],n.dtype)},t.prototype.batchNormalization=function(n,r,a,o,i,s){var u=[n,r,a],l=null;s!=null&&(l=s.shape,u.push(s));var c=null;if(i!=null&&(c=i.shape,u.push(i)),Se().getBool("WEBGL_PACK_NORMALIZATION")){var d=new HD(n.shape,r.shape,a.shape,l,c,o);return this.compileAndRun(d,u)}var f=new $D(n.shape,r.shape,a.shape,l,c,o);return this.compileAndRun(f,u)},t.prototype.localResponseNormalization4D=function(n,r,a,o,i){var s=Se().getBool("WEBGL_PACK_NORMALIZATION")?new LP(n.shape,r,a,o,i):new BP(n.shape,r,a,o,i);return this.compileAndRun(s,[n])},t.prototype.LRNGrad=function(n,r,a,o,i,s,u){var l=new qP(r.shape,o,i,s,u);return this.compileAndRun(l,[r,a,n])},t.prototype.tile=function(n,r){if(n.dtype==="string"){var a=this.readSync(n.dataId).map((function(i){return nc(i)}));return $w(ct(n.shape,n.dtype,a),r)}var o=new uF(n.shape,r);return this.compileAndRun(o,[n])},t.prototype.pad=function(n,r,a){var o=Se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jP(n.shape,r,a):new UP(n.shape,r,a);return this.compileAndRun(o,[n])},t.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var a=Se().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cF(n.shape,r):new lF(n.shape,r);return this.compileAndRun(a,[n])},t.prototype.gather=function(n,r,a){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,a);var o=new gP(n.shape,r.size,a);return this.compileAndRun(o,[n,r])},t.prototype.batchToSpaceND=function(n,r,a){U(n.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var o=r.reduce((function(d,f){return d*f})),i=uc(n.shape,r,o),s=lc(i.length,r.length),u=cc(n.shape,r,o),l=Aw(a,r.length),c=Iw(u,a,r.length);return n.reshape(i).transpose(s).reshape(u).slice(l,c)},t.prototype.spaceToBatchND=function(n,r,a){U(n.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var o=r.reduce((function(f,h){return f*h})),i=[[0,0]];i.push.apply(i,a);for(var s=1+r.length;s<n.shape.length;++s)i.push([0,0]);var u=n.pad(i),l=uc(u.shape,r,o,!1),c=lc(l.length,r.length,!1),d=cc(u.shape,r,o,!1);return u.reshape(l).transpose(c).reshape(d)},t.prototype.reduce=function(n,r,a){var o=n.shape[0],i=n.shape[1],s=mf(i),u=new GP({windowSize:s,inSize:i,batchSize:o},r),l=this.compileAndRun(u,[n],a);return l.shape[1]===1?l:this.reduce(l,r,a)},t.prototype.argReduce=function(n,r,a){a===void 0&&(a=null);var o=n.shape[0],i=n.shape[1];a!=null&&(o=a.shape[0],i=a.shape[1]);var s=mf(i),u=new PD({windowSize:s,inSize:i,batchSize:o},r,a==null),l=[n];a!=null&&l.push(a);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(n,r,c)},t.prototype.argReducePacked=function(n,r,a){a===void 0&&(a=null);var o=a!=null?a.shape:n.shape,i=mf(o[o.length-1]),s=new LD(o,i,r,a==null),u=a==null?[n]:[n,a],l=this.compileAndRun(s,u,"int32");return l.rank===n.rank?this.argReducePacked(n,r,l):l},t.prototype.sum=function(n,r){ur("sum",r,n.rank);var a=qn(n.shape,r),o=a[0],i=Ke(a[1]),s=n.as2D(-1,i),u=uf(n.dtype);return this.reduce(s,"sum",u).reshape(o)},t.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var a=qn(n.shape,r),o=a[0],i=Ke(a[1]),s=n.as2D(-1,i),u=uf(n.dtype);return this.reduce(s,"prod",u).reshape(o)},t.prototype.unsortedSegmentSum=function(n,r,a){var o=0,i=ha([o],n.rank),s=n;i!=null&&(s=n.transpose(i),o=va(1,n.rank)[0]);var u=(function(h,v,m){for(var p=[],y=h.length,x=0;x<y;x++)x!==v?p.push(h[x]):p.push(m);return p})(s.shape,o,a),l=Ke([s.shape[o]]),c=s.as2D(-1,l),d=uf(n.dtype),f=this.segOpCompute(c,"unsortedSegmentSum",r,d,a).reshape(u);return i!=null&&(f=f.transpose($v(i))),f},t.prototype.segOpCompute=function(n,r,a,o,i){var s=n.shape[0],u=n.shape[1],l=(function(f,h){var v,m=!1;for(f<=Dw?(v=f,m=!0):v=wh(f,Math.floor(Math.sqrt(f)));!m;)v>h||v===f?m=!0:v=wh(f,v+1);return v})(u,i),c=new nF({windowSize:l,inSize:u,batchSize:s,numSegments:i}),d=this.compileAndRun(c,[n,a],o);return d.shape[1]===i?d:(a=sc(0,i).tile([u/l]),this.segOpCompute(d,r,a,o,i))},t.prototype.argMinMaxReduce=function(n,r,a){var o=[r];if(ur("arg"+a.charAt(0).toUpperCase()+a.slice(1),o,n.rank),!Se().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var i=qn(n.shape,o),s=i[0],u=Ke(i[1]),l=n.as2D(-1,u);return this.argReduce(l,a).reshape(s)}return this.argReducePacked(n,a)},t.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},t.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},t.prototype.cumsum=function(n,r,a,o){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var i=new oP(n.shape,a,o);return this.compileAndRun(i,[n])},t.prototype.equal=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var a=new an("return float(a == b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.notEqual=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new an("return float(a != b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new an("return float(a < b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.lessEqual=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new an("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new an("return float(a > b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.greaterEqual=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new an("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.logicalNot=function(n){var r=new ht(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},t.prototype.logicalAnd=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new an("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.logicalOr=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new an("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(a,[n,r],"bool")},t.prototype.select=function(n,r,a){var o=new rF(n.rank,r.shape,r.rank);return this.compileAndRun(o,[n,r,a],Dn(r.dtype,a.dtype))},t.prototype.where=function(n){oc("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return Qv(n.shape,r)},t.prototype.topk=function(n,r,a){return Hw(n.dataSync(),n.shape,n.dtype,r)},t.prototype.min=function(n,r){ur("min",r,n.rank);var a=qn(n.shape,r),o=a[0],i=Ke(a[1]),s=n.as2D(-1,i);return this.reduce(s,"min",s.dtype).reshape(o)},t.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var a=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ka(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new an(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.mod=function(n,r){var a=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ka(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new an(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);ur("max",r,n.rank);var a=qn(n.shape,r),o=a[0],i=Ke(a[1]),s=n.as2D(-1,i);return this.reduce(s,"max",s.dtype).reshape(o)},t.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var a=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ka(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new an(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.all=function(n,r){ur("all",r,n.rank);var a=qn(n.shape,r),o=a[0],i=Ke(a[1]),s=n.as2D(-1,i);return this.reduce(s,"all",s.dtype).reshape(o)},t.prototype.any=function(n,r){ur("any",r,n.rank);var a=qn(n.shape,r),o=a[0],i=Ke(a[1]),s=n.as2D(-1,i);return this.reduce(s,"any",s.dtype).reshape(o)},t.prototype.realDivide=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new an(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(a,[n,r],"float32")},t.prototype.floorDiv=function(n,r){if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new an(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(a,[n,r],"int32")},t.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,gf);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var a=Dn(n.dtype,r.dtype);if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,gf,a);var o=new an(gf,n.shape,r.shape);return this.compileAndRun(o,[n,r],a)},t.prototype.packedUnaryOp=function(n,r,a){var o=new Ps(n.shape,r);return this.compileAndRun(o,[n],a)},t.prototype.packedBinaryOp=function(n,r,a,o,i){i===void 0&&(i=!1);var s=new ka(a,n.shape,r.shape,i);return this.compileAndRun(s,[n,r],o)},t.prototype.complexSeparableBinaryOp=function(n,r,a){var o=this,i=this.texData.get(n.dataId),s=this.texData.get(r.dataId),u=[[i.complexTensors.real,s.complexTensors.real],[i.complexTensors.imag,s.complexTensors.imag]].map((function(f){var h=f[0],v=f[1],m=o.makeComplexComponentTensorInfo(n,h),p=o.makeComplexComponentTensorInfo(r,v),y=new an(a,n.shape,r.shape);return o.compileAndRun(y,[m,p],Dn(h.dtype,v.dtype))})),l=u[0],c=u[1],d=this.complex(l,c);return l.dispose(),c.dispose(),d},t.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},t.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>Se().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),a=this.addN(n.slice(0,r)),o=this.addN(n.slice(r));return this.addN([a,o])}var i=n.map((function(l){return l.dtype})).reduce((function(l,c){return Dn(l,c)})),s=n.map((function(l){return l.shape})),u=Se().getBool("WEBGL_PACK")?new DD(n[0].shape,s):new MD(n[0].shape,s);return this.compileAndRun(u,n,i)},t.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,yf);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var a=Dn(n.dtype,r.dtype);if(Se().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,yf,n.dtype);var o=new an(yf,n.shape,r.shape);return this.compileAndRun(o,[n,r],a)},t.prototype.pow=function(n,r){var a=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ka(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new an(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),o=Dn(n.dtype,r.dtype);return this.compileAndRun(a,[n,r],o)},t.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,W0,n.dtype);var r=new ht(n.shape,W0);return this.compileAndRun(r,[n])},t.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,U0,n.dtype);var r=new ht(n.shape,U0);return this.compileAndRun(r,[n])},t.prototype.sign=function(n){var r=new ht(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},t.prototype.isNaN=function(n){var r=new ht(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isInf=function(n){var r=new ht(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isFinite=function(n){var r=new ht(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.round=function(n){var r=new ht(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},t.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,j0,n.dtype);var r=new ht(n.shape,j0);return this.compileAndRun(r,[n])},t.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,G0,n.dtype);var r=new ht(n.shape,G0);return this.compileAndRun(r,[n])},t.prototype.softmax=function(n,r){var a=_n([r],n.shape),o=this.max(n,a),i=or(o.shape,a),s=this.subtract(n,o.reshape(i)),u=this.exp(s),l=this.sum(u,a).reshape(i);return this.realDivide(u,l)},t.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new ht(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},t.prototype.log1p=function(n){var r=new ht(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},t.prototype.sqrt=function(n){var r=new ht(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},t.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new ht(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},t.prototype.reciprocal=function(n){var r=new ht(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},t.prototype.relu=function(n){var r;return r=Se().getBool("WEBGL_PACK")?new Ps(n.shape,Jw):new ht(n.shape,Xw),this.compileAndRun(r,[n])},t.prototype.relu6=function(n){var r;return r=Se().getBool("WEBGL_PACK")?new Ps(n.shape,Zw):new ht(n.shape,Qw),this.compileAndRun(r,[n])},t.prototype.prelu=function(n,r){var a=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ka(Kw,n.shape,r.shape):new an(Gw,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.elu=function(n){if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,e_,n.dtype);var r=new ht(n.shape,Yw);return this.compileAndRun(r,[n])},t.prototype.eluDer=function(n,r){var a=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ka(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new an("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.selu=function(n){var r=new ht(n.shape,fF);return this.compileAndRun(r,[n])},t.prototype.int=function(n){var r=new ht(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},t.prototype.clip=function(n,r,a){var o,i=(o=Se().getBool("WEBGL_PACK_CLIP")?new GD(n.shape):new jD(n.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(o,[n],null,i)},t.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(Se().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,$0,n.dtype);var r=new ht(n.shape,$0);return this.compileAndRun(r,[n])},t.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),a=new KD(n.shape),o=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(a,o)},t.prototype.sigmoid=function(n){var r=new ht(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},t.prototype.softplus=function(n){var r=new ht(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},t.prototype.sin=function(n){var r=new ht(n.shape,hF);return this.compileAndRun(r,[n])},t.prototype.cos=function(n){var r=new ht(n.shape,vF);return this.compileAndRun(r,[n])},t.prototype.tan=function(n){var r=new ht(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},t.prototype.asin=function(n){var r=new ht(n.shape,pF);return this.compileAndRun(r,[n])},t.prototype.acos=function(n){var r=new ht(n.shape,mF);return this.compileAndRun(r,[n])},t.prototype.atan=function(n){var r=new ht(n.shape,gF);return this.compileAndRun(r,[n])},t.prototype.atan2=function(n,r){var a=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ka(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new an(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(a,[n,r])},t.prototype.sinh=function(n){var r=new ht(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.cosh=function(n){var r=new ht(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.tanh=function(n){var r=new ht(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},t.prototype.asinh=function(n){var r=new ht(n.shape,yF);return this.compileAndRun(r,[n])},t.prototype.acosh=function(n){var r=new ht(n.shape,bF);return this.compileAndRun(r,[n])},t.prototype.atanh=function(n){var r=new ht(n.shape,xF);return this.compileAndRun(r,[n])},t.prototype.erf=function(n){var r=new ht(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},t.prototype.step=function(n,r){var a=new ht(n.shape,(function(o){return o===void 0&&(o=0),Kr+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `})(r));return this.compileAndRun(a,[n])},t.prototype.conv2dByMatMul=function(n,r,a,o,i,s){var u=n.shape,l=this.texData.get(n.dataId),c=a.inChannels,d=u[0]*u[1]*u[2],f=a.outChannels,h=a.dataFormat==="channelsLast",v=(d===1||f===1)&&c>1e3,m=u[2]%2!=0&&!!l.isPacked;if(v||!Se().getBool("WEBGL_LAZILY_UNPACK")||!Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var p=h?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],y=this.reshape(n,[1,p,a.inChannels]),x=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:y,b:x,transposeA:!1,transposeB:!1,bias:o,activation:i,preluActivationWeights:s}),a.outShape)}var b=h?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),g={dataId:n.dataId,shape:[1,b,a.inChannels],dtype:n.dtype},w=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,U(sl(l.shape,g.shape),(function(){return"packed reshape "+l.shape+" to "+g.shape+" isn't free"}));var S=this.reshape(r,[1,a.inChannels,a.outChannels]),E=this.fusedBatchMatMul({a:g,b:S,transposeA:!1,transposeB:!1,bias:o,activation:i,preluActivationWeights:s}),R=this.texData.get(E.dataId);return U(R.isPacked,(function(){return"batchMatMul result is expected to be packed"})),l.shape=w,R.shape=a.outShape,ie.makeTensorFromDataId(E.dataId,a.outShape,E.dtype)},t.prototype.conv2dWithIm2Row=function(n,r,a,o,i,s){var u=a.filterWidth,l=a.filterHeight,c=a.inChannels,d=a.outWidth,f=a.outHeight,h=a.dataFormat==="channelsLast",v=u*l*c,m=f*d,p=[v,m],y=n.squeeze([0]),x=r.reshape([1,v,-1]),b=new OP(p,y.shape,a),g=this.compileAndRun(b,[y]).reshape([1,p[0],p[1]]),w=o!=null,S=s!=null,E=i?dl(i,!0):null,R=new bf(g.shape,[1,m,a.outChannels],!0,!1,w,E,S),A=[g,x];o&&A.push(o),S&&A.push(s);var k=this.compileAndRun(R,A);return h?k.reshape([1,f,d,a.outChannels]):k.reshape([1,a.outChannels,f,d])},t.prototype.fusedConv2d=function(n){var r=n.input,a=n.filter,o=n.convInfo,i=n.bias,s=n.activation,u=n.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,o,i,s,u);if(Se().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,o,i,s,u);var l=i!=null,c=u!=null,d=s?dl(s,!1):null,f=new P0(o,l,d,c),h=[r,a];return i&&h.push(i),u&&h.push(u),this.compileAndRun(f,h)},t.prototype.conv2d=function(n,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,a);if(Se().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,a);var o=new P0(a);return this.compileAndRun(o,[n,r])},t.prototype.conv2dDerInput=function(n,r,a){var o=new JD(a);return this.compileAndRun(o,[n,r])},t.prototype.conv2dDerFilter=function(n,r,a){var o=new YD(a);return this.compileAndRun(o,[n,r])},t.prototype.fusedDepthwiseConv2D=function(n){var r,a=n.input,o=n.filter,i=n.convInfo,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=Se().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,d=u?dl(u,c):null,f=[a,o],h=s!=null,v=l!=null;return h&&f.push(s),v&&f.push(l),c?(r=new N0(i,h,d,v),this.compileAndRun(r,f)):(r=new F0(i,h,d,v),this.compileAndRun(r,f))},t.prototype.depthwiseConv2D=function(n,r,a){var o;return Se().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(o=new N0(a),this.compileAndRun(o,[n,r])):(o=new F0(a),this.compileAndRun(o,[n,r]))},t.prototype.depthwiseConv2DDerInput=function(n,r,a){var o=new nP(a);return this.compileAndRun(o,[n,r])},t.prototype.depthwiseConv2DDerFilter=function(n,r,a){var o=new tP(a);return this.compileAndRun(o,[n,r])},t.prototype.conv3d=function(n,r,a){var o=new rP(a);return this.compileAndRun(o,[n,r])},t.prototype.conv3dDerInput=function(n,r,a){var o=new eP(a);return this.compileAndRun(o,[n,r])},t.prototype.conv3dDerFilter=function(n,r,a){var o=new ZD(a);return this.compileAndRun(o,[n,r])},t.prototype.maxPool=function(n,r){var a=new xf(r,"max",!1);return this.compileAndRun(a,[n])},t.prototype.avgPool=function(n,r){var a=new xf(r,"avg",!1);return this.compileAndRun(a,[n],"float32")},t.prototype.maxPoolBackprop=function(n,r,a,o){var i=new xf(o,"max",!0),s=this.compileAndRun(i,[r]),u=new VP(o),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},t.prototype.avgPoolBackprop=function(n,r,a){var o=new VD(a);return this.compileAndRun(o,[n],r.dtype)},t.prototype.cast=function(n,r){return qw(n,r,this)},t.prototype.unstack=function(n,r){for(var a=n.shape[r],o=new Array(n.rank-1),i=0,s=0;s<n.rank;s++)s!==r&&(o[i++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(a);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(o);return c},t.prototype.avgPool3d=function(n,r){var a=new wf(r,"avg",!1);return this.compileAndRun(a,[n],"float32")},t.prototype.avgPool3dBackprop=function(n,r,a){var o=new zD(a);return this.compileAndRun(o,[n],r.dtype)},t.prototype.maxPool3d=function(n,r){var a=new wf(r,"max",!1);return this.compileAndRun(a,[n],"float32")},t.prototype.maxPool3dBackprop=function(n,r,a,o){var i=new wf(o,"max",!0),s=this.compileAndRun(i,[r]),u=new zP(o),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},t.prototype.reshape=function(n,r){var a=this.texData.get(n.dataId);if(a.isPacked&&!sl(n.shape,r)&&(a.texture===null||!sl(a.shape,r))){var o=this.packedReshape(n,r);return ie.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return Ah(n,r)},t.prototype.resizeBilinear=function(n,r,a,o){var i=Se().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new YP(n.shape,r,a,o):new QP(n.shape,r,a,o);return this.compileAndRun(i,[n],"float32")},t.prototype.resizeBilinearBackprop=function(n,r,a){var o=new XP(n,r,a);return this.compileAndRun(o,[n])},t.prototype.resizeNearestNeighbor=function(n,r,a,o){var i=new ZP(n.shape,r,a,o);return this.compileAndRun(i,[n])},t.prototype.resizeNearestNeighborBackprop=function(n,r,a){var o=new JP(n,r,a);return this.compileAndRun(o,[n])},t.prototype.multinomial=function(n,r,a,o){var i=r?n:za(n),s=i.shape[0],u=i.shape[1],l=new $P(s,u,a),c=l.getCustomSetupFunc(o);return this.compileAndRun(l,[i],"int32",c)},t.prototype.oneHot=function(n,r,a,o){var i=new HP(n.size,r,a,o);return this.compileAndRun(i,[n])},t.prototype.diag=function(n){var r=new lP(n.size);return this.compileAndRun(r,[n])},t.prototype.nonMaxSuppression=function(n,r,a,o,i){return oc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Kv(n.dataSync(),r.dataSync(),a,o,i)},t.prototype.cropAndResize=function(n,r,a,o,i,s){var u=new aP(n.shape,r.shape,o,i,s);return this.compileAndRun(u,[n,r,a],"float32")},t.prototype.depthToSpace=function(n,r,a){U(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));var o=n.shape[0],i=a==="NHWC"?n.shape[1]:n.shape[2],s=a==="NHWC"?n.shape[2]:n.shape[3],u=a==="NHWC"?n.shape[3]:n.shape[1],l=i*r,c=s*r,d=u/(r*r),f=new uP(a==="NHWC"?[o,l,c,d]:[o,d,l,c],r,a);return this.compileAndRun(f,[n])},t.prototype.split=function(n,r,a){return zw(n,r,a)},t.prototype.scatterND=function(n,r,a){var o=dc(0,n,a),i=o.sliceRank,s=o.numUpdates,u=o.sliceSize,l=o.strides,c=o.outputSize,d=[c/u,u],f=n.reshape([s,i]),h=r.reshape([s,u]);if(c===0)return Ah(Pn([]),a);var v=Be(0),m=new L0(s,i,f.rank,h.rank,l,d);return this.compileAndRun(m,[h,f,v]).reshape(a)},t.prototype.sparseToDense=function(n,r,a,o){var i=dc(0,n,a),s=i.sliceRank,u=i.numUpdates,l=i.strides,c=i.outputSize,d=new L0(u,s,n.rank,r.rank,l,[c,1]);return this.compileAndRun(d,[r,n,o]).reshape(a)},t.prototype.fft=function(n){return this.fftImpl(n,!1)},t.prototype.ifft=function(n){return this.fftImpl(n,!0)},t.prototype.fftImpl=function(n,r){var a=this.texData.get(n.dataId),o=new B0(vP,n.shape,r),i=new B0(pP,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,a.complexTensors.real),this.makeComplexComponentTensorInfo(n,a.complexTensors.imag)],u=this.compileAndRun(o,s),l=this.compileAndRun(i,s),c=this.complex(u,l).as2D(n.shape[0],n.shape[1]);return u.dispose(),l.dispose(),c},t.prototype.gatherND=function(n,r){var a=r.shape,o=a[a.length-1],i=Mw(n,r),s=i[0],u=i[1],l=i[2],c=i[3],d=r.reshape([u,o]),f=n.reshape([n.size/l,l]),h=new yP(o,c,[u,l]);return this.compileAndRun(h,[f,d]).reshape(s)},t.prototype.fill=function(n,r,a){if((a=a||Tu(r))==="string"){var o=tc(a,Ke(n));return o.fill(r),ie.makeTensor(o,n,a,this)}var i=new mP(n,r),s=i.getCustomSetupFunc(r);return this.compileAndRun(i,[],a,s)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},t.prototype.linspace=function(n,r,a){return Lw(n,r,a)},t.prototype.makeTensorInfo=function(n,r){var a=this.write(null,n,r);return this.texData.get(a).usage=null,{dataId:a,shape:n,dtype:r}},t.prototype.makeOutput=function(n,r){var a=this.makeTensorInfo(n,r).dataId;return ie.makeTensorFromDataId(a,n,r,this)},t.prototype.unpackTensor=function(n){var r=new _F(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},t.prototype.packTensor=function(n){var r=new WP(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},t.prototype.packedReshape=function(n,r){var a=[rc(n.shape)].concat(ac(n.shape)),o={dtype:n.dtype,shape:a,dataId:n.dataId},i=[rc(r)].concat(ac(r)),s=new KP(i,a),u=this.runWebGLProgram(s,[o],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},t.prototype.decode=function(n){var r,a=this.texData.get(n),o=a.isPacked,i=a.shape,s=a.dtype,u=pf(i);return r=o?new sP(u):new iP(u),{dtype:s,shape:i,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:n}],s,null,!0).dataId}},t.prototype.runWebGLProgram=function(n,r,a,o,i){var s=this;i===void 0&&(i=!1);var u=this.makeTensorInfo(n.outputShape,a),l=this.texData.get(u.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===pu.DENSE){var c=Ys(n.outputShape);l.texShape=c.map((function(b){return 2*b}))}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),Ke(u.shape)===0)return l.values=hu(u.dtype,0),u;var d=[],f=r.map((function(b){if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var g=s.texData.get(b.dataId);if(g.texture==null){if(!n.packedInputs&&Ke(b.shape)<=Se().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:g.values};n.packedInputs&&(g.isPacked=!0,g.shape=b.shape)}else if(!!g.isPacked!=!!n.packedInputs)b=g.isPacked?s.unpackTensor(b):s.packTensor(b),d.push(b),g=s.texData.get(b.dataId);else if(g.isPacked&&!sl(g.shape,b.shape)){var w=b,S=b.shape;b.shape=g.shape,b=s.packedReshape(b,S),d.push(b),g=s.texData.get(b.dataId),w.shape=S}return s.uploadToGPU(b.dataId),{shape:b.shape,texData:g,isUniform:!1}}));this.uploadToGPU(u.dataId);var h,v={shape:u.shape,texData:l,isUniform:!1},m=(function(b,g,w){var S="";g.concat(w).forEach((function(A){var k=A.texData!=null&&A.texData.slice!=null&&A.texData.slice.flatOffset>0,M=A.isUniform?"uniform":A.texData.texShape;S+=A.shape+"_"+M+"_"+k}));var E=b.userCode,R=b.constructor.name;return R+="_"+S+"_"+E})(n,f,v),p=this.getAndSaveBinary(m,(function(){return(function(b,g,w,S){var E=g.userCode,R=w.map((function(q,K){var oe={logicalShape:q.shape,texShape:q.isUniform?null:q.texData.texShape,isUniform:q.isUniform,isPacked:!q.isUniform&&q.texData.isPacked,flatOffset:null};return q.texData!=null&&q.texData.slice!=null&&q.texData.slice.flatOffset>0&&(oe.flatOffset=q.texData.slice.flatOffset),{name:g.variableNames[K],shapeInfo:oe}})),A=R.map((function(q){return q.shapeInfo})),k={logicalShape:S.shape,texShape:S.texData.texShape,isUniform:!1,isPacked:S.texData.isPacked,flatOffset:null},M=FD(R,k,E,g.packedInputs),T=b.createProgram(M),D=null,I=b.getUniformLocation(T,"NAN",!1);Se().getNumber("WEBGL_VERSION")===1&&(D=b.getUniformLocation(T,"INFINITY",!1));for(var F={},V=0;V<g.variableNames.length;V++){var L=g.variableNames[V];F[L]=b.getUniformLocation(T,L,!1),F["offset"+L]=b.getUniformLocation(T,"offset"+L,!1)}return{program:g,source:M,webGLProgram:T,uniformLocations:F,inShapeInfos:A,outShapeInfo:k,infLoc:D,nanLoc:I}})(s.gpgpu,n,f,v)})),y=this.activeTimers!=null;if(y&&(h=this.startTimer()),(function(b,g,w,S,E){q0(g.inShapeInfos,w),q0([g.outShapeInfo],[S]);var R=S.texData.texture,A=S.texData.texShape;S.texData.isPacked?b.setOutputPackedMatrixTexture(R,A[0],A[1]):b.setOutputMatrixTexture(R,A[0],A[1]),b.setProgram(g.webGLProgram),Se().getNumber("WEBGL_VERSION")===1&&g.infLoc!==null&&b.gl.uniform1f(g.infLoc,1/0),g.nanLoc!==null&&b.gl.uniform1f(g.nanLoc,NaN),w.forEach((function(k,M){var T=g.program.variableNames[M],D=g.uniformLocations[T],I=g.uniformLocations["offset"+T];if(D!=null)if(k.isUniform)if(Ke(k.shape)<2)b.gl.uniform1f(D,k.uniformValues[0]);else{var F=k.uniformValues;F instanceof Float32Array||(F=new Float32Array(F)),b.gl.uniform1fv(D,F)}else k.texData.slice!=null&&I!=null&&b.gl.uniform1i(I,k.texData.slice.flatOffset),b.setInputMatrixTexture(k.texData.texture,D,M)})),E?.(b,g.webGLProgram),b.executeProgram()})(this.gpgpu,p,f,v,o),d.forEach((function(b){return s.disposeData(b.dataId)})),y&&(h=this.endTimer(h),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(h)})),!Se().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){var x=this.unpackTensor(u);return this.disposeData(u.dataId),x}return u},t.prototype.compileAndRun=function(n,r,a,o,i){i===void 0&&(i=!1),a=a||r[0].dtype;var s=this.runWebGLProgram(n,r,a,o,i);return ie.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},t.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var n=this;this.disposed||(Se().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]})),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Le((function(){if(!Se().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=Se().getBool("DEBUG");Se().set("DEBUG",!1);var a=n.abs(Be(1e-8)).dataSync()[0];if(Se().set("DEBUG",r),a>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(n){var r,a=this.texData.get(n),o=a.shape,i=a.dtype,s=a.values,u=a.texture,l=a.usage,c=a.isPacked;if(u==null){var d,f=this.activeTimers!=null;f&&(d=ea());var h=a.texShape;if(h==null&&(h=IM(o,c),a.texShape=h),s!=null){var v=pf(o),m=void 0,p=h[1],y=h[0],x=s instanceof Uint8Array;c?(p=(r=Au(h[0],h[1]))[0],y=r[1],m=new hP(v,[y,p],x)):m=new fP(v,[y,p],x);var b=this.makeTensorInfo([y,p],i);this.texData.get(b.dataId).usage=x?hr.PIXELS:hr.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,y,s);var g=this.runWebGLProgram(m,[b],i,null,!0),w=this.texData.get(g.dataId);a.texture=w.texture,a.texShape=w.texShape,a.isPacked=w.isPacked,a.usage=w.usage,this.disposeData(b.dataId),this.texData.delete(g.dataId),a.values=null,f&&(this.uploadWaitMs+=ea()-d)}else{var S=this.acquireTexture(h,l,i,c);a.texture=S}}},t.prototype.convertAndCacheOnCPU=function(n,r){var a=this.texData.get(n),o=a.dtype;return this.releaseGPUData(n),r!=null&&(a.values=(function(i,s){if(s==="float32"||s==="complex64")return i;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(i.length):new Uint8Array(i.length),l=0;l<u.length;++l)u[l]=Math.round(i[l]);return u}throw new Error("Unknown dtype "+s)})(r,o)),a.values},t.prototype.acquireTexture=function(n,r,a,o){if(this.numBytesInGPU+=this.computeBytes(n,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,o)},t.prototype.computeBytes=function(n,r){return n[0]*n[1]*hw(r)},t})(Ow);xw()&&ie.registerBackend("webgl",(function(){return new SF}),2);var kF=te({square_:function(e){var t=z(e,"x","square"),n=[t];return ie.runKernelFunc((function(r,a){return a([t]),r.square(t)}),{x:t},null,"Square",{},n,[])}}),gu="SquaredDifference",t_=te({squaredDifference_:function(e,t){var n,r=z(e,"a","squaredDifference"),a=z(t,"b","squaredDifference");n=tn(r,a),r=n[0],a=n[1],xt(r.shape,a.shape);var o={a:r,b:a},i=[r,a];return ie.runKernelFunc((function(s,u){var l=s.squaredDifference(r,a);return u([r,a]),l}),o,(function(s,u){var l=u[0],c=u[1],d=Be(2);return{a:function(){return s.mul(l.sub(c).mul(d))},b:function(){return s.mul(c.sub(l).mul(d))}}}),gu,{},i,[])}}),EF=te({abs_:function(e){var t=z(e,"x","abs");return t.dtype==="complex64"?ie.runKernelFunc((function(n){return n.complexAbs(t)}),{$x:t}):ie.runKernelFunc((function(n,r){var a=n.abs(t);return r([t]),a}),{x:t},(function(n,r){var a=r[0];return{x:function(){return n.mul(a.toFloat().step(-1))}}}),"Abs")}}),TF=te({acos_:function(e){var t=z(e,"x","acos");return ie.runKernelFunc((function(n,r){var a=n.acos(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.divStrict(Be(1).sub(a.toFloat().square()).sqrt()).neg()}}}))}}),RF=te({acosh_:function(e){var t=z(e,"x","acosh");return ie.runKernelFunc((function(n,r){var a=n.acosh(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.divStrict(a.toFloat().square().sub(1).sqrt())}}}))}}),AF=te({asin_:function(e){var t=z(e,"x","asin");return ie.runKernelFunc((function(n,r){var a=n.asin(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.divStrict(Be(1).sub(a.toFloat().square()).sqrt())}}}))}}),IF=te({asinh_:function(e){var t=z(e,"x","asinh");return ie.runKernelFunc((function(n,r){var a=n.asinh(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.divStrict(Be(1).add(a.toFloat().square()).sqrt())}}}))}}),MF=te({atan_:function(e){var t=z(e,"x","atan");return ie.runKernelFunc((function(n,r){var a=n.atan(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.div(a.toFloat().square().add(1))}}}))}}),DF=te({atanh_:function(e){var t=z(e,"x","atanh");return ie.runKernelFunc((function(n,r){var a=n.atanh(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.div(Be(1).sub(a.toFloat().square()))}}}))}}),PF=te({ceil_:function(e){var t=z(e,"x","ceil");return ie.runKernelFunc((function(n){return n.ceil(t)}),{$x:t},(function(n){return{$x:function(){return St(n)}}}))}}),ep=te({clipByValue_:function(e,t,n){var r=z(e,"x","clipByValue");U(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var a=[r],o={min:t,max:n};return ie.runKernelFunc((function(i,s){var u=i.clip(r,t,n);return s([r]),u}),{x:r},(function(i,s){var u=s[0];return{x:function(){return i.where(u.greaterEqual(t).logicalAnd(u.lessEqual(n)),St(i))}}}),"ClipByValue",o,a)}}),FF=te({cos_:function(e){var t=z(e,"x","cos"),n=[t];return ie.runKernelFunc((function(r,a){var o=r.cos(t);return a([t]),o}),{x:t},(function(r,a){var o=a[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}}),"Cos",{},n)}}),NF=te({cosh_:function(e){var t=z(e,"x","cosh");return ie.runKernelFunc((function(n,r){var a=n.cosh(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(n)}}}))}}),OF=te({erf_:function(e){var t=z(e,"x","erf");return U(t.dtype==="int32"||t.dtype==="float32",(function(){return"Input dtype must be `int32` or `float32`."})),t.dtype==="int32"&&(t=t.toFloat()),ie.runKernelFunc((function(n,r){var a=n.erf(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Mh=te({exp_:function(e){var t=z(e,"x","exp");return ie.runKernelFunc((function(n,r){var a=n.exp(t);return r([a]),a}),{x:t},(function(n,r){return{x:function(){return n.mulStrict(r[0])}}}),"Exp",{},[],[!0])}}),BF=te({expm1_:function(e){var t=z(e,"x","expm1");return ie.runKernelFunc((function(n,r){var a=n.expm1(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.mul(a.exp())}}}))}}),qF=te({floor_:function(e){var t=z(e,"x","floor");return ie.runKernelFunc((function(n){return n.floor(t)}),{$x:t},(function(n){return{$x:function(){return St(n)}}}))}}),LF=te({log_:function(e){var t=z(e,"x","log"),n=[t];return ie.runKernelFunc((function(r,a){var o=r.log(t);return a([t]),o}),{x:t},(function(r,a){var o=a[0];return{x:function(){return r.div(o.toFloat())}}}),"Log",{},n)}}),VF=te({log1p_:function(e){var t=z(e,"x","log1p");return ie.runKernelFunc((function(n,r){var a=n.log1p(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.div(a.add(1))}}}))}}),zF=te({logSigmoid_:function(e){var t=z(e,"x","logSigmoid");return ie.runKernelFunc((function(n,r){var a=n.softplus(t.neg()).neg();return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.mul(a.neg().sigmoid())}}}))}}),pc=te({neg_:function(e){var t=z(e,"x","neg"),n=[t];return ie.runKernelFunc((function(r){return r.neg(t)}),{x:t},(function(r){return{x:function(){return r.neg()}}}),"Neg",{},n)}}),$F=te({reciprocal_:function(e){var t=z(e,"x","reciprocal");return ie.runKernelFunc((function(n,r){var a=n.reciprocal(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.div(a.square().neg())}}}))}}),HF=te({round_:function(e){var t=z(e,"x","round");return ie.runKernelFunc((function(n){return n.round(t)}),{$x:t},(function(n){return{$x:function(){return St(n)}}}))}}),n_=te({rsqrt_:function(e){var t=z(e,"x","rsqrt"),n=[t];return ie.runKernelFunc((function(r,a){var o=r.rsqrt(t);return a([t]),o}),{x:t},(function(r,a){var o=a[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),r_=te({sigmoid_:function(e){var t=z(e,"x","sigmoid");return ie.runKernelFunc((function(n,r){var a=n.sigmoid(t);return r([a]),a}),{x:t},(function(n,r){var a=r[0];return{x:function(){return n.mul(a.mul(Be(1).sub(a)))}}}),"Sigmoid")}}),WF=te({sign_:function(e){var t=z(e,"x","sign");return ie.runKernelFunc((function(n){return n.sign(t)}),{$x:t},(function(n){return{$x:function(){return St(n)}}}))}}),UF=te({isNaN_:function(e){var t=z(e,"x","isNaN");return ie.runKernelFunc((function(n){return n.isNaN(t)}),{$x:t},(function(n){return{$x:function(){return St(n)}}}))}}),jF=te({isInf_:function(e){var t=z(e,"x","isInf");return ie.runKernelFunc((function(n){return n.isInf(t)}),{$x:t},(function(n){return{$x:function(){return St(n)}}}))}}),GF=te({isFinite_:function(e){var t=z(e,"x","isFinite");return ie.runKernelFunc((function(n){return n.isFinite(t)}),{$x:t},(function(n){return{$x:function(){return St(n)}}}))}}),KF=te({sin_:function(e){var t=z(e,"x","sin"),n=[t];return ie.runKernelFunc((function(r,a){var o=r.sin(t);return a([t]),o}),{x:t},(function(r,a){var o=a[0];return{x:function(){return o.toFloat().cos().mul(r)}}}),"Sin",{},n)}}),XF=te({sinh_:function(e){var t=z(e,"x","sinh");return ie.runKernelFunc((function(n,r){var a=n.sinh(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(n)}}}))}}),QF=te({softplus_:function(e){var t=z(e,"x","softplus");return ie.runKernelFunc((function(n,r){var a=n.softplus(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.mul(a.sigmoid())}}}))}}),YF=te({sqrt_:function(e){var t=z(e,"x","sqrt");return ie.runKernelFunc((function(n,r){var a=n.sqrt(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.div(a.toFloat().sqrt().mul(2))}}}))}}),JF=te({step_:function(e,t){t===void 0&&(t=0);var n=z(e,"x","step");return ie.runKernelFunc((function(r){return r.step(n,t)}),{$x:n},(function(r){return{$x:function(){return St(r)}}}))}}),ZF=te({tan_:function(e){var t=z(e,"x","tan");return ie.runKernelFunc((function(n,r){var a=n.tan(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return n.div(a.cos().square())}}}))}}),eN=te({tanh_:function(e){var t=z(e,"x","tanh");return ie.runKernelFunc((function(n,r){var a=n.tanh(t);return r([a]),a}),{x:t},(function(n,r){var a=r[0];return{x:function(){return Be(1).sub(a.square()).mulStrict(n)}}}),"Tanh",{},null,[!0])}});function a_(e,t,n,r,a,o){var i,s,u=z(e,"x","batchNorm"),l=z(t,"mean","batchNorm"),c=z(n,"variance","batchNorm");return a!=null&&(i=z(a,"scale","batchNorm")),r!=null&&(s=z(r,"offset","batchNorm")),U(u.rank===2,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),U(l.rank===2||l.rank===1,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."})),U(c.rank===2||c.rank===1,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."})),i!=null&&U(i.rank===2||i.rank===1,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."})),s!=null&&U(s.rank===2||s.rank===1,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),Mu(u,l,c,s,i,o)}function o_(e,t,n,r,a,o){var i,s,u=z(e,"x","batchNorm"),l=z(t,"mean","batchNorm"),c=z(n,"variance","batchNorm");return a!=null&&(i=z(a,"scale","batchNorm")),r!=null&&(s=z(r,"offset","batchNorm")),U(u.rank===3,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),U(l.rank===3||l.rank===1,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."})),U(c.rank===3||c.rank===1,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."})),i!=null&&U(i.rank===3||i.rank===1,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."})),s!=null&&U(s.rank===3||s.rank===1,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),Mu(u,l,c,s,i,o)}function i_(e,t,n,r,a,o){var i,s,u=z(e,"x","batchNorm"),l=z(t,"mean","batchNorm"),c=z(n,"variance","batchNorm");return a!=null&&(i=z(a,"scale","batchNorm")),r!=null&&(s=z(r,"offset","batchNorm")),U(u.rank===4,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),U(l.rank===4||l.rank===1,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."})),U(c.rank===4||c.rank===1,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."})),i!=null&&U(i.rank===4||i.rank===1,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."})),s!=null&&U(s.rank===4||s.rank===1,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),Mu(u,l,c,s,i,o)}function Mu(e,t,n,r,a,o){o==null&&(o=.001);var i,s,u,l=z(e,"x","batchNorm"),c=z(t,"mean","batchNorm"),d=z(n,"variance","batchNorm");a!=null&&(i=z(a,"scale","batchNorm")),r!=null&&(s=z(r,"offset","batchNorm")),U(c.rank===d.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),U(s==null||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),U(i==null||c.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var f=[l,c,d,i];return ie.runKernelFunc((function(h,v){var m=h.batchNormalization(u,fl(c),fl(d),o,fl(i),fl(s));return v([l,c,d,i]),m}),{x:l,mean:c,variance:d,scale:i,offset:s},(function(h,v){var m=v,p=m[0],y=m[1],x=m[2],b=m[3],g=b??Be(1),w=xn(y.shape,u.shape),S=[];if(y.rank===1){for(var E=0;E<u.shape.length-1;++E)S.push(u.shape[E]);S.push(1)}var R=p.sub(y),A=h.mul(g),k=n_(x.add(Be(o))),M=k.mul(k).mul(k).mul(Be(-.5));return{x:function(){return y.rank===1?h.mul(Xi(k.as4D(1,1,1,y.shape[0]),S)).mul(g).reshape(p.shape):h.mul(k).mul(g).reshape(p.shape)},mean:function(){var T=k.mul(Be(-1)).mul(A);return y.rank===1&&(T=T.sum(w)),T.reshape(y.shape)},variance:function(){var T=M.mul(R).mul(A);return y.rank===1&&(T=T.sum(w)),T.reshape(y.shape)},scale:function(){var T=R.mul(k),D=h.mul(T);return y.rank===1&&(D=D.sum(w)),D.reshape(y.shape)},offset:function(){var T=h;return y.rank===1&&(T=T.sum(w)),T.reshape(y.shape)}}}),"BatchNormalization",{varianceEpsilon:o},f).reshape(l.shape)}function fl(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function ed(){ww("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var tN=te({batchNormalization2d_:function(e,t,n,r,a,o){return r===void 0&&(r=.001),ed(),a_(e,t,n,o,a,r)}}),nN=te({batchNormalization3d_:function(e,t,n,r,a,o){return r===void 0&&(r=.001),ed(),o_(e,t,n,o,a,r)}}),rN=te({batchNormalization4d_:function(e,t,n,r,a,o){return r===void 0&&(r=.001),ed(),i_(e,t,n,o,a,r)}}),aN=te({batchNormalization_:function(e,t,n,r,a,o){return r===void 0&&(r=.001),ed(),Mu(e,t,n,o,a,r)}}),s_=te({batchNorm_:Mu}),oN=te({batchNorm2d_:a_}),iN=te({batchNorm3d_:o_}),sN=te({batchNorm4d_:i_}),td=te({logicalAnd_:function(e,t){var n=z(e,"a","logicalAnd","bool"),r=z(t,"b","logicalAnd","bool");return xt(n.shape,r.shape),ie.runKernelFunc((function(a){return a.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),uN=te({logicalNot_:function(e){var t=z(e,"x","logicalNot","bool");return ie.runKernelFunc((function(n){return n.logicalNot(t)}),{$x:t})}}),u_=te({logicalOr_:function(e,t){var n=z(e,"a","logicalOr","bool"),r=z(t,"b","logicalOr","bool");return xt(n.shape,r.shape),ie.runKernelFunc((function(a){return a.logicalOr(n,r)}),{$a:n,$b:r})}}),lN=te({logicalXor_:function(e,t){var n=z(e,"a","logicalXor","bool"),r=z(t,"b","logicalXor","bool");return xt(n.shape,r.shape),u_(e,t).logicalAnd(td(e,t).logicalNot())}}),ri=te({where_:function(e,t,n){var r=z(t,"a","where"),a=z(n,"b","where"),o=z(e,"condition","where","bool");return Pt(r.shape,a.shape,"Error in where: "),o.rank===1?U(o.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):Pt(o.shape,a.shape,"Error in where: "),ie.runKernelFunc((function(i,s){var u=i.select(o,r,a);return s([o]),u}),{$condition:o,$a:r,$b:a},(function(i,s){var u=s[0];return{$condition:function(){return St(u).toFloat()},$a:function(){return i.mul(u.cast(i.dtype))},$b:function(){return i.mul(u.logicalNot().cast(i.dtype))}}}))}}),l_=function(e){return Ue(this,void 0,void 0,(function(){var t,n,r;return je(this,(function(a){switch(a.label){case 0:return[4,(t=z(e,"condition","whereAsync","bool")).data()];case 1:return n=a.sent(),r=Qv(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},gt=te({add_:function(e,t){var n,r=z(e,"a","add"),a=z(t,"b","add");n=tn(r,a),r=n[0],a=n[1];var o=xt(r.shape,a.shape);return ie.runKernelFunc((function(i){return i.add(r,a)}),{a:r,b:a},(function(i){return{a:function(){var s=i,u=xn(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=i,u=xn(a.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(a.shape)}}}),"Add")}}),cN=te({addN_:function(e){U(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),U(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(a,o){return z(a,"tensors"+o,"addN")})),n=t[0];t.forEach((function(a){if(a.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(a){if(!En(a.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return ie.runKernelFunc((function(a){return a.addN(t)}),r,(function(a){var o={};return t.forEach((function(i,s){o[s]=function(){return a.clone()}})),o}),"AddN")}}),dN=te({addStrict_:function(e,t){var n=z(e,"a","addStrict"),r=z(t,"b","addStrict");return Pt(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),fN=te({atan2_:function(e,t){var n,r=z(e,"a","atan2"),a=z(t,"b","atan2");n=tn(r,a),r=n[0],a=n[1];var o=xt(r.shape,a.shape);return ie.runKernelFunc((function(i,s){var u=i.atan2(r,a);return s([r,a]),u}),{$a:r,$b:a},(function(i,s){var u=s[0],l=s[1];return{$a:function(){var c=gt(u.square(),l.square()),d=i.mul(l.div(c)),f=xn(u.shape,o);return f.length>0&&(d=d.sum(f)),d.reshape(u.shape)},$b:function(){var c=gt(u.square(),l.square()),d=pc(i.mul(u.div(c))),f=xn(l.shape,o);return f.length>0&&(d=d.sum(f)),d.reshape(l.shape)}}}))}}),Nr=te({div_:function(e,t){var n,r=z(e,"a","div"),a=z(t,"b","div");if(n=tn(r,a),r=n[0],a=n[1],r.dtype==="int32"&&a.dtype==="int32")return c_(r,a);var o=xt(r.shape,a.shape);return ie.runKernelFunc((function(i,s){var u=i.realDivide(r,a);return s([r,a]),u}),{a:r,b:a},(function(i,s){var u=s[0],l=s[1];return{a:function(){var c=i.div(l.toFloat()),d=xn(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=i.mul(u.toFloat()),d=xn(l.shape,o);d.length>0&&(c=c.sum(d).reshape(l.shape));var f=l.square();return c.div(f.toFloat()).neg()}}}),"Div")}}),hN=te({divNoNan_:function(e,t){var n,r=z(e,"a","div"),a=z(t,"b","div");r=(n=tn(r,a))[0],a=n[1];var o=Nr(r,a),i=St(o),s=a.equal(i);return ri(s,i,o)}}),vN=te({divStrict_:function(e,t){var n=z(e,"a","div"),r=z(t,"b","div");return Pt(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),c_=te({floorDiv_:function(e,t){var n,r=z(e,"a","floorDiv"),a=z(t,"b","floorDiv");n=tn(r,a),r=n[0],a=n[1];var o=xt(r.shape,a.shape);return ie.runKernelFunc((function(i,s){var u=i.floorDiv(r,a);return s([r,a]),u}),{a:r,b:a},(function(i,s){var u=s[0],l=s[1];return{a:function(){var c=i.div(l.toFloat()),d=xn(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=i.mul(u.toFloat()),d=xn(l.shape,o);d.length>0&&(c=c.sum(d).reshape(l.shape));var f=l.square();return c.div(f.toFloat()).neg()}}}),"FloorDiv")}}),tp=te({maximum_:function(e,t){var n,r=z(e,"a","maximum"),a=z(t,"b","maximum");return n=tn(r,a),r=n[0],a=n[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),xt(r.shape,a.shape),ie.runKernelFunc((function(o,i){var s=o.maximum(r,a);return i([r,a]),s}),{a:r,b:a},(function(o,i){var s=i[0],u=i[1];return{a:function(){return o.mul(s.greaterEqual(u).toFloat())},b:function(){return o.mul(s.less(u).toFloat())}}}),"Maximum")}}),pN=te({maximumStrict_:function(e,t){var n=z(e,"a","maximumStrict"),r=z(t,"b","maximumStrict");return Pt(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),d_=te({minimum_:function(e,t){var n,r=z(e,"a","minimum"),a=z(t,"b","minimum");return n=tn(r,a),r=n[0],a=n[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),xt(r.shape,a.shape),ie.runKernelFunc((function(o,i){var s=o.minimum(r,a);return i([r,a]),s}),{a:r,b:a},(function(o,i){var s=i[0],u=i[1];return{a:function(){return o.mul(s.lessEqual(u).toFloat())},b:function(){return o.mul(s.greater(u).toFloat())}}}),"Minimum")}}),mN=te({minimumStrict_:function(e,t){var n=z(e,"a","minimumStrict"),r=z(t,"b","minimumStrict");return Pt(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),gN=te({mod_:function(e,t){var n,r=z(e,"a","mod"),a=z(t,"b","mod");n=tn(r,a),r=n[0],a=n[1];var o=xt(r.shape,a.shape);return ie.runKernelFunc((function(i,s){var u=i.mod(r,a);return s([r,a]),u}),{$a:r,$b:a},(function(i,s){var u=s[0],l=s[1];return{$a:function(){var c=xn(u.shape,o);return c.length>0?i.sum(c).reshape(u.shape):i},$b:function(){var c=i.mul(u.div(l).floor().neg()),d=xn(l.shape,o);return d.length>0?c.sum(d).reshape(l.shape):c}}}))}}),yN=te({modStrict_:function(e,t){var n=z(e,"a","modStrict"),r=z(t,"b","modStrict");return Pt(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),jn=te({mul_:function(e,t){var n,r=z(e,"a","mul"),a=z(t,"b","mul");n=tn(r,a),r=n[0],a=n[1];var o=xt(r.shape,a.shape);return ie.runKernelFunc((function(i,s){var u=i.multiply(r,a);return s([r,a]),u}),{a:r,b:a},(function(i,s){var u=s[0],l=s[1];return{a:function(){var c=i.mul(l.toFloat()),d=xn(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=i.mul(u.toFloat()),d=xn(l.shape,o);return d.length>0?c.sum(d).reshape(l.shape):c}}}),"Mul")}}),bN=te({mulStrict_:function(e,t){var n=z(e,"a","mul"),r=z(t,"b","mul");return Pt(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),mc=te({pow_:function(e,t){var n,r=z(e,"base","pow"),a=z(t,"exp","pow");n=tn(r,a),r=n[0],a=n[1];var o=xt(r.shape,a.shape),i=[r,a];return ie.runKernelFunc((function(s,u){var l=s.pow(r,a);return u([r,a,l]),l}),{a:r,b:a},(function(s,u){var l=u[0],c=u[1],d=u[2];return{a:function(){var f=c.toFloat(),h=s.mul(f.mul(l.pow(f.sub(Be(1))))),v=xn(l.shape,o);return v.length>0&&(h=h.sum(v)),h.reshape(l.shape)},b:function(){var f=l.greater(0),h=l.log().where(f,St(l)),v=s.mul(d.mul(h)),m=xn(c.shape,o);return m.length>0&&(v=v.sum(m)),v.reshape(c.shape)}}}),"Pow",{},i,[!0])}}),xN=te({powStrict_:function(e,t){return Pt(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),wN=te({squaredDifferenceStrict_:function(e,t){var n=z(e,"a","squaredDifferenceStrict"),r=z(t,"b","squaredDifferenceStrict");return Pt(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),wn=te({sub_:function(e,t){var n,r=z(e,"a","sub"),a=z(t,"b","sub");n=tn(r,a),r=n[0],a=n[1];var o=xt(r.shape,a.shape);return ie.runKernelFunc((function(i){return i.subtract(r,a)}),{a:r,b:a},(function(i){return{a:function(){var s=i,u=xn(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=i,u=xn(a.shape,o);return u.length>0&&(s=s.sum(u)),s.neg().reshape(a.shape)}}}),"Sub")}}),_N=te({subStrict_:function(e,t){var n=z(e,"a","subStrict"),r=z(t,"b","subStrict");return Pt(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),f_=te({equal_:function(e,t){var n,r=z(e,"a","equal"),a=z(t,"b","equal");return n=tn(r,a),r=n[0],a=n[1],xt(r.shape,a.shape),ie.runKernelFunc((function(o){return o.equal(r,a)}),{$a:r,$b:a})}}),CN=te({equalStrict_:function(e,t){var n=z(e,"a","equalStrict"),r=z(t,"b","equalStrict");return Pt(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),SN=te({greater_:function(e,t){var n,r=z(e,"a","greater"),a=z(t,"b","greater");return n=tn(r,a),r=n[0],a=n[1],xt(r.shape,a.shape),ie.runKernelFunc((function(o){return o.greater(r,a)}),{a:r,b:a},null,"Greater")}}),h_=te({greaterEqual_:function(e,t){var n,r=z(e,"a","greaterEqual"),a=z(t,"b","greaterEqual");return n=tn(r,a),r=n[0],a=n[1],xt(r.shape,a.shape),ie.runKernelFunc((function(o,i){var s=o.greaterEqual(r,a);return i([r,a]),s}),{a:r,b:a},(function(o,i){var s=i[0],u=i[1];return{a:function(){return St(s)},b:function(){return St(u)}}}),"GreaterEqual")}}),kN=te({greaterEqualStrict_:function(e,t){var n=z(e,"a","greaterEqualStrict"),r=z(t,"b","greaterEqualStrict");return Pt(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),EN=te({greaterStrict_:function(e,t){var n=z(e,"a","greaterStrict"),r=z(t,"b","greaterStrict");return Pt(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),TN=te({less_:function(e,t){var n,r=z(e,"a","less"),a=z(t,"b","less");return n=tn(r,a),r=n[0],a=n[1],xt(r.shape,a.shape),ie.runKernelFunc((function(o){return o.less(r,a)}),{a:r,b:a},null,"Less")}}),RN=te({lessEqual_:function(e,t){var n,r=z(e,"a","lessEqual"),a=z(t,"b","lessEqual");return n=tn(r,a),r=n[0],a=n[1],xt(r.shape,a.shape),ie.runKernelFunc((function(o,i){var s=o.lessEqual(r,a);return i([r,a]),s}),{a:r,b:a},null,"LessEqual")}}),AN=te({lessEqualStrict_:function(e,t){var n=z(e,"a","lessEqualStrict"),r=z(t,"b","lessEqualStrict");return Pt(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),IN=te({lessStrict_:function(e,t){var n=z(e,"a","lessStrict"),r=z(t,"b","lessStrict");return Pt(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),MN=te({notEqual_:function(e,t){var n,r=z(e,"a","notEqual"),a=z(t,"b","notEqual");return n=tn(r,a),r=n[0],a=n[1],xt(r.shape,a.shape),ie.runKernelFunc((function(o){return o.notEqual(r,a)}),{a:r,b:a},null,"NotEqual")}}),DN=te({notEqualStrict_:function(e,t){var n=z(e,"a","notEqualStrict"),r=z(t,"b","notEqualStrict");return Pt(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function K0(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function X0(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var np=te({gather_:function(e,t,n){n===void 0&&(n=0);var r=z(e,"x","gather"),a=z(t,"indices","gather","int32");n=_n(n,r.shape)[0];var o=(function(i,s,u){for(var l=i.shape[u],c=[],d=1,f=1,h=0;h<u;h++)c.push(i.shape[h]),d*=i.shape[h];for(h=0;h<s.rank;h++)c.push(s.shape[h]);for(h=u+1;h<i.rank;h++)c.push(i.shape[h]),f*=i.shape[h];return{batchSize:d,sliceSize:f,dimSize:l,outputShape:c}})(r,a,n);return ie.runKernelFunc((function(i,s){var u=i.gather(r,a.flatten(),n);return s([a]),u}),{x:r,indices:a},(function(i,s){var u=s[0];return{x:function(){var l=r.shape,c=u.size,d=l.slice(0,n),f=d.length,h=l.slice(n,l.length).slice(1),v=h.length,m=K0(0,f),p=K0(f+1,f+1+v),y=X0([d,[c],h]),x=i.reshape(y),b=u.reshape([c]),g=X0([[f],m,p]),w=x.transpose(g),S=v_(w,b,r.shape[n]),E=$v(g);return S=S.transpose(E)},indices:function(){return u}}}),"Gather",{axis:n}).reshape(o.outputShape)}}),v_=te({unsortedSegmentSum_:function(e,t,n){var r=z(e,"x","unsortedSegmentSum"),a=z(t,"segmentIds","unsortedSegmentSum","int32");return U(ln(n),(function(){return"numSegments must be of dtype int"})),ie.runKernelFunc((function(o,i){var s=o.unsortedSegmentSum(r,a,n);return i([a]),s}),{$x:r},(function(o,i){var s=i[0];return{$x:function(){return(function(u,l){for(var c=tp(l,St(l)),d=np(u,c),f=h_(l,Be(0,"int32")),h=d.rank-f.rank,v=0;v<h;++v)f=_r(f,v+1);f=td(f,bs(d.shape,"bool"));var m=St(d);return ri(f,d,m)})(o,s)}}}))}}),PN=function(e,t,n){return Ue(this,void 0,void 0,(function(){var r,a,o,i,s,u,l,c,d,f,h,v,m;return je(this,(function(p){switch(p.label){case 0:for(r=z(e,"tensor","boolMask"),a=z(t,"mask","boolMask","bool"),o=n??0,i=a.rank,s=r.shape,U(i>0,(function(){return"mask cannot be scalar"})),Pt(s.slice(o,o+i),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=o;l<o+i;l++)u*=s[l];return c=s.slice(0,o).concat([u],s.slice(o+i)),d=r.reshape(c),f=a.reshape([-1]),[4,l_(f)];case 1:return h=p.sent(),v=h.squeeze([1]),m=np(d,v,o),e!==r&&r.dispose(),t!==a&&a.dispose(),v.dispose(),d.dispose(),f.dispose(),h.dispose(),[2,m]}}))}))};function p_(e,t,n,r,a,o,i){o===void 0&&(o="NHWC"),U(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,u=t,l=!1;t.rank===3&&(l=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),U(s.length===4,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),U(u.rank===4,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),U(n.rank===4,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var c=o==="NHWC"?s[3]:s[1],d=o==="NHWC"?u.shape[3]:u.shape[1];U(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."})),U(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."})),i!=null&&U(ln(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var f=Gv(o),h=di(s,n.shape,r,1,a,i,!1,f),v=ie.runKernelFunc((function(m,p){var y=m.conv2dDerInput(u,n,h);return p([n,u]),y}),{dy4D:u,filter:n},(function(m,p){var y=p[0],x=p[1];return{dy4D:function(){return Dr(m,y,r,a,o,1,i)},filter:function(){return rp(m,x,y.shape,r,a,o,i)}}}));return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function Cf(e){var t=(function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o})(e),n=t[0],r=t[1],a=t[2];return n===1&&r===1&&a===1}function m_(e,t,n,r,a){U(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var o=e,i=t,s=!1;t.rank===4&&(s=!0,i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),o=[1,e[0],e[1],e[2],e[3]]);var u=o[4],l=i.shape[4];U(o.length===5,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."})),U(i.rank===5,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank})),U(n.rank===5,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),U(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),U(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."}));var c=hc(o,n.shape,r,1,a),d=ie.runKernelFunc((function(f){return f.conv3dDerInput(i,n,c)}),{dy5D:i});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var FN=te({conv1d_:function(e,t,n,r,a,o,i){a===void 0&&(a="NWC"),o===void 0&&(o=1);var s=z(e,"x","conv1d"),u=z(t,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),U(l.rank===3,(function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."})),U(u.rank===3,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),i!=null&&U(ln(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."})),U(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),U(ir(n,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+o+"'"})),U(a==="NWC",(function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."}));var d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),f=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),h=Dr(f,d,[1,n],r,"NHWC",[1,o],i);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),Dr=te({conv2d_:function(e,t,n,r,a,o,i){a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]);var s=z(e,"x","conv2d"),u=z(t,"filter","conv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),U(l.rank===4,(function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."})),U(u.rank===4,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),i!=null&&U(ln(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var d=a==="NHWC"?l.shape[3]:l.shape[1];U(d===u.shape[2],(function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+u.shape[2]+"."})),U(ir(n,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}));var f=Gv(a),h=di(l.shape,u.shape,n,o,r,i,!1,f),v=[u,l],m=ie.runKernelFunc((function(p,y){var x=p.conv2d(l,u,h);return y([u,l]),x}),{x:l,filter:u},(function(p,y){var x=y,b=x[0],g=x[1];return U(ds(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"})),{x:function(){return g_(g.shape,p,b,n,r,a)},filter:function(){return rp(g,p,b.shape,n,r,a)}}}),"Conv2D",h,v);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),NN=te({conv3d_:function(e,t,n,r,a,o){a===void 0&&(a="NDHWC"),o===void 0&&(o=[1,1,1]);var i=z(e,"x","conv3d"),s=z(t,"filter","conv3d"),u=i,l=!1;i.rank===4&&(l=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),U(u.rank===5,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),U(s.rank===5,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),U(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),U((function(f,h){return Cf(f)||Cf(h)})(n,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),U(a==="NDHWC",(function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."}));var c=hc(u.shape,s.shape,n,o,r),d=ie.runKernelFunc((function(f,h){var v=f.conv3d(u,s,c);return h([u,s]),v}),{x:u,$filter:s},(function(f,h){U(Cf(o),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}));var v=h[0],m=h[1];return{x:function(){return m_(v.shape,f,m,n,r)},$filter:function(){return(function(p,y,x,b,g){var w=p;p.rank===4&&(w=p.as5D(1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]));var S=y;S.rank===4&&(S=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3])),U(w.rank===5,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+w.shape+"."})),U(S.rank===5,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+S.shape+"."})),U(x.length===5,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+x+"."})),U(w.shape[4]===x[3],(function(){return"Error in conv3dDerFilter: depth of input "+w.shape[4]+") must match input depth in filter ("+x[3]+"."})),U(S.shape[4]===x[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+S.shape[4]+") must match output depth for filter ("+x[4]+")."}));var E=hc(w.shape,x,b,1,g);return ie.runKernelFunc((function(R){return R.conv3dDerFilter(w,S,E)}),{x5D:w,dy5D:S})})(v,f,m.shape,n,r)}}}));return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),rp=te({conv2dDerFilter_:function(e,t,n,r,a,o,i){o===void 0&&(o="NHWC");var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=t;u.rank===3&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),U(s.rank===4,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),U(u.rank===4,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),U(n.length===4,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var l=o==="NHWC"?s.shape[3]:s.shape[1],c=o==="NHWC"?u.shape[3]:u.shape[1];U(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."})),U(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."})),i!=null&&U(ln(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var d=Gv(o),f=di(s.shape,n,r,1,a,i,!1,d);return ie.runKernelFunc((function(h){return h.conv2dDerFilter(s,u,f)}),{x4D:s,dy4D:u})}}),g_=te({conv2dDerInput_:p_}),nd=te({depthwiseConv2d_:function(e,t,n,r,a,o,i){o===void 0&&(o=[1,1]);var s=z(e,"x","depthwiseConv2d"),u=z(t,"filter","depthwiseConv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),U(l.rank===4,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."})),U(u.rank===4,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),U(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),o==null&&(o=[1,1]),U(ir(n,o),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),i!=null&&U(ln(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var d=di(l.shape,u.shape,n,o,r,i,!0),f=[l,u],h=ie.runKernelFunc((function(v,m){var p=v.depthwiseConv2D(l,u,d);return m([l,u]),p}),{x:l,filter:u},(function(v,m){U(ds(o),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"}));var p=m[0],y=m[1];return{x:function(){return y_(p.shape,v,y,d)},filter:function(){return b_(p,v,y.shape,d)}}}),"DepthwiseConv2dNative",d,f);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),y_=te({depthwiseConv2dDerInput_:function(e,t,n,r){var a=t,o=!1;t.rank===3&&(o=!0,a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=ie.runKernelFunc((function(s){return s.depthwiseConv2DDerInput(a,n,r)}),{dy4D:a});return o?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),b_=te({depthwiseConv2dDerFilter_:function(e,t,n,r){var a=e;e.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=t;return o.rank===3&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ie.runKernelFunc((function(i){return i.depthwiseConv2DDerFilter(a,o,r)}),{x4D:a,dy4D:o})}}),ap=te({separableConv2d_:function(e,t,n,r,a,o,i){o===void 0&&(o=[1,1]),i===void 0&&(i="NHWC");var s=z(e,"x","separableConv2d"),u=z(t,"depthwiseFilter","separableConv2d"),l=z(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(s.rank===3&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");U(c.rank===4,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."})),U(u.rank===4,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),U(l.rank===4,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),U(l.shape[0]===1,(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."})),U(l.shape[1]===1,(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."}));var f=u.shape[2],h=u.shape[3];U(l.shape[2]===f*h,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*h+", but got "+l.shape[2]+"."}));var v=nd(c,u,r,a,i,o),m=Dr(v,l,1,"valid",i);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),ON=te({conv2dTranspose_:function(e,t,n,r,a,o){return p_(n,z(e,"x","conv2dTranspose"),z(t,"filter","conv2dTranspose"),r,a,"NHWC",o)}}),BN=te({conv3dTranspose_:function(e,t,n,r,a){return m_(n,z(e,"x","conv3dTranspose"),z(t,"filter","conv3dTranspose"),r,a)}}),rd=te({matMul_:function(e,t,n,r){var a;n===void 0&&(n=!1),r===void 0&&(r=!1);var o=z(e,"a","matMul"),i=z(t,"b","matMul");a=tn(o,i),o=a[0],i=a[1];var s=n?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],l=n?o.shape[o.rank-1]:o.shape[o.rank-2],c=r?i.shape[i.rank-2]:i.shape[i.rank-1],d=o.shape.slice(0,-2),f=i.shape.slice(0,-2),h=Ke(d),v=Ke(f);U(o.rank>=2&&i.rank>=2&&o.rank===i.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+i.rank+"."})),U(En(d,f),(function(){return"Error in matMul: outer dimensions ("+d+") and ("+f+") of Tensors with shapes "+o.shape+" and "+i.shape+" must match."})),U(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+o.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var m=o.shape.slice(0,-2).concat([l,c]),p=n?o.as3D(h,s,l):o.as3D(h,l,s),y=r?i.as3D(v,c,u):i.as3D(v,u,c),x={transposeA:n,transposeB:r};return ie.runKernelFunc((function(b,g){var w=b.batchMatMul(p,y,n,r);return g([p,y]),w}),{a:p,b:y},(function(b,g){var w=g,S=w[0],E=w[1];return n||r?!n&&r?{a:function(){return b.matMul(E,!1,!1)},b:function(){return b.matMul(S,!0,!1)}}:n&&!r?{a:function(){return E.matMul(b,!1,!0)},b:function(){return S.matMul(b,!1,!1)}}:{a:function(){return E.matMul(b,!0,!0)},b:function(){return b.matMul(S,!0,!0)}}:{a:function(){return b.matMul(E,!1,!0)},b:function(){return S.matMul(b,!0,!1)}}}),"BatchMatMul",x).reshape(m)}}),qN=te({dot_:function(e,t){var n=z(e,"t1","dot"),r=z(t,"t2","dot");U(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var a=n.rank===1?n.size:n.shape[1],o=r.rank===1?r.size:r.shape[0];return U(a===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+o+"."})),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),LN=te({outerProduct_:function(e,t){var n=z(e,"v1","outerProduct"),r=z(t,"v2","outerProduct");return U(n.rank===1&&r.rank===1,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Du=te({reverse_:function(e,t){var n=z(e,"x","reverse");if(n.rank===0)return n.clone();var r=_n(t,n.shape);return ie.runKernelFunc((function(a){return a.reverse(n,r)}),{$x:n},(function(a){return{$x:function(){return a.reverse(r)}}})).reshapeAs(n)}}),VN=te({reverse1d_:function(e){var t=z(e,"x","reverse");return U(t.rank===1,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),Du(t,0)}}),zN=te({reverse2d_:function(e,t){var n=z(e,"x","reverse");return U(n.rank===2,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),Du(n,t)}}),$N=te({reverse3d_:function(e,t){var n=z(e,"x","reverse");return U(n.rank===3,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),Du(n,t)}}),HN=te({reverse4d_:function(e,t){var n=z(e,"x","reverse");return U(n.rank===4,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),Du(n,t)}});function x_(e,t,n,r,a,o){var i=z(e,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),U(s.rank===4,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),U(ir(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),o!=null&&U(ln(a),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var l=mu(s.shape,t,n,r,a,o);if(l.filterWidth===1&&l.filterHeight===1&&En(l.inShape,l.outShape))return i.clone();var c=[s],d=ie.runKernelFunc((function(f,h){var v=f.maxPool(s,l);return h([s,v]),v}),{x:s},(function(f,h){var v=h[0],m=h[1];return{x:function(){return(function(p,y,x,b,g,w,S,E){var R=z(p,"dy","maxPoolBackprop"),A=z(y,"input","maxPoolBackprop"),k=z(x,"output","maxPoolBackprop");U(A.rank===R.rank,(function(){return"Rank of input ("+A.rank+") does not match rank of dy ("+R.rank+")"})),U(ir(g,w),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+w+"'"})),U(R.rank===4,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+R.rank+"."})),U(A.rank===4,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+A.rank+"."}));var M=mu(A.shape,b,g,w,S,E);return ie.runKernelFunc((function(T){return T.maxPoolBackprop(R,A,k,M)}),{$dy:R,$input:A})})(f,v,m,t,n,r,a)}}}),"MaxPool",l,c);return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function w_(e,t,n,r,a,o){var i=z(e,"x","avgPool","float32");U(ir(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),U(s.rank===4,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),o!=null&&U(ln(a),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var l=mu(s.shape,t,n,r,a,o);if(l.filterWidth===1&&l.filterHeight===1&&En(l.inShape,l.outShape))return i.clone();var c=ie.runKernelFunc((function(d){return d.avgPool(s,l)}),{x:s},(function(d){return{x:function(){return(function(f,h,v,m,p,y){var x=z(f,"dy","avgPoolBackprop"),b=z(h,"input","avgPoolBackprop");U(b.rank===x.rank,(function(){return"Rank of input ("+b.rank+") does not match rank of dy ("+x.rank+")"})),U(ir(m,p),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+p+"'"}));var g=b,w=x,S=!1;b.rank===3&&(S=!0,g=b.as4D(1,b.shape[0],b.shape[1],b.shape[2]),w=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),U(w.rank===4,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+w.rank+"."})),U(g.rank===4,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+g.rank+"."}));var E=mu(g.shape,v,m,p,y),R=ie.runKernelFunc((function(A){return A.avgPoolBackprop(w,g,E)}),{dy4D:w,input4D:g});return S?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R})(d,s,t,n,r,a)}}}),"AvgPool",l);return c=c.cast(i.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Sn=te({maxPool_:function(e,t,n,r,a){return x_(e,t,n,1,r,a)}}),Pu=te({avgPool_:function(e,t,n,r,a){return w_(e,t,n,1,r,a)}}),WN=te({pool_:function(e,t,n,r,a,o){a==null&&(a=[1,1]),o==null&&(o=1),r===0&&(r="valid");var i=z(e,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),U(ir(o,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"}));var l,c=mu(s.shape,t,o,a,r),d=[c.dilationHeight,c.dilationWidth];l=r==="same"?(function(g,w){var S=g.map((function(A,k){return A+(A-1)*(w[k]-1)})).map((function(A){return A-1})),E=S.map((function(A){return Math.floor(A/2)})),R=S.map((function(A,k){return A-E[k]}));return S.map((function(A,k){return[E[k],R[k]]}))})([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var f=d[0]===1&&d[1]===1,h=(function(g,w,S){var E=S.map((function(I){return I[0]})),R=S.map((function(I){return I[1]})),A=g.concat(E,R),k=w.map((function(I,F){return(I-A[F]%I)%I})),M=R.map((function(I,F){return I+k[F]})),T=w.map((function(I,F){return[E[F],M[F]]})),D=w.map((function(I,F){return[0,k[F]]}));return[T,D]})([c.inHeight,c.inWidth],d,l),v=h[0],m=h[1],p=f?r:"valid",y=f?s:Tw(s,d,v),x=(n==="avg"?function(){return w_(y,t,o,1,p)}:function(){return x_(y,t,o,1,p)})(),b=f?x:Sw(x,d,m);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),UN=te({maxPool3d_:function(e,t,n,r,a,o,i){o===void 0&&(o="NDHWC");var s=z(e,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),i==null&&(i=[1,1,1]),U(u.rank===5,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),U(o==="NDHWC",(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),U(ir(n,i),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),a!=null&&U(ln(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var c=fc(u.shape,t,n,i,r,a,o),d=ie.runKernelFunc((function(f,h){var v=f.maxPool3d(u,c);return h([u,v]),v}),{x:u},(function(f,h){var v=h[0],m=h[1];return{x:function(){return(function(p,y,x,b,g,w,S,E){var R=z(p,"dy","maxPool3dBackprop"),A=z(y,"input","maxPool3dBackprop"),k=z(x,"output","maxPool3dBackprop"),M=R,T=A,D=k,I=!1;A.rank===4&&(I=!0,M=R.as5D(1,R.shape[0],R.shape[1],R.shape[2],R.shape[3]),T=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3]),D=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3])),U(M.rank===5,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+M.rank+"."})),U(T.rank===5,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+T.rank+"."})),U(D.rank===5,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+D.rank+"."})),w==null&&(w=[1,1,1]),U(ir(g,w),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+w+"'"})),E!=null&&U(ln(S),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+S+"."}));var F=fc(T.shape,b,g,w,S,E),V=ie.runKernelFunc((function(L){return L.maxPool3dBackprop(M,T,D,F)}),{dy5D:M,input5D:T});return I?V.as4D(V.shape[1],V.shape[2],V.shape[3],V.shape[4]):V})(f,v,m,t,n,i,r,a)}}}));return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),jN=te({avgPool3d_:function(e,t,n,r,a,o,i){o===void 0&&(o="NDHWC");var s=z(e,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),i==null&&(i=[1,1,1]),U(u.rank===5,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),U(o==="NDHWC",(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),U(ir(n,i),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),a!=null&&U(ln(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var c=fc(u.shape,t,n,i,r,a,o),d=ie.runKernelFunc((function(f){return f.avgPool3d(u,c)}),{x:u},(function(f){return{x:function(){return(function(h,v,m,p,y,x,b){var g=z(h,"dy","avgPool3dBackprop"),w=z(v,"input","avgPool3dBackprop"),S=g,E=w,R=!1;w.rank===4&&(R=!0,S=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]),E=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3])),U(S.rank===5,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+S.rank+"."})),U(E.rank===5,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."})),y==null&&(y=[1,1,1]),U(ir(p,y),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+p+" and dilations '"+y+"'"})),b!=null&&U(ln(x),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+b+" but got pad "+x+"."}));var A=fc(E.shape,m,p,y,x,b),k=ie.runKernelFunc((function(M){return M.avgPool3dBackprop(S,E,A)}),{dy5D:S,input5D:E});return R?k.as4D(k.shape[1],k.shape[2],k.shape[3],k.shape[4]):k})(f,u,t,n,i,r,a)}}}));return d=d.cast(u.dtype),l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),la=te({slice_:function(e,t,n){var r,a,o=z(e,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof t=="number"?[t].concat(new Array(o.rank-1).fill(0)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(0)):t.slice()).forEach((function(u){U(u!==-1,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=n==null?new Array(o.rank).fill(-1):typeof n=="number"?[n].concat(new Array(o.rank-1).fill(-1)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(-1)):n).map((function(u,l){return u>=0?u:(U(u===-1,(function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."})),o.shape[l]-r[l])})),xD(o,r,a);var i=o.shape,s={begin:r,size:a};return ie.runKernelFunc((function(u){return u.slice(o,r,a)}),{x:o},(function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],i[c]-r[c]-a[c]]);return{x:function(){return u.pad(l)}}}),"Slice",s)}}),GN=te({slice1d_:function(e,t,n){var r=z(e,"x","slice1d");return U(r.rank===1,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),la(r,[t],[n])}}),KN=te({slice2d_:function(e,t,n){var r=z(e,"x","slice2d");return U(r.rank===2,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),la(r,t,n)}}),__=te({slice3d_:function(e,t,n){var r=z(e,"x","slice3d");return U(r.rank===3,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),la(r,t,n)}}),XN=te({slice4d_:function(e,t,n){var r=z(e,"x","slice4d");return U(r.rank===4,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),la(r,t,n)}});function C_(e,t,n,r,a){return t.rank<n.rank&&(t=t.reshape(or(t.shape,r))),e.rank<n.rank&&(e=e.reshape(or(e.shape,r))),{x:function(){var o=e.mul(n.equal(t).cast(e.dtype));return a==null?o:o.transpose(a)}}}var QN=te({all_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=z(e,"x","all","bool"),a=_n(t,r.shape),o=a,i=ha(o,r.rank);i!=null&&(r=r.transpose(i),o=va(o.length,r.rank));var s=ie.runKernelFunc((function(l){return l.all(r,o)}),{$x:r});if(n){var u=or(s.shape,a);return s.reshape(u)}return s}}),YN=te({any_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=z(e,"x","any","bool"),a=_n(t,r.shape),o=a,i=ha(o,r.rank);i!=null&&(r=r.transpose(i),o=va(o.length,r.rank));var s=ie.runKernelFunc((function(l){return l.any(r,o)}),{$x:r});if(n){var u=or(s.shape,a);return s.reshape(u)}return s}}),JN=te({argMax_:function(e,t){t===void 0&&(t=0);var n=z(e,"x","argMax");t==null&&(t=0);var r=_n(t,n.shape),a=ha(r,n.rank);a!=null&&(n=n.transpose(a),r=va(r.length,n.rank));var o={axis:r[0]},i=[n];return ie.runKernelFunc((function(s,u){var l=s.argMax(n,r[0]);return u([n]),l}),{x:n},(function(s,u){var l=u[0];return{x:function(){return St(l)}}}),"ArgMax",o,i)}}),ZN=te({argMin_:function(e,t){t===void 0&&(t=0);var n=z(e,"x","argMin");t==null&&(t=0);var r=_n(t,n.shape),a=ha(r,n.rank);return a!=null&&(n=n.transpose(a),r=va(r.length,n.rank)),ie.runKernelFunc((function(o,i){var s=o.argMin(n,r[0]);return i([n]),s}),{$x:n},(function(o,i){var s=i[0];return{$x:function(){return St(s)}}}))}}),e3=te({logSumExp_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=z(e,"x","logSumExp"),a=_n(t,r.shape),o=r.max(a,!0),i=r.sub(o).exp().sum(a).log(),s=o.reshape(i.shape).add(i);if(n){var u=or(s.shape,a);return s.reshape(u)}return s}}),ad=te({max_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=z(e,"x","max"),a=r,o=_n(t,r.shape),i=o,s=ha(i,r.rank);s!=null&&(r=r.transpose(s),i=va(i.length,r.rank));var u=[r],l=ie.runKernelFunc((function(d,f){var h=d.max(r,i);return f([a,h]),h}),{x:r},(function(d,f){return C_(d,f[1],f[0],o,s)}),"Max",{axes:i},u,[!0]);if(n){var c=or(l.shape,o);l=l.reshape(c)}return l}}),t3=te({mean_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=z(e,"x","mean"),a=_n(t,r.shape),o=Ke(qn(r.shape,a)[1]);return Zc((function(i){var s=Be(o);return{value:(s.dtype===i.dtype?i:i.cast(s.dtype)).div(s).sum(t,n),gradFunc:function(u){var l=i.shape.slice();return a.forEach((function(c){l[c]=1})),u.reshape(l).mul(bs(i.shape,"float32")).div(o)}}}))(r)}}),n3=te({min_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=z(e,"x","min"),a=r,o=_n(t,r.shape),i=o,s=ha(i,r.rank);s!=null&&(r=r.transpose(s),i=va(i.length,r.rank));var u=[r],l=ie.runKernelFunc((function(d,f){var h=d.min(r,i);return f([a,h]),h}),{x:r},(function(d,f){return C_(d,f[1],f[0],o,s)}),"Min",{axes:i},u,[!0]);if(n){var c=or(l.shape,o);l=l.reshape(c)}return l}}),r3=te({moments_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=_n(t,(e=z(e,"x","moments")).shape),a=e.mean(r,n),o=a.shape;n||(o=or(a.shape,r));var i=e.toFloat().sub(a.reshape(o)).square();return{mean:a,variance:i.mean(r,n)}}}),S_=te({sum_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=z(e,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=_n(t,r.shape);return Zc((function(o){var i=ha(a,o.rank),s=a,u=o;i!=null&&(u=o.transpose(i),s=va(s.length,o.rank));var l=function(h){var v=o.shape.slice();return a.forEach((function(m){v[m]=1})),h.reshape(v).mul(bs(o.shape,"float32"))},c={axes:s},d=ie.runKernelFunc((function(h){return h.sum(u,s)}),{x:u},(function(h){return{x:function(){return l(h)}}}),"Sum",c);if(n){var f=or(d.shape,a);d=d.reshape(f)}return{value:d,gradFunc:l}}))(r)}}),a3=te({prod_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=z(e,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=_n(t,r.shape),o=ha(a,r.rank),i=a,s=r;o!=null&&(s=r.transpose(o),i=va(i.length,r.rank));var u=ie.runKernelFunc((function(c){return c.prod(s,i)}),{permutedX:s});if(n){var l=or(u.shape,a);u=u.reshape(l)}return u}}),k_=te({elu_:function(e){var t=z(e,"x","elu");return ie.runKernelFunc((function(n,r){var a=n.elu(t);return r([a]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){return ie.runKernelFunc((function(o){return o.eluDer(n,a)}),{dy:n,y:a})}}}))}}),o3=te({leakyRelu_:function(e,t){t===void 0&&(t=.2);var n=z(e,"x","leakyRelu");return tp(Be(t).mul(n),n)}}),E_=te({prelu_:function(e,t){var n=z(e,"x","prelu"),r=z(t,"alpha","prelu");return ie.runKernelFunc((function(a,o){var i=a.prelu(n,r);return o([n,r]),i}),{x:n,alpha:r},(function(a,o){var i=o[0],s=o[1],u=i.greater(0);return{x:function(){return ri(u,a,a.mul(s))},alpha:function(){var l=ri(u,St(a),a.mul(i)),c=xn(s.shape,a.shape);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}}),"Prelu")}}),Zt=te({relu_:function(e){var t=z(e,"x","relu");return t.dtype==="bool"?t.toInt():ie.runKernelFunc((function(n,r){var a=n.relu(t);return r([t]),a}),{x:t},(function(n,r){var a=r[0];return{x:function(){return n.mulStrict(a.step().toFloat())}}}),"Relu")}}),T_=te({relu6_:function(e){var t=z(e,"x","relu6");return t.dtype==="bool"?t.toInt():ie.runKernelFunc((function(n,r){var a=n.relu6(t);return r([t]),a}),{x:t},(function(n,r){var a=r[0],o=a.lessEqual(6).mul(a.step());return{x:function(){return n.mulStrict(o.toFloat())}}}),"Relu6")}}),i3=te({selu_:function(e){var t=z(e,"x","selu");return ie.runKernelFunc((function(n,r){var a=n.selu(t);return r([t]),a}),{$x:t},(function(n,r){var a=r[0];return{$x:function(){var o=a.greater(Be(0)),i=Be(Jv),s=Be(Zv),u=n.mul(s),l=n.mul(i).mul(a.toFloat().exp());return ri(o,u,l)}}}))}}),mo=te({transpose_:function(e,t){var n=z(e,"x","transpose");if(t==null&&(t=n.shape.map((function(a,o){return o})).reverse()),U(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(a){U(a>=0&&a<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return ie.runKernelFunc((function(a){return a.transpose(n,t)}),{x:n},(function(a){var o=$v(t);return{x:function(){return a.transpose(o)}}}),"Transpose",r)}}),s3=te({localResponseNormalization_:function(e,t,n,r,a){t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),a===void 0&&(a=.5);var o=z(e,"x","localResponseNormalization");U(o.rank===4||o.rank===3,(function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."})),U(ln(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var i=o,s=!1;o.rank===3&&(s=!0,i=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=ie.runKernelFunc((function(l,c){var d=l.localResponseNormalization4D(i,t,n,r,a);return c([i,d]),d}),{x4D:i},(function(l,c){var d=c[0],f=c[1];return{x4D:function(){return ie.runKernelFunc((function(h){return h.LRNGrad(l,d,f,t,n,r,a)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),R_=te({norm_:function(e,t,n,r){t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var a=(function s(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return s(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(Be(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)})(e=z(e,"x","norm"),t,n),o=a.shape;if(r){var i=_n(n,e.shape);o=or(a.shape,i)}return a.reshape(o)}}),u3=te({basicLSTMCell_:function(e,t,n,r,a,o){var i=z(e,"forgetBias","basicLSTMCell"),s=z(t,"lstmKernel","basicLSTMCell"),u=z(n,"lstmBias","basicLSTMCell"),l=z(r,"data","basicLSTMCell"),c=z(a,"c","basicLSTMCell"),d=z(o,"h","basicLSTMCell"),f=l.concat(d,1).matMul(s).add(u),h=f.shape[0],v=f.shape[1]/4,m=[h,v],p=f.slice([0,0],m),y=f.slice([0,v],m),x=f.slice([0,2*v],m),b=f.slice([0,3*v],m),g=p.sigmoid().mulStrict(y.tanh()).addStrict(c.mulStrict(i.add(x).sigmoid())),w=g.tanh().mulStrict(b.sigmoid());return[g,w]}}),l3=te({multiRNNCell_:function(e,t,n,r){for(var a=z(t,"data","multiRNNCell"),o=ic(n,"c","multiRNNCell"),i=ic(r,"h","multiRNNCell"),s=a,u=[],l=0;l<e.length;l++){var c=e[l](s,o[l],i[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var d=[],f=[];for(l=0;l<u.length;l+=2)d.push(u[l]),f.push(u[l+1]);return[d,f]}}),c3=te({movingAverage_:function(e,t,n,r,a){a===void 0&&(a=!0);var o=z(e,"v","movingAverage"),i=z(t,"x","movingAverage"),s=z(n,"decay","movingAverage");sM(o,i),U(En(o.shape,i.shape),(function(){return"Shape mismatch in v and x"}));var u=Be(1),l=u.sub(s),c=i.sub(o).mul(l);if(a){U(r!=null,(function(){return"When using zeroDebias: true, step is required."}));var d=z(r,"step","movingAverage");c=c.div(u.sub(mc(s,d)))}return o.add(c)}}),d3=te({stridedSlice_:function(e,t,n,r,a,o,i,s,u){if(a===void 0&&(a=0),o===void 0&&(o=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(t.length)),i!==0)throw new Error("ellipsis mask is not yet supported");var l=z(e,"x","stridedSlice"),c=R0(s),d=l.shape.slice();c.forEach((function(p){t[p]=0,n[p]=1,d.splice(p,0,1)})),l=l.reshape(d);for(var f=0;f<l.rank;f++)t[f]=wD(a,t,r,l.shape,f),n[f]=_D(o,n,r,l.shape,f),r[f]=r[f]||1;var h=R0(u);h.forEach((function(p){n[p]=t[p]+1,r[p]=1}));var v=jv(t,n,r),m=v.filter((function(p,y){return h.indexOf(y)===-1}));return r.every((function(p){return p===1}))?la(l,t,v).reshape(m):ie.runKernelFunc((function(p){return p.stridedSlice(l,t,n,r)}),{$x:l}).reshape(m)}}),f3=te({topk_:function(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!0);var r=z(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+t);var o=ie.runKernelFunc((function(i){return i.topk(r,t,n)}),{$x:r});return{values:o[0],indices:o[1]}}}),h3=te({scatterND_:function(e,t,n){var r=z(e,"indices","scatterND","int32"),a=z(t,"updates","scatterND");return bD(a,r,n),ie.runKernelFunc((function(o){return o.scatterND(r,a,n)}),{indices:r,updates:a},null,"ScatterNd",{shape:n})}}),op=te({fft_:function(e){U(e.dtype==="complex64",(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return ie.runKernelFunc((function(a){return a.fft(r)}),{input:e}).reshape(e.shape)}}),gc=te({ifft_:function(e){U(e.dtype==="complex64",(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return ie.runKernelFunc((function(a){return a.ifft(r)}),{input:e}).reshape(e.shape)}}),ip=te({rfft_:function(e,t){U(e.dtype==="float32",(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(t!=null&&t<r){var o=e.shape.map((function(y){return 0})),i=e.shape.map((function(y){return y}));i[e.shape.length-1]=t,n=e.slice(o,i),r=t}else if(t!=null&&t>r){var s=e.shape.map((function(y){return y}));s[e.shape.length-1]=t-r,n=e.concat(Ut(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),l=Mn(n,u).as2D(a,r),c=op(l),d=Math.floor(r/2)+1,f=Cr(c),h=na(c),v=f.split([d,r-d],f.shape.length-1),m=h.split([d,r-d],h.shape.length-1),p=n.shape.slice();return p[n.shape.length-1]=d,Mn(v[0],m[0]).reshape(p)}}),A_=te({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),a=gc(r);return Cr(a)}var o=[n,2*(t-1)],i=Cr(e).as2D(n,t),s=na(e).as2D(n,t),u=i.slice([0,1],[n,t-2]).reverse(1),l=s.slice([0,1],[n,t-2]).reverse(1).mul(Be(-1)),c=i.concat(u,1),d=s.concat(l,1);return r=Mn(c,d).as2D(o[0],o[1]),a=gc(r),Cr(a)}}),v3=Object.freeze({fft:op,ifft:gc,rfft:ip,irfft:A_}),p3=te({sparseToDense_:function(e,t,n,r){r===void 0&&(r=0);var a=z(e,"sparseIndices","sparseToDense","int32"),o=z(t,"sparseValues","sparseToDense"),i=z(r,"defaultValue","sparseToDense",o.dtype);return(function(s,u,l,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var d=s.rank>0?s.shape[0]:1,f=s.rank>1?s.shape[1]:1;if(l.length!==f)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+f+".");var h=u.size;if(u.rank!==0&&(u.rank!==1||h!==d))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+d+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")})(a,o,n,i),ie.runKernelFunc((function(s){return s.sparseToDense(a,o,n,i)}),{$sparseIndices:a,$sparseValues:o,$defaultValue:i})}}),m3=te({gatherND_:function(e,t){var n=z(t,"indices","gatherND","int32"),r=z(e,"x","gatherND");return ie.runKernelFunc((function(a){return a.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),g3=te({diag_:function(e){var t=z(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return ie.runKernelFunc((function(r){return r.diag(t)}),{$x:t}).reshape(n)}}),y3=te({dropout_:function(e,t,n,r){var a=z(e,"x","dropout");if(U(a.dtype==="float32",(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."})),U(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),t===0)return e instanceof Yt?a.clone():a;var o=(function(u,l){if(l==null)return u.shape.slice();if(En(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],d=0;d<u.shape.length;d++)l[d]==null&&u.shape[d]!=null?c.push(u.shape[d]):c.push(l[d]);return c}return l})(a,n),i=1-t,s=Ew(o,0,1,"float32",r).add(i).floor().div(i);return a.mul(s)}});function I_(e,t,n){for(var r=1-e%2,a=new Float32Array(e),o=0;o<e;++o){var i=2*Math.PI*o/(e+r-1);a[o]=t-n*Math.cos(i)}return dn(a,"float32")}var sp=te({hannWindow_:function(e){return I_(e,.5,.5)}}),M_=te({hammingWindow_:function(e){return I_(e,.54,.46)}}),up=te({frame_:function(e,t,n,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var o=0,i=[];o+t<=e.size;)i.push(la(e,o,t)),o+=n;if(r)for(;o<e.size;){var s=o+t-e.size,u=yn([la(e,o,t-s),ua([s],a)]);i.push(u),o+=n}return i.length===0?ho([],[0,t]):yn(i).as2D(i.length,t)}}),D_=te({stft_:function(e,t,n,r,a){var o;a===void 0&&(a=sp),r==null&&(o=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var i=up(e,t,n),s=jn(i,a(t)),u=[],l=0;l<i.shape[0];l++)u.push(ip(s.slice([l,0],[1,t]),r));return yn(u)}}),b3=Object.freeze({hannWindow:sp,hammingWindow:M_,frame:up,stft:D_}),Wn,x3=function(e,t,n){return n===void 0&&(n=1),Ue(this,void 0,void 0,(function(){var r,a,o,i,s,u,l,c,d,f,h,v,m,p;return je(this,(function(y){switch(y.label){case 0:return r=z(e,"predictions","inTopK"),a=z(t,"targets","inTopK"),U(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),U(r.rank-1===a.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank})),Pt(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],U(n>0&&n<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+n})),[4,r.data()];case 1:return i=y.sent(),[4,a.data()];case 2:for(s=y.sent(),u=[i.length/o,o],c=u[1],d=hu("bool",l=u[0]),f=0;f<l;f++){for(h=f*c,v=i.subarray(h,h+c),m=[],p=0;p<v.length;p++)m.push({value:v[p],index:p});for(m.sort((function(x,b){return b.value-x.value})),d[f]=0,p=0;p<n;p++)if(m[p].index===s[f]){d[f]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),[2,Pn(d,a.shape,"bool")]}}))}))};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Wn||(Wn={}));var w3=te({absoluteDifference_:function(e,t,n,r){r===void 0&&(r=Wn.SUM_BY_NONZERO_WEIGHTS);var a=z(e,"labels","absoluteDifference"),o=z(t,"predictions","absoluteDifference"),i=null;n!=null&&(i=z(n,"weights","absoluteDifference")),Pt(a.shape,o.shape,"Error in absoluteDifference: ");var s=a.sub(o).abs();return $a(s,i,r)}}),$a=te({computeWeightedLoss_:function(e,t,n){n===void 0&&(n=Wn.SUM_BY_NONZERO_WEIGHTS);var r=z(e,"losses","computeWeightedLoss"),a=null;t!=null&&(a=z(t,"weights","computeWeightedLoss"));var o=a==null?r:r.mul(a);if(n===Wn.NONE)return o;if(n===Wn.SUM)return o.sum();if(n===Wn.MEAN){if(a==null)return o.mean();var i=r.size/a.size,s=o.sum().div(a.sum());return i>1?s.div(Be(i)):s}if(n===Wn.SUM_BY_NONZERO_WEIGHTS){if(a==null)return o.sum().div(Be(r.size));var u=a.mul(bs(r.shape)).notEqual(Be(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+n)}}),_3=te({cosineDistance_:function(e,t,n,r,a){a===void 0&&(a=Wn.SUM_BY_NONZERO_WEIGHTS);var o=z(e,"labels","cosineDistance"),i=z(t,"predictions","cosineDistance"),s=null;r!=null&&(s=z(r,"weights","cosineDistance")),Pt(o.shape,i.shape,"Error in cosineDistance: ");var u=Be(1).sub(o.mul(i).sum(n,!0));return $a(u,s,a)}}),C3=te({hingeLoss_:function(e,t,n,r){r===void 0&&(r=Wn.SUM_BY_NONZERO_WEIGHTS);var a=z(e,"labels","hingeLoss"),o=z(t,"predictions","hingeLoss"),i=null;n!=null&&(i=z(n,"weights","hingeLoss")),Pt(a.shape,o.shape,"Error in hingeLoss: ");var s=Be(1);a=Be(2).mul(a).sub(s);var u=s.sub(a.mul(o)).relu();return $a(u,i,r)}}),S3=te({huberLoss_:function(e,t,n,r,a){r===void 0&&(r=1),a===void 0&&(a=Wn.SUM_BY_NONZERO_WEIGHTS);var o=z(e,"labels","huberLoss"),i=z(t,"predictions","huberLoss"),s=null;n!=null&&(s=z(n,"weights","huberLoss")),Pt(o.shape,i.shape,"Error in huberLoss: ");var u=Be(r),l=i.sub(o).abs(),c=d_(l,u),d=l.sub(c),f=Be(.5).mul(c.square()).add(u.mul(d));return $a(f,s,a)}}),k3=te({logLoss_:function(e,t,n,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=Wn.SUM_BY_NONZERO_WEIGHTS);var o=z(e,"labels","logLoss"),i=z(t,"predictions","logLoss"),s=null;n!=null&&(s=z(n,"weights","logLoss")),Pt(o.shape,i.shape,"Error in logLoss: ");var u=Be(1),l=Be(r),c=o.mul(i.add(l).log()).neg().sub(u.sub(o).mul(u.sub(i).add(l).log()));return $a(c,s,a)}}),E3=te({meanSquaredError_:function(e,t,n,r){r===void 0&&(r=Wn.SUM_BY_NONZERO_WEIGHTS);var a=z(e,"labels","meanSquaredError"),o=z(t,"predictions","meanSquaredError"),i=null;n!=null&&(i=z(n,"weights","meanSquaredError")),Pt(a.shape,o.shape,"Error in meanSquaredError: ");var s=a.squaredDifference(o);return $a(s,i,r)}}),T3=te({sigmoidCrossEntropy_:function(e,t,n,r,a){r===void 0&&(r=0),a===void 0&&(a=Wn.SUM_BY_NONZERO_WEIGHTS);var o=z(e,"multiClassLabels","sigmoidCrossEntropy"),i=z(t,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=z(n,"weights","sigmoidCrossEntropy")),Pt(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Be(r),l=Be(1),c=Be(.5);o=o.mul(l.sub(u)).add(c.mul(u))}var d=(function(f,h){var v=z(f,"labels","sigmoidCrossEntropyWithLogits"),m=z(h,"logits","sigmoidCrossEntropyWithLogits");Pt(v.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var p=m.relu(),y=m.mul(v),x=m.abs().neg().exp().log1p();return p.sub(y).add(x)})(o,i);return $a(d,s,a)}}),R3=te({softmaxCrossEntropy_:function(e,t,n,r,a){r===void 0&&(r=0),a===void 0&&(a=Wn.SUM_BY_NONZERO_WEIGHTS);var o=z(e,"onehotLabels","softmaxCrossEntropy"),i=z(t,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=z(n,"weights","softmaxCrossEntropy")),Pt(o.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Be(r),l=Be(1),c=Be(o.shape[1]);o=o.mul(l.sub(u)).add(u.div(c))}var d=(function(f,h,v){if(v===void 0&&(v=-1),v===-1&&(v=h.rank-1),v!==h.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+h.rank+" and dim was "+v);return Zc((function(m,p,y){var x=p.logSumExp([v],!0),b=p.toFloat().sub(x);return y([m,b]),{value:b.mul(m).neg().sum([v]),gradFunc:function(g,w){var S=w[0],E=w[1],R=or(g.shape,[v]);return[g.reshape(R).mul(S.toFloat().sub(E.exp())),g.reshape(R).mul(E.exp().sub(S.toFloat()))]}}}))(f,h)})(o,i);return $a(d,s,a)}}),A3=Object.freeze({get Reduction(){return Wn},absoluteDifference:w3,computeWeightedLoss:$a,cosineDistance:_3,hingeLoss:C3,huberLoss:S3,logLoss:k3,meanSquaredError:E3,sigmoidCrossEntropy:T3,softmaxCrossEntropy:R3});function Q0(e,t){return t===void 0&&(t=!1),ie.tidy((function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],a=kw(n),o=e.clone(),i=ho([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,l=function(d){var f,h=o,v=s,m=a;f=ie.tidy((function(){var p=o.slice([d,d],[n-d,1]),y=p.norm(),x=o.slice([d,d],[1,1]),b=ho([[-1]]).where(x.greater(0),ho([[1]])),g=x.sub(b.mul(y)),w=p.div(g);s=w.shape[0]===1?i.clone():i.concat(w.slice([1,0],[w.shape[0]-1,w.shape[1]]),0);var S=b.matMul(g).div(y).neg(),E=o.slice([d,0],[n-d,r]),R=S.mul(s);if(d===0)o=E.sub(R.matMul(s.transpose().matMul(E)));else{var A=E.sub(R.matMul(s.transpose().matMul(E)));o=o.slice([0,0],[d,r]).concat(A,0)}var k=a.slice([0,d],[n,a.shape[1]-d]);if(d===0)a=k.sub(k.matMul(s).matMul(R.transpose()));else{var M=k.sub(k.matMul(s).matMul(R.transpose()));a=a.slice([0,0],[n,d]).concat(M,1)}return[s,o,a]})),s=f[0],o=f[1],a=f[2],rr([h,v,m])},c=0;c<u;++c)l(c);return!t&&n>r&&(a=a.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[a,o]}))}var I3=te({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=z(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,o=r.shape.slice(-2),i=o[0],s=o[1];if(!(t<=i))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+i+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=i),n<0&&(n=s);var u=sc(0,i,1,"int32").reshape([-1,1]),l=sc(0,s,1,"int32"),c=wn(u,l),d=td(c.lessEqual(Be(+t,"int32")),c.greaterEqual(Be(-n,"int32"))),f=Ut([i,s],r.dtype);return mr(bn(r.reshape([-1,i,s])).map((function(h){return ri(d,h,f)}))).reshape(a)}}),M3=te({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,U(e!=null&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(u){U(e[u].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[u].shape[0]+" vs. "+n+")"}))},a=1;a<e.length;++a)r(a)}else t=!0,e=Wv(e,e.shape[0],0).map((function(u){return Rw(u,[0])}));U(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var o=[],i=e,s=function(u){o.push(ie.tidy((function(){var l=i[u];if(u>0)for(var c=0;c<u;++c){var d=S_(o[c].mulStrict(l)).mul(o[c]);l=l.sub(d)}return l.div(R_(l,"euclidean"))})))};for(a=0;a<e.length;++a)s(a);return t?mr(o,0):o}}),D3=te({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return Q0(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(i,s){return i*s})),r=bn(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];return r.forEach((function(i){var s=Q0(i,t),u=s[0],l=s[1];a.push(u),o.push(l)})),[mr(a,0).reshape(e.shape),mr(o,0).reshape(e.shape)]}}),P3=Object.freeze({bandPart:I3,gramSchmidt:M3,qr:D3});function od(e,t,n,r,a,o){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),o==null&&(o=0);var i=e.shape[0];return n=Math.min(n,i),U(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),U(e.rank===2,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),U(e.shape[1]===4,(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),U(t.rank===1,(function(){return"scores must be a 1D tensor"})),U(t.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+t.shape[0]})),U(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var F3=te({resizeBilinear_:function(e,t,n){n===void 0&&(n=!1);var r=z(e,"images","resizeBilinear");U(r.rank===3||r.rank===4,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),U(t.length===2,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var a=r,o=!1;r.rank===3&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=ie.runKernelFunc((function(l,c){return c([a]),l.resizeBilinear(a,i,s,n)}),{x:a},(function(l,c){return{x:function(){return ie.runKernelFunc((function(d){return d.resizeBilinearBackprop(l,c[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:s});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),N3=te({resizeNearestNeighbor_:function(e,t,n){n===void 0&&(n=!1);var r=z(e,"images","resizeNearestNeighbor");U(r.rank===3||r.rank===4,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),U(t.length===2,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),U(r.dtype==="float32"||r.dtype==="int32",(function(){return"`images` must have `int32` or `float32` as dtype"}));var a=r,o=!1;r.rank===3&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=ie.runKernelFunc((function(l,c){return c([a]),l.resizeNearestNeighbor(a,i,s,n)}),{batchImages:a},(function(l,c){return{batchImages:function(){return ie.runKernelFunc((function(d){return d.resizeNearestNeighborBackprop(l,c[0],n)}),{})}}}));return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),O3=te({nonMaxSuppression_:function(e,t,n,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var o=z(e,"boxes","nonMaxSuppression"),i=z(t,"scores","nonMaxSuppression"),s=od(o,i,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return ie.runKernelFunc((function(l){return l.nonMaxSuppression(o,i,n,r,a)}),{boxes:o,scores:i},null,"NonMaxSuppressionV3",u)}}),B3=function(e,t,n,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),Ue(this,void 0,void 0,(function(){var o,i,s,u,l,c,d;return je(this,(function(f){switch(f.label){case 0:return o=z(e,"boxes","nonMaxSuppressionAsync"),i=z(t,"scores","nonMaxSuppressionAsync"),s=od(o,i,n,r,a),n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,[4,Promise.all([o.data(),i.data()])];case 1:return u=f.sent(),l=u[0],c=u[1],d=Kv(l,c,n,r,a),o!==e&&o.dispose(),i!==t&&i.dispose(),[2,d]}}))}))},q3=te({nonMaxSuppressionWithScore_:function(e,t,n,r,a,o){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var i=z(e,"boxes","nonMaxSuppression"),s=z(t,"scores","nonMaxSuppression"),u=od(i,s,n,r,a,o),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},c=ie.runKernel("NonMaxSuppressionV5",{boxes:i,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),L3=function(e,t,n,r,a,o){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),Ue(this,void 0,void 0,(function(){var i,s,u,l,c,d,f;return je(this,(function(h){switch(h.label){case 0:return i=z(e,"boxes","nonMaxSuppressionAsync"),s=z(t,"scores","nonMaxSuppressionAsync"),u=od(i,s,n,r,a,o),n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,o=u.softNmsSigma,[4,Promise.all([i.data(),s.data()])];case 1:return l=h.sent(),c=l[0],d=l[1],f=Xv(c,d,n,r,a,o),i!==e&&i.dispose(),s!==t&&s.dispose(),[2,f]}}))}))},V3=te({cropAndResize_:function(e,t,n,r,a,o){var i=z(e,"image","cropAndResize"),s=z(t,"boxes","cropAndResize","float32"),u=z(n,"boxInd","cropAndResize","int32");a=a||"bilinear",o=o||0;var l=s.shape[0];return U(i.rank===4,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."})),U(s.rank===2&&s.shape[1]===4,(function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."})),U(u.rank===1&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."})),U(r.length===2,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),U(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),U(a==="bilinear"||a==="nearest",(function(){return"method must be bilinear or nearest, but was "+a})),ie.runKernelFunc((function(c,d){return c.cropAndResize(i,s,u,r,a,o)}),{images:i,boxes:s,boxInd:u},null,"CropAndResize",{method:a,extrapolationValue:o,cropSize:r})}}),lp=Object.freeze({resizeBilinear:F3,resizeNearestNeighbor:N3,nonMaxSuppression:O3,nonMaxSuppressionAsync:B3,nonMaxSuppressionWithScore:q3,nonMaxSuppressionWithScoreAsync:L3,cropAndResize:V3}),cp=function(e,t){return!(e>0)||t==="linear"},dp=function(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},fp=function(e,t){var n=t,r=xn(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},hp=function(e,t,n){if(t==="linear")return e;if(t==="relu")return Zt(e);if(t==="elu")return k_(e);if(t==="relu6")return T_(e);if(t==="prelu")return E_(e,n);throw new Error("Unknown fused activation "+t+".")},z3=te({fusedMatMul_:function(e){var t,n=e.a,r=e.b,a=e.transposeA,o=a!==void 0&&a,i=e.transposeB,s=i!==void 0&&i,u=e.bias,l=e.activation,c=l===void 0?"linear":l,d=e.preluActivationWeights;if(cp(ie.state.gradientDepth,c)===!1){var f=rd(n,r,o,s);return u!=null&&(f=gt(f,u)),hp(f,c,d)}var h=z(n,"a","fused matMul"),v=z(r,"b","fused matMul");t=tn(h,v),h=t[0],v=t[1];var m=o?h.shape[h.rank-2]:h.shape[h.rank-1],p=s?v.shape[v.rank-1]:v.shape[v.rank-2],y=o?h.shape[h.rank-1]:h.shape[h.rank-2],x=s?v.shape[v.rank-2]:v.shape[v.rank-1],b=h.shape.slice(0,-2),g=v.shape.slice(0,-2),w=Ke(b),S=Ke(g);U(h.rank>=2&&v.rank>=2&&h.rank===v.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+v.rank+"."})),U(En(b,g),(function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+g+") of Tensors with shapes "+h.shape+" and "+v.shape+" must match."})),U(m===p,(function(){return"Error in fused matMul: inner shapes ("+m+") and ("+p+") of Tensors with shapes "+h.shape+" and "+v.shape+" and transposeA="+o+" and transposeB="+s+" must match."}));var E,R,A=h.shape.slice(0,-2).concat([y,x]),k=o?h.as3D(w,m,y):h.as3D(w,y,m),M=s?v.as3D(S,x,p):v.as3D(S,p,x);u!=null&&xt(A,(E=tn(E=z(u,"bias","fused matMul"),h)[0]).shape),d!=null&&(R=z(d,"prelu weights","fused matMul"));var T={a:k,b:M};u!=null&&(T.bias=E),d!=null&&(T.preluActivationWeights=R);var D=[k,M];return ie.runKernelFunc((function(I,F){var V=I.fusedBatchMatMul({a:k,b:M,transposeA:o,transposeB:s,bias:E,activation:c,preluActivationWeights:R});return F([k,M,V]),V}),T,(function(I,F){var V=F[0],L=F[1],q=F[2],K=dp(I,q,c),oe={};return u!=null&&(oe={bias:function(){return fp(E,K)}}),Object.assign(o||s?!o&&s?{a:function(){return K.matMul(L,!1,!1)},b:function(){return K.matMul(V,!0,!1)}}:o&&!s?{a:function(){return L.matMul(K,!1,!0)},b:function(){return V.matMul(K,!1,!1)}}:{a:function(){return L.matMul(K,!0,!0)},b:function(){return K.matMul(V,!0,!0)}}:{a:function(){return K.matMul(L,!1,!0)},b:function(){return V.matMul(K,!0,!1)}},oe)}),"_FusedMatMul",{transposeA:o,transposeB:s,activation:c},D,[!0]).reshape(A)}}),$3=te({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,o=e.dataFormat,i=o===void 0?"NHWC":o,s=e.dilations,u=s===void 0?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,f=d===void 0?"linear":d,h=e.preluActivationWeights;if(f=f||"linear",cp(ie.state.gradientDepth,f)===!1){var v=Dr(t,n,r,a,i,u,l);return c!=null&&(v=gt(v,c)),hp(v,f,h)}var m=z(t,"x","conv2d"),p=z(n,"filter","conv2d"),y=m,x=!1;m.rank===3&&(x=!0,y=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),U(y.rank===4,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."})),U(p.rank===4,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+p.rank+"."})),l!=null&&U(ln(a),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+a+"."})),U(y.shape[3]===p.shape[2],(function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+p.shape[2]+"."})),U(ir(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),U(i==="NHWC",(function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."}));var b,g,w=di(y.shape,p.shape,r,u,a,l);c!=null&&(b=tn(b=z(c,"bias","fused conv2d"),m)[0],xt(w.outShape,b.shape)),h!=null&&(g=z(h,"prelu weights","fused conv2d"));var S={x:y,filter:p};c!=null&&(S.bias=b),h!=null&&(S.preluActivationWeights=g);var E=[p,y],R=ie.runKernelFunc((function(A,k){var M=A.fusedConv2d({input:y,filter:p,convInfo:w,bias:b,activation:f,preluActivationWeights:g});return k([p,y,M]),M}),S,(function(A,k){var M=k,T=M[0],D=M[1],I=M[2],F=dp(A,I,f);U(ds(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"}));var V={};return c!=null&&(V={bias:function(){return fp(b,F)}}),Object.assign({x:function(){return g_(D.shape,F,T,r,a)},filter:function(){return rp(D,F,T.shape,r,a)}},V)}),"FusedConv2D",{convInfo:w,activation:f},E,[!0]);return x?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}}),H3=te({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,o=e.dataFormat,i=o===void 0?"NHWC":o,s=e.dilations,u=s===void 0?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,f=d===void 0?"linear":d,h=e.preluActivationWeights;if(cp(ie.state.gradientDepth,f)===!1){var v=nd(t,n,r,a,i,u,l);return c!=null&&(v=gt(v,c)),hp(v,f,h)}var m=z(t,"x","depthwiseConv2d"),p=z(n,"filter","depthwiseConv2d"),y=m,x=!1;m.rank===3&&(x=!0,y=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),U(y.rank===4,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+y.rank+"."})),U(p.rank===4,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+p.rank+"."})),U(y.shape[3]===p.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+y.shape[3]+") must match the inChannels dimension in filter "+p.shape[2]+"."})),u==null&&(u=[1,1]),U(ir(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),l!=null&&U(ln(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+a+"."}));var b,g,w=di(y.shape,p.shape,r,u,a,l,!0);c!=null&&(b=tn(b=z(c,"bias","fused conv2d"),m)[0],xt(w.outShape,b.shape)),h!=null&&(g=z(h,"prelu weights","fused depthwiseConv2d"));var S={x:y,filter:p};c!=null&&(S.bias=b),h!=null&&(S.preluActivationWeights=g);var E=[p,y],R=ie.runKernelFunc((function(A,k){var M=A.fusedDepthwiseConv2D({input:y,filter:p,convInfo:w,bias:b,activation:f,preluActivationWeights:g});return k([p,y,M]),M}),S,(function(A,k){U(ds(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"}));var M=k[0],T=k[1],D=k[2],I=dp(A,D,f),F={};return c!=null&&(F={bias:function(){return fp(b,I)}}),Object.assign({x:function(){return y_(T.shape,I,M,w)},filter:function(){return b_(T,I,M.shape,w)}},F)}),"FusedDepthwiseConv2D",{convInfo:w,activation:f},E,[!0]);return x?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}}),W3=Object.freeze({matMul:z3,conv2d:$3,depthwiseConv2d:H3}),U3=Object.freeze({image:lp,linalg:P3,losses:A3,spectral:v3,fused:W3,signal:b3,square:kF,squaredDifference:t_,conv1d:FN,conv2d:Dr,conv3d:NN,depthwiseConv2d:nd,separableConv2d:ap,conv2dTranspose:ON,conv3dTranspose:BN,op:te,batchNormalization2d:tN,batchNormalization3d:nN,batchNormalization4d:rN,batchNormalization:aN,batchNorm:s_,batchNorm2d:oN,batchNorm3d:iN,batchNorm4d:sN,booleanMaskAsync:PN,complex:Mn,real:Cr,imag:na,concat:yn,concat1d:WM,concat2d:UM,concat3d:jM,concat4d:GM,split:Wv,matMul:rd,dot:qN,outerProduct:LN,reverse:Du,reverse1d:VN,reverse2d:zN,reverse3d:$N,reverse4d:HN,maxPool:Sn,avgPool:Pu,pool:WN,maxPool3d:UN,avgPool3d:jN,slice:la,slice1d:GN,slice2d:KN,slice3d:__,slice4d:XN,abs:EF,acos:TF,acosh:RF,asin:AF,asinh:IF,atan:MF,atanh:DF,ceil:PF,clipByValue:ep,cos:FF,cosh:NF,erf:OF,exp:Mh,expm1:BF,floor:qF,log:LF,log1p:VF,logSigmoid:zF,neg:pc,reciprocal:$F,round:HF,rsqrt:n_,sigmoid:r_,sign:WF,isNaN:UF,isInf:jF,isFinite:GF,sin:KF,sinh:XF,softplus:QF,sqrt:YF,step:JF,tan:ZF,tanh:eN,all:QN,any:YN,argMax:JN,argMin:ZN,logSumExp:e3,max:ad,mean:t3,min:n3,moments:r3,sum:S_,prod:a3,equal:f_,equalStrict:CN,greater:SN,greaterEqual:h_,greaterEqualStrict:kN,greaterStrict:EN,less:TN,lessEqual:RN,lessEqualStrict:AN,lessStrict:IN,notEqual:MN,notEqualStrict:DN,add:gt,addN:cN,addStrict:dN,atan2:fN,div:Nr,divNoNan:hN,divStrict:vN,floorDiv:c_,maximum:tp,maximumStrict:pN,minimum:d_,minimumStrict:mN,mod:gN,modStrict:yN,mul:jn,mulStrict:bN,pow:mc,powStrict:xN,squaredDifferenceStrict:wN,sub:wn,subStrict:_N,elu:k_,leakyRelu:o3,prelu:E_,relu:Zt,relu6:T_,selu:i3,logicalAnd:td,logicalNot:uN,logicalOr:u_,logicalXor:lN,where:ri,whereAsync:l_,buffer:ct,print:nD,batchToSpaceND:Sw,broadcastTo:rD,cast:aD,clone:oD,cumsum:iD,depthToSpace:sD,expandDims:_r,eye:kw,multinomial:uD,oneHot:Th,pad:ci,pad1d:lD,pad2d:cD,pad3d:dD,pad4d:fD,rand:hD,randomNormal:vD,randomGamma:pD,randomUniform:Ew,reshape:qr,spaceToBatchND:Tw,squeeze:Rw,stack:mr,tile:Xi,truncatedNormal:mD,unstack:bn,setdiff1dAsync:gD,fill:ua,linspace:HM,ones:bs,range:sc,scalar:Be,tensor:Pn,tensor1d:dn,tensor2d:ho,tensor3d:Hv,tensor4d:tr,tensor5d:VM,tensor6d:zM,variable:$M,zeros:Ut,onesLike:Cw,zerosLike:St,transpose:mo,softmax:za,logSoftmax:SD,localResponseNormalization:s3,norm:R_,gather:np,unsortedSegmentSum:v_,basicLSTMCell:u3,multiRNNCell:l3,movingAverage:c3,stridedSlice:d3,topk:f3,scatterND:h3,fft:op,ifft:gc,rfft:ip,irfft:A_,sparseToDense:p3,gatherND:m3,diag:g3,dropout:y3,hannWindow:sp,hammingWindow:M_,frame:up,stft:D_,inTopKAsync:x3});function Ae(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(n){n!=null&&U(n.dtype!=="complex64",(function(){return t+" does not support complex64 tensors."}))}))}function Sf(e,t,n,r){if(n==="linear")return e.linear(t);if(n==="relu")return e.relu(t);if(n==="elu")return e.elu(t);if(n==="relu6")return e.relu6(t);if(n==="prelu")return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var j3=(function(e){function t(){var n=e.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new Nw(n,ie),n}return Gr(t,e),t.prototype.write=function(n,r,a){this.firstUse&&(this.firstUse=!1,Se().get("IS_NODE")&&oc(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:n,dtype:a}),o},t.prototype.move=function(n,r,a,o){this.data.set(n,{values:r,dtype:o})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(n){return Ue(this,void 0,void 0,(function(){return je(this,(function(r){return[2,this.readSync(n)]}))}))},t.prototype.readSync=function(n){var r=this.data.get(n),a=r.dtype,o=r.complexTensors;return a==="complex64"?Ih(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(n).values},t.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),a=r;if(n.dtype==="string")try{a=r.map((function(o){return nc(o)}))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ct(n.shape,n.dtype,a)},t.prototype.makeOutput=function(n,r,a){var o=this.write(n,r,a);return ie.makeTensorFromDataId(o,r,a,this)},t.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},t.prototype.time=function(n){return Ue(this,void 0,void 0,(function(){var r;return je(this,(function(a){return r=ea(),n(),[2,{kernelMs:ea()-r}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(n,r){var a=this.makeOutput(null,n.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:ie.keep(n.clone()),imag:ie.keep(r.clone())},a},t.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,a){if(Ae(n,"slice"),Pw(n.shape,r,a)){var o=Fw(r,n.strides),i=Ke(a);return Pn(this.readSync(n.dataId).subarray(o,o+i),a,n.dtype)}for(var s=ct(a,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l).map((function(d,f){return d+r[f]}));s.values[l]=u.get.apply(u,c)}return s.toTensor()},t.prototype.stridedSlice=function(n,r,a,o){Ae(n,"stridedSlice");var i=jv(r,a,o);if(i.some((function(h){return h===0})))return Pn([],i);for(var s=ct(i,n.dtype),u=this.bufferSync(n),l=0;l<s.size;l++){for(var c=s.indexToLoc(l),d=new Array(c.length),f=0;f<d.length;f++)d[f]=c[f]*o[f]+r[f];s.set.apply(s,[u.get.apply(u,d)].concat(c))}return s.toTensor()},t.prototype.diag=function(n){for(var r=this.readSync(n.dataId),a=ct([n.size,n.size],n.dtype),o=a.values,i=0;i<r.length;i++)o[i*n.size+i]=r[i];return a.toTensor()},t.prototype.unstack=function(n,r){for(var a=n.shape[r],o=new Array(n.rank-1),i=0,s=0;s<n.rank;s++)s!==r&&(o[i++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(a);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(o);return c},t.prototype.reverse=function(n,r){Ae(n,"reverse");for(var a=ct(n.shape,n.dtype),o=this.bufferSync(n),i=function(u){var l=a.indexToLoc(u),c=l.slice();r.forEach((function(d){return c[d]=n.shape[d]-1-c[d]})),a.set.apply(a,[o.get.apply(o,c)].concat(l))},s=0;s<a.size;s++)i(s);return a.toTensor()},t.prototype.concat=function(n,r){var a=this;if(n[0].dtype==="complex64"){var o=n.map((function(h){return Cr(h)})),i=n.map((function(h){return na(h)}));return Mn(this.concat(o,r),this.concat(i,r))}var s=n.map((function(h){var v=Ke(h.shape.slice(r));return h.as2D(-1,v)})),u=cs(s.map((function(h){return h.shape})),1),l=ct(u,n[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach((function(h){l.set(a.readSync(h.dataId),c),c+=h.size}))}else{var d=0;s.forEach((function(h){for(var v=a.readSync(h.dataId),m=0,p=0;p<h.shape[0];++p)for(var y=p*u[1]+d,x=0;x<h.shape[1];++x)l[y+x]=v[m++];d+=h.shape[1]}))}var f=cs(n.map((function(h){return h.shape})),r);return Pn(l,f,n[0].dtype)},t.prototype.neg=function(n){return Ae(n,"neg"),this.multiply(Be(-1),n)},t.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),(function(a,o,i,s){return{real:a+i,imag:o+s}})):this.broadcastedBinaryOp(n,r,Dn(n.dtype,r.dtype),(function(a,o){return a+o}))},t.prototype.addN=function(n){var r=this;Ae(n,"addN");for(var a=n.map((function(c){return r.readSync(c.dataId)})),o=ct(n[0].shape,n[0].dtype),i=o.values,s=0;s<n.length;s++)for(var u=a[s],l=0;l<i.length;l++)i[l]+=u[l];return o.toTensor()},t.prototype.softmax=function(n,r){var a=_n([r],n.shape),o=this.max(n,a),i=or(o.shape,a),s=this.subtract(n,o.reshape(i)),u=this.exp(s),l=this.sum(u,a).reshape(i);return this.realDivide(u,l)},t.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),(function(a,o,i,s){return{real:a-i,imag:o-s}})):this.broadcastedBinaryOp(n,r,Dn(n.dtype,r.dtype),(function(a,o){return a-o}))},t.prototype.pow=function(n,r){return Ae([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,o){return Math.pow(a,o)}))},t.prototype.batchMatMul=function(n,r,a,o){Ae([n,r],"matMul");for(var i=a?n.shape[1]:n.shape[2],s=a?n.shape[2]:n.shape[1],u=o?r.shape[1]:r.shape[2],l=n.shape[0],c=this.readSync(n.dataId),d=this.readSync(r.dataId),f=a?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],h=f[0],v=f[1],m=f[2],p=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],y=p[0],x=p[1],b=p[2],g=s*u,w=ct([l,s,u],n.dtype),S=w.values,E=this.blockSize,R=0;R<l;R++)for(var A=0;A<s;A+=E)for(var k=0;k<u;k+=E)for(var M=0;M<i;M+=E)for(var T=Math.min(A+E,s),D=Math.min(k+E,u),I=Math.min(M+E,i),F=A;F<T;F++)for(var V=k;V<D;V++){for(var L=0,q=M;q<I;q++)L+=c[R*h+F*v+q*m]*d[q*y+V*x+R*b];S[R*g+(F*u+V)]+=L}return w.toTensor()},t.prototype.fusedBatchMatMul=function(n){var r=n.a,a=n.b,o=n.transposeA,i=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=this.batchMatMul(r,a,o,i);return s&&(c=this.add(c,s)),u&&(c=Sf(this,c,u,l)),c},t.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),(function(a,o,i,s){return{real:a*i-o*s,imag:a*s+o*i}})):this.broadcastedBinaryOp(n,r,Dn(n.dtype,r.dtype),(function(a,o){return a*o}))},t.prototype.realDivide=function(n,r){return Ae([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",(function(a,o){return a/o}))},t.prototype.floorDiv=function(n,r){return Ae([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",(function(a,o){return Math.floor(a/o)}))},t.prototype.sum=function(n,r){Ae(n,"sum"),ur("sum",r,n.rank);for(var a=qn(n.shape,r),o=a[0],i=a[1],s=Ut(o,Dn(n.dtype,"int32")),u=Ke(i),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=0,v=0;v<u;++v)h+=c[f+v];l[d]=h}return s},t.prototype.prod=function(n,r){Ae(n,"sum");for(var a=qn(n.shape,r),o=a[0],i=a[1],s=Ut(o,Dn(n.dtype,"int32")),u=Ke(i),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=1,v=0;v<u;++v)h*=c[f+v];l[d]=h}return s},t.prototype.unsortedSegmentSum=function(n,r,a){Ae(n,"unsortedSegmentSum");for(var o=[],i=n.rank-r.rank,s=0;s<i;++s)r=r.expandDims(s+1);for(s=0;s<a;++s){var u=Be(s,"int32"),l=f_(u,r).asType("float32").mul(n).sum(0);o.push(l)}return mr(o)},t.prototype.argMin=function(n,r){Ae(n,"argMin");var a=[r];ur("argMin",a,n.rank);for(var o=qn(n.shape,a),i=o[0],s=o[1],u=Ut(i,"int32"),l=Ke(s),c=this.readSync(u.dataId),d=this.readSync(n.dataId),f=0;f<c.length;++f){for(var h=f*l,v=d[h],m=0,p=0;p<l;++p){var y=d[h+p];y<v&&(v=y,m=p)}c[f]=m}return u},t.prototype.argMax=function(n,r){Ae(n,"argMax");var a=[r];ur("argMax",a,n.rank);for(var o=qn(n.shape,a),i=o[0],s=o[1],u=Ut(i,"int32"),l=Ke(s),c=this.readSync(u.dataId),d=this.readSync(n.dataId),f=0;f<c.length;++f){for(var h=f*l,v=d[h],m=0,p=0;p<l;++p){var y=d[h+p];y>v&&(v=y,m=p)}c[f]=m}return u},t.prototype.cumsum=function(n,r,a,o){if(Ae(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var i=Dn(n.dtype,"int32"),s=Ut(n.shape,i),u=this.readSync(s.dataId),l=this.readSync(n.dataId),c=n.shape[n.rank-1],d=o?function(p,y){return p+c-y-1}:function(p,y){return p+y},f=0;f<l.length;f+=c)for(var h=0;h<c;h++){var v=d(f,h);if(h===0)u[v]=a?0:l[v];else{var m=d(f,h-1);u[v]=a?l[m]+u[m]:l[v]+u[m]}}return s},t.prototype.equal=function(n,r){return Ae([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",(function(a,o){return a===o?1:0}))},t.prototype.notEqual=function(n,r){return Ae([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",(function(a,o){return a!==o?1:0}))},t.prototype.less=function(n,r){return Ae([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",(function(a,o){return a<o?1:0}))},t.prototype.lessEqual=function(n,r){return Ae([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",(function(a,o){return a<=o?1:0}))},t.prototype.greater=function(n,r){return Ae([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",(function(a,o){return a>o?1:0}))},t.prototype.greaterEqual=function(n,r){return Ae([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",(function(a,o){return a>=o?1:0}))},t.prototype.logicalNot=function(n){Ae(n,"logicalNot");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)a[o]=r[o]?0:1;return this.makeOutput(a,n.shape,"bool")},t.prototype.logicalAnd=function(n,r){return Ae([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",(function(a,o){return a&&o}))},t.prototype.logicalOr=function(n,r){return Ae([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",(function(a,o){return a||o}))},t.prototype.select=function(n,r,a){Ae([n,r,a],"select");for(var o=this.readSync(n.dataId),i=this.readSync(r.dataId),s=this.readSync(a.dataId),u=Ut(r.shape,Dn(r.dtype,a.dtype)),l=this.readSync(u.dataId),c=0,d=n.rank===0||n.rank>1||r.rank===1?1:Ke(r.shape.slice(1)),f=0;f<o.length;f++)for(var h=0;h<d;h++)o[f]===1?l[c++]=i[f]:l[c++]=s[f];return u},t.prototype.where=function(n){Ae([n],"where");var r=this.readSync(n.dataId);return Qv(n.shape,r)},t.prototype.topk=function(n,r,a){return Ae(n,"topk"),Hw(this.readSync(n.dataId),n.shape,n.dtype,r)},t.prototype.min=function(n,r){Ae(n,"min"),ur("min",r,n.rank);for(var a=qn(n.shape,r),o=a[0],i=a[1],s=Ut(o,n.dtype),u=Ke(i),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=c[f],v=0;v<u;++v){var m=c[f+v];m<h&&(h=m)}l[d]=h}return s},t.prototype.minimum=function(n,r){return Ae([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,o){return Math.min(a,o)}))},t.prototype.mod=function(n,r){return Ae([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,o){var i=a%o;return a<0&&o<0||a>=0&&o>=0?i:(i+o)%o}))},t.prototype.max=function(n,r){Ae(n,"max"),ur("max",r,n.rank);for(var a=qn(n.shape,r),o=a[0],i=a[1],s=Ut(o,n.dtype),u=Ke(i),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=c[f],v=0;v<u;++v){var m=c[f+v];m>h&&(h=m)}l[d]=h}return s},t.prototype.maximum=function(n,r){return Ae([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,o){return Math.max(a,o)}))},t.prototype.all=function(n,r){Ae(n,"all"),ur("all",r,n.rank);for(var a=qn(n.shape,r),o=a[0],i=a[1],s=Ut(o,n.dtype),u=Ke(i),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=c[f],v=0;v<u;++v){var m=c[f+v];h=h&&m}l[d]=h}return s},t.prototype.any=function(n,r){Ae(n,"any"),ur("any",r,n.rank);for(var a=qn(n.shape,r),o=a[0],i=a[1],s=Ut(o,n.dtype),u=Ke(i),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=c[f],v=0;v<u;++v){var m=c[f+v];h=h||m}l[d]=h}return s},t.prototype.squaredDifference=function(n,r){return Ae([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,o){var i=a-o;return i*i}))},t.prototype.ceil=function(n){Ae(n,"ceil");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.ceil(r[o]);return this.makeOutput(a,n.shape,"float32")},t.prototype.floor=function(n){Ae(n,"floor");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.floor(r[o]);return this.makeOutput(a,n.shape,"float32")},t.prototype.sign=function(n){Ae(n,"x");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?a[o]=-1:r[o]>0?a[o]=1:a[o]=0;return this.makeOutput(a,n.shape,"float32")},t.prototype.isNaN=function(n){Ae(n,"x");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(a[o]=1);return this.makeOutput(a,n.shape,"bool")},t.prototype.isInf=function(n){Ae(n,"x");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(a[o]=1);return this.makeOutput(a,n.shape,"bool")},t.prototype.isFinite=function(n){Ae(n,"x");for(var r=this.readSync(n.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(a[o]=1);return this.makeOutput(a,n.shape,"bool")},t.prototype.round=function(n){Ae(n,"round");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var i=Math.floor(r[o]);r[o]-i<.5?a[o]=Math.floor(r[o]):r[o]-i>.5?a[o]=Math.ceil(r[o]):a[o]=i%2==0?i:i+1}return this.makeOutput(a,n.shape,"float32")},t.prototype.exp=function(n){Ae(n,"exp");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.exp(r[o]);return this.makeOutput(a,n.shape,"float32")},t.prototype.expm1=function(n){Ae(n,"expm1");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.expm1(r[o]);return this.makeOutput(a,n.shape,"float32")},t.prototype.log=function(n){Ae(n,"log");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var i=r[o];a[o]=Math.log(i)}return this.makeOutput(a,n.shape,"float32")},t.prototype.log1p=function(n){Ae(n,"log1p");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var i=r[o];a[o]=Math.log1p(i)}return this.makeOutput(a,n.shape,"float32")},t.prototype.sqrt=function(n){Ae(n,"sqrt");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var i=r[o];a[o]=Math.sqrt(i)}return this.makeOutput(a,n.shape,"float32")},t.prototype.rsqrt=function(n){Ae(n,"rsqrt");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var i=r[o];a[o]=1/Math.sqrt(i)}return this.makeOutput(a,n.shape,"float32")},t.prototype.reciprocal=function(n){Ae(n,"reciprocal");for(var r=this.readSync(n.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=1/r[o];return this.makeOutput(a,n.shape,"float32")},t.prototype.linear=function(n){return n},t.prototype.relu=function(n){Ae(n,"relu");for(var r=Ut(n.shape,n.dtype),a=this.readSync(r.dataId),o=this.readSync(n.dataId),i=0;i<o.length;++i)a[i]=Math.max(0,o[i]);return r},t.prototype.relu6=function(n){Ae(n,"relu");for(var r=Ut(n.shape,n.dtype),a=this.readSync(r.dataId),o=this.readSync(n.dataId),i=0;i<o.length;++i)a[i]=Math.min(Math.max(0,o[i]),6);return r},t.prototype.prelu=function(n,r){return Ae([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,o){return a<0?o*a:a}))},t.prototype.elu=function(n){Ae(n,"elu");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o){var i=a[o];r[o]=i>=0?i:Math.exp(i)-1}return this.makeOutput(r,n.shape,"float32")},t.prototype.eluDer=function(n,r){Ae([n,r],"eluDer");for(var a=new Float32Array(r.size),o=this.readSync(r.dataId),i=this.readSync(n.dataId),s=0;s<o.length;++s){var u=o[s];a[s]=u>=1?i[s]:i[s]*(u+1)}return this.makeOutput(a,r.shape,"float32")},t.prototype.selu=function(n){Ae(n,"selu");for(var r=Jv,a=Zv,o=new Float32Array(n.size),i=this.readSync(n.dataId),s=0;s<i.length;++s){var u=i[s];o[s]=u>=0?a*u:r*(Math.exp(u)-1)}return this.makeOutput(o,n.shape,"float32")},t.prototype.clip=function(n,r,a){Ae(n,"clip");for(var o=new Float32Array(n.size),i=this.readSync(n.dataId),s=0;s<i.length;++s){var u=i[s];o[s]=u>a?a:u<r?r:u}return this.makeOutput(o,n.shape,"float32")},t.prototype.abs=function(n){for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=Math.abs(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<n.size;++o){var i=a[2*o],s=a[2*o+1];r[o]=Math.hypot(i,s)}return this.makeOutput(r,n.shape,"float32")},t.prototype.int=function(n){Ae(n,"int");for(var r=new Int32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=a[o];return this.makeOutput(r,n.shape,"int32")},t.prototype.sigmoid=function(n){Ae(n,"sigmoid");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=1/(1+Math.exp(-a[o]));return this.makeOutput(r,n.shape,"float32")},t.prototype.softplus=function(n){Ae(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var s=o[i]>-r,u=o[i]<r,l=Math.exp(o[i]),c=void 0;c=u?l:s?o[i]:Math.log(1+l),a[i]=c}return this.makeOutput(a,n.shape,"float32")},t.prototype.sin=function(n){Ae(n,"sin");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=Math.sin(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cos=function(n){Ae(n,"cos");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=Math.cos(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tan=function(n){Ae(n,"tan");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=Math.tan(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asin=function(n){Ae(n,"asin");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=Math.asin(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acos=function(n){Ae(n,"acos");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=Math.acos(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan=function(n){Ae(n,"atan");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=Math.atan(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan2=function(n,r){return Ae([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,(function(a,o){return Math.atan2(a,o)}))},t.prototype.sinh=function(n){Ae(n,"sinh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=Math.sinh(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cosh=function(n){Ae(n,"cosh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=Math.cosh(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tanh=function(n){Ae(n,"tanh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=GI(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asinh=function(n){Ae(n,"asinh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=Math.asinh(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acosh=function(n){Ae(n,"acosh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=Math.acosh(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atanh=function(n){Ae(n,"atanh");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o)r[o]=Math.atanh(a[o]);return this.makeOutput(r,n.shape,"float32")},t.prototype.erf=function(n){Ae(n,"erf");for(var r=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o){var i=Math.sign(a[o]),s=Math.abs(a[o]),u=1/(1+.3275911*s);r[o]=i*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},t.prototype.step=function(n,r){r===void 0&&(r=0),Ae(n,"step");for(var a=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var s=o[i];isNaN(s)?a[i]=NaN:a[i]=s>0?1:r}return this.makeOutput(a,n.shape,"float32")},t.prototype.fusedConv2d=function(n){var r=n.input,a=n.filter,o=n.convInfo,i=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.conv2d(r,a,o);return i&&(l=this.add(l,i)),s&&(l=Sf(this,l,s,u)),l},t.prototype.conv2d=function(n,r,a){Ae([n,r],"conv2d");for(var o=a.filterHeight,i=a.filterWidth,s=a.dilationHeight,u=a.dilationWidth,l=a.padInfo.left,c=a.padInfo.top,d=a.dataFormat==="channelsLast",f=ct(a.outShape,n.dtype),h=n.strides[0],v=d?n.strides[1]:n.strides[2],m=d?n.strides[2]:1,p=d?1:n.strides[1],y=f.strides[0],x=d?f.strides[1]:f.strides[2],b=d?f.strides[2]:1,g=d?1:f.strides[1],w=this.readSync(n.dataId),S=this.readSync(r.dataId),E=f.values,R=0;R<a.batchSize;++R)for(var A=R*h,k=R*y,M=0;M<a.outHeight;++M)for(var T=k+M*x,D=M*a.strideHeight-c,I=0;I<o;I++){var F=D+I*s;if(!(F<0||F>=a.inHeight))for(var V=I*r.strides[0],L=A+F*v,q=0;q<a.outWidth;++q)for(var K=T+q*b,oe=q*a.strideWidth-l,W=0;W<i;W++){var N=oe+W*u;if(!(N<0||N>=a.inWidth))for(var Q=L+N*m,Y=V+W*r.strides[1],fe=0;fe<a.inChannels;++fe){for(var $=w[Q+fe*p],O=0;O<a.outChannels;++O)E[K+O*g]+=$*S[Y+O];Y+=a.outChannels}}}return f.toTensor()},t.prototype.conv3d=function(n,r,a){for(var o=a.filterDepth,i=a.filterHeight,s=a.filterWidth,u=a.dilationDepth,l=a.dilationHeight,c=a.dilationWidth,d=a.padInfo.front,f=a.padInfo.left,h=a.padInfo.top,v=ct(a.outShape,n.dtype),m=this.readSync(n.dataId),p=this.readSync(r.dataId),y=v.values,x=0;x<a.batchSize;++x)for(var b=x*n.strides[0],g=x*v.strides[0],w=0;w<a.outDepth;++w)for(var S=g+w*v.strides[1],E=w*a.strideDepth-d,R=0;R<o;R++){var A=E+R*u;if(!(A<0||A>=a.inDepth))for(var k=R*r.strides[0],M=b+A*n.strides[1],T=0;T<a.outHeight;++T)for(var D=S+T*v.strides[2],I=T*a.strideHeight-h,F=0;F<i;F++){var V=I+F*l;if(!(V<0||V>=a.inHeight))for(var L=k+F*r.strides[1],q=M+V*n.strides[2],K=0;K<a.outWidth;++K)for(var oe=D+K*a.outChannels,W=K*a.strideWidth-f,N=0;N<s;N++){var Q=W+N*c;if(!(Q<0||Q>=a.inWidth))for(var Y=L+N*r.strides[2],fe=q+Q*a.inChannels,$=Y,O=0;O<a.inChannels;++O){for(var ee=m[fe+O],H=0;H<a.outChannels;++H)y[oe+H]+=ee*p[$+H];$+=a.outChannels}}}}return v.toTensor()},t.prototype.conv2dDerInput=function(n,r,a){Ae([n,r],"conv2dDerInput");for(var o=ct(a.inShape,"float32"),i=o.values,s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],d=l[1],f=l[2],h=a.batchSize,v=a.filterHeight,m=a.filterWidth,p=a.inChannels,y=a.inHeight,x=a.inWidth,b=a.outChannels,g=a.outHeight,w=a.outWidth,S=a.strideHeight,E=a.strideWidth,R=a.dataFormat,A=v-1-a.padInfo.top,k=m-1-a.padInfo.left,M=R==="channelsLast",T=o.strides[0],D=M?o.strides[1]:o.strides[2],I=M?o.strides[2]:1,F=M?1:o.strides[1],V=n.strides[0],L=M?n.strides[1]:n.strides[2],q=M?n.strides[2]:1,K=M?1:n.strides[1],oe=0;oe<h;++oe)for(var W=0;W<p;++W)for(var N=0;N<y;++N)for(var Q=N-A,Y=Math.max(0,Math.ceil(Q/S)),fe=Math.min(g,(v+Q)/S),$=0;$<x;++$){for(var O=$-k,ee=Math.max(0,Math.ceil(O/E)),H=Math.min(w,(m+O)/E),ue=0,ye=Y;ye<fe;++ye)for(var P=ye*S-Q,B=ee;B<H;++B)for(var j=V*oe+L*ye+q*B,ne=c*(v-1-P)+d*(m-1-(B*E-O))+f*W,se=0;se<b;++se)ue+=s[j+K*se]*u[ne+se];i[T*oe+D*N+I*$+F*W]=ue}return o.toTensor()},t.prototype.conv3dDerInput=function(n,r,a){for(var o=ct(a.inShape,"float32"),i=o.values,s=o.strides,u=s[0],l=s[1],c=s[2],d=s[3],f=this.readSync(n.dataId),h=n.strides,v=h[0],m=h[1],p=h[2],y=h[3],x=this.readSync(r.dataId),b=r.strides,g=b[0],w=b[1],S=b[2],E=b[3],R=a.batchSize,A=a.filterDepth,k=a.filterHeight,M=a.filterWidth,T=a.inChannels,D=a.inDepth,I=a.inHeight,F=a.inWidth,V=a.outChannels,L=a.outDepth,q=a.outHeight,K=a.outWidth,oe=a.strideDepth,W=a.strideHeight,N=a.strideWidth,Q=A-1-a.padInfo.front,Y=k-1-a.padInfo.top,fe=M-1-a.padInfo.left,$=0;$<R;++$)for(var O=0;O<T;++O)for(var ee=0;ee<D;++ee)for(var H=ee-Q,ue=Math.max(0,Math.ceil(H/oe)),ye=Math.min(L,(A+H)/oe),P=0;P<I;++P)for(var B=P-Y,j=Math.max(0,Math.ceil(B/W)),ne=Math.min(q,(k+B)/W),se=0;se<F;++se){for(var J=se-fe,me=Math.max(0,Math.ceil(J/N)),ge=Math.min(K,(M+J)/N),xe=0,pe=ue;pe<ye;++pe)for(var le=pe*oe-H,X=j;X<ne;++X)for(var de=X*W-B,Re=me;Re<ge;++Re)for(var Fe=v*$+m*pe+p*X+y*Re,Me=g*(A-1-le)+w*(k-1-de)+S*(M-1-(Re*N-J))+E*O,De=0;De<V;++De)xe+=f[Fe+De]*x[Me+De];i[u*$+l*ee+c*P+d*se+O]=xe}return o.toTensor()},t.prototype.conv2dDerFilter=function(n,r,a){Ae([n,r],"conv2dDerFilter");for(var o=a.strideHeight,i=a.strideWidth,s=a.filterHeight,u=a.filterWidth,l=a.dataFormat==="channelsLast",c=ct(a.filterShape,"float32"),d=a.padInfo.left,f=a.padInfo.top,h=this.bufferSync(n),v=this.bufferSync(r),m=0;m<s;++m)for(var p=Math.max(0,Math.ceil((f-m)/o)),y=Math.min(a.outHeight,(a.inHeight+f-m)/o),x=0;x<u;++x)for(var b=Math.max(0,Math.ceil((d-x)/i)),g=Math.min(a.outWidth,(a.inWidth+d-x)/i),w=0;w<a.inChannels;++w)for(var S=0;S<a.outChannels;++S){for(var E=0,R=0;R<a.batchSize;++R)for(var A=p;A<y;++A)for(var k=m+A*o-f,M=b;M<g;++M){var T=x+M*i-d;E+=l?h.get(R,k,T,w)*v.get(R,A,M,S):h.get(R,w,k,T)*v.get(R,S,A,M)}c.set(E,m,x,w,S)}return c.toTensor()},t.prototype.conv3dDerFilter=function(n,r,a){for(var o=a.strideDepth,i=a.strideHeight,s=a.strideWidth,u=a.filterDepth,l=a.filterHeight,c=a.filterWidth,d=ct(a.filterShape,"float32"),f=d.values,h=d.strides,v=h[0],m=h[1],p=h[2],y=h[3],x=this.readSync(r.dataId),b=r.strides,g=b[0],w=b[1],S=b[2],E=b[3],R=this.readSync(n.dataId),A=n.strides,k=A[0],M=A[1],T=A[2],D=A[3],I=a.padInfo.front,F=a.padInfo.left,V=a.padInfo.top,L=0;L<u;++L)for(var q=Math.max(0,Math.ceil((I-L)/o)),K=Math.min(a.outDepth,(a.inDepth+I-L)/o),oe=L*v,W=0;W<l;++W)for(var N=Math.max(0,Math.ceil((V-W)/i)),Q=Math.min(a.outHeight,(a.inHeight+V-W)/i),Y=W*m+oe,fe=0;fe<c;++fe)for(var $=Math.max(0,Math.ceil((F-fe)/s)),O=Math.min(a.outWidth,(a.inWidth+F-fe)/s),ee=fe*p+Y,H=0;H<a.inChannels;++H)for(var ue=H*y+ee,ye=0;ye<a.outChannels;++ye){for(var P=0,B=0;B<a.batchSize;++B)for(var j=B*k,ne=B*g,se=q;se<K;++se)for(var J=(L+se*o-I)*M+j,me=se*w+ne,ge=N;ge<Q;++ge)for(var xe=(W+ge*i-V)*T+J,pe=ge*S+me,le=$;le<O;++le){var X=le*E+pe;P+=R[(fe+le*s-F)*D+xe+H]*x[X+ye]}f[ue+ye]=P}return d.toTensor()},t.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,a=n.filter,o=n.convInfo,i=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.depthwiseConv2D(r,a,o);return i&&(l=this.add(l,i)),s&&(l=Sf(this,l,s,u)),l},t.prototype.depthwiseConv2D=function(n,r,a){Ae([n,r],"depthwiseConv2D");for(var o=a.filterHeight,i=a.filterWidth,s=a.dilationHeight,u=a.dilationWidth,l=a.padInfo.left,c=a.padInfo.top,d=a.outChannels/a.inChannels,f=ct(a.outShape,n.dtype),h=this.readSync(n.dataId),v=this.readSync(r.dataId),m=f.values,p=0;p<a.batchSize;++p)for(var y=p*n.strides[0],x=p*f.strides[0],b=0;b<a.outHeight;++b)for(var g=x+b*f.strides[1],w=b*a.strideHeight-l,S=0;S<o;++S){var E=w+S*s;if(!(E<0||E>=a.inHeight))for(var R=S*r.strides[0],A=y+E*n.strides[1],k=0;k<a.outWidth;++k)for(var M=g+k*f.strides[2],T=k*a.strideWidth-c,D=0;D<i;++D){var I=T+D*u;if(!(I<0||I>=a.inWidth))for(var F=R+D*r.strides[1],V=A+I*a.inChannels,L=M,q=F,K=0;K<a.inChannels;++K){for(var oe=h[V+K],W=0;W<d;++W)m[L+W]+=oe*v[q+W];L+=d,q+=d}}}return f.toTensor()},t.prototype.depthwiseConv2DDerInput=function(n,r,a){Ae([n,r],"depthwiseConv2DDerInput");for(var o=ct(a.inShape,"float32"),i=o.values,s=o.strides,u=s[0],l=s[1],c=s[2],d=this.readSync(n.dataId),f=n.strides,h=f[0],v=f[1],m=f[2],p=this.readSync(r.dataId),y=r.strides,x=y[0],b=y[1],g=y[2],w=a.batchSize,S=a.filterHeight,E=a.filterWidth,R=a.inChannels,A=a.inHeight,k=a.inWidth,M=a.outChannels,T=a.outHeight,D=a.outWidth,I=a.strideHeight,F=a.strideWidth,V=S-1-a.padInfo.top,L=E-1-a.padInfo.left,q=M/R,K=0;K<w;++K)for(var oe=0;oe<R;++oe)for(var W=0;W<A;++W)for(var N=W-V,Q=Math.max(0,Math.ceil(N/I)),Y=Math.min(T,(S+N)/I),fe=0;fe<k;++fe){for(var $=fe-L,O=Math.max(0,Math.ceil($/F)),ee=Math.min(D,(E+$)/F),H=0,ue=Q;ue<Y;++ue)for(var ye=ue*I-N,P=O;P<ee;++P)for(var B=h*K+v*ue+m*P,j=x*(S-1-ye)+b*(E-1-(P*F-$))+g*oe,ne=0;ne<q;++ne)H+=d[B+(oe*q+ne)]*p[j+ne];i[u*K+l*W+c*fe+oe]=H}return o.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(n,r,a){Ae([n,r],"depthwiseConv2DDerFilter");for(var o=a.strideHeight,i=a.strideWidth,s=a.filterHeight,u=a.filterWidth,l=ct(a.filterShape,"float32"),c=a.padInfo.left,d=a.padInfo.top,f=a.outChannels/a.inChannels,h=this.bufferSync(n),v=this.bufferSync(r),m=0;m<s;++m)for(var p=Math.max(0,Math.ceil((d-m)/o)),y=Math.min(a.outHeight,(a.inHeight+d-m)/o),x=0;x<u;++x)for(var b=Math.max(0,Math.ceil((c-x)/i)),g=Math.min(a.outWidth,(a.inWidth+c-x)/i),w=0;w<a.outChannels;++w){for(var S=Math.trunc(w/f),E=w%f,R=0,A=0;A<a.batchSize;++A)for(var k=p;k<y;++k)for(var M=m+k*o-d,T=b;T<g;++T){var D=x+T*i-c;R+=h.get(A,M,D,S)*v.get(A,k,T,w)}l.set(R,m,x,S,E)}return l.toTensor()},t.prototype.tile=function(n,r){return Ae(n,"tile"),$w(this.bufferSync(n),r)},t.prototype.pad=function(n,r,a){Ae(n,"pad");var o=r.map((function(f,h){return f[0]+n.shape[h]+f[1]})),i=r.map((function(f){return f[0]})),s=this.bufferSync(n),u=ct(o,n.dtype);a!==0&&u.values.fill(a);for(var l=0;l<n.size;l++){var c=s.indexToLoc(l),d=c.map((function(f,h){return f+i[h]}));u.set.apply(u,[s.get.apply(s,c)].concat(d))}return u.toTensor()},t.prototype.transpose=function(n,r){Ae(n,"transpose");for(var a=new Array(n.rank),o=0;o<a.length;o++)a[o]=n.shape[r[o]];var i=this.readSync(n.dataId),s=ct(a,n.dtype),u=this.bufferSync(n);for(o=0;o<n.size;++o){for(var l=u.indexToLoc(o),c=new Array(l.length),d=0;d<c.length;d++)c[d]=l[r[d]];var f=s.locToIndex(c);s.values[f]=i[o]}return s.toTensor()},t.prototype.gather=function(n,r,a){Ae([n,r],"gather");var o=n.shape.slice(),i=this.readSync(r.dataId);o[a]=i.length;for(var s=ct(o,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l),d=c.slice();d[a]=i[c[a]];var f=u.locToIndex(d);s.values[l]=u.values[f]}return s.toTensor()},t.prototype.batchToSpaceND=function(n,r,a){Ae([n],"batchToSpaceND");var o=r.reduce((function(d,f){return d*f})),i=uc(n.shape,r,o),s=lc(i.length,r.length),u=cc(n.shape,r,o),l=Aw(a,r.length),c=Iw(u,a,r.length);return n.reshape(i).transpose(s).reshape(u).slice(l,c)},t.prototype.spaceToBatchND=function(n,r,a){Ae([n],"spaceToBatchND");var o=r.reduce((function(f,h){return f*h})),i=[[0,0]];i.push.apply(i,a);for(var s=1+r.length;s<n.shape.length;++s)i.push([0,0]);var u=n.pad(i),l=uc(u.shape,r,o,!1),c=lc(l.length,r.length,!1),d=cc(u.shape,r,o,!1);return u.reshape(l).transpose(c).reshape(d)},t.prototype.pool=function(n,r,a){Ae(n,"pool");for(var o=r.strideHeight,i=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,h=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(n.dataId),m=ct(r.outShape,n.dtype),p=m.values,y=r.outShape[1]*r.outShape[2]*r.outShape[3],x=r.outShape[2]*r.outShape[3],b=r.outShape[3],g=0;g<r.batchSize;++g)for(var w=g*y,S=g*n.strides[0],E=0;E<r.inChannels;++E)for(var R=0;R<r.outHeight;++R)for(var A=R*o-d,k=Math.max(0,A),M=Math.min(r.inHeight,l+A),T=w+R*x,D=0;D<r.outWidth;++D){for(var I=D*i-f,F=Math.max(0,I),V=Math.min(r.inWidth,c+I),L=h,q=0,K=0,oe=k;oe<M;oe+=s){for(var W=S+oe*n.strides[1],N=F;N<V;N+=u){var Q=v[W+N*n.strides[2]+E];a==="max"&&Q>L?L=Q:a==="avg"&&(q+=Q,K++)}if(isNaN(L))break}p[T+D*b+E]=a==="avg"?q/K:L}return m.toTensor()},t.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},t.prototype.maxPoolPositions=function(n,r){for(var a=ct(r.outShape,"int32"),o=r.strideHeight,i=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,h=this.bufferSync(n),v=0;v<r.batchSize;++v)for(var m=0;m<r.inChannels;++m)for(var p=0;p<r.outHeight;++p){for(var y=p*o-d,x=y;x<0;)x+=s;for(var b=Math.min(r.inHeight,l+y),g=0;g<r.outWidth;++g){for(var w=g*i-f,S=w;S<0;)S+=u;for(var E=Math.min(r.inWidth,c+w),R=Number.NEGATIVE_INFINITY,A=-1,k=x;k<b;k+=s)for(var M=k-y,T=S;T<E;T+=u){var D=T-w,I=h.get(v,k,T,m);I>R&&(R=I,A=M*c+D)}a.set(A,v,p,g,m)}}return a.toTensor()},t.prototype.maxPoolBackprop=function(n,r,a,o){Ae([r,a],"maxPoolBackprop");for(var i=this.maxPoolPositions(r,o),s=o.strideHeight,u=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,d=o.effectiveFilterHeight,f=o.effectiveFilterWidth,h=f-1-o.padInfo.left,v=d-1-o.padInfo.top,m=ct(r.shape,"float32"),p=this.bufferSync(i),y=this.bufferSync(n),x=0;x<o.batchSize;++x)for(var b=0;b<o.inChannels;++b)for(var g=0;g<o.inHeight;++g)for(var w=0;w<o.inWidth;++w){for(var S=g-v,E=w-h,R=0,A=0;A<d;A+=l){var k=(S+A)/s;if(!(k<0||k>=o.outHeight||Math.floor(k)!==k))for(var M=0;M<f;M+=c){var T=(E+M)/u;if(!(T<0||T>=o.outWidth||Math.floor(T)!==T)){var D=d*f-1-p.get(x,k,T,b)===A*f+M?1:0;D!==0&&(R+=y.get(x,k,T,b)*D)}}}m.set(R,x,g,w,b)}return m.toTensor()},t.prototype.avgPoolBackprop=function(n,r,a){Ae([n,r],"avgPoolBackprop");for(var o=a.strideHeight,i=a.strideWidth,s=a.filterHeight,u=a.filterWidth,l=a.dilationHeight,c=a.dilationWidth,d=a.effectiveFilterHeight,f=a.effectiveFilterWidth,h=f-1-a.padInfo.left,v=d-1-a.padInfo.top,m=ct(r.shape,"float32"),p=1/(s*u),y=this.bufferSync(n),x=0;x<a.batchSize;++x)for(var b=0;b<a.inChannels;++b)for(var g=0;g<a.inHeight;++g)for(var w=0;w<a.inWidth;++w){for(var S=g-v,E=w-h,R=0,A=0;A<d;A+=l){var k=(S+A)/o;if(!(k<0||k>=a.outHeight||Math.floor(k)!==k))for(var M=0;M<f;M+=c){var T=(E+M)/i;T<0||T>=a.outWidth||Math.floor(T)!==T||(R+=y.get(x,k,T,b))}}m.set(R*p,x,g,w,b)}return m.toTensor()},t.prototype.pool3d=function(n,r,a){Ae(n,"pool3d");for(var o=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,v=r.padInfo.front,m=r.padInfo.top,p=r.padInfo.left,y=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=this.readSync(n.dataId),b=ct(r.outShape,n.dtype),g=b.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],R=r.outShape[4],A=0;A<r.batchSize;++A)for(var k=A*w,M=A*n.strides[0],T=0;T<r.inChannels;++T)for(var D=0;D<r.outDepth;++D){for(var I=D*o-v,F=I;F<0;)F+=u;for(var V=Math.min(r.inDepth,d+I),L=k+D*S,q=0;q<r.outHeight;++q){for(var K=q*i-m,oe=K;oe<0;)oe+=l;for(var W=Math.min(r.inHeight,f+K),N=L+q*E,Q=0;Q<r.outWidth;++Q){for(var Y=Q*s-p,fe=Y;fe<0;)fe+=c;for(var $=Math.min(r.inWidth,h+Y),O=N+Q*R,ee=y,H=0,ue=0,ye=F;ye<V;ye+=u){for(var P=M+ye*n.strides[1],B=oe;B<W;B+=l){for(var j=P+B*n.strides[2],ne=fe;ne<$;ne+=c){var se=x[j+ne*n.strides[3]+T];if(a==="max"&&se>ee?ee=se:a==="avg"&&(H+=se,ue++),isNaN(ee))break}if(isNaN(ee))break}if(isNaN(ee))break}g[O+T]=a==="avg"?H/ue:ee}}}return b.toTensor()},t.prototype.avgPool3d=function(n,r){return Ae(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(n,r,a){Ae([n,r],"avgPool3dBackprop");for(var o=a.strideDepth,i=a.strideHeight,s=a.strideWidth,u=a.filterDepth,l=a.filterHeight,c=a.filterWidth,d=a.dilationDepth,f=a.dilationHeight,h=a.dilationWidth,v=a.effectiveFilterDepth,m=a.effectiveFilterHeight,p=a.effectiveFilterWidth,y=v-1-a.padInfo.front,x=p-1-a.padInfo.left,b=m-1-a.padInfo.top,g=ct(r.shape,"float32"),w=1/(u*l*c),S=this.bufferSync(n),E=0;E<a.batchSize;++E)for(var R=0;R<a.inChannels;++R)for(var A=0;A<a.inDepth;++A)for(var k=0;k<a.inHeight;++k)for(var M=0;M<a.inWidth;++M){for(var T=A-y,D=k-b,I=M-x,F=0,V=0;V<v;V+=d){var L=(T+V)/o;if(!(L<0||L>=a.outDepth||Math.floor(L)!==L))for(var q=0;q<m;q+=f){var K=(D+q)/i;if(!(K<0||K>=a.outHeight||Math.floor(K)!==K))for(var oe=0;oe<p;oe+=h){var W=(I+oe)/s;W<0||W>=a.outWidth||Math.floor(W)!==W||(F+=S.get(E,L,K,W,R))}}}g.set(F*w,E,A,k,M,R)}return g.toTensor()},t.prototype.maxPool3d=function(n,r){return Ae(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},t.prototype.maxPool3dPositions=function(n,r){for(var a=ct(r.outShape,"int32"),o=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,v=r.padInfo.front,m=r.padInfo.top,p=r.padInfo.left,y=this.bufferSync(n),x=0;x<r.batchSize;++x)for(var b=0;b<r.inChannels;++b)for(var g=0;g<r.outDepth;++g){for(var w=g*o-v,S=w;S<0;)S+=u;for(var E=Math.min(r.inDepth,d+w),R=0;R<r.outHeight;++R){for(var A=R*i-m,k=A;k<0;)k+=l;for(var M=Math.min(r.inHeight,f+A),T=0;T<r.outWidth;++T){for(var D=T*s-p,I=D;I<0;)I+=c;for(var F=Math.min(r.inWidth,h+D),V=Number.NEGATIVE_INFINITY,L=-1,q=S;q<E;q+=u)for(var K=q-w,oe=k;oe<M;oe+=l)for(var W=oe-A,N=I;N<F;N+=c){var Q=N-D,Y=y.get(x,q,oe,N,b);Y>=V&&(V=Y,L=K*f*h+W*f+Q)}a.set(L,x,g,R,T,b)}}}return a.toTensor()},t.prototype.maxPool3dBackprop=function(n,r,a,o){Ae([r,a],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(r,o),s=o.strideDepth,u=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,d=o.dilationHeight,f=o.dilationWidth,h=o.effectiveFilterDepth,v=o.effectiveFilterHeight,m=o.effectiveFilterWidth,p=h-1-o.padInfo.front,y=m-1-o.padInfo.left,x=v-1-o.padInfo.top,b=ct(r.shape,"float32"),g=this.bufferSync(i),w=this.bufferSync(n),S=0;S<o.batchSize;++S)for(var E=0;E<o.inChannels;++E)for(var R=0;R<o.inDepth;++R)for(var A=0;A<o.inHeight;++A)for(var k=0;k<o.inWidth;++k){for(var M=R-p,T=A-x,D=k-y,I=0,F=0;F<h;F+=c){var V=(M+F)/s;if(!(V<0||V>=o.outDepth||Math.floor(V)!==V))for(var L=0;L<v;L+=d){var q=(T+L)/u;if(!(q<0||q>=o.outHeight||Math.floor(q)!==q))for(var K=0;K<m;K+=f){var oe=(D+K)/l;if(!(oe<0||oe>=o.outWidth||Math.floor(oe)!==oe)){var W=h*v*m-1-g.get(S,V,q,oe,E)===F*v*m+L*m+K?1:0;W!==0&&(I+=w.get(S,V,q,oe,E)*W)}}}}b.set(I,S,R,A,k,E)}return b.toTensor()},t.prototype.cast=function(n,r){return qw(n,r,this)},t.prototype.reshape=function(n,r){return Ah(n,r)},t.prototype.avgPool=function(n,r){return Ae(n,"avgPool"),this.pool(n,r,"avg").toFloat()},t.prototype.resizeBilinear=function(n,r,a,o){Ae(n,"resizeBilinear");for(var i=n.shape,s=i[0],u=i[1],l=i[2],c=i[3],d=this.readSync(n.dataId),f=new Float32Array(Ke([s,r,a,c])),h=[o&&r>1?u-1:u,o&&a>1?l-1:l],v=[o&&r>1?r-1:r,o&&a>1?a-1:a],m=0,p=h[0]/v[0],y=h[1]/v[1],x=0;x<s;x++)for(var b=0;b<r;b++)for(var g=p*b,w=Math.floor(g),S=g-w,E=Math.min(u-1,Math.ceil(g)),R=x*n.strides[0]+w*n.strides[1],A=x*n.strides[0]+E*n.strides[1],k=0;k<a;k++)for(var M=y*k,T=Math.floor(M),D=M-T,I=Math.min(l-1,Math.ceil(M)),F=R+T*n.strides[2],V=A+T*n.strides[2],L=R+I*n.strides[2],q=A+I*n.strides[2],K=0;K<c;K++){var oe=d[F+K],W=d[V+K],N=oe+(d[L+K]-oe)*D,Q=N+(W+(d[q+K]-W)*D-N)*S;f[m++]=Q}return Pn(f,[s,r,a,c])},t.prototype.resizeBilinearBackprop=function(n,r,a){Ae([n,r],"resizeBilinearBackprop");for(var o=r.shape,i=o[0],s=o[1],u=o[2],l=o[3],c=n.shape,d=c[1],f=c[2],h=new Float32Array(i*s*u*l),v=[a&&d>1?s-1:s,a&&f>1?u-1:u],m=[a&&d>1?d-1:d,a&&f>1?f-1:f],p=v[0]/m[0],y=v[1]/m[1],x=this.readSync(n.dataId),b=0,g=0;g<i;g++)for(var w=g*r.strides[0],S=0;S<d;S++)for(var E=S*p,R=Math.floor(E),A=Math.min(Math.ceil(E),s-1),k=w+R*r.strides[1],M=w+A*r.strides[1],T=E-R,D=1-T,I=0;I<f;I++)for(var F=I*y,V=Math.floor(F),L=Math.min(Math.ceil(F),u-1),q=F-V,K=1-q,oe=k+V*r.strides[2],W=k+L*r.strides[2],N=M+V*r.strides[2],Q=M+L*r.strides[2],Y=D*K,fe=D*q,$=T*K,O=T*q,ee=0;ee<l;ee++){var H=x[b++];h[oe+ee]+=H*Y,h[W+ee]+=H*fe,h[N+ee]+=H*$,h[Q+ee]+=H*O}return tr(h,[i,u,s,l],r.dtype)},t.prototype.resizeNearestNeighbor=function(n,r,a,o){Ae(n,"resizeNearestNeighbor");for(var i=n.shape,s=i[0],u=i[1],l=i[2],c=i[3],d=this.readSync(n.dataId),f=new Float32Array(s*r*a*c),h=[o&&r>1?u-1:u,o&&a>1?l-1:l],v=[o&&r>1?r-1:r,o&&a>1?a-1:a],m=h[0]/v[0],p=h[1]/v[1],y=0,x=0;x<s;x++)for(var b=x*n.strides[0],g=0;g<r;g++)for(var w=m*g,S=b+Math.min(u-1,o?Math.round(w):Math.floor(w))*n.strides[1],E=0;E<a;E++)for(var R=p*E,A=S+Math.min(l-1,o?Math.round(R):Math.floor(R))*n.strides[2],k=0;k<c;k++){var M=d[A+k];f[y++]=M}return Pn(f,[s,r,a,c],n.dtype)},t.prototype.resizeNearestNeighborBackprop=function(n,r,a){Ae([n,r],"resizeNearestNeighborBackprop");for(var o=r.shape,i=o[0],s=o[1],u=o[2],l=o[3],c=n.shape,d=c[1],f=c[2],h=new Float32Array(i*s*u*l),v=this.readSync(n.dataId),m=[a&&d>1?s-1:s,a&&f>1?u-1:u],p=[a&&d>1?d-1:d,a&&f>1?f-1:f],y=m[0]/p[0],x=m[1]/p[1],b=1/y,g=1/x,w=2*Math.ceil(b)+2,S=2*Math.ceil(g)+2,E=0;E<i;E++)for(var R=E*r.strides[0],A=0;A<s;A++)for(var k=R+A*r.strides[1],M=Math.floor(A*b),T=Math.floor(M-w/2),D=0;D<u;D++)for(var I=k+D*r.strides[2],F=Math.floor(D*g),V=Math.floor(F-S/2),L=0;L<l;L++){for(var q=0,K=0;K<w;K++){var oe=K+T;if(!(oe<0||oe>=d)){var W=R+oe*n.strides[1],N=oe*y;if(A===Math.min(s-1,a?Math.round(N):Math.floor(N)))for(var Q=0;Q<S;Q++){var Y=Q+V;if(!(Y<0||Y>=f)){var fe=W+Y*n.strides[2],$=Y*x;D===Math.min(u-1,a?Math.round($):Math.floor($))&&(q+=v[fe+L])}}}}h[I+L]=q}return tr(h,r.shape,r.dtype)},t.prototype.batchNormalization=function(n,r,a,o,i,s){Ae([n,r,a,i,s],"batchNorm");for(var u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=this.readSync(a.dataId),d=i?this.readSync(i.dataId):new Float32Array([1]),f=s?this.readSync(s.dataId):new Float32Array([0]),h=new Float32Array(u.length),v=f.length,m=d.length,p=c.length,y=l.length,x=0,b=0,g=0,w=0,S=0;S<u.length;++S)h[S]=f[x++]+(u[S]-l[b++])*d[g++]/Math.sqrt(c[w++]+o),x>=v&&(x=0),b>=y&&(b=0),g>=m&&(g=0),w>=p&&(w=0);return tr(h,n.shape)},t.prototype.localResponseNormalization4D=function(n,r,a,o,i){Ae(n,"localResponseNormalization4D");var s=n.shape[3],u=s-1,l=this.readSync(n.dataId),c=n.size,d=new Float32Array(c);function f(p){for(var y=p%s,x=p-y+Math.max(0,y-r),b=p-y+Math.min(y+r,u),g=0;x<=b;x++){var w=l[x];g+=w*w}return g}for(var h=0;h<c;h++){var v=f(h),m=l[h]*Math.pow(a+o*v,-i);d[h]=m}return tr(d,n.shape)},t.prototype.LRNGrad=function(n,r,a,o,i,s,u){Ae(n,"LRNGrad");for(var l=n.shape[3],c=this.readSync(n.dataId),d=this.readSync(r.dataId),f=this.readSync(a.dataId),h=new Float32Array(n.size),v=n.size,m=0;m<v;m++){for(var p=m%l,y=m-p+Math.max(0,p-o),x=m-p+Math.min(l,p+o+1),b=0,g=y;g<x;g++)b+=Math.pow(d[g],2);for(b=s*b+i,g=y;g<x;g++){var w=-2*s*u*d[g]*f[m]/b;m===g&&(w+=Math.pow(b,-u)),w*=c[m],h[g]+=w}}return tr(h,n.shape)},t.prototype.multinomial=function(n,r,a,o){Ae(n,"multinomial");for(var i=r?n:za(n),s=i.shape[0],u=i.shape[1],l=Ut([s,a],"int32"),c=this.readSync(l.dataId),d=this.readSync(i.dataId),f=0;f<s;++f){var h=f*u,v=new Float32Array(u-1);v[0]=d[h];for(var m=1;m<v.length;++m)v[m]=v[m-1]+d[h+m];for(var p=Jc(o.toString()),y=f*a,x=0;x<a;++x){var b=p();c[y+x]=v.length;for(var g=0;g<v.length;g++)if(b<v[g]){c[y+x]=g;break}}}return l},t.prototype.oneHot=function(n,r,a,o){Ae(n,"oneHot");var i=new Float32Array(n.size*r);i.fill(o);for(var s=this.readSync(n.dataId),u=0;u<n.size;++u)s[u]>=0&&s[u]<r&&(i[u*r+s[u]]=a);return ho(i,[n.size,r],"int32")},t.prototype.nonMaxSuppression=function(n,r,a,o,i){return Ae(n,"nonMaxSuppression"),Kv(this.readSync(n.dataId),this.readSync(r.dataId),a,o,i)},t.prototype.fft=function(n){return this.fftBatch(n,!1)},t.prototype.ifft=function(n){return this.fftBatch(n,!0)},t.prototype.fftBatch=function(n,r){for(var a=n.shape[0],o=n.shape[1],i=ct(n.shape,"float32"),s=ct(n.shape,"float32"),u=Cr(n).as2D(a,o),l=na(n).as2D(a,o),c=0;c<a;c++)for(var d=u.slice([c,0],[1,o]),f=l.slice([c,0],[1,o]),h=Mn(d,f),v=this.readSync(this.fftImpl(h,r).dataId),m=0;m<o;m++){var p=A0(v,m);i.values[c*o+m]=p.real,s.values[c*o+m]=p.imag}return Mn(i.toTensor(),s.toTensor()).as2D(a,o)},t.prototype.fftImpl=function(n,r){var a=n.as1D(),o=a.size;if(this.isExponentOf2(o)){var i=this.fftRadix2(a,o,r).as2D(n.shape[0],n.shape[1]);return r&&(i=Mn(Cr(i).div(Be(o)),na(i).div(Be(o)))),i}var s=this.readSync(n.dataId),u=(function(l){for(var c=new Float32Array(l.length/2),d=new Float32Array(l.length/2),f=0;f<l.length;f+=2)c[f/2]=l[f],d[f/2]=l[f+1];return{real:c,imag:d}})(this.fourierTransformByMatmul(s,o,r));return Mn(u.real,u.imag).as2D(n.shape[0],n.shape[1])},t.prototype.isExponentOf2=function(n){return(n&n-1)==0},t.prototype.fftRadix2=function(n,r,a){if(r===1)return n;var o=this.readSync(n.dataId),i=r/2,s=(function(y){for(var x=Math.ceil(y.length/4),b=new Float32Array(x),g=new Float32Array(x),w=0;w<y.length;w+=4)b[Math.floor(w/4)]=y[w],g[Math.floor(w/4)]=y[w+1];return{real:b,imag:g}})(o),u=Mn(s.real,s.imag).as1D(),l=(function(y){for(var x=Math.floor(y.length/4),b=new Float32Array(x),g=new Float32Array(x),w=2;w<y.length;w+=4)b[Math.floor(w/4)]=y[w],g[Math.floor(w/4)]=y[w+1];return{real:b,imag:g}})(o),c=Mn(l.real,l.imag).as1D();u=this.fftRadix2(u,i,a),c=this.fftRadix2(c,i,a);var d=(function(y,x){for(var b=new Float32Array(y/2),g=new Float32Array(y/2),w=0;w<Math.ceil(y/2);w++){var S=(x?2:-2)*Math.PI*(w/y);b[w]=Math.cos(S),g[w]=Math.sin(S)}return{real:b,imag:g}})(r,a),f=Mn(d.real,d.imag).mul(c),h=u.add(f),v=u.sub(f),m=Cr(h).concat(Cr(v)),p=na(h).concat(na(v));return Mn(m,p).as1D()},t.prototype.fourierTransformByMatmul=function(n,r,a){for(var o=new Float32Array(2*r),i=0;i<r;i++){for(var s=0,u=0,l=0;l<r;l++){var c=ED(i*l,r,a),d=A0(n,l);s+=d.real*c.real-d.imag*c.imag,u+=d.real*c.imag+d.imag*c.real}a&&(s/=r,u/=r),kD(o,s,u,i)}return o},t.prototype.depthToSpace=function(n,r,a){U(a==="NHWC",(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a})),U(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));for(var o=n.shape[0],i=n.shape[1],s=n.shape[2],u=n.shape[3],l=i*r,c=s*r,d=u/(r*r),f=this.readSync(n.dataId),h=new Float32Array(o*l*c*d),v=0,m=0;m<o;++m)for(var p=0;p<l;++p)for(var y=Math.floor(p/r),x=p%r,b=0;b<c;++b)for(var g=Math.floor(b/r),w=(x*r+b%r)*d,S=0;S<d;++S){var E=S+w+u*(g+s*(y+i*m));h[v++]=f[E]}return tr(h,[o,l,c,d])},t.prototype.broadcastedBinaryOp=function(n,r,a,o){var i=xt(n.shape,r.shape),s=ct(i,a),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=io(n.shape,i),d=io(r.shape,i),f=s.values;if(c.length+d.length===0)for(var h=0;h<f.length;++h)f[h]=o(u[h%u.length],l[h%l.length]);else{var v=this.bufferSync(n),m=this.bufferSync(r),p=function(y){var x=s.indexToLoc(y),b=x.slice(-n.rank);c.forEach((function(E){return b[E]=0}));var g=v.locToIndex(b),w=x.slice(-r.rank);d.forEach((function(E){return w[E]=0}));var S=m.locToIndex(w);f[y]=o(u[g],l[S])};for(h=0;h<f.length;++h)p(h)}return s.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(n,r,a){var o=xt(n.shape,r.shape),i=ct(o,"float32"),s=ct(o,"float32"),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=io(n.shape,o),d=io(r.shape,o),f=i.values,h=s.values;if(c.length+d.length===0)for(var v=0;v<f.length;v++){var m=v%u.length,p=v%l.length,y=a(u[2*m],u[2*m+1],l[2*p],l[2*p+1]);f[v]=y.real,h[v]=y.imag}else{var x=this.bufferSync(this.data.get(n.dataId).complexTensors.real),b=this.bufferSync(this.data.get(r.dataId).complexTensors.real),g=function(w){var S=i.indexToLoc(w),E=S.slice(-n.rank);c.forEach((function(T){return E[T]=0}));var R=x.locToIndex(E),A=S.slice(-r.rank);d.forEach((function(T){return A[T]=0}));var k=b.locToIndex(A),M=a(u[2*R],u[2*R+1],l[2*k],l[2*k+1]);f[w]=M.real,h[w]=M.imag};for(v=0;v<f.length;v++)g(v)}return this.complex(i.toTensor(),s.toTensor())},t.prototype.split=function(n,r,a){return zw(n,r,a)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(n,r,a,o,i,s){for(var u=n.shape,l=u[0],c=u[1],d=u[2],f=u[3],h=r.shape[0],v=o[0],m=o[1],p=ct([h,v,m,f],"float32"),y=this.readSync(r.dataId),x=this.readSync(a.dataId),b=this.readSync(n.dataId),g=n.strides,w=p.strides,S=0;S<h;S++){var E=4*S,R=y[E],A=y[E+1],k=y[E+2],M=y[E+3],T=x[S];if(!(T>=l))for(var D=v>1?(k-R)*(c-1)/(v-1):0,I=m>1?(M-A)*(d-1)/(m-1):0,F=0;F<v;F++){var V=v>1?R*(c-1)+F*D:.5*(R+k)*(c-1);if(V<0||V>c-1)for(var L=0;L<m;L++)for(var q=0;q<f;q++){var K=q+L*w[2]+F*w[1]+S*w[0];p.values[K]=s}else if(i==="bilinear"){var oe=Math.floor(V),W=Math.ceil(V),N=V-oe;for(L=0;L<m;L++)if((ye=m>1?A*(d-1)+L*I:.5*(A+M)*(d-1))<0||ye>d-1)for(q=0;q<f;q++)K=q+L*w[2]+F*w[1]+S*w[0],p.values[K]=s;else{var Q=Math.floor(ye),Y=Math.ceil(ye),fe=ye-Q;for(q=0;q<f;q++){var $=b[K=q+Q*g[2]+oe*g[1]+T*g[0]],O=b[K=q+Y*g[2]+oe*g[1]+T*g[0]],ee=b[K=q+Q*g[2]+W*g[1]+T*g[0]],H=$+(O-$)*fe,ue=ee+(b[K=q+Y*g[2]+W*g[1]+T*g[0]]-ee)*fe;K=q+L*w[2]+F*w[1]+S*w[0],p.values[K]=H+(ue-H)*N}}}else for(L=0;L<m;++L){var ye;if((ye=m>1?A*(d-1)+L*I:.5*(A+M)*(d-1))<0||ye>d-1)for(q=0;q<f;q++)K=q+L*w[2]+F*w[1]+S*w[0],p.values[K]=s;else{var P=Math.round(ye),B=Math.round(V);for(q=0;q<f;q++){var j=q+P*g[2]+B*g[1]+T*g[0],ne=q+L*w[2]+F*w[1]+S*w[0];p.values[ne]=b[j]}}}}}return p.toTensor()},t.prototype.sparseToDense=function(n,r,a,o){var i=dc(0,n,a),s=i.sliceRank,u=i.numUpdates,l=i.sliceSize,c=i.strides,d=i.outputSize;return this.scatter(n,r,a,d,l,u,s,c,o,!1)},t.prototype.gatherND=function(n,r){var a=r.shape,o=a[a.length-1],i=Mw(n,r),s=i[0],u=i[1],l=i[2],c=i[3];if(u===0)return Pn([],s,n.dtype);for(var d=new vu([u,l],n.dtype),f=this.readSync(r.dataId),h=this.readSync(n.dataId),v=0;v<u;v++){for(var m=[],p=0,y=0;y<o;y++){var x=f[v*o+y];p+=x*c[y],m.push(x)}if(p<0||p>=n.size/l)throw new Error("Invalid indices: "+m+" does not index into "+n.shape);for(var b=0;b<l;b++)d.values[v*l+b]=h[p*l+b]}return d.toTensor().reshape(s)},t.prototype.scatterND=function(n,r,a){var o=dc(0,n,a),i=o.sliceRank,s=o.numUpdates,u=o.sliceSize,l=o.strides,c=o.outputSize,d=Be(0);return this.scatter(n,r,a,c,u,s,i,l,d,!0)},t.prototype.fill=function(n,r,a){var o=tc(a=a||Tu(r),Ke(n));return o.fill(r),ie.makeTensor(o,n,a,this)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){var r=tc(n.dtype,Ke(n.shape));return this.makeOutput(r,n.shape,n.dtype)},t.prototype.linspace=function(n,r,a){return Lw(n,r,a)},t.prototype.scatter=function(n,r,a,o,i,s,u,l,c,d){var f=[o/i,i],h=this.readSync(n.dataId),v=this.readSync(r.dataId);if(o===0)return Pn([],a,r.dtype);var m=new vu(f,r.dtype);m.values.fill(this.readSync(c.dataId)[0]);for(var p=0;p<s;p++){for(var y=[],x=0,b=0;b<u;b++){var g=h[p*u+b];y.push(g),x+=g*l[b]}if(x<0||x>=o/i)throw new Error("Invalid indices: "+y+" does not index into "+a);for(var w=0;w<i;w++)d?m.values[x*i+w]+=v[p*i+w]:m.values[x*i+w]=r.rank===0?v[0]:v[p*i+w]}return m.toTensor().reshape(a)},t})(Ow);ie.registerBackend("cpu",(function(){return new j3}),1);for(var kf=0,Y0=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t,o=a.boxes,i=a.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,f=n;Ae(o,"NonMaxSuppressionWithScore");var h=Xv(f.data.get(o.dataId).values,f.data.get(i.dataId).values,u,l,c,d);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;Ae(r,"square");for(var o=a.data.get(r.dataId).values,i=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];i[s]=u*u}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:gu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,o=r.b,i=n;Ae([a,o],gu);var s=i.data.get(a.dataId).values,u=i.data.get(o.dataId).values,l=(function(f,h,v,m,p,y){var x=xt(f,h),b=x.length,g=sa(x),w=hu(p,Ke(x)),S=f.length,E=h.length,R=sa(f),A=sa(h),k=io(f,x),M=io(h,x);if(k.length+M.length===0)for(var T=0;T<w.length;++T)w[T]=y(v[T%v.length],m[T%m.length]);else{var D=function(I){var F=nM(I,b,g),V=F.slice(-S);k.forEach((function(oe){return V[oe]=0}));var L=x0(V,S,R),q=F.slice(-E);M.forEach((function(oe){return q[oe]=0}));var K=x0(q,E,A);w[I]=y(v[L],m[K])};for(T=0;T<w.length;++T)D(T)}return[w,x]})(a.shape,o.shape,s,u,a.dtype,(function(f,h){var v=f-h;return v*v})),c=l[0],d=l[1];return{dataId:i.write(c,d,a.dtype),shape:d,dtype:a.dtype}}}];kf<Y0.length;kf++)cw(Y0[kf]);var ki,G3=function(e){this.variableNames=["A"];var t=Hn(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},K3=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Hn(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var Ef=0,J0=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,o=r.numChannels,i=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,u=i?[a.videoWidth,a.videoHeight]:[a.width,a.height],l=u[0],c=u[1],d=[c,l],f=[c,l,o];(s||i)&&(ki==null&&(ki=document.createElement("canvas").getContext("2d")),ki.canvas.width=l,ki.canvas.height=c,ki.drawImage(a,0,0,l,c),a=ki.canvas);var h=n.makeTensorInfo(d,"int32");n.texData.get(h.dataId).usage=hr.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);var v=Se().getBool("WEBGL_PACK")?new K3(f):new G3(f),m=n.runWebGLProgram(v,[h],"int32");return n.disposeData(h.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;oc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=t,o=a.boxes,i=a.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,f=n,h=Xv(f.readSync(o.dataId),f.readSync(i.dataId),u,l,c,d);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n,o=new ht(r.shape,"return x * x;");return a.runWebGLProgram(o,[r],r.dtype)}},{kernelName:gu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,o=r.b,i=n,s=Se().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ka("return (a - b) * (a - b);",a.shape,o.shape):new an("return (a - b) * (a - b);",a.shape,o.shape);return i.compileAndRun(s,[a,o])}}];Ef<J0.length;Ef++)cw(J0[Ef]);for(var Tf=0,Z0=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:gu,gradFunc:function(e,t){var n=t[0],r=t[1],a=Be(2);return{a:function(){return jn(e,jn(a,wn(n,r)))},b:function(){return jn(e,jn(a,wn(r,n)))}}}}];Tf<Z0.length;Tf++)UI(Z0[Tf]);var X3=(function(){function e(){}return e.prototype.fetch=function(t,n){return fetch(t,n)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return new TextDecoder(n).decode(t)},e})();Se().get("IS_BROWSER")&&Se().setPlatform("browser",new X3);var Rf,Q3=function(){return require("node-fetch")},Y3=(function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,n){return Se().global.fetch!=null?Se().global.fetch(t,n):(Rf==null&&(Rf=Q3()),Rf(t,n))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)},e})();Se().get("IS_NODE")&&Se().setPlatform("node",new Y3);var Dh={float32:4,int32:4,uint16:2,uint8:1,bool:1},yc=4;function P_(e,t){for(var n={},r=0,a=function(s){var u=s.name,l=s.dtype,c=s.shape,d=Ke(c),f=void 0;if("quantization"in s){var h=s.quantization;if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var v=Dh[h.dtype],m=e.slice(r,r+d*v),p=h.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(l==="float32")f=Float32Array.from(p,(function(S){return S*h.scale+h.min}));else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=Int32Array.from(p,(function(S){return Math.round(S*h.scale+h.min)}))}r+=d*v}else if(l==="string"){var y=Ke(s.shape);f=[];for(var x=0;x<y;x++){var b=new Uint32Array(e.slice(r,r+yc))[0];r+=yc;var g=new Uint8Array(e.slice(r,r+b));f.push(g),r+=b}}else{var w=Dh[l];if(m=e.slice(r,r+d*w),l==="float32")f=new Float32Array(m);else if(l==="int32")f=new Int32Array(m);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=new Uint8Array(m)}r+=d*w}n[u]=Pn(f,c,l)},o=0,i=t;o<i.length;o++)a(i[o]);return n}function J3(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(o){if(t+=o.byteLength,n.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)}));var r=new Uint8Array(t),a=0;return n.forEach((function(o){r.set(new Uint8Array(o.buffer),a),a+=o.byteLength})),r.buffer}var Ph=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function ey(e){return Ph?Buffer.byteLength(e):new Blob([e]).size}function vp(e){var t=0;e.forEach((function(a){t+=a.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(a){n.set(new Uint8Array(a),r),r+=a.byteLength})),n.buffer}function ty(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Fu(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:ey(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:ey(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var vr=(function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(o){var i=o(t,r);i!==null&&a.push(i)})),a},e})(),Yi="://",vo=(function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,n){U(t!=null,(function(){return"scheme must not be undefined or null."})),t.endsWith(Yi)&&(t=t.slice(0,t.indexOf(Yi))),U(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();U(r.managers[t]==null,(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(t){var n=this.getInstance().managers[t];if(n==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return n},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e})();function El(e){if(e.indexOf(Yi)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+vo.getSchemes().join(","));return{scheme:e.split(Yi)[0],path:e.split(Yi)[1]}}function ny(e,t,n){return n===void 0&&(n=!1),Ue(this,void 0,void 0,(function(){var r,a,o,i,s,u,l,c,d;return je(this,(function(f){switch(f.label){case 0:return U(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),U((r=vr.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),U(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),a=r[0],U((o=vr.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),U(o.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),i=o[0],s=El(e).scheme,u=El(e).path,l=s===El(e).scheme,[4,a.load()];case 1:return c=f.sent(),n&&l?[4,vo.getManager(s).removeModel(u)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,i.save(c)];case 4:return d=f.sent(),!n||l?[3,6]:[4,vo.getManager(s).removeModel(u)];case 5:f.sent(),f.label=6;case 6:return[2,d.modelArtifactsInfo]}}))}))}var Wo="models_store",so="model_info_store";function F_(){if(!Se().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Fh(e){var t=e.result;t.createObjectStore(Wo,{keyPath:"modelPath"}),t.createObjectStore(so,{keyPath:"modelPath"})}var Ji=(function(){function e(t){if(this.indexedDB=F_(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return Ue(this,void 0,void 0,(function(){return je(this,(function(n){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]}))}))},e.prototype.load=function(){return Ue(this,void 0,void 0,(function(){return je(this,(function(t){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(t,n){var r=this;return new Promise((function(a,o){var i=r.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return Fh(i)},i.onsuccess=function(){var s=i.result;if(n==null){var u=s.transaction(Wo,"readonly"),l=u.objectStore(Wo).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(l.result.modelArtifacts)},l.onerror=function(m){return s.close(),o(l.error)},u.oncomplete=function(){return s.close()}}else{var c,d=Fu(n),f=s.transaction(so,"readwrite"),h=f.objectStore(so),v=h.put({modelPath:r.modelPath,modelArtifactsInfo:d});v.onsuccess=function(){var m=(c=s.transaction(Wo,"readwrite")).objectStore(Wo).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:d});m.onsuccess=function(){return a({modelArtifactsInfo:d})},m.onerror=function(p){var y=(h=f.objectStore(so)).delete(r.modelPath);y.onsuccess=function(){return s.close(),o(m.error)},y.onerror=function(x){return s.close(),o(m.error)}}},v.onerror=function(m){return s.close(),o(v.error)},f.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},i.onerror=function(s){return o(i.error)}}))},e.URL_SCHEME="indexeddb://",e})(),ry=function(e){return Se().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ji.URL_SCHEME)?(t=e.slice(Ji.URL_SCHEME.length),new Ji(t)):null;var t};vr.registerSaveRouter(ry),vr.registerLoadRouter(ry);var Z3=(function(){function e(){this.indexedDB=F_()}return e.prototype.listModels=function(){return Ue(this,void 0,void 0,(function(){var t=this;return je(this,(function(n){return[2,new Promise((function(r,a){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Fh(o)},o.onsuccess=function(){var i=o.result,s=i.transaction(so,"readonly"),u=s.objectStore(so).getAll();u.onsuccess=function(){for(var l={},c=0,d=u.result;c<d.length;c++){var f=d[c];l[f.modelPath]=f.modelArtifactsInfo}r(l)},u.onerror=function(l){return i.close(),a(u.error)},s.oncomplete=function(){return i.close()}},o.onerror=function(i){return a(o.error)}}))]}))}))},e.prototype.removeModel=function(t){return Ue(this,void 0,void 0,(function(){var n=this;return je(this,(function(r){var a;return t=(a=t).startsWith(Ji.URL_SCHEME)?a.slice(Ji.URL_SCHEME.length):a,[2,new Promise((function(o,i){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return Fh(s)},s.onsuccess=function(){var u,l=s.result,c=l.transaction(so,"readwrite"),d=c.objectStore(so),f=d.get(t);f.onsuccess=function(){if(f.result==null)return l.close(),i(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var h=d.delete(t),v=function(){var m=(u=l.transaction(Wo,"readwrite")).objectStore(Wo).delete(t);m.onsuccess=function(){return o(f.result.modelArtifactsInfo)},m.onerror=function(p){return i(f.error)}};h.onsuccess=v,h.onerror=function(m){return v(),l.close(),i(f.error)}},f.onerror=function(h){return l.close(),i(f.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return i(s.error)}}))]}))}))},e})();if(Se().getBool("IS_BROWSER"))try{vo.registerManager(Ji.URL_SCHEME,new Z3)}catch{}var Ma="/",Fi="tensorflowjs_models",N_="info",eO="model_topology",tO="weight_specs",nO="weight_data",rO="model_metadata";function O_(e){return{info:[Fi,e,N_].join(Ma),topology:[Fi,e,eO].join(Ma),weightSpecs:[Fi,e,tO].join(Ma),weightData:[Fi,e,nO].join(Ma),modelMetadata:[Fi,e,rO].join(Ma)}}function aO(e){var t=e.split(Ma);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Ma)}var Zi=(function(){function e(t){if(!Se().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=O_(this.modelPath)}return e.prototype.save=function(t){return Ue(this,void 0,void 0,(function(){var n,r,a;return je(this,(function(o){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Fu(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,(function(i){if(Ph)return Buffer.from(i).toString("base64");for(var s=new Uint8Array(i),u="",l=0,c=s.length;l<c;l++)u+=String.fromCharCode(s[l]);return btoa(u)})(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return Ue(this,void 0,void 0,(function(){var t,n,r,a,o,i,s;return je(this,(function(u){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=a,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(i=JSON.parse(o),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,n.userDefinedMetadata=i.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=(function(l){if(Ph){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var d=atob(l),f=new Uint8Array(d.length),h=0;h<d.length;++h)f.set([d.charCodeAt(h)],h);return f.buffer})(s),[2,n]}))}))},e.URL_SCHEME="localstorage://",e})(),ay=function(e){return Se().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Zi.URL_SCHEME)?(t=e.slice(Zi.URL_SCHEME.length),new Zi(t)):null;var t};vr.registerSaveRouter(ay),vr.registerLoadRouter(ay);var oO=(function(){function e(){U(Se().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),U(typeof window>"u"||window.localStorage!==void 0,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return Ue(this,void 0,void 0,(function(){var t,n,r,a,o,i;return je(this,(function(s){for(t={},n=Fi+Ma,r=Ma+N_,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(n)&&o.endsWith(r)&&(i=aO(o),t[i]=JSON.parse(this.LS.getItem(o)));return[2,t]}))}))},e.prototype.removeModel=function(t){return Ue(this,void 0,void 0,(function(){var n,r;return je(this,(function(a){var o;if(t=(o=t).startsWith(Zi.URL_SCHEME)?o.slice(Zi.URL_SCHEME.length):o,n=O_(t),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+t+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]}))}))},e})();if(Se().getBool("IS_BROWSER"))try{vo.registerManager(Zi.URL_SCHEME,new oO)}catch{}var iO="model",sO=".json",uO=".weights.bin";function oy(e){return new Promise((function(t){return setTimeout(t)})).then(e)}var Af=(function(){function e(t){if(!Se().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=iO),this.modelTopologyFileName=t+sO,this.weightDataFileName=t+uO}return e.prototype.save=function(t){return Ue(this,void 0,void 0,(function(){var n,r,a,o,i,s;return je(this,(function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(i=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=o,[4,oy((function(){return i.dispatchEvent(new MouseEvent("click"))}))];case 2:return u.sent(),t.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,oy((function(){return s.dispatchEvent(new MouseEvent("click"))}))]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:Fu(t)}]}}))}))},e.URL_SCHEME="downloads://",e})(),lO=(function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return Ue(this,void 0,void 0,(function(){var t,n,r=this;return je(this,(function(a){return t=this.files[0],n=this.files.slice(1),[2,new Promise((function(o,i){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){n.length===0&&o({modelTopology:c});var d=l.weightsManifest;if(d!=null){var f;try{f=r.checkManifestAndWeightFiles(d,n)}catch(p){return void i(p)}var h=[],v=[],m=[];d.forEach((function(p){p.paths.forEach((function(y){v.push(y),m.push(null)})),h.push.apply(h,p.weights)})),d.forEach((function(p){p.paths.forEach((function(y){var x=new FileReader;x.onload=function(b){var g=b.target.result,w=v.indexOf(y);m[w]=g,m.indexOf(null)===-1&&o({modelTopology:c,weightSpecs:h,weightData:vp(m),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},x.onerror=function(b){return i("Failed to weights data from file of path '"+y+"'.")},x.readAsArrayBuffer(f[y])}))}))}else i(new Error("weightManifest field is missing from file "+t.name))}else i(new Error("modelTopology field is missing from file "+t.name))},s.onerror=function(u){return i("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(t)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(t,n){for(var r=[],a=n.map((function(u){return ty(u.name)})),o={},i=0,s=t;i<s.length;i++)s[i].paths.forEach((function(u){var l=ty(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),a.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");o[u]=n[a.indexOf(l)]}));if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return o},e})();function iy(e,t,n,r){(function(o){U(o!=null&&Array.isArray(o)&&o.length>0,(function(){return"promises must be a none empty array"}))})(e),(function(o,i){U(o>=0&&o<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o})),U(i>=0&&i<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+i})),U(i>=o,(function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+i}))})(n=n??0,r=r??1);var a=0;return Promise.all(e.map((function(o){return o.then((function(i){var s=n+ ++a/e.length*(r-n);return t(s),i})),o})))}function B_(e,t){return Ue(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c;return je(this,(function(d){switch(d.label){case 0:return t==null&&(t={}),n=t.fetchFunc==null?Se().platform.fetch:t.fetchFunc,r=e.map((function(f){return n(f,t.requestInit,{isBinary:!0})})),a=0,o=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return i=d.sent(),[3,4];case 2:return[4,iy(r,t.onProgress,a,o)];case 3:i=d.sent(),d.label=4;case 4:return s=i.map((function(f){return f.arrayBuffer()})),u=.5,l=1,t.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,iy(s,t.onProgress,u,l)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}}))}))}function sy(e){var t=this;return function(n,r,a){return r===void 0&&(r=""),Ue(t,void 0,void 0,(function(){var o,i,s,u,l,c,d,f,h,v;return je(this,(function(m){switch(m.label){case 0:if(o=n.map((function(){return!1})),i={},s=a!=null?a.map((function(){return!1})):[],u=[],n.forEach((function(p,y){var x=0;p.weights.forEach((function(b){var g="quantization"in b?b.quantization.dtype:b.dtype,w=Dh[g]*Ke(b.shape),S=function(){o[y]=!0,i[y]==null&&(i[y]=[]),i[y].push({manifestEntry:b,groupOffset:x,sizeBytes:w})};a!=null?a.forEach((function(E,R){E===b.name&&(S(),s[R]=!0)})):S(),u.push(b.name),x+=w}))})),!s.every((function(p){return p})))throw l=a.filter((function(p,y){return!s[y]})),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=o.reduce((function(p,y,x){return y&&p.push(x),p}),[]),d=[],c.forEach((function(p){n[p].paths.forEach((function(y){var x=r+(r.endsWith("/")?"":"/")+y;d.push(x)}))})),[4,e(d)];case 1:return f=m.sent(),h={},v=0,c.forEach((function(p){for(var y=n[p].paths.length,x=0,b=0;b<y;b++)x+=f[v+b].byteLength;for(var g=new ArrayBuffer(x),w=new Uint8Array(g),S=0,E=0;E<y;E++){var R=new Uint8Array(f[v+E]);w.set(R,S),S+=R.byteLength}i[p].forEach((function(A){var k=P_(g.slice(A.groupOffset,A.groupOffset+A.sizeBytes),[A.manifestEntry]);for(var M in k)h[M]=k[M]})),v+=y})),[2,h]}}))}))}}vr.registerSaveRouter((function(e){return Se().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Af.URL_SCHEME)?(function(t){return t===void 0&&(t="model"),new Af(t)})(e.slice(Af.URL_SCHEME.length)):null}));var q_=(function(){function e(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(U(typeof n.fetchFunc=="function",(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Se().platform.fetch,U(t!=null&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&U(t.length===2,(function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."})),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return e.prototype.save=function(t){return Ue(this,void 0,void 0,(function(){var n,r,a,o;return je(this,(function(i){switch(i.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((o=i.sent()).ok)return[2,{modelArtifactsInfo:Fu(t),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}}))}))},e.prototype.load=function(){return Ue(this,void 0,void 0,(function(){var t,n,r,a,o,i,s,u,l,c,d,f;return je(this,(function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,t.json()];case 3:return n=h.sent(),[3,5];case 4:throw h.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=n.modelTopology,o=n.weightsManifest,i=n.generatedBy,s=n.convertedBy,u=n.format,l=n.userDefinedMetadata,a==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:f=h.sent(),c=f[0],d=f[1],h.label=7;case 7:return[2,{modelTopology:a,weightSpecs:c,weightData:d,userDefinedMetadata:l,generatedBy:i,convertedBy:s,format:u}]}}))}))},e.prototype.loadWeights=function(t){return Ue(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c,d,f;return je(this,(function(h){switch(h.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=(function(v){var m=v.lastIndexOf("/"),p=v.lastIndexOf("?"),y=v.substring(0,m),x=p>m?v.substring(p):"";return[y+"/",x]})(n),a=r[0],o=r[1],i=this.weightPathPrefix||a,s=[],u=0,l=t;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return d=[],t.forEach((function(v){v.paths.forEach((function(m){d.push(i+m+o)}))})),[4,B_(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=h.sent(),[2,[s,vp(f)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e})();function Nh(e){return e.match(q_.URL_SCHEME_REGEX)!=null}var uy=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every((function(n){return Nh(n)})):Nh(e))?Oh(e,{onProgress:t}):null};function Oh(e,t){return new q_(e,t)}vr.registerSaveRouter(uy),vr.registerLoadRouter(uy);var If=(function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return Ue(this,void 0,void 0,(function(){return je(this,(function(t){return[2,this.modelArtifacts]}))}))},e})(),cO=(function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return Ue(this,void 0,void 0,(function(){return je(this,(function(n){return[2,this.saveHandler(t)]}))}))},e})(),L_=Object.freeze({browserFiles:function(e){return new lO(e)},browserHTTPRequest:function(e,t){return Oh(e,t)},concatenateArrayBuffers:vp,decodeWeights:P_,encodeWeights:function(e,t){return Ue(this,void 0,void 0,(function(){var n,r,a,o,i,s=this;return je(this,(function(u){switch(u.label){case 0:for(n=[],r=[],a=Array.isArray(e)?e.map((function(l){return l.name})):Object.keys(e),o=function(l){var c=a[l],d=Array.isArray(e)?e[l].tensor:e[c];if(d.dtype!=="float32"&&d.dtype!=="int32"&&d.dtype!=="bool"&&d.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+d.dtype);var f={name:c,shape:d.shape,dtype:d.dtype};if(d.dtype==="string"){var h=new Promise((function(v){return Ue(s,void 0,void 0,(function(){var m,p,y,x,b,g,w;return je(this,(function(S){switch(S.label){case 0:return[4,d.bytes()];case 1:for(m=S.sent(),p=m.reduce((function(E,R){return E+R.length}),0)+yc*m.length,y=new Uint8Array(p),x=0,b=0;b<m.length;b++)g=m[b],w=new Uint8Array(new Uint32Array([g.length]).buffer),y.set(w,x),x+=yc,y.set(g,x),x+=g.length;return v(y),[2]}}))}))}));r.push(h)}else r.push(d.data());t!=null&&(f.group=t),n.push(f)},i=0;i<a.length;++i)o(i);return[4,Promise.all(r)];case 1:return[2,{data:J3(u.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new If(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new If({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new If({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return vr.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:Fu,getSaveHandlers:function(e){return vr.getSaveHandlers(e)},http:Oh,isHTTPScheme:Nh,loadWeights:function(e,t,n,r){return t===void 0&&(t=""),Ue(this,void 0,void 0,(function(){return je(this,(function(a){return[2,sy((function(o){return B_(o,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return vr.registerLoadRouter(e)},registerSaveRouter:function(e){return vr.registerSaveRouter(e)},weightsLoaderFactory:sy,withSaveHandler:function(e){return new cO(e)},copyModel:function(e,t){return Ue(this,void 0,void 0,(function(){return je(this,(function(n){return[2,ny(e,t,!1)]}))}))},listModels:function(){return Ue(this,void 0,void 0,(function(){var e,t,n,r,a,o,i;return je(this,(function(s){switch(s.label){case 0:e=vo.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(a=r[n],[4,vo.getManager(a).listModels()]):[3,4];case 2:for(i in o=s.sent())t[a+Yi+i]=o[i];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return Ue(this,void 0,void 0,(function(){return je(this,(function(n){return[2,ny(e,t,!0)]}))}))},removeModel:function(e){return Ue(this,void 0,void 0,(function(){var t;return je(this,(function(n){return t=El(e),[2,vo.getManager(t.scheme).removeModel(t.path)]}))}))}}),Ei;te({confusionMatrix_:function(e,t,n){var r=z(e,"labels","confusionMatrix"),a=z(t,"predictions","confusionMatrix");U(n==null||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),U(r.rank===1,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),U(a.rank===1,(function(){return"Expected the rank of predictions to be 1, but got "+a.rank})),U(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."})),U(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var o=Th(r.asType("int32"),n),i=Th(a.asType("int32"),n);return o.transpose().matMul(i).asType("int32")}});var dO=te({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,o=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)o=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);i=!0}if(a&&a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(lw("FromPixels",ie.backendName)!=null)return ie.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,u,l=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=l[0],d=l[1];if(i?s=e.getContext("2d").getImageData(0,0,c,d).data:r||n?s=e.data:(o||a)&&(Ei==null&&(Ei=document.createElement("canvas").getContext("2d")),Ei.canvas.width=c,Ei.canvas.height=d,Ei.drawImage(e,0,0,c,d),s=Ei.getImageData(0,0,c,d).data),t===4)u=new Int32Array(s);else{var f=c*d;u=new Int32Array(f*t);for(var h=0;h<f;h++)for(var v=0;v<t;++v)u[h*t+v]=s[4*h+v]}return Hv(u,[d,c,t],"int32")}}),pp=Object.freeze({toPixels:function(e,t){return Ue(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c,d,f,h,v,m,p,y,x,b,g,w,S,E,R;return je(this,(function(A){switch(A.label){case 0:if(n=z(e,"img","toPixels"),e instanceof Yt||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),a=r[0],o=r[1],(i=n.rank===2?1:n.shape[2])>4||i===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,n.data()];case 1:return s=A.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=A.sent(),d=c[0],f=c[1],h=d[0],v=f[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(h<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+v+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+v+"].")}for(m=n.dtype==="float32"?255:1,p=new Uint8ClampedArray(o*a*4),y=0;y<a*o;++y)x=void 0,b=void 0,g=void 0,w=void 0,i===1?(x=s[y]*m,b=s[y]*m,g=s[y]*m,w=255):i===3?(x=s[3*y]*m,b=s[3*y+1]*m,g=s[3*y+2]*m,w=255):i===4&&(x=s[4*y]*m,b=s[4*y+1]*m,g=s[4*y+2]*m,w=s[4*y+3]*m),p[(S=4*y)+0]=Math.round(x),p[S+1]=Math.round(b),p[S+2]=Math.round(g),p[S+3]=Math.round(w);return t!=null&&(t.width=o,t.height=a,E=t.getContext("2d"),R=new ImageData(p,o,a),E.putImageData(R,0,0)),n!==e&&n.dispose(),[2,p]}}))}))},fromPixels:dO}),fO=(function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,n){return new t(n)},e})(),hO=(function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e})();function fi(e){U(e.className!=null,(function(){return"Class being registered does not have the static className property defined."})),U(typeof e.className=="string",(function(){return"className is required to be a string, but got type "+typeof e.className})),U(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),hO.register(e)}var hi=(function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Gr(t,e),t.prototype.minimize=function(n,r,a){r===void 0&&(r=!1);var o=this.computeGradients(n,a),i=o.value,s=o.grads;if(a!=null){var u=a.map((function(l){return{name:l.name,tensor:s[l.name]}}));this.applyGradients(u)}else this.applyGradients(s);return rr(s),r?i:(i.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(n,r){return CD(n,r)},t.prototype.dispose=function(){this.iterations_!=null&&rr(this.iterations_)},t.prototype.saveIterations=function(){return Ue(this,void 0,void 0,(function(){return je(this,(function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Be(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return Ue(this,void 0,void 0,(function(){return je(this,(function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(n){return Ue(this,void 0,void 0,(function(){return je(this,(function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(n){return Ue(this,void 0,void 0,(function(){var r;return je(this,(function(a){switch(a.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,n.slice(1)]}}))}))},t})(fO);Object.defineProperty(hi,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var vO=(function(e){function t(n,r,a){a===void 0&&(a=null);var o=e.call(this)||this;return o.learningRate=n,o.rho=r,o.epsilon=a,o.accumulatedGrads=[],o.accumulatedUpdates=[],a==null&&(o.epsilon=ie.backend.epsilon()),o}return Gr(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n)).forEach((function(a,o){var i=ie.registeredVariables[a];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:a+"/accum_grad",variable:Le((function(){return St(i).variable(!1)}))}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:a+"/accum_var",variable:Le((function(){return St(i).variable(!1)}))});var s=Array.isArray(n)?n[o].tensor:n[a];if(s!=null){var u=r.accumulatedGrads[o].variable,l=r.accumulatedUpdates[o].variable;Le((function(){var c=u.mul(r.rho).add(s.square().mul(1-r.rho)),d=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),f=l.mul(r.rho).add(d.square().mul(1-r.rho));u.assign(c),l.assign(f);var h=d.mul(-r.learningRate).add(i);i.assign(h)}))}})),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(rr(this.accumulatedGrads.map((function(n){return n.variable}))),rr(this.accumulatedUpdates.map((function(n){return n.variable}))))},t.prototype.getWeights=function(){return Ue(this,void 0,void 0,(function(){var n;return je(this,(function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map((function(a){return{name:a.originalName,tensor:a.variable}})))]}}))}))},t.prototype.setWeights=function(n){return Ue(this,void 0,void 0,(function(){var r;return je(this,(function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.accumulatedUpdates=n.slice(r,2*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},t.className="Adadelta",t})(hi);fi(vO);var pO=(function(e){function t(n,r){r===void 0&&(r=.1);var a=e.call(this)||this;return a.learningRate=n,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return Gr(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n)).forEach((function(a,o){var i=ie.registeredVariables[a];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:a+"/accumulator",variable:Le((function(){return ua(i.shape,r.initialAccumulatorValue).variable(!1)}))});var s=Array.isArray(n)?n[o].tensor:n[a];if(s!=null){var u=r.accumulatedGrads[o].variable;Le((function(){var l=u.add(s.square());u.assign(l);var c=s.div(l.add(ie.backend.epsilon()).sqrt()).mul(-r.learningRate).add(i);i.assign(c)}))}})),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&rr(this.accumulatedGrads.map((function(n){return n.variable})))},t.prototype.getWeights=function(){return Ue(this,void 0,void 0,(function(){return je(this,(function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},t.prototype.setWeights=function(n){return Ue(this,void 0,void 0,(function(){return je(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},t.className="Adagrad",t})(hi);fi(pO);var mO=(function(e){function t(n,r,a,o){o===void 0&&(o=null);var i=e.call(this)||this;return i.learningRate=n,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],Le((function(){i.accBeta1=Be(r).variable(),i.accBeta2=Be(a).variable()})),o==null&&(i.epsilon=ie.backend.epsilon()),i}return Gr(t,e),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map((function(o){return o.name})):Object.keys(n);Le((function(){var o=wn(1,r.accBeta1),i=wn(1,r.accBeta2);a.forEach((function(s,u){var l=ie.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:Le((function(){return St(l).variable(!1)}))}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:Le((function(){return St(l).variable(!1)}))});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var d=r.accumulatedFirstMoment[u].variable,f=r.accumulatedSecondMoment[u].variable,h=d.mul(r.beta1).add(c.mul(1-r.beta1)),v=f.mul(r.beta2).add(c.square().mul(1-r.beta2)),m=h.div(o),p=v.div(i);d.assign(h),f.assign(v);var y=m.div(p.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(y)}})),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&rr(this.accumulatedFirstMoment.map((function(n){return n.variable}))),this.accumulatedSecondMoment!=null&&rr(this.accumulatedSecondMoment.map((function(n){return n.variable})))},t.prototype.getWeights=function(){return Ue(this,void 0,void 0,(function(){var n;return je(this,(function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map((function(a){return{name:a.originalName,tensor:a.variable}})))]}}))}))},t.prototype.setWeights=function(n){return Ue(this,void 0,void 0,(function(){var r,a=this;return je(this,(function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),Le((function(){a.accBeta1.assign(mc(a.beta1,a.iterations_+1)),a.accBeta2.assign(mc(a.beta2,a.iterations_+1))})),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),this.accumulatedSecondMoment=n.slice(r,2*r).map((function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},t.className="Adam",t})(hi);fi(mO);var gO=(function(e){function t(n,r,a,o,i){o===void 0&&(o=null),i===void 0&&(i=0);var s=e.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=a,s.epsilon=o,s.decay=i,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],Le((function(){s.iteration=Be(0).variable(),s.accBeta1=Be(r).variable()})),o==null&&(s.epsilon=ie.backend.epsilon()),s}return Gr(t,e),t.prototype.applyGradients=function(n){var r=this,a=Array.isArray(n)?n.map((function(o){return o.name})):Object.keys(n);Le((function(){var o=wn(1,r.accBeta1),i=Nr(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach((function(s,u){var l=ie.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:St(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:St(l).variable(!1)});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var d=r.accumulatedFirstMoment[u].variable,f=r.accumulatedWeightedInfNorm[u].variable,h=d.mul(r.beta1).add(c.mul(1-r.beta1)),v=f.mul(r.beta2),m=c.abs(),p=v.maximum(m);d.assign(h),f.assign(p);var y=i.div(o).mul(h.div(p.add(r.epsilon))).add(l);l.assign(y)}})),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&rr(this.accumulatedFirstMoment.map((function(n){return n.variable}))),this.accumulatedWeightedInfNorm!=null&&rr(this.accumulatedWeightedInfNorm.map((function(n){return n.variable})))},t.prototype.getWeights=function(){return Ue(this,void 0,void 0,(function(){return je(this,(function(n){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(n){return Ue(this,void 0,void 0,(function(){return je(this,(function(r){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t.className="Adamax",t})(hi);fi(gO);var V_=(function(e){function t(n){var r=e.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Gr(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n)).forEach((function(a,o){var i=Array.isArray(n)?n[o].tensor:n[a];if(i!=null){var s=ie.registeredVariables[a];Le((function(){var u=r.c.mul(i).add(s);s.assign(u)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=BM(Be(-n))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Ue(this,void 0,void 0,(function(){return je(this,(function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}}))}))},t.prototype.setWeights=function(n){return Ue(this,void 0,void 0,(function(){return je(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(n,r){return new n(r.learningRate)},t.className="SGD",t})(hi);fi(V_);var yO=(function(e){function t(n,r,a){a===void 0&&(a=!1);var o=e.call(this,n)||this;return o.learningRate=n,o.momentum=r,o.useNesterov=a,o.accumulations=[],o.m=Be(o.momentum),o}return Gr(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n)).forEach((function(a,o){var i=ie.registeredVariables[a];r.accumulations[o]==null&&(r.accumulations[o]={originalName:a+"/momentum",variable:Le((function(){return St(i).variable(!1)}))});var s=r.accumulations[o].variable,u=Array.isArray(n)?n[o].tensor:n[a];u!=null&&Le((function(){var l,c=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(i):r.c.mul(c).add(i),s.assign(c),i.assign(l)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&rr(this.accumulations.map((function(n){return n.variable})))},t.prototype.setMomentum=function(n){this.momentum=n},t.prototype.getWeights=function(){return Ue(this,void 0,void 0,(function(){return je(this,(function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},t.prototype.setWeights=function(n){return Ue(this,void 0,void 0,(function(){return je(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},t.className="Momentum",t})(V_);fi(yO);var bO=(function(e){function t(n,r,a,o,i){r===void 0&&(r=.9),a===void 0&&(a=0),o===void 0&&(o=null),i===void 0&&(i=!1);var s=e.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=a,s.epsilon=o,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=i,o==null&&(s.epsilon=ie.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Gr(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map((function(a){return a.name})):Object.keys(n)).forEach((function(a,o){var i=ie.registeredVariables[a];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:a+"/rms",variable:Le((function(){return St(i).variable(!1)}))}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:a+"/momentum",variable:Le((function(){return St(i).variable(!1)}))}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:a+"/mg",variable:Le((function(){return St(i).variable(!1)}))});var s=Array.isArray(n)?n[o].tensor:n[a];if(s!=null){var u=r.accumulatedMeanSquares[o].variable,l=r.accumulatedMoments[o].variable;Le((function(){var c=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var d=r.accumulatedMeanGrads[o].variable,f=d.mul(r.decay).add(s.mul(1-r.decay)),h=l.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(f.square().add(r.epsilon)).sqrt()));u.assign(c),d.assign(f),l.assign(h);var v=i.sub(h);i.assign(v)}else{var m=u.mul(r.decay).add(s.square().mul(1-r.decay));h=l.mul(r.momentum).add(s.mul(r.learningRate).div(m.add(r.epsilon).sqrt())),u.assign(m),l.assign(h),v=i.sub(h),i.assign(v)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&rr(this.accumulatedMeanSquares.map((function(n){return n.variable}))),this.accumulatedMeanGrads!=null&&this.centered&&rr(this.accumulatedMeanGrads.map((function(n){return n.variable}))),this.accumulatedMoments!=null&&rr(this.accumulatedMoments.map((function(n){return n.variable})))},t.prototype.getWeights=function(){return Ue(this,void 0,void 0,(function(){var n;return je(this,(function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map((function(a){return{name:a.originalName,tensor:a.variable}})))]}}))}))},t.prototype.setWeights=function(n){return Ue(this,void 0,void 0,(function(){var r;return je(this,(function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.accumulatedMoments=n.slice(r,2*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t.className="RMSProp",t})(hi);fi(bO);Yt.prototype.squaredDifference=function(e){return t_(this,e)},be=U3;var Bh=function(e,t){return Bh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},Bh(e,t)};function st(e,t){Bh(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Vn=function(){return Vn=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Vn.apply(this,arguments)};function Ye(e,t,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function s(c){try{l(r.next(c))}catch(d){i(d)}}function u(c){try{l(r.throw(c))}catch(d){i(d)}}function l(c){c.done?o(c.value):a(c.value).then(s,u)}l((r=r.apply(e,[])).next())})}function Je(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(o=l[0]&2?a.return:l[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,l[1])).done)return o;switch(a=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],a=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Zs(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r}var es=(function(){function e(t,n){if(!Zo(t)||!Zo(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:n}));this._width=t,this._height=n}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e})();function id(e,t){return e instanceof Yt&&e.shape.length===t}function xO(e){return id(e,2)}function sd(e){return id(e,3)}function po(e){return id(e,4)}function wO(e){return e%1!==0}function ly(e){return e%2===0}function _O(e,t){t===void 0&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function cy(e){return e&&e.width&&e.height}function CO(e,t){var n=e.width,r=e.height,a=t/Math.max(r,n);return new es(Math.round(n*a),Math.round(r*a))}function mp(e){return e.reduce(function(t,n){return t.add(n)},new At(0,0)).div(new At(e.length,e.length))}function yu(e,t,n){return Array(e).fill(0).map(function(r,a){return t+a*n})}function Zo(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function dy(e){return Zo(e)&&0<=e&&e<=1}var At=(function(){function e(t,n){this._x=t,this._y=n}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e})(),go=(function(){function e(t,n){n===void 0&&(n=!0);var r=t||{},a=[r.left,r.top,r.right,r.bottom].every(Zo),o=[r.x,r.y,r.width,r.height].every(Zo);if(!o&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var i=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=i[0],u=i[1],l=i[2],c=i[3];e.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(Zo)},e.assertIsValidBox=function(t,n,r){if(r===void 0&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new At(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new At(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new At(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new At(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(i){return Math.round(i)}),n=t[0],r=t[1],a=t[2],o=t[3];return new e({x:n,y:r,width:a,height:o})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(i){return Math.floor(i)}),n=t[0],r=t[1],a=t[2],o=t[3];return new e({x:n,y:r,width:a,height:o})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,a=t.width,o=t.height,i=Math.abs(a-o);return a<o&&(n-=i/2,a+=i),o<a&&(r-=i/2,o+=i),new e({x:n,y:r,width:a,height:o})},e.prototype.rescale=function(t){var n=cy(t)?t.width:t,r=cy(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n],a=r[0],o=r[1],i=r[2],s=r[3];return new e({x:a,y:o,width:i,height:s})},e.prototype.clipAtImageBorders=function(t,n){var r=this,a=r.x,o=r.y,i=r.right,s=r.bottom,u=Math.max(a,0),l=Math.max(o,0),c=i-u,d=s-l,f=Math.min(c,t-u),h=Math.min(d,n-l);return new e({x:u,y:l,width:f,height:h}).floor()},e.prototype.shift=function(t,n){var r=this,a=r.width,o=r.height,i=this.x+t,s=this.y+n;return new e({x:i,y:s,width:a,height:o})},e.prototype.padAtBorders=function(t,n){var r=this.width+1,a=this.height+1,o=1,i=1,s=r,u=a,l=this.left,c=this.top,d=this.right,f=this.bottom;return d>n&&(s=-d+n+r,d=n),f>t&&(u=-f+t+a,f=t),l<1&&(u=2-l,l=1),c<1&&(u=2-c,c=1),{dy:i,edy:u,dx:o,edx:s,y:c,ey:f,x:l,ex:d,w:r,h:a}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e})(),ud=(function(e){st(t,e);function t(n,r,a,o,i){return i===void 0&&(i=!1),e.call(this,{left:n,top:r,right:a,bottom:o},i)||this}return t})(go),z_=(function(){function e(t,n,r,a,o){this._imageDims=new es(o.width,o.height),this._score=t,this._classScore=n,this._className=r,this._box=new go(a).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new go(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e})(),pa=(function(e){st(t,e);function t(n,r,a){return e.call(this,n,n,"",r,a)||this}return t.prototype.forSize=function(n,r){var a=e.prototype.forSize.call(this,n,r),o=a.score,i=a.relativeBox,s=a.imageDims;return new t(o,i,s)},t})(z_);function SO(e,t,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),a=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),o=r*a;return n?o/(e.area+t.area-o):o/Math.min(e.area,t.area)}function kO(e){var t=e.map(function(s){return s.x}),n=e.map(function(s){return s.y}),r=t.reduce(function(s,u){return u<s?u:s},1/0),a=n.reduce(function(s,u){return u<s?u:s},1/0),o=t.reduce(function(s,u){return s<u?u:s},0),i=n.reduce(function(s,u){return s<u?u:s},0);return new ud(r,a,o,i)}function bu(e,t,n,r){r===void 0&&(r=!0);for(var a=t.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),o=[],i=function(){var s=a.pop();o.push(s);for(var u=a,l=[],c=0;c<u.length;c++){var d=u[c],f=e[s],h=e[d];l.push(SO(f,h,r))}a=a.filter(function(v,m){return l[m]<=n})};a.length>0;)i();return o}function Nu(e,t){return Le(function(){var n=t[0],r=t[1],a=t[2],o=ua(Zs(e.shape.slice(0,3),[1]),n),i=ua(Zs(e.shape.slice(0,3),[1]),r),s=ua(Zs(e.shape.slice(0,3),[1]),a),u=yn([o,i,s],3);return wn(e,u)})}function EO(e,t){return t===void 0&&(t=!1),Le(function(){var n=e.shape.slice(1),r=n[0],a=n[1];if(r===a)return e;var o=Math.abs(r-a),i=Math.round(o*(t?.5:1)),s=r>a?2:1,u=function(h){var v=e.shape.slice();return v[s]=h,ua(v,0)},l=u(i),c=o-l.shape[s],d=t&&c?u(c):null,f=[d,e,l].filter(function(h){return!!h}).map(function(h){return h.toFloat()});return yn(f,s)})}function Mf(e){return 1/(1+Math.exp(-e))}var gp=(function(e){st(t,e);function t(n,r,a,o,i){return i===void 0&&(i=!1),e.call(this,{x:n,y:r,width:a,height:o},i)||this}return t})(go),TO=.5,RO=.43,AO=.45,bc=(function(){function e(t,n,r){r===void 0&&(r=new At(0,0));var a=n.width,o=n.height;this._imgDims=new es(a,o),this._shift=r,this._positions=t.map(function(i){return i.mul(new At(a,o)).add(r)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new At(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(n){return n.sub(t._shift).div(new At(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new this.constructor(this.relativePositions,{width:t,height:n})},e.prototype.shiftBy=function(t,n){return new this.constructor(this.relativePositions,this._imgDims,new At(t,n))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,n){if(n===void 0&&(n={}),t){var r=t instanceof pa?t.box.floor():new go(t);return this.shiftBy(r.x,r.y).align(null,n)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),o=a.useDlibAlignment,i=a.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(i)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),n=t[0],r=t[1],a=t[2],o=function(d){return a.sub(d).magnitude()},i=(o(n)+o(r))/2,s=Math.floor(i/AO),u=mp(t),l=Math.floor(Math.max(0,u.x-TO*s)),c=Math.floor(Math.max(0,u.y-RO*s));return new gp(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))},e.prototype.alignMinBbox=function(t){var n=kO(this.positions);return n.pad(n.width*t,n.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e})(),IO=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],mp([n[3],n[4]])]},t})(bc),MO=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(mp)},t})(bc),fy=(function(){function e(t,n){this._label=t,this._distance=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+_O(this.distance)+")":"")},e})(),hy=(function(e){st(t,e);function t(n,r){var a=e.call(this,n)||this;return a._label=r,a}return t.assertIsValidLabeledBox=function(n,r){if(go.assertIsValidBox(n,r),!Zo(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t})(go),qs=(function(){function e(t,n){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(r){return new Float32Array(r)});return new e(t.label,n)},e})();(function(e){st(t,e);function t(n,r,a,o){var i=e.call(this,n,r)||this;return i._score=a,i._classScore=o,i}return t.assertIsValidPredictedBox=function(n,r){if(hy.assertIsValidLabeledBox(n,r),!dy(n.score)||!dy(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(hy);function DO(e){return e.detection instanceof pa}function yp(e,t){var n={detection:t};return Object.assign({},e,n)}function $_(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function H_(e){var t="";if(!e)try{e=require("fs")}catch(r){t=r.toString()}var n=e?function(r){return new Promise(function(a,o){e.readFile(r,function(i,s){return i?o(i):a(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:n}}function W_(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=H_();return Vn({Canvas:e||(function(){function i(){}return i})(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||(function(){function i(){}return i})(),Image:t||(function(){function i(){}return i})(),ImageData:global.ImageData||(function(){function i(){}return i})(),Video:global.HTMLVideoElement||(function(){function i(){}return i})(),createCanvasElement:n,createImageElement:r,fetch:a},o)}function U_(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function j_(){return typeof global=="object"&&typeof require=="function"&&typeof EC<"u"&&typeof process<"u"&&!!process.version}var hn;function PO(){if(!hn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return hn}function qh(e){hn=e}function bp(){U_()&&qh($_()),j_()&&qh(W_())}function FO(e){if(hn||bp(),!hn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=t===void 0?hn.Canvas:t,r=e.Image,a=r===void 0?hn.Image:r;hn.Canvas=n,hn.Image=a,hn.createCanvasElement=e.createCanvasElement||(function(){return new n}),hn.createImageElement=e.createImageElement||(function(){return new a}),hn.ImageData=e.ImageData||hn.ImageData,hn.Video=e.Video||hn.Video,hn.fetch=e.fetch||hn.fetch,hn.readFile=e.readFile||hn.readFile}var Xn={getEnv:PO,setEnv:qh,initialize:bp,createBrowserEnv:$_,createFileSystem:H_,createNodejsEnv:W_,monkeyPatch:FO,isBrowser:U_,isNodejs:j_};bp();function G_(e){return!Xn.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function ai(e){var t=Xn.getEnv(),n=t.Canvas,r=t.CanvasRenderingContext2D;if(e instanceof r)return e;var a=G_(e);if(!(a instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=a.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var vy;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(vy||(vy={}));function K_(e){var t=Xn.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function NO(e){return new Promise(function(t,n){if(e instanceof Xn.getEnv().Canvas||K_(e))return t();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",a),t(o))}function a(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",a),n(o))}e.addEventListener("load",r),e.addEventListener("error",a)})}function X_(e){var t=Xn.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new es(e.naturalWidth,e.naturalHeight):e instanceof r?new es(e.videoWidth,e.videoHeight):new es(e.width,e.height)}function ld(e){var t=e.width,n=e.height,r=Xn.getEnv().createCanvasElement,a=r();return a.width=t,a.height=n,a}function xp(e,t){var n=Xn.getEnv().ImageData;if(!(e instanceof n)&&!K_(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=X_(e),a=r.width,o=r.height,i=ld({width:a,height:o});return e instanceof n?ai(i).putImageData(e,0,0):ai(i).drawImage(e,0,0,a,o),i}function OO(e,t){return Ye(this,void 0,void 0,function(){var n,r,a,o,i,s;return Je(this,function(u){switch(u.label){case 0:return n=Xn.getEnv().createCanvasElement(),r=e.shape.slice(po(e)?1:0),a=r[0],o=r[1],i=r[2],s=Le(function(){return e.as3D(a,o,i).toInt()}),[4,pp.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}})})}function py(e){var t=Xn.getEnv(),n=t.Image,r=t.Canvas,a=t.Video;return e instanceof n||e instanceof r||e instanceof a}function BO(e,t,n){n===void 0&&(n=!1);var r=Xn.getEnv(),a=r.Image,o=r.Canvas;if(!(e instanceof a||e instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=X_(e),s=t/Math.max(i.height,i.width),u=s*i.width,l=s*i.height,c=ld({width:t,height:t}),d=e instanceof o?e:xp(e),f=Math.abs(u-l)/2,h=n&&u<l?f:0,v=n&&l<u?f:0;return ai(c).drawImage(d,h,v,u,l),c}var xc=(function(){function e(t,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=n,this._batchSize=t.length,t.forEach(function(a,o){if(sd(a)){r._imageTensors[o]=a,r._inputDimensions[o]=a.shape;return}if(po(a)){var i=a.shape[0];if(i!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+i+" passed, but not supported in input array");r._imageTensors[o]=a,r._inputDimensions[o]=a.shape.slice(1);return}var s=a instanceof Xn.getEnv().Canvas?a:xp(a);r._canvases[o]=s,r._inputDimensions[o]=[s.height,s.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return yu(this.batchSize,0,1).map(function(n,r){return t.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(t),r=this.getInputHeight(t);return CO({width:n,height:r},this.inputSize)},e.prototype.toBatchTensor=function(t,n){var r=this;return n===void 0&&(n=!0),this._inputSize=t,Le(function(){var a=yu(r.batchSize,0,1).map(function(i){var s=r.getInput(i);if(s instanceof Yt){var u=po(s)?s:s.expandDims();return u=EO(u,n),(u.shape[1]!==t||u.shape[2]!==t)&&(u=lp.resizeBilinear(u,[t,t])),u.as3D(t,t,3)}if(s instanceof Xn.getEnv().Canvas)return pp.fromPixels(BO(s,t,n));throw new Error("toBatchTensor - at batchIdx "+i+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),o=mr(a.map(function(i){return i.toFloat()})).as4D(r.batchSize,t,t,3);return o})},e})();function Rn(e){return Ye(this,void 0,void 0,function(){var t,n,r;return Je(this,function(a){switch(a.label){case 0:if(e instanceof xc)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return n=function(o){return Array.isArray(e)?" at input index "+o+":":""},r=t.map(G_),r.forEach(function(o,i){if(!py(o)&&!sd(o)&&!po(o))throw typeof t[i]=="string"?new Error("toNetInput -"+n(i)+" string passed, but could not resolve HTMLElement for element id "+t[i]):new Error("toNetInput -"+n(i)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(po(o)){var s=o.shape[0];if(s!==1)throw new Error("toNetInput -"+n(i)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return py(o)&&NO(o)}))];case 1:return a.sent(),[2,new xc(r,Array.isArray(e))]}})})}function wp(e,t){return Ye(this,void 0,void 0,function(){var n,r,a,o,i,s,u;return Je(this,function(l){switch(l.label){case 0:return n=Xn.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,Rn(e)];case 1:if(a=l.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=a.getInput(0),o instanceof n?(i=o,[3,4]):[3,2];case 2:return[4,OO(o)];case 3:i=l.sent(),l.label=4;case 4:r=i,l.label=5;case 5:return s=ai(r),u=t.map(function(c){return c instanceof pa?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(c){var d=c.x,f=c.y,h=c.width,v=c.height,m=ld({width:h,height:v});return ai(m).putImageData(s.getImageData(d,f,h,v),0,0),m})]}})})}function _p(e,t){return Ye(this,void 0,void 0,function(){return Je(this,function(n){if(!sd(e)&&!po(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(po(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Le(function(){var r=e.shape.slice(po(e)?1:0),a=r[0],o=r[1],i=r[2],s=t.map(function(l){return l instanceof pa?l.forSize(o,a).box:l}).map(function(l){return l.clipAtImageBorders(o,a)}),u=s.map(function(l){var c=l.x,d=l.y,f=l.width,h=l.height;return __(e.as3D(a,o,i),[d,c,0],[h,f,i])});return u})]})})}function qO(e,t){return Ye(this,void 0,void 0,function(){var n,r;return Je(this,function(a){switch(a.label){case 0:return n=Xn.getEnv().fetch,[4,n(e,t)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function LO(e){return Ye(this,void 0,void 0,function(){return Je(this,function(t){switch(t.label){case 0:return[4,qO(e)];case 1:return[2,t.sent().json()]}})})}function Q_(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var a=e.split("/").filter(function(s){return s}),o=e.endsWith(".json")?a[a.length-1]:n,i=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return i=e.startsWith("/")?"/"+i:i,{modelBaseUri:i,manifestUri:i==="/"?"/"+o:i+"/"+o}}function VO(e,t){return Ye(this,void 0,void 0,function(){var n,r,a,o;return Je(this,function(i){switch(i.label){case 0:return n=Q_(e,t),r=n.manifestUri,a=n.modelBaseUri,[4,LO(r)];case 1:return o=i.sent(),[2,L_.loadWeights(o,a)]}})})}var Ha=(function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var n=this.traversePropertyPath(t),r=n.obj,a=n.objProp;return r[a]},e.prototype.reassignParamFromPath=function(t,n){var r=this.traversePropertyPath(t),a=r.obj,o=r.objProp;a[o].dispose(),a[o]=n},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:t.getParamFromPath(r)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof ls})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof ls)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(n){var r=n.path,a=n.tensor;t.reassignParamFromPath(r,a.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(n){var r=n.path,a=n.tensor,o=Pn(a.dataSync());a.dispose(),t.reassignParamFromPath(r,o)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(n){if(t&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var n=t.tensor;return Array.from(n.dataSync())}).reduce(function(t,n){return t.concat(n)}))},e.prototype.load=function(t){return Ye(this,void 0,void 0,function(){return Je(this,function(n){switch(n.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return n.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return Ye(this,void 0,void 0,function(){var n;return Je(this,function(r){switch(r.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,VO(t,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},e.prototype.loadFromDisk=function(t){return Ye(this,void 0,void 0,function(){var n,r,a,o,i,s,u,l,c,d;return Je(this,function(f){switch(f.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=Xn.getEnv().readFile,r=Q_(t,this.getDefaultModelName()),a=r.manifestUri,o=r.modelBaseUri,i=function(h){return Promise.all(h.map(function(v){return n(v).then(function(m){return m.buffer})}))},s=L_.weightsLoaderFactory(i),c=(l=JSON).parse,[4,n(a)];case 1:return u=c.apply(l,[f.sent().toString()]),[4,s(u,o)];case 2:return d=f.sent(),this.loadFromWeightMap(d),[2]}})})},e.prototype.loadFromWeightMap=function(t){var n=this.extractParamsFromWeigthMap(t),r=n.paramMappings,a=n.params;this._paramMappings=r,this._params=a},e.prototype.extractWeights=function(t){var n=this.extractParams(t),r=n.paramMappings,a=n.params;this._paramMappings=r,this._params=a},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=t.split("/").reduce(function(o,i){if(!o.nextObj.hasOwnProperty(i))throw new Error("traversePropertyPath - object does not have property "+i+", for path "+t);return{obj:o.nextObj,objProp:i,nextObj:o.nextObj[i]}},{nextObj:this.params}),r=n.obj,a=n.objProp;if(!r||!a||!(r[a]instanceof Yt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:r,objProp:a}},e})();function pr(e,t,n){return Le(function(){var r=ap(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=gt(r,t.bias),r})}function Df(e,t,n){return n===void 0&&(n=!1),Le(function(){var r=Zt(n?gt(Dr(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):pr(e,t.conv0,[2,2])),a=pr(r,t.conv1,[1,1]),o=Zt(gt(r,a)),i=pr(o,t.conv2,[1,1]);return Zt(gt(r,gt(a,i)))})}function hl(e,t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),Le(function(){var a=Zt(n?gt(Dr(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):pr(e,t.conv0,r?[2,2]:[1,1])),o=pr(a,t.conv1,[1,1]),i=Zt(gt(a,o)),s=pr(i,t.conv2,[1,1]),u=Zt(gt(a,gt(o,s))),l=pr(u,t.conv3,[1,1]);return Zt(gt(a,gt(o,gt(s,l))))})}function zr(e,t,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),Le(function(){var a=gt(Dr(e,t.filters,[1,1],n),t.bias);return r?Zt(a):a})}function Wa(e,t){Object.keys(e).forEach(function(n){t.some(function(r){return r.originalPath===n})||e[n].dispose()})}function cd(e,t){return function(n,r,a,o){var i=tr(e(n*r*a*a),[a,a,n,r]),s=dn(e(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:i,bias:s}}}function Cp(e,t){return function(n,r,a){var o=ho(e(n*r),[n,r]),i=dn(e(r));return t.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:o,bias:i}}}var Y_=(function(){function e(t,n,r){this.depthwise_filter=t,this.pointwise_filter=n,this.bias=r}return e})();function Sp(e,t){return function(n,r,a){var o=tr(e(9*n),[3,3,n,1]),i=tr(e(n*r),[1,1,n,r]),s=dn(e(r));return t.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new Y_(o,i,s)}}function kp(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),a=e(t+"/bias",1);return new Y_(n,r,a)}}function So(e,t){return function(n,r,a){var o=e[n];if(!id(o,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+o);return t.push({originalPath:n,paramPath:a||n}),o}}function Ua(e){var t=e;function n(a){var o=t.slice(0,a);return t=t.slice(a),o}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function J_(e,t){var n=cd(e,t),r=Sp(e,t);function a(i,s,u,l){l===void 0&&(l=!1);var c=l?n(i,s,3,u+"/conv0"):r(i,s,u+"/conv0"),d=r(s,s,u+"/conv1"),f=r(s,s,u+"/conv2");return{conv0:c,conv1:d,conv2:f}}function o(i,s,u,l){l===void 0&&(l=!1);var c=a(i,s,u,l),d=c.conv0,f=c.conv1,h=c.conv2,v=r(s,s,u+"/conv3");return{conv0:d,conv1:f,conv2:h,conv3:v}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:o}}function zO(e){var t=[],n=Ua(e),r=n.extractWeights,a=n.getRemainingWeights,o=J_(r,t).extractDenseBlock4Params,i=o(3,32,"dense0",!0),s=o(32,64,"dense1"),u=o(64,128,"dense2"),l=o(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:i,dense1:s,dense2:u,dense3:l}}}function Z_(e){return function(t){var n=e(t+"/filters",4),r=e(t+"/bias",1);return{filters:n,bias:r}}}function eC(e,t){var n=So(e,t),r=Z_(n),a=kp(n);function o(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):a(s+"/conv0"),c=a(s+"/conv1"),d=a(s+"/conv2");return{conv0:l,conv1:c,conv2:d}}function i(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):a(s+"/conv0"),c=a(s+"/conv1"),d=a(s+"/conv2"),f=a(s+"/conv3");return{conv0:l,conv1:c,conv2:d,conv3:f}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:i}}function $O(e){var t=[],n=eC(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return Wa(e,t),{params:r,paramMappings:t}}var tC=(function(e){st(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return Le(function(){var a=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],i=Nu(a,o).div(Be(255)),s=hl(i,r.dense0,!0);return s=hl(s,r.dense1),s=hl(s,r.dense2),s=hl(s,r.dense3),s=Pu(s,[7,7],[2,2],"valid"),s})},t.prototype.forward=function(n){return Ye(this,void 0,void 0,function(){var r;return Je(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Rn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(n){return $O(n)},t.prototype.extractParams=function(n){return zO(n)},t})(Ha);function aa(e,t){return Le(function(){return gt(rd(e,t.weights),t.bias)})}function HO(e,t,n){var r=[],a=Ua(e),o=a.extractWeights,i=a.getRemainingWeights,s=Cp(o,r),u=s(t,n,"fc");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:u}}}function WO(e){var t=[],n=So(e,t);function r(o){var i=n(o+"/weights",2),s=n(o+"/bias",1);return{weights:i,bias:s}}var a={fc:r("fc")};return Wa(e,t),{params:a,paramMappings:t}}function nC(e){var t={},n={};return Object.keys(e).forEach(function(r){var a=r.startsWith("fc")?n:t;a[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var rC=(function(e){st(t,e);function t(n,r){var a=e.call(this,n)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Le(function(){var o=n instanceof xc?r.faceFeatureExtractor.forwardInput(n):n;return aa(o.as2D(o.shape[0],-1),a.fc)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),a=r.params,o=r.paramMappings;this._params=a,this._paramMappings=o},t.prototype.extractClassifierParams=function(n){return HO(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(n){var r=nC(n),a=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),WO(o)},t.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),o=a*r+a,i=n.slice(0,n.length-o),s=n.slice(n.length-o);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(s)},t})(Ha),my=["neutral","happy","sad","angry","fearful","disgusted","surprised"],UO=(function(){function e(t){var n=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);my.forEach(function(r,a){n[r]=t[a]})}return e.prototype.asSortedArray=function(){var t=this;return my.map(function(n){return{expression:n,probability:t[n]}}).sort(function(n,r){return r.probability-n.probability})},e})(),jO=(function(e){st(t,e);function t(n){return n===void 0&&(n=new tC),e.call(this,"FaceExpressionNet",n)||this}return t.prototype.forwardInput=function(n){var r=this;return Le(function(){return za(r.runNet(n))})},t.prototype.forward=function(n){return Ye(this,void 0,void 0,function(){var r;return Je(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Rn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.predictExpressions=function(n){return Ye(this,void 0,void 0,function(){var r,a,o,i,s=this;return Je(this,function(u){switch(u.label){case 0:return[4,Rn(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return a=u.sent(),[4,Promise.all(bn(a).map(function(l){return Ye(s,void 0,void 0,function(){var c;return Je(this,function(d){switch(d.label){case 0:return[4,l.data()];case 1:return c=d.sent(),l.dispose(),[2,c]}})})}))];case 3:return o=u.sent(),a.dispose(),i=o.map(function(l){return new UO(l)}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t})(rC);function aC(e,t){var n={expressions:t};return Object.assign({},e,n)}function GO(e){return DO(e)&&e.landmarks instanceof bc&&e.unshiftedLandmarks instanceof bc&&e.alignedRect instanceof pa}function Ep(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),a=r.align(),o=e.detection.imageDims,i=new pa(e.detection.score,a.rescale(o.reverse()),o),s={landmarks:r,unshiftedLandmarks:t,alignedRect:i};return Object.assign({},e,s)}function KO(e,t){var n=cd(e,t),r=Sp(e,t);function a(i,s,u){var l=r(i,s,u+"/separable_conv0"),c=r(s,s,u+"/separable_conv1"),d=n(i,s,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:d}}function o(i,s){var u=r(i,i,s+"/separable_conv0"),l=r(i,i,s+"/separable_conv1"),c=r(i,i,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:o}}function XO(e,t){var n=[],r=Ua(e),a=r.extractWeights,o=r.getRemainingWeights,i=KO(a,n),s=i.extractConvParams,u=i.extractSeparableConvParams,l=i.extractReductionBlockParams,c=i.extractMainBlockParams,d=s(3,32,3,"entry_flow/conv_in"),f=l(32,64,"entry_flow/reduction_block_0"),h=l(64,128,"entry_flow/reduction_block_1"),v={conv_in:d,reduction_block_0:f,reduction_block_1:h},m={};yu(t,0,1).forEach(function(b){m["main_block_"+b]=c(128,"middle_flow/main_block_"+b)});var p=l(128,256,"exit_flow/reduction_block"),y=u(256,512,"exit_flow/separable_conv"),x={reduction_block:p,separable_conv:y};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{entry_flow:v,middle_flow:m,exit_flow:x}}}function QO(e,t){var n=So(e,t),r=Z_(n),a=kp(n);function o(s){var u=a(s+"/separable_conv0"),l=a(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:c}}function i(s){var u=a(s+"/separable_conv0"),l=a(s+"/separable_conv1"),c=a(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:o,extractMainBlockParams:i}}function YO(e,t){var n=[],r=QO(e,n),a=r.extractConvParams,o=r.extractSeparableConvParams,i=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=a("entry_flow/conv_in"),l=i("entry_flow/reduction_block_0"),c=i("entry_flow/reduction_block_1"),d={conv_in:u,reduction_block_0:l,reduction_block_1:c},f={};yu(t,0,1).forEach(function(p){f["main_block_"+p]=s("middle_flow/main_block_"+p)});var h=i("exit_flow/reduction_block"),v=o("exit_flow/separable_conv"),m={reduction_block:h,separable_conv:v};return Wa(e,n),{params:{entry_flow:d,middle_flow:f,exit_flow:m},paramMappings:n}}function oC(e,t,n){return gt(Dr(e,t.filters,n,"same"),t.bias)}function Pf(e,t,n){n===void 0&&(n=!0);var r=n?Zt(e):e;return r=pr(r,t.separable_conv0,[1,1]),r=pr(Zt(r),t.separable_conv1,[1,1]),r=Sn(r,[3,3],[2,2],"same"),r=gt(r,oC(e,t.expansion_conv,[2,2])),r}function JO(e,t){var n=pr(Zt(e),t.separable_conv0,[1,1]);return n=pr(Zt(n),t.separable_conv1,[1,1]),n=pr(Zt(n),t.separable_conv2,[1,1]),n=gt(n,e),n}var ZO=(function(e){st(t,e);function t(n){var r=e.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return t.prototype.forwardInput=function(n){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return Le(function(){var o=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],s=Nu(o,i).div(Be(256)),u=Zt(oC(s,a.entry_flow.conv_in,[2,2]));return u=Pf(u,a.entry_flow.reduction_block_0,!1),u=Pf(u,a.entry_flow.reduction_block_1),yu(r._numMainBlocks,0,1).forEach(function(l){u=JO(u,a.middle_flow["main_block_"+l])}),u=Pf(u,a.exit_flow.reduction_block),u=Zt(pr(u,a.exit_flow.separable_conv,[1,1])),u})},t.prototype.forward=function(n){return Ye(this,void 0,void 0,function(){var r;return Je(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Rn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(n){return YO(n,this._numMainBlocks)},t.prototype.extractParams=function(n){return XO(n,this._numMainBlocks)},t})(Ha);function eB(e){var t=[],n=Ua(e),r=n.extractWeights,a=n.getRemainingWeights,o=Cp(r,t),i=o(512,1,"fc/age"),s=o(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{fc:{age:i,gender:s}}}}function tB(e){var t=[],n=So(e,t);function r(o){var i=n(o+"/weights",2),s=n(o+"/bias",1);return{weights:i,bias:s}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Wa(e,t),{params:a,paramMappings:t}}var wc;(function(e){e.FEMALE="female",e.MALE="male"})(wc||(wc={}));var nB=(function(e){st(t,e);function t(n){n===void 0&&(n=new ZO(2));var r=e.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Le(function(){var o=n instanceof xc?r.faceFeatureExtractor.forwardInput(n):n,i=Pu(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),s=aa(i,a.fc.age).as1D(),u=aa(i,a.fc.gender);return{age:s,gender:u}})},t.prototype.forwardInput=function(n){var r=this;return Le(function(){var a=r.runNet(n),o=a.age,i=a.gender;return{age:o,gender:za(i)}})},t.prototype.forward=function(n){return Ye(this,void 0,void 0,function(){var r;return Je(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Rn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.predictAgeAndGender=function(n){return Ye(this,void 0,void 0,function(){var r,a,o,i,s,u,l=this;return Je(this,function(c){switch(c.label){case 0:return[4,Rn(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return a=c.sent(),o=bn(a.age),i=bn(a.gender),s=o.map(function(d,f){return{ageTensor:d,genderTensor:i[f]}}),[4,Promise.all(s.map(function(d){var f=d.ageTensor,h=d.genderTensor;return Ye(l,void 0,void 0,function(){var v,m,p,y,x;return Je(this,function(b){switch(b.label){case 0:return[4,f.data()];case 1:return v=b.sent()[0],[4,h.data()];case 2:return m=b.sent()[0],p=m>.5,y=p?wc.MALE:wc.FEMALE,x=p?m:1-m,f.dispose(),h.dispose(),[2,{age:v,gender:y,genderProbability:x}]}})})}))];case 3:return u=c.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),a=r.params,o=r.paramMappings;this._params=a,this._paramMappings=o},t.prototype.extractClassifierParams=function(n){return eB(n)},t.prototype.extractParamsFromWeigthMap=function(n){var r=nC(n),a=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),tB(o)},t.prototype.extractParams=function(n){var r=1539,a=n.slice(0,n.length-r),o=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(o)},t})(Ha),iC=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(n,r,a){var o=a.map(function(s){var u=s.width,l=s.height,c=r/Math.max(l,u);return{width:u*c,height:l*c}}),i=o.length;return Le(function(){var s=function(f,h){return mr([ua([68],f),ua([68],h)],1).as2D(1,136).as1D()},u=function(f,h){var v=o[f],m=v.width,p=v.height;return h(m,p)?Math.abs(m-p)/2:0},l=function(f){return u(f,function(h,v){return h<v})},c=function(f){return u(f,function(h,v){return v<h})},d=n.mul(ua([i,136],r)).sub(mr(Array.from(Array(i),function(f,h){return s(l(h),c(h))}))).div(mr(Array.from(Array(i),function(f,h){return s(o[h].width,o[h].height)})));return d})},t.prototype.forwardInput=function(n){var r=this;return Le(function(){var a=r.runNet(n);return r.postProcess(a,n.inputSize,n.inputDimensions.map(function(o){var i=o[0],s=o[1];return{height:i,width:s}}))})},t.prototype.forward=function(n){return Ye(this,void 0,void 0,function(){var r;return Je(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Rn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.detectLandmarks=function(n){return Ye(this,void 0,void 0,function(){var r,a,o,i=this;return Je(this,function(s){switch(s.label){case 0:return[4,Rn(n)];case 1:return r=s.sent(),a=Le(function(){return bn(i.forwardInput(r))}),[4,Promise.all(a.map(function(u,l){return Ye(i,void 0,void 0,function(){var c,d,f,h,v;return Je(this,function(m){switch(m.label){case 0:return f=(d=Array).from,[4,u.data()];case 1:return c=f.apply(d,[m.sent()]),h=c.filter(function(p,y){return ly(y)}),v=c.filter(function(p,y){return!ly(y)}),[2,new MO(Array(68).fill(0).map(function(p,y){return new At(h[y],v[y])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return o=s.sent(),a.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t})(rC),sC=(function(e){st(t,e);function t(n){return n===void 0&&(n=new tC),e.call(this,"FaceLandmark68Net",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t})(iC);function rB(e){var t=[],n=eC(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return Wa(e,t),{params:r,paramMappings:t}}function aB(e){var t=[],n=Ua(e),r=n.extractWeights,a=n.getRemainingWeights,o=J_(r,t).extractDenseBlock3Params,i=o(3,32,"dense0",!0),s=o(32,64,"dense1"),u=o(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:i,dense1:s,dense2:u}}}var oB=(function(e){st(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Le(function(){var a=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],i=Nu(a,o).div(Be(255)),s=Df(i,r.dense0,!0);return s=Df(s,r.dense1),s=Df(s,r.dense2),s=Pu(s,[14,14],[2,2],"valid"),s})},t.prototype.forward=function(n){return Ye(this,void 0,void 0,function(){var r;return Je(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Rn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(n){return rB(n)},t.prototype.extractParams=function(n){return aB(n)},t})(Ha),iB=(function(e){st(t,e);function t(n){return n===void 0&&(n=new oB),e.call(this,"FaceLandmark68TinyNet",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t})(iC);(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(sC);function sB(e,t){return gt(jn(e,t.weights),t.biases)}function Tp(e,t,n,r,a){a===void 0&&(a="same");var o=t.conv,i=o.filters,s=o.bias,u=Dr(e,i,n,a);return u=gt(u,s),u=sB(u,t.scale),r?Zt(u):u}function uB(e,t){return Tp(e,t,[1,1],!0)}function uC(e,t){return Tp(e,t,[1,1],!1)}function lC(e,t){return Tp(e,t,[2,2],!0,"valid")}function lB(e,t){function n(s,u,l){var c=e(s),d=c.length/(u*l*l);if(wO(d))throw new Error("depth has to be an integer: "+d+", weights.length: "+c.length+", numFilters: "+u+", filterSize: "+l);return Le(function(){return mo(tr(c,[u,d,l,l]),[2,3,1,0])})}function r(s,u,l,c){var d=n(s,u,l),f=dn(e(u));return t.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:d,bias:f}}function a(s,u){var l=dn(e(s)),c=dn(e(s));return t.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:c}}function o(s,u,l,c){var d=r(s,u,l,c+"/conv"),f=a(u,c+"/scale");return{conv:d,scale:f}}function i(s,u,l,c,d){d===void 0&&(d=!1);var f=o((d?.5:1)*s,u,l,c+"/conv1"),h=o(s,u,l,c+"/conv2");return{conv1:f,conv2:h}}return{extractConvLayerParams:o,extractResidualLayerParams:i}}function cB(e){var t=Ua(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],o=lB(n,a),i=o.extractConvLayerParams,s=o.extractResidualLayerParams,u=i(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),d=s(9216,32,3,"conv32_3"),f=s(36864,64,3,"conv64_down",!0),h=s(36864,64,3,"conv64_1"),v=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),p=s(147456,128,3,"conv128_down",!0),y=s(147456,128,3,"conv128_1"),x=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),g=s(589824,256,3,"conv256_1"),w=s(589824,256,3,"conv256_2"),S=s(589824,256,3,"conv256_down_out"),E=Le(function(){return mo(ho(n(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var R={conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:d,conv64_down:f,conv64_1:h,conv64_2:v,conv64_3:m,conv128_down:p,conv128_1:y,conv128_2:x,conv256_down:b,conv256_1:g,conv256_2:w,conv256_down_out:S,fc:E};return{params:R,paramMappings:a}}function dB(e,t){var n=So(e,t);function r(i){var s=n(i+"/scale/weights",1),u=n(i+"/scale/biases",1);return{weights:s,biases:u}}function a(i){var s=n(i+"/conv/filters",4),u=n(i+"/conv/bias",1),l=r(i);return{conv:{filters:s,bias:u},scale:l}}function o(i){return{conv1:a(i+"/conv1"),conv2:a(i+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:o}}function fB(e){var t=[],n=dB(e,t),r=n.extractConvLayerParams,a=n.extractResidualLayerParams,o=r("conv32_down"),i=a("conv32_1"),s=a("conv32_2"),u=a("conv32_3"),l=a("conv64_down"),c=a("conv64_1"),d=a("conv64_2"),f=a("conv64_3"),h=a("conv128_down"),v=a("conv128_1"),m=a("conv128_2"),p=a("conv256_down"),y=a("conv256_1"),x=a("conv256_2"),b=a("conv256_down_out"),g=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!xO(g))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+g);var w={conv32_down:o,conv32_1:i,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:d,conv64_3:f,conv128_down:h,conv128_1:v,conv128_2:m,conv256_down:p,conv256_1:y,conv256_2:x,conv256_down_out:b,fc:g};return Wa(e,t),{params:w,paramMappings:t}}function Qr(e,t){var n=uB(e,t.conv1);return n=uC(n,t.conv2),n=gt(n,e),n=Zt(n),n}function vl(e,t){var n=lC(e,t.conv1);n=uC(n,t.conv2);var r=Pu(e,2,2,"valid"),a=Ut(r.shape),o=r.shape[3]!==n.shape[3],i=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(i){var s=Zs(n.shape);s[1]=1;var u=Ut(s);n=yn([n,u],1);var l=Zs(n.shape);l[2]=1;var c=Ut(l);n=yn([n,c],2)}return r=o?yn([r,a],3):r,n=gt(r,n),n=Zt(n),n}var hB=(function(e){st(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return Le(function(){var a=n.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],i=Nu(a,o).div(Be(256)),s=lC(i,r.conv32_down);s=Sn(s,3,2,"valid"),s=Qr(s,r.conv32_1),s=Qr(s,r.conv32_2),s=Qr(s,r.conv32_3),s=vl(s,r.conv64_down),s=Qr(s,r.conv64_1),s=Qr(s,r.conv64_2),s=Qr(s,r.conv64_3),s=vl(s,r.conv128_down),s=Qr(s,r.conv128_1),s=Qr(s,r.conv128_2),s=vl(s,r.conv256_down),s=Qr(s,r.conv256_1),s=Qr(s,r.conv256_2),s=vl(s,r.conv256_down_out);var u=s.mean([1,2]),l=rd(u,r.fc);return l})},t.prototype.forward=function(n){return Ye(this,void 0,void 0,function(){var r;return Je(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Rn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.computeFaceDescriptor=function(n){return Ye(this,void 0,void 0,function(){var r,a,o,i=this;return Je(this,function(s){switch(s.label){case 0:return[4,Rn(n)];case 1:return r=s.sent(),a=Le(function(){return bn(i.forwardInput(r))}),[4,Promise.all(a.map(function(u){return u.data()}))];case 2:return o=s.sent(),a.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(n){return fB(n)},t.prototype.extractParams=function(n){return cB(n)},t})(Ha);function cC(e,t){var n={descriptor:t};return Object.assign({},e,n)}function dC(e,t){var n={age:t};return Object.assign({},e,n)}function fC(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var hC=(function(){function e(t){var n=t===void 0?{}:t,r=n.minFaceSize,a=n.scaleFactor,o=n.maxNumScales,i=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=o||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e})();function vB(e,t){function n(u,l){var c=tr(e(9*u),[3,3,u,1]),d=dn(e(u)),f=dn(e(u)),h=dn(e(u)),v=dn(e(u));return t.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:c,batch_norm_scale:d,batch_norm_offset:f,batch_norm_mean:h,batch_norm_variance:v}}function r(u,l,c,d,f){var h=tr(e(u*l*c*c),[c,c,u,l]),v=dn(e(l));return t.push({paramPath:d+"/filters"},{paramPath:d+"/"+(f?"batch_norm_offset":"bias")}),{filters:h,bias:v}}function a(u,l,c,d){var f=r(u,l,c,d,!0),h=f.filters,v=f.bias;return{filters:h,batch_norm_offset:v}}function o(u,l,c){var d=n(u,c+"/depthwise_conv"),f=a(u,l,1,c+"/pointwise_conv");return{depthwise_conv:d,pointwise_conv:f}}function i(){var u=a(3,32,3,"mobilenetv1/conv_0"),l=o(32,64,"mobilenetv1/conv_1"),c=o(64,128,"mobilenetv1/conv_2"),d=o(128,128,"mobilenetv1/conv_3"),f=o(128,256,"mobilenetv1/conv_4"),h=o(256,256,"mobilenetv1/conv_5"),v=o(256,512,"mobilenetv1/conv_6"),m=o(512,512,"mobilenetv1/conv_7"),p=o(512,512,"mobilenetv1/conv_8"),y=o(512,512,"mobilenetv1/conv_9"),x=o(512,512,"mobilenetv1/conv_10"),b=o(512,512,"mobilenetv1/conv_11"),g=o(512,1024,"mobilenetv1/conv_12"),w=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:c,conv_3:d,conv_4:f,conv_5:h,conv_6:v,conv_7:m,conv_8:p,conv_9:y,conv_10:x,conv_11:b,conv_12:g,conv_13:w}}function s(){var u=a(1024,256,1,"prediction_layer/conv_0"),l=a(256,512,3,"prediction_layer/conv_1"),c=a(512,128,1,"prediction_layer/conv_2"),d=a(128,256,3,"prediction_layer/conv_3"),f=a(256,128,1,"prediction_layer/conv_4"),h=a(128,256,3,"prediction_layer/conv_5"),v=a(256,64,1,"prediction_layer/conv_6"),m=a(64,128,3,"prediction_layer/conv_7"),p=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),y=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),x=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),b=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),g=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),w=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),S=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),R=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),A=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),k=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),M=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),T={box_encoding_predictor:p,class_predictor:y},D={box_encoding_predictor:x,class_predictor:b},I={box_encoding_predictor:g,class_predictor:w},F={box_encoding_predictor:S,class_predictor:E},V={box_encoding_predictor:R,class_predictor:A},L={box_encoding_predictor:k,class_predictor:M};return{conv_0:u,conv_1:l,conv_2:c,conv_3:d,conv_4:f,conv_5:h,conv_6:v,conv_7:m,box_predictor_0:T,box_predictor_1:D,box_predictor_2:I,box_predictor_3:F,box_predictor_4:V,box_predictor_5:L}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:s}}function pB(e){var t=[],n=Ua(e),r=n.extractWeights,a=n.getRemainingWeights,o=vB(r,t),i=o.extractMobilenetV1Params,s=o.extractPredictionLayerParams,u=i(),l=s(),c=Hv(r(5118*4),[1,5118,4]),d={extra_dim:c};if(t.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:d},paramMappings:t}}function mB(e,t){var n=So(e,t);function r(l,c,d){var f=n(l+"/Conv2d_"+c+"_pointwise/weights",4,d+"/filters"),h=n(l+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,d+"/batch_norm_offset");return{filters:f,batch_norm_offset:h}}function a(l){var c="mobilenetv1/conv_"+l,d="MobilenetV1/Conv2d_"+l+"_depthwise",f=c+"/depthwise_conv",h=c+"/pointwise_conv",v=n(d+"/depthwise_weights",4,f+"/filters"),m=n(d+"/BatchNorm/gamma",1,f+"/batch_norm_scale"),p=n(d+"/BatchNorm/beta",1,f+"/batch_norm_offset"),y=n(d+"/BatchNorm/moving_mean",1,f+"/batch_norm_mean"),x=n(d+"/BatchNorm/moving_variance",1,f+"/batch_norm_variance");return{depthwise_conv:{filters:v,batch_norm_scale:m,batch_norm_offset:p,batch_norm_mean:y,batch_norm_variance:x},pointwise_conv:r("MobilenetV1",l,h)}}function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function i(l,c){var d=n(l+"/weights",4,c+"/filters"),f=n(l+"/biases",1,c+"/bias");return{filters:d,bias:f}}function s(l){var c=i("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),d=i("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:c,class_predictor:d}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:u}}function gB(e){var t=[],n=mB(e,t),r=n.extractMobilenetV1Params,a=n.extractPredictionLayerParams,o=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!sd(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var i={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:o}};return Wa(e,t),{params:i,paramMappings:t}}function Jr(e,t,n){return Le(function(){var r=Dr(e,t.filters,n,"same");return r=gt(r,t.batch_norm_offset),ep(r,0,6)})}var yB=.0010000000474974513;function bB(e,t,n){return Le(function(){var r=nd(e,t.filters,n,"same");return r=s_(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,yB),ep(r,0,6)})}function xB(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function wB(e,t){return Le(function(){var n=null,r=Jr(e,t.conv_0,[2,2]),a=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(a.forEach(function(o,i){var s=i+1,u=xB(s);r=bB(r,o.depthwise_conv,u),r=Jr(r,o.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function _B(e,t,n,r,a){var o=e.shape[0],i=Math.min(n,o),s=t.map(function(c,d){return{score:c,boxIndex:d}}).filter(function(c){return c.score>a}).sort(function(c,d){return d.score-c.score}),u=function(c){return c<=r?1:0},l=[];return s.forEach(function(c){if(!(l.length>=i)){for(var d=c.score,f=l.length-1;f>=0;--f){var h=CB(e,c.boxIndex,l[f]);if(h!==0&&(c.score*=u(h),c.score<=a))break}d===c.score&&l.push(c.boxIndex)}}),l}function CB(e,t,n){var r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),o=Math.min(r[t][1],r[t][3]),i=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),f=(i-a)*(s-o),h=(c-u)*(d-l);if(f<=0||h<=0)return 0;var v=Math.max(a,u),m=Math.max(o,l),p=Math.min(i,c),y=Math.min(s,d),x=Math.max(p-v,0)*Math.max(y-m,0);return x/(f+h-x)}function SB(e){var t=bn(mo(e,[1,0])),n=[wn(t[2],t[0]),wn(t[3],t[1])],r=[gt(t[0],Nr(n[0],Be(2))),gt(t[1],Nr(n[1],Be(2)))];return{sizes:n,centers:r}}function kB(e,t){var n=SB(e),r=n.sizes,a=n.centers,o=bn(mo(t,[1,0])),i=Nr(jn(Mh(Nr(o[2],Be(5))),r[0]),Be(2)),s=gt(jn(Nr(o[0],Be(10)),r[0]),a[0]),u=Nr(jn(Mh(Nr(o[3],Be(5))),r[1]),Be(2)),l=gt(jn(Nr(o[1],Be(10)),r[1]),a[1]);return mo(mr([wn(s,i),wn(l,u),gt(s,i),gt(l,u)]),[1,0])}function EB(e,t,n){return Le(function(){var r=e.shape[0],a=kB(qr(Xi(n.extra_dim,[r,1,1]),[-1,4]),qr(e,[-1,4]));a=qr(a,[r,a.shape[0]/r,4]);var o=r_(la(t,[0,0,1],[-1,-1,-1])),i=la(o,[0,0,0],[-1,-1,1]);i=qr(i,[r,i.shape[1]]);var s=bn(a),u=bn(i);return{boxes:s,scores:u}})}function Ti(e,t){return Le(function(){var n=e.shape[0],r=qr(zr(e,t.box_encoding_predictor),[n,-1,1,4]),a=qr(zr(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function TB(e,t,n){return Le(function(){var r=Jr(e,n.conv_0,[1,1]),a=Jr(r,n.conv_1,[2,2]),o=Jr(a,n.conv_2,[1,1]),i=Jr(o,n.conv_3,[2,2]),s=Jr(i,n.conv_4,[1,1]),u=Jr(s,n.conv_5,[2,2]),l=Jr(u,n.conv_6,[1,1]),c=Jr(l,n.conv_7,[2,2]),d=Ti(t,n.box_predictor_0),f=Ti(e,n.box_predictor_1),h=Ti(a,n.box_predictor_2),v=Ti(i,n.box_predictor_3),m=Ti(u,n.box_predictor_4),p=Ti(c,n.box_predictor_5),y=yn([d.boxPredictionEncoding,f.boxPredictionEncoding,h.boxPredictionEncoding,v.boxPredictionEncoding,m.boxPredictionEncoding,p.boxPredictionEncoding],1),x=yn([d.classPrediction,f.classPrediction,h.classPrediction,v.classPrediction,m.classPrediction,p.classPrediction],1);return{boxPredictions:y,classPredictions:x}})}var dd=(function(){function e(t){var n=t===void 0?{}:t,r=n.minConfidence,a=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e})(),vC=(function(e){st(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return Le(function(){var a=n.toBatchTensor(512,!1).toFloat(),o=wn(jn(a,Be(.007843137718737125)),Be(1)),i=wB(o,r.mobilenetv1),s=TB(i.out,i.conv11,r.prediction_layer),u=s.boxPredictions,l=s.classPredictions;return EB(u,l,r.output_layer)})},t.prototype.forward=function(n){return Ye(this,void 0,void 0,function(){var r;return Je(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Rn(n)];case 1:return[2,r.apply(this,[a.sent()])]}})})},t.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),Ye(this,void 0,void 0,function(){var a,o,i,s,u,l,c,d,f,h,v,m,p,y,x,b,g,w,S,E,R;return Je(this,function(A){switch(A.label){case 0:return a=new dd(r),o=a.maxResults,i=a.minConfidence,[4,Rn(n)];case 1:for(s=A.sent(),u=this.forwardInput(s),l=u.boxes,c=u.scores,d=l[0],f=c[0],h=1;h<l.length;h++)l[h].dispose(),c[h].dispose();return p=(m=Array).from,[4,f.data()];case 2:return v=p.apply(m,[A.sent()]),y=.5,x=_B(d,v,o,y,i),b=s.getReshapedInputDimensions(0),g=s.inputSize,w=g/b.width,S=g/b.height,E=d.arraySync(),R=x.map(function(k){var M=[Math.max(0,E[k][0]),Math.min(1,E[k][2])].map(function(L){return L*S}),T=M[0],D=M[1],I=[Math.max(0,E[k][1]),Math.min(1,E[k][3])].map(function(L){return L*w}),F=I[0],V=I[1];return new pa(v[k],new gp(F,T,V-F,D-T),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),d.dispose(),f.dispose(),[2,R]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(n){return gB(n)},t.prototype.extractParams=function(n){return pB(n)},t})(Ha);(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(vC);var RB=.4,AB=[new At(.738768,.874946),new At(2.42204,2.65704),new At(4.30971,7.04493),new At(10.246,4.59428),new At(12.6868,11.8741)],IB=[new At(1.603231,2.094468),new At(6.041143,7.080126),new At(2.882459,3.518061),new At(4.266906,5.178857),new At(9.041765,10.66308)],MB=[117.001,114.697,97.404],DB="tiny_yolov2_model",PB="tiny_yolov2_separable_conv_model",pl=function(e){return typeof e=="number"};function FB(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!pl(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return pl(t.x)&&pl(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(pl)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function Rp(e){return Le(function(){var t=jn(e,Be(.10000000149011612));return gt(Zt(wn(e,t)),t)})}function Ya(e,t){return Le(function(){var n=ci(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Dr(n,t.conv.filters,[1,1],"valid"),n=wn(n,t.bn.sub),n=jn(n,t.bn.truediv),n=gt(n,t.conv.bias),Rp(n)})}function Ja(e,t){return Le(function(){var n=ci(e,[[0,0],[1,1],[1,1],[0,0]]);return n=ap(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=gt(n,t.bias),Rp(n)})}function NB(e,t){var n=cd(e,t);function r(i,s){var u=dn(e(i)),l=dn(e(i));return t.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:l}}function a(i,s,u){var l=n(i,s,3,u+"/conv"),c=r(s,u+"/bn");return{conv:l,bn:c}}var o=Sp(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:a,extractSeparableConvParams:o}}function OB(e,t,n,r){var a=Ua(e),o=a.extractWeights,i=a.getRemainingWeights,s=[],u=NB(o,s),l=u.extractConvParams,c=u.extractConvWithBatchNormParams,d=u.extractSeparableConvParams,f;if(t.withSeparableConvs){var h=r[0],v=r[1],m=r[2],p=r[3],y=r[4],x=r[5],b=r[6],g=r[7],w=r[8],S=t.isFirstLayerConv2d?l(h,v,3,"conv0"):d(h,v,"conv0"),E=d(v,m,"conv1"),R=d(m,p,"conv2"),A=d(p,y,"conv3"),k=d(y,x,"conv4"),M=d(x,b,"conv5"),T=g?d(b,g,"conv6"):void 0,D=w?d(g,w,"conv7"):void 0,I=l(w||g||b,5*n,1,"conv8");f={conv0:S,conv1:E,conv2:R,conv3:A,conv4:k,conv5:M,conv6:T,conv7:D,conv8:I}}else{var h=r[0],v=r[1],m=r[2],p=r[3],y=r[4],x=r[5],b=r[6],g=r[7],w=r[8],S=c(h,v,"conv0"),E=c(v,m,"conv1"),R=c(m,p,"conv2"),A=c(p,y,"conv3"),k=c(y,x,"conv4"),M=c(x,b,"conv5"),T=c(b,g,"conv6"),D=c(g,w,"conv7"),I=l(w,5*n,1,"conv8");f={conv0:S,conv1:E,conv2:R,conv3:A,conv4:k,conv5:M,conv6:T,conv7:D,conv8:I}}if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:f,paramMappings:s}}function BB(e,t){var n=So(e,t);function r(s){var u=n(s+"/sub",1),l=n(s+"/truediv",1);return{sub:u,truediv:l}}function a(s){var u=n(s+"/filters",4),l=n(s+"/bias",1);return{filters:u,bias:l}}function o(s){var u=a(s+"/conv"),l=r(s+"/bn");return{conv:u,bn:l}}var i=kp(n);return{extractConvParams:a,extractConvWithBatchNormParams:o,extractSeparableConvParams:i}}function qB(e,t){var n=[],r=BB(e,n),a=r.extractConvParams,o=r.extractConvWithBatchNormParams,i=r.extractSeparableConvParams,s;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;s={conv0:t.isFirstLayerConv2d?a("conv0"):i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:u>7?i("conv6"):void 0,conv7:u>8?i("conv7"):void 0,conv8:a("conv8")}}else s={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:a("conv8")};return Wa(e,n),{params:s,paramMappings:n}}var gy;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(gy||(gy={}));var Ap=(function(){function e(t){var n=t===void 0?{}:t,r=n.inputSize,a=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e})(),pC=(function(e){st(t,e);function t(n){var r=e.call(this,"TinyYolov2")||this;return FB(n),r._config=n,r}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(n,r){var a=Ya(n,r.conv0);return a=Sn(a,[2,2],[2,2],"same"),a=Ya(a,r.conv1),a=Sn(a,[2,2],[2,2],"same"),a=Ya(a,r.conv2),a=Sn(a,[2,2],[2,2],"same"),a=Ya(a,r.conv3),a=Sn(a,[2,2],[2,2],"same"),a=Ya(a,r.conv4),a=Sn(a,[2,2],[2,2],"same"),a=Ya(a,r.conv5),a=Sn(a,[2,2],[1,1],"same"),a=Ya(a,r.conv6),a=Ya(a,r.conv7),zr(a,r.conv8,"valid",!1)},t.prototype.runMobilenet=function(n,r){var a=this.config.isFirstLayerConv2d?Rp(zr(n,r.conv0,"valid",!1)):Ja(n,r.conv0);return a=Sn(a,[2,2],[2,2],"same"),a=Ja(a,r.conv1),a=Sn(a,[2,2],[2,2],"same"),a=Ja(a,r.conv2),a=Sn(a,[2,2],[2,2],"same"),a=Ja(a,r.conv3),a=Sn(a,[2,2],[2,2],"same"),a=Ja(a,r.conv4),a=Sn(a,[2,2],[2,2],"same"),a=Ja(a,r.conv5),a=Sn(a,[2,2],[1,1],"same"),a=r.conv6?Ja(a,r.conv6):a,a=r.conv7?Ja(a,r.conv7):a,zr(a,r.conv8,"valid",!1)},t.prototype.forwardInput=function(n,r){var a=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return Le(function(){var i=n.toBatchTensor(r,!1).toFloat();return i=a.config.meanRgb?Nu(i,a.config.meanRgb):i,i=i.div(Be(256)),a.config.withSeparableConvs?a.runMobilenet(i,o):a.runTinyYolov2(i,o)})},t.prototype.forward=function(n,r){return Ye(this,void 0,void 0,function(){var a;return Je(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,Rn(n)];case 1:return[4,a.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},t.prototype.detect=function(n,r){return r===void 0&&(r={}),Ye(this,void 0,void 0,function(){var a,o,i,s,u,l,c,d,f,h,v,m,p,y,x=this;return Je(this,function(b){switch(b.label){case 0:return a=new Ap(r),o=a.inputSize,i=a.scoreThreshold,[4,Rn(n)];case 1:return s=b.sent(),[4,this.forwardInput(s,o)];case 2:return u=b.sent(),l=Le(function(){return bn(u)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),i)];case 3:return d=b.sent(),u.dispose(),l.dispose(),f=d.map(function(g){return g.box}),h=d.map(function(g){return g.score}),v=d.map(function(g){return g.classScore}),m=d.map(function(g){return x.config.classes[g.label]}),p=bu(f.map(function(g){return g.rescale(o)}),h,this.config.iouThreshold,!0),y=p.map(function(g){return new z_(h[g],v[g],m[g],f[g],c)}),[2,y]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(n){return qB(n,this.config)},t.prototype.extractParams=function(n){var r=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return OB(n,this.config,this.boxEncodingSize,r)},t.prototype.extractBoxes=function(n,r,a){return Ye(this,void 0,void 0,function(){var o,i,s,u,l,c,d,f,h,v,m,p,y,x,b,g,w,S,E,R,A,k,M,T,D,I,F,V,L,q=this;return Je(this,function(K){switch(K.label){case 0:return o=r.width,i=r.height,s=Math.max(o,i),u=s/o,l=s/i,c=n.shape[1],d=this.config.anchors.length,f=Le(function(){var oe=n.reshape([c,c,d,q.boxEncodingSize]),W=oe.slice([0,0,0,0],[c,c,d,4]),N=oe.slice([0,0,0,4],[c,c,d,1]),Q=q.withClassScores?za(oe.slice([0,0,0,5],[c,c,d,q.config.classes.length]),3):Be(0);return[W,N,Q]}),h=f[0],v=f[1],m=f[2],p=[],[4,v.array()];case 1:return y=K.sent(),[4,h.array()];case 2:x=K.sent(),b=0,K.label=3;case 3:if(!(b<c))return[3,12];g=0,K.label=4;case 4:if(!(g<c))return[3,11];w=0,K.label=5;case 5:return w<d?(S=Mf(y[b][g][w][0]),!a||S>a?(E=(g+Mf(x[b][g][w][0]))/c*u,R=(b+Mf(x[b][g][w][1]))/c*l,A=Math.exp(x[b][g][w][2])*this.config.anchors[w].x/c*u,k=Math.exp(x[b][g][w][3])*this.config.anchors[w].y/c*l,M=E-A/2,T=R-k/2,D={row:b,col:g,anchor:w},this.withClassScores?[4,this.extractPredictedClass(m,D)]:[3,7]):[3,9]):[3,10];case 6:return L=K.sent(),[3,8];case 7:L={classScore:1,label:0},K.label=8;case 8:I=L,F=I.classScore,V=I.label,p.push(Vn({box:new ud(M,T,M+A,T+k),score:S,classScore:S*F,label:V},D)),K.label=9;case 9:return w++,[3,5];case 10:return g++,[3,4];case 11:return b++,[3,3];case 12:return h.dispose(),v.dispose(),m.dispose(),[2,p]}})})},t.prototype.extractPredictedClass=function(n,r){return Ye(this,void 0,void 0,function(){var a,o,i,s;return Je(this,function(u){switch(u.label){case 0:return a=r.row,o=r.col,i=r.anchor,[4,n.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,c){return s[a][o][i][c]}).map(function(l,c){return{classScore:l,label:c}}).reduce(function(l,c){return l.classScore>c.classScore?l:c})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t})(Ha),LB=(function(e){st(t,e);function t(n){n===void 0&&(n=!0);var r=this,a=Object.assign({},{withSeparableConvs:n,iouThreshold:RB,classes:["face"]},n?{anchors:IB,meanRgb:MB}:{anchors:AB,withClassScores:!0});return r=e.call(this,a)||this,r}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return Ye(this,void 0,void 0,function(){var a;return Je(this,function(o){switch(o.label){case 0:return[4,this.detect(n,r)];case 1:return a=o.sent(),[2,a.map(function(i){return new pa(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?PB:DB},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t})(pC),mC=(function(e){st(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return t})(Ap),Ou=(function(){function e(){}return e.prototype.then=function(t){return Ye(this,void 0,void 0,function(){var n;return Je(this,function(r){switch(r.label){case 0:return n=t,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},e.prototype.run=function(){return Ye(this,void 0,void 0,function(){return Je(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e})();function fd(e,t,n,r,a){return a===void 0&&(a=function(o){var i=o.alignedRect;return i}),Ye(this,void 0,void 0,function(){var o,i,s,u,l;return Je(this,function(c){switch(c.label){case 0:return o=e.map(function(d){return GO(d)?a(d):d.detection}),s=r,s?[3,5]:t instanceof Yt?[4,_p(t,o)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,wp(t,o)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return i=s,[4,n(i)];case 6:return l=c.sent(),i.forEach(function(d){return d instanceof Yt&&d.dispose()}),[2,l]}})})}function Ip(e,t,n,r,a){return Ye(this,void 0,void 0,function(){var o=this;return Je(this,function(i){return[2,fd([e],t,function(s){return Ye(o,void 0,void 0,function(){return Je(this,function(u){return[2,n(s[0])]})})},r,a)]})})}function VB(e){return Le(function(){return mr(bn(e,3).reverse(),3)})}var ml=2,_c=12;function zB(e,t){var n=cd(e,t),r=Cp(e,t);function a(l,c){var d=dn(e(l));return t.push({paramPath:c}),d}function o(l,c,d){d===void 0&&(d=!1);var f=n(l[0],l[1],3,c+"/conv1"),h=a(l[1],c+"/prelu1_alpha"),v=n(l[1],l[2],3,c+"/conv2"),m=a(l[2],c+"/prelu2_alpha"),p=n(l[2],l[3],d?2:3,c+"/conv3"),y=a(l[3],c+"/prelu3_alpha");return{conv1:f,prelu1_alpha:h,conv2:v,prelu2_alpha:m,conv3:p,prelu3_alpha:y}}function i(){var l=o([3,10,16,32],"pnet"),c=n(32,2,1,"pnet/conv4_1"),d=n(32,4,1,"pnet/conv4_2");return Vn(Vn({},l),{conv4_1:c,conv4_2:d})}function s(){var l=o([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),d=a(128,"rnet/prelu4_alpha"),f=r(128,2,"rnet/fc2_1"),h=r(128,4,"rnet/fc2_2");return Vn(Vn({},l),{fc1:c,prelu4_alpha:d,fc2_1:f,fc2_2:h})}function u(){var l=o([3,32,64,64],"onet"),c=n(64,128,2,"onet/conv4"),d=a(128,"onet/prelu4_alpha"),f=r(1152,256,"onet/fc1"),h=a(256,"onet/prelu5_alpha"),v=r(256,2,"onet/fc2_1"),m=r(256,4,"onet/fc2_2"),p=r(256,10,"onet/fc2_3");return Vn(Vn({},l),{conv4:c,prelu4_alpha:d,fc1:f,prelu5_alpha:h,fc2_1:v,fc2_2:m,fc2_3:p})}return{extractPNetParams:i,extractRNetParams:s,extractONetParams:u}}function $B(e){var t=Ua(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],o=zB(n,a),i=o.extractPNetParams,s=o.extractRNetParams,u=o.extractONetParams,l=i(),c=s(),d=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:d},paramMappings:a}}function HB(e,t){var n=So(e,t);function r(c){var d=n(c+"/weights",4,c+"/filters"),f=n(c+"/bias",1);return{filters:d,bias:f}}function a(c){var d=n(c+"/weights",2),f=n(c+"/bias",1);return{weights:d,bias:f}}function o(c){return n(c,1)}function i(c){var d=r(c+"/conv1"),f=o(c+"/prelu1_alpha"),h=r(c+"/conv2"),v=o(c+"/prelu2_alpha"),m=r(c+"/conv3"),p=o(c+"/prelu3_alpha");return{conv1:d,prelu1_alpha:f,conv2:h,prelu2_alpha:v,conv3:m,prelu3_alpha:p}}function s(){var c=i("pnet"),d=r("pnet/conv4_1"),f=r("pnet/conv4_2");return Vn(Vn({},c),{conv4_1:d,conv4_2:f})}function u(){var c=i("rnet"),d=a("rnet/fc1"),f=o("rnet/prelu4_alpha"),h=a("rnet/fc2_1"),v=a("rnet/fc2_2");return Vn(Vn({},c),{fc1:d,prelu4_alpha:f,fc2_1:h,fc2_2:v})}function l(){var c=i("onet"),d=r("onet/conv4"),f=o("onet/prelu4_alpha"),h=a("onet/fc1"),v=o("onet/prelu5_alpha"),m=a("onet/fc2_1"),p=a("onet/fc2_2"),y=a("onet/fc2_3");return Vn(Vn({},c),{conv4:d,prelu4_alpha:f,fc1:h,prelu5_alpha:v,fc2_1:m,fc2_2:p,fc2_3:y})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function WB(e){var t=[],n=HB(e,t),r=n.extractPNetParams,a=n.extractRNetParams,o=n.extractONetParams,i=r(),s=a(),u=o();return Wa(e,t),{params:{pnet:i,rnet:s,onet:u},paramMappings:t}}function Lh(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}function UB(e,t,n){for(var r=n[0],a=n[1],o=_c/e,i=[],s=Math.min(r,a)*o,u=0;s>=12;)i.push(o*Math.pow(t,u)),s=s*t,u+=1;return i}var Mp=(function(e){st(t,e);function t(n,r,a,o){return e.call(this,{left:n,top:r,right:a,bottom:o},!0)||this}return t})(go);function gC(e){return Le(function(){return jn(wn(e,Be(127.5)),Be(.0078125))})}function ts(e,t){return Le(function(){return gt(Zt(e),jn(t,pc(Zt(pc(e)))))})}function Dp(e,t,n){return n===void 0&&(n=!1),Le(function(){var r=zr(e,t.conv1,"valid");return r=ts(r,t.prelu1_alpha),r=Sn(r,n?[2,2]:[3,3],[2,2],"same"),r=zr(r,t.conv2,"valid"),r=ts(r,t.prelu2_alpha),r=n?r:Sn(r,[3,3],[2,2],"valid"),r=zr(r,t.conv3,"valid"),r=ts(r,t.prelu3_alpha),r})}function jB(e,t){return Le(function(){var n=Dp(e,t,!0),r=zr(n,t.conv4_1,"valid"),a=_r(ad(r,3),3),o=za(wn(r,a),3),i=zr(n,t.conv4_2,"valid");return{prob:o,regions:i}})}function GB(e,t){return Le(function(){var n=Lh(t,e.shape.slice(1)),r=n.height,a=n.width,o=lp.resizeBilinear(e,[r,a]),i=gC(o);return mo(i,[0,2,1,3])})}function KB(e,t,n,r){for(var a=[],o=e.arraySync(),i=0;i<e.shape[0];i++)for(var s=0;s<e.shape[1];s++)o[i][s]>=r&&a.push(new At(s,i));var u=a.map(function(l){var c=new ud(Math.round((l.y*ml+1)/n),Math.round((l.x*ml+1)/n),Math.round((l.y*ml+_c)/n),Math.round((l.x*ml+_c)/n)),d=o[l.y][l.x],f=t.arraySync(),h=new Mp(f[l.y][l.x][0],f[l.y][l.x][1],f[l.y][l.x][2],f[l.y][l.x][3]);return{cell:c,score:d,region:h}});return u}function XB(e,t,n,r,a){a.stage1=[];var o=t.map(function(f){return Le(function(){var h={scale:f},v=GB(e,f),m=Date.now(),p=jB(v,r),y=p.prob,x=p.regions;h.pnet=Date.now()-m;var b=bn(bn(y,3)[1])[0],g=bn(x)[0];return{scoresTensor:b,regionsTensor:g,scale:f,statsForScale:h}})}),i=o.map(function(f){var h=f.scoresTensor,v=f.regionsTensor,m=f.scale,p=f.statsForScale,y=KB(h,v,m,n);if(h.dispose(),v.dispose(),!y.length)return a.stage1.push(p),[];var x=Date.now(),b=bu(y.map(function(g){return g.cell}),y.map(function(g){return g.score}),.5);return p.nms=Date.now()-x,p.numBoxes=b.length,a.stage1.push(p),b.map(function(g){return y[g]})}),s=i.reduce(function(f,h){return f.concat(h)},[]),u=[],l=[];if(s.length>0){var c=Date.now(),d=bu(s.map(function(f){return f.cell}),s.map(function(f){return f.score}),.7);a.stage1_nms=Date.now()-c,l=d.map(function(f){return s[f].score}),u=d.map(function(f){return s[f]}).map(function(f){var h=f.cell,v=f.region;return new ud(h.left+v.left*h.width,h.top+v.top*h.height,h.right+v.right*h.width,h.bottom+v.bottom*h.height).toSquare().round()})}return{boxes:u,scores:l}}function yC(e,t,n){var r=n.width,a=n.height;return Ye(this,void 0,void 0,function(){var o,i,s,u=this;return Je(this,function(l){switch(l.label){case 0:return o=ai(e),[4,Promise.all(t.map(function(c){return Ye(u,void 0,void 0,function(){var d,f,h,v,m,p,y,x;return Je(this,function(b){return d=c.padAtBorders(e.height,e.width),f=d.y,h=d.ey,v=d.x,m=d.ex,p=v-1,y=f-1,x=o.getImageData(p,y,m-p,h-y),[2,Xn.isNodejs()?xp(x):createImageBitmap(x)]})})}))];case 1:return i=l.sent(),s=[],i.forEach(function(c){var d=ld({width:r,height:a}),f=ai(d);f.drawImage(c,0,0,r,a);for(var h=f.getImageData(0,0,r,a).data,v=[],m=0;m<h.length;m+=4)v.push(h[m+2]),v.push(h[m+1]),v.push(h[m]);s.push(v)}),[2,s.map(function(c){var d=Le(function(){var f=mo(tr(c,[1,r,a,3]),[0,2,1,3]).toFloat();return gC(f)});return d})]}})})}function QB(e,t){return Le(function(){var n=Dp(e,t),r=qr(n,[n.shape[0],t.fc1.weights.shape[0]]),a=aa(r,t.fc1),o=ts(a,t.prelu4_alpha),i=aa(o,t.fc2_1),s=_r(ad(i,1),1),u=za(wn(i,s),1),l=aa(o,t.fc2_2),c=bn(u,1)[1];return{scores:c,regions:l}})}function YB(e,t,n,r,a){return Ye(this,void 0,void 0,function(){var o,i,s,u,l,c,d,f,h,v,m,p,y,x;return Je(this,function(b){switch(b.label){case 0:return o=Date.now(),[4,yC(e,t,{width:24,height:24})];case 1:return i=b.sent(),a.stage2_extractImagePatches=Date.now()-o,o=Date.now(),s=i.map(function(g){var w=QB(g,r);return g.dispose(),w}),a.stage2_rnet=Date.now()-o,u=s.length>1?yn(s.map(function(g){return g.scores})):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[b.sent()]),u.dispose(),f=l.map(function(g,w){return{score:g,idx:w}}).filter(function(g){return g.score>n}).map(function(g){var w=g.idx;return w}),h=f.map(function(g){return t[g]}),v=f.map(function(g){return l[g]}),m=[],p=[],h.length>0&&(o=Date.now(),y=bu(h,v,.7),a.stage2_nms=Date.now()-o,x=y.map(function(g){var w=s[f[g]].regions.arraySync();return new Mp(w[0][0],w[0][1],w[0][2],w[0][3])}),p=y.map(function(g){return v[g]}),m=y.map(function(g,w){return h[g].calibrate(x[w])})),s.forEach(function(g){g.regions.dispose(),g.scores.dispose()}),[2,{boxes:m,scores:p}]}})})}function JB(e,t){return Le(function(){var n=Dp(e,t);n=Sn(n,[2,2],[2,2],"same"),n=zr(n,t.conv4,"valid"),n=ts(n,t.prelu4_alpha);var r=qr(n,[n.shape[0],t.fc1.weights.shape[0]]),a=aa(r,t.fc1),o=ts(a,t.prelu5_alpha),i=aa(o,t.fc2_1),s=_r(ad(i,1),1),u=za(wn(i,s),1),l=aa(o,t.fc2_2),c=aa(o,t.fc2_3),d=bn(u,1)[1];return{scores:d,regions:l,points:c}})}function ZB(e,t,n,r,a){return Ye(this,void 0,void 0,function(){var o,i,s,u,l,c,d,f,h,v,m,p,y,x,b;return Je(this,function(g){switch(g.label){case 0:return o=Date.now(),[4,yC(e,t,{width:48,height:48})];case 1:return i=g.sent(),a.stage3_extractImagePatches=Date.now()-o,o=Date.now(),s=i.map(function(w){var S=JB(w,r);return w.dispose(),S}),a.stage3_onet=Date.now()-o,u=s.length>1?yn(s.map(function(w){return w.scores})):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[g.sent()]),u.dispose(),f=l.map(function(w,S){return{score:w,idx:S}}).filter(function(w){return w.score>n}).map(function(w){var S=w.idx;return S}),h=f.map(function(w){var S=s[w].regions.arraySync();return new Mp(S[0][0],S[0][1],S[0][2],S[0][3])}),v=f.map(function(w,S){return t[w].calibrate(h[S])}),m=f.map(function(w){return l[w]}),p=[],y=[],x=[],v.length>0&&(o=Date.now(),b=bu(v,m,.7,!1),a.stage3_nms=Date.now()-o,p=b.map(function(w){return v[w]}),y=b.map(function(w){return m[w]}),x=b.map(function(w,S){return Array(5).fill(0).map(function(E,R){var A=s[w].points.arraySync();return new At(A[0][R]*(p[S].width+1)+p[S].left,A[0][R+5]*(p[S].height+1)+p[S].top)})})),s.forEach(function(w){w.regions.dispose(),w.scores.dispose(),w.points.dispose()}),[2,{boxes:p,scores:y,points:x}]}})})}var eq=(function(e){st(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(n){return Ye(this,void 0,void 0,function(){return Je(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,n)]})})},t.prototype.loadFromDisk=function(n){return Ye(this,void 0,void 0,function(){return Je(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,n)]})})},t.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),Ye(this,void 0,void 0,function(){var a,o,i,s,u,l,c,d,f,h,v,m,p,y,x,b,g,w,S,E,R;return Je(this,function(A){switch(A.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(o=n.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return i={},s=Date.now(),u=Le(function(){return VB(_r(pp.fromPixels(o)).toFloat())}),l=function(k){return u.dispose(),i.total=Date.now()-s,k},c=u.shape.slice(1),d=c[0],f=c[1],h=new hC(r),v=h.minFaceSize,m=h.scaleFactor,p=h.maxNumScales,y=h.scoreThresholds,x=h.scaleSteps,b=(x||UB(v,m,[d,f])).filter(function(k){var M=Lh(k,[d,f]);return Math.min(M.width,M.height)>_c}).slice(0,p),i.scales=b,i.pyramid=b.map(function(k){return Lh(k,[d,f])}),g=Date.now(),[4,XB(u,b,y[0],a.pnet,i)];case 1:return w=A.sent(),i.total_stage1=Date.now()-g,w.boxes.length?(i.stage2_numInputBoxes=w.boxes.length,g=Date.now(),[4,YB(o,w.boxes,y[1],a.rnet,i)]):[2,l({results:[],stats:i})];case 2:return S=A.sent(),i.total_stage2=Date.now()-g,S.boxes.length?(i.stage3_numInputBoxes=S.boxes.length,g=Date.now(),[4,ZB(o,S.boxes,y[2],a.onet,i)]):[2,l({results:[],stats:i})];case 3:return E=A.sent(),i.total_stage3=Date.now()-g,R=E.boxes.map(function(k,M){return Ep(yp({},new pa(E.scores[M],new gp(k.left/f,k.top/d,k.width/f,k.height/d),{height:d,width:f})),new IO(E.points[M].map(function(T){return T.sub(new At(k.left,k.top)).div(new At(k.width,k.height))}),{width:k.width,height:k.height}))}),[2,l({results:R,stats:i})]}})})},t.prototype.forward=function(n,r){return r===void 0&&(r={}),Ye(this,void 0,void 0,function(){var a;return Je(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,Rn(n)];case 1:return[4,a.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},t.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),Ye(this,void 0,void 0,function(){var a;return Je(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,Rn(n)];case 1:return[2,a.apply(this,[o.sent(),r])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(n){return WB(n)},t.prototype.extractParams=function(n){return $B(n)},t})(Ha),tq=.4,nq=[new At(1.603231,2.094468),new At(6.041143,7.080126),new At(2.882459,3.518061),new At(4.266906,5.178857),new At(9.041765,10.66308)],rq=[117.001,114.697,97.404],aq=(function(e){st(t,e);function t(){var n=this,r={withSeparableConvs:!0,iouThreshold:tq,classes:["face"],anchors:nq,meanRgb:rq,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=e.call(this,r)||this,n}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return Ye(this,void 0,void 0,function(){var a;return Je(this,function(o){switch(o.label){case 0:return[4,this.detect(n,r)];case 1:return a=o.sent(),[2,a.map(function(i){return new pa(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t})(pC),Gn={ssdMobilenetv1:new vC,tinyFaceDetector:new aq,tinyYolov2:new LB,mtcnn:new eq,faceLandmark68Net:new sC,faceLandmark68TinyNet:new iB,faceRecognitionNet:new hB,faceExpressionNet:new jO,ageGenderNet:new nB},bC=(function(e){st(t,e);function t(n,r,a){var o=e.call(this)||this;return o.parentTask=n,o.input=r,o.extractedFaces=a,o}return t})(Ou),Pp=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ye(this,void 0,void 0,function(){var n,r,a=this;return Je(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,fd(n,this.input,function(i){return Ye(a,void 0,void 0,function(){return Je(this,function(s){switch(s.label){case 0:return[4,Promise.all(i.map(function(u){return Gn.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,n.map(function(i,s){return aC(i,r[s])})]}})})},t.prototype.withAgeAndGender=function(){return new Bp(this,this.input)},t})(bC),Fp=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ye(this,void 0,void 0,function(){var n,r;return Je(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?[4,Ip(n,this.input,function(o){return Gn.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,aC(n,r)]}})})},t.prototype.withAgeAndGender=function(){return new qp(this,this.input)},t})(bC),Np=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new Lp(this,this.input)},t.prototype.withFaceDescriptors=function(){return new zp(this,this.input)},t})(Pp),Op=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new Vp(this,this.input)},t.prototype.withFaceDescriptor=function(){return new $p(this,this.input)},t})(Fp),xC=(function(e){st(t,e);function t(n,r,a){var o=e.call(this)||this;return o.parentTask=n,o.input=r,o.extractedFaces=a,o}return t})(Ou),Bp=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ye(this,void 0,void 0,function(){var n,r,a=this;return Je(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,fd(n,this.input,function(i){return Ye(a,void 0,void 0,function(){return Je(this,function(s){switch(s.label){case 0:return[4,Promise.all(i.map(function(u){return Gn.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,n.map(function(i,s){var u=r[s],l=u.age,c=u.gender,d=u.genderProbability;return dC(fC(i,c,d),l)})]}})})},t.prototype.withFaceExpressions=function(){return new Pp(this,this.input)},t})(xC),qp=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ye(this,void 0,void 0,function(){var n,r,a,o,i;return Je(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,Ip(n,this.input,function(u){return Gn.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),a=r.age,o=r.gender,i=r.genderProbability,[2,dC(fC(n,o,i),a)]}})})},t.prototype.withFaceExpressions=function(){return new Fp(this,this.input)},t})(xC),Lp=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new Np(this,this.input)},t.prototype.withFaceDescriptors=function(){return new zp(this,this.input)},t})(Bp),Vp=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new Op(this,this.input)},t.prototype.withFaceDescriptor=function(){return new $p(this,this.input)},t})(qp),wC=(function(e){st(t,e);function t(n,r){var a=e.call(this)||this;return a.parentTask=n,a.input=r,a}return t})(Ou),zp=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ye(this,void 0,void 0,function(){var n,r;return Je(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,fd(n,this.input,function(o){return Promise.all(o.map(function(i){return Gn.faceRecognitionNet.computeFaceDescriptor(i)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(o,i){return cC(n[i],o)})]}})})},t.prototype.withFaceExpressions=function(){return new Np(this,this.input)},t.prototype.withAgeAndGender=function(){return new Lp(this,this.input)},t})(wC),$p=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ye(this,void 0,void 0,function(){var n,r;return Je(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),n?[4,Ip(n,this.input,function(o){return Gn.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,cC(n,r)]}})})},t.prototype.withFaceExpressions=function(){return new Op(this,this.input)},t.prototype.withAgeAndGender=function(){return new Vp(this,this.input)},t})(wC),_C=(function(e){st(t,e);function t(n,r,a){var o=e.call(this)||this;return o.parentTask=n,o.input=r,o.useTinyLandmarkNet=a,o}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Gn.faceLandmark68TinyNet:Gn.faceLandmark68Net},enumerable:!0,configurable:!0}),t})(Ou),oq=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ye(this,void 0,void 0,function(){var n,r,a,o,i,s=this;return Je(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(l){return l.detection}),this.input instanceof Yt?[4,_p(this.input,r)]:[3,3];case 2:return o=u.sent(),[3,5];case 3:return[4,wp(this.input,r)];case 4:o=u.sent(),u.label=5;case 5:return a=o,[4,Promise.all(a.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return i=u.sent(),a.forEach(function(l){return l instanceof Yt&&l.dispose()}),[2,n.map(function(l,c){return Ep(l,i[c])})]}})})},t.prototype.withFaceExpressions=function(){return new Np(this,this.input)},t.prototype.withAgeAndGender=function(){return new Lp(this,this.input)},t.prototype.withFaceDescriptors=function(){return new zp(this,this.input)},t})(_C),iq=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ye(this,void 0,void 0,function(){var n,r,a,o,i;return Je(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof Yt?[4,_p(this.input,[r])]:[3,3]):[2];case 2:return o=s.sent(),[3,5];case 3:return[4,wp(this.input,[r])];case 4:o=s.sent(),s.label=5;case 5:return a=o,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return i=s.sent(),a.forEach(function(u){return u instanceof Yt&&u.dispose()}),[2,Ep(n,i)]}})})},t.prototype.withFaceExpressions=function(){return new Op(this,this.input)},t.prototype.withAgeAndGender=function(){return new Vp(this,this.input)},t.prototype.withFaceDescriptor=function(){return new $p(this,this.input)},t})(_C),CC=(function(e){st(t,e);function t(n,r){r===void 0&&(r=new dd);var a=e.call(this)||this;return a.input=n,a.options=r,a}return t})(Ou),sq=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ye(this,void 0,void 0,function(){var n,r,a,o;return Je(this,function(i){switch(i.label){case 0:return n=this,r=n.input,a=n.options,a instanceof hC?[4,Gn.mtcnn.forward(r,a)]:[3,2];case 1:return[2,i.sent().map(function(s){return s.detection})];case 2:if(o=a instanceof mC?function(s){return Gn.tinyFaceDetector.locateFaces(s,a)}:a instanceof dd?function(s){return Gn.ssdMobilenetv1.locateFaces(s,a)}:a instanceof Ap?function(s){return Gn.tinyYolov2.locateFaces(s,a)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return Ye(n,void 0,void 0,function(){var a;return Je(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return a=o.sent(),[2,r(a.map(function(i){return yp({},i)}))]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new oq(this.runAndExtendWithFaceDetections(),this.input,n)},t.prototype.withFaceExpressions=function(){return new Pp(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new Bp(this.runAndExtendWithFaceDetections(),this.input)},t})(CC),uq=(function(e){st(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Ye(this,void 0,void 0,function(){var n,r;return Je(this,function(a){switch(a.label){case 0:return[4,new sq(this.input,this.options)];case 1:return n=a.sent(),r=n[0],n.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return Ye(n,void 0,void 0,function(){var a;return Je(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return a=o.sent(),[2,r(a?yp({},a):void 0)]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new iq(this.runAndExtendWithFaceDetection(),this.input,n)},t.prototype.withFaceExpressions=function(){return new Fp(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new qp(this.runAndExtendWithFaceDetection(),this.input)},t})(CC);function SC(e,t){return t===void 0&&(t=new dd),new uq(e,t)}function lq(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(a,o){return a-r[o]}).reduce(function(a,o){return a+Math.pow(o,2)},0))}var cq=(function(){function e(t,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,o=function(){return"person "+a++};this._labeledDescriptors=r.map(function(i){if(i instanceof qs)return i;if(i instanceof Float32Array)return new qs(o(),[i]);if(i.descriptor&&i.descriptor instanceof Float32Array)return new qs(o(),[i.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,n){return n.map(function(r){return lq(r,t)}).reduce(function(r,a){return r+a},0)/(n.length||1)},e.prototype.matchDescriptor=function(t){var n=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,o=r.label;return new fy(o,n.computeMeanDistance(t,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},e.prototype.findBestMatch=function(t){var n=this.matchDescriptor(t);return n.distance<this.distanceThreshold?n:new fy("unknown",n.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var n=t.labeledDescriptors.map(function(r){return qs.fromJSON(r)});return new e(n,t.distanceThreshold)},e})();async function kC(){const e="/models";await Promise.all([Gn.tinyFaceDetector.loadFromUri(e),Gn.ssdMobilenetv1.loadFromUri(e),Gn.faceLandmark68Net.loadFromUri(e),Gn.faceRecognitionNet.loadFromUri(e)])}const dq={class:"registro"},fq={class:"estado"},hq={class:"form"},vq=["disabled"],pq={class:"lista-personas"},mq={key:0},gq=["src"],yq={key:1},yy={__name:"Registro",setup(e){const t=Z(null),n=Z(null),r=Z(""),a=Z(""),o=Z("Cargando modelos..."),i=Z(!1),s=Z([]);let u=null,l=null;async function c(){try{const v=await navigator.mediaDevices.getUserMedia({video:!0});t.value.srcObject=v}catch(v){o.value="Error al acceder a la cmara",console.error(v)}}function d(){setInterval(async()=>{if(!t.value||!t.value.srcObject)return;const v=await SC(t.value).withFaceLandmarks().withFaceDescriptor();v?(i.value=!0,o.value=" Rostro detectado",u=Array.from(v.descriptor),n.value.getContext("2d").drawImage(t.value,0,0,300,225),l=n.value.toDataURL("image/png")):(o.value="Buscando rostro...",i.value=!1)},800)}function f(){s.value=JSON.parse(localStorage.getItem("personas")||"[]")}function h(){if(!r.value||!a.value||!u){alert("Faltan datos o no se detect el rostro");return}const v={nombre:r.value,id:a.value,descriptor:u,foto:l};s.value.push(v),localStorage.setItem("personas",JSON.stringify(s.value)),o.value=" Persona registrada",r.value="",a.value=""}return Nt(async()=>{await kC(),f(),await c(),d()}),(v,m)=>(Or(),Ia("div",dq,[m[4]||(m[4]=bt("h2",null,"Registrar Persona",-1)),bt("video",{ref_key:"video",ref:t,autoplay:"",playsinline:"",class:"video"},null,512),bt("canvas",{ref_key:"canvas",ref:n,width:"300",height:"225",style:{display:"none"}},null,512),bt("p",fq,Uo(o.value),1),bt("div",hq,[gr(bt("input",{"onUpdate:modelValue":m[0]||(m[0]=p=>r.value=p),placeholder:"Nombre"},null,512),[[Mm,r.value]]),gr(bt("input",{"onUpdate:modelValue":m[1]||(m[1]=p=>a.value=p),placeholder:"ID"},null,512),[[Mm,a.value]]),bt("button",{onClick:h,disabled:!i.value}," Guardar Registro ",8,vq)]),bt("div",pq,[m[3]||(m[3]=bt("h3",null," Personas Registradas",-1)),s.value.length>0?(Or(),Ia("table",mq,[m[2]||(m[2]=bt("thead",null,[bt("tr",null,[bt("th",null,"Foto"),bt("th",null,"Nombre"),bt("th",null,"ID")])],-1)),bt("tbody",null,[(Or(!0),Ia(Pr,null,M2(s.value,(p,y)=>(Or(),Ia("tr",{key:y},[bt("td",null,[bt("img",{src:p.foto,width:"50",style:{"border-radius":"50%"}},null,8,gq)]),bt("td",null,Uo(p.nombre),1),bt("td",null,Uo(p.id),1)]))),128))])])):(Or(),Ia("p",yq,"No hay personas registradas."))])]))}},bq={class:"asistencia"},xq={class:"estado"},wq={key:0},_q=["src"],Cq={__name:"Asistencia",setup(e){const t=Z(null),n=Z(null),r=Z("Cargando..."),a=Z(null);async function o(){const s=await navigator.mediaDevices.getUserMedia({video:!0});t.value.srcObject=s}async function i(){const s=JSON.parse(localStorage.getItem("personas")||"[]");if(s.length===0){r.value="No hay personas registradas.";return}const u=s.map(c=>new qs(c.nombre,[new Float32Array(c.descriptor)])),l=new cq(u);setInterval(async()=>{if(!t.value||!t.value.srcObject)return;const c=await SC(t.value,new mC).withFaceLandmarks().withFaceDescriptor();if(!c)return;const d=l.findBestMatch(c.descriptor);if(d.label==="unknown")return;const f=s.find(y=>y.nombre===d.label);n.value.getContext("2d").drawImage(t.value,0,0,300,225);const v=n.value.toDataURL("image/png");a.value={...f,foto:v};const m=JSON.parse(localStorage.getItem("asistencias")||"[]"),p=new Date().toLocaleDateString();m.some(y=>y.id===f.id&&y.fecha===p)||(m.push({nombre:f.nombre,id:f.id,fecha:p,hora:new Date().toLocaleTimeString(),foto:v}),localStorage.setItem("asistencias",JSON.stringify(m)))},1e3)}return Nt(async()=>{await kC(),await o(),i()}),(s,u)=>(Or(),Ia("div",bq,[u[1]||(u[1]=bt("h2",null," Asistencia Automtica",-1)),bt("video",{ref_key:"video",ref:t,autoplay:"",playsinline:"",class:"video"},null,512),bt("canvas",{ref_key:"canvas",ref:n,width:"300",height:"225",style:{display:"none"}},null,512),bt("p",xq,Uo(r.value),1),a.value?(Or(),Ia("div",wq,[bt("h3",null," "+Uo(a.value.nombre),1),bt("img",{src:a.value.foto,width:"120"},null,8,_q),u[0]||(u[0]=bt("p",null,"ASISTENCIA REGISTRADA",-1))])):cS("",!0)]))}},Sq=[{path:"/",name:"Home",component:qI},{path:"/camara",name:"CamaraTest",component:zI},{path:"/registro",name:"Registro",component:yy},{path:"/asistencia",name:"Asistencia",component:Cq},{path:"/registrar-persona",name:"RegistrarPersona",component:yy,props:e=>({nombreDetectado:e.query.nombre||"",imagenBase64:e.query.imagen||""})}],kq=FI({history:fI(),routes:Sq});Db(YS).use(RA).use(kq).mount("#app")});export default Eq();
